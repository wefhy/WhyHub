/*! For license information please see DustHub.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DustHub=e():t.DustHub=e()}(this,(()=>(()=>{var __webpack_modules__={748:(t,e,n)=>{"use strict";n.r(e),n.d(e,{cache:()=>At,css:()=>Ct,cx:()=>xt,flush:()=>wt,getRegisteredStyles:()=>Et,hydrate:()=>bt,injectGlobal:()=>Mt,keyframes:()=>Tt,merge:()=>St,sheet:()=>$t});var i=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(t){}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),r=Math.abs,a=String.fromCharCode,s=Object.assign;function o(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function u(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function f(t){return t.length}function _(t){return t.length}function d(t,e){return e.push(t),t}var p=1,m=1,g=0,v=0,y=0,w="";function b(t,e,n,i,r,a,s){return{value:t,root:e,parent:n,type:i,props:r,children:a,line:p,column:m,length:s,return:""}}function x(t,e){return s(b("",null,null,"",null,null,0),t,{length:-t.length},e)}function S(){return y=v>0?c(w,--v):0,m--,10===y&&(m=1,p--),y}function E(){return y=v<g?c(w,v++):0,m++,10===y&&(m=1,p++),y}function M(){return c(w,v)}function T(){return v}function C(t,e){return h(w,t,e)}function $(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A(t){return p=m=1,g=f(w=t),v=0,[]}function R(t){return w="",t}function O(t){return o(C(v-1,U(91===t?t+2:40===t?t+1:t)))}function I(t){for(;(y=M())&&y<33;)E();return $(t)>2||$(y)>3?"":" "}function k(t,e){for(;--e&&E()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return C(t,T()+(e<6&&32==M()&&32==E()))}function U(t){for(;E();)switch(y){case t:return v;case 34:case 39:34!==t&&39!==t&&U(y);break;case 40:41===t&&U(t);break;case 92:E()}return v}function P(t,e){for(;E()&&t+y!==57&&(t+y!==84||47!==M()););return"/*"+C(e,v-1)+"*"+a(47===t?t:E())}function D(t){for(;!$(M());)E();return C(t,v)}var N="-ms-",L="-moz-",z="-webkit-",F="comm",B="rule",H="decl",V="@keyframes";function q(t,e){for(var n="",i=_(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function j(t,e,n,i){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case H:return t.return=t.return||t.value;case F:return"";case V:return t.return=t.value+"{"+q(t.children,i)+"}";case B:t.value=t.props.join(",")}return f(n=q(t.children,i))?t.return=t.value+"{"+n+"}":""}function G(t){return R(W("",null,null,null,[""],t=A(t),0,[0],t))}function W(t,e,n,i,r,s,o,h,_){for(var p=0,m=0,g=o,v=0,y=0,w=0,b=1,x=1,C=1,$=0,A="",R=r,U=s,N=i,L=A;x;)switch(w=$,$=E()){case 40:if(108!=w&&58==c(L,g-1)){-1!=u(L+=l(O($),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:L+=O($);break;case 9:case 10:case 13:case 32:L+=I(w);break;case 92:L+=k(T()-1,7);continue;case 47:switch(M()){case 42:case 47:d(Y(P(E(),T()),e,n),_);break;default:L+="/"}break;case 123*b:h[p++]=f(L)*C;case 125*b:case 59:case 0:switch($){case 0:case 125:x=0;case 59+m:-1==C&&(L=l(L,/\f/g,"")),y>0&&f(L)-g&&d(y>32?K(L+";",i,n,g-1):K(l(L," ","")+";",i,n,g-2),_);break;case 59:L+=";";default:if(d(N=X(L,e,n,p,m,r,h,A,R=[],U=[],g),s),123===$)if(0===m)W(L,e,N,N,R,s,g,h,U);else switch(99===v&&110===c(L,3)?100:v){case 100:case 108:case 109:case 115:W(t,N,N,i&&d(X(t,N,N,0,0,r,h,A,r,R=[],g),U),r,U,g,h,i?R:U);break;default:W(L,N,N,N,[""],U,0,h,U)}}p=m=y=0,b=C=1,A=L="",g=o;break;case 58:g=1+f(L),y=w;default:if(b<1)if(123==$)--b;else if(125==$&&0==b++&&125==S())continue;switch(L+=a($),$*b){case 38:C=m>0?1:(L+="\f",-1);break;case 44:h[p++]=(f(L)-1)*C,C=1;break;case 64:45===M()&&(L+=O(E())),v=M(),m=g=f(A=L+=D(T())),$++;break;case 45:45===w&&2==f(L)&&(b=0)}}return s}function X(t,e,n,i,a,s,u,c,f,d,p){for(var m=a-1,g=0===a?s:[""],v=_(g),y=0,w=0,x=0;y<i;++y)for(var S=0,E=h(t,m+1,m=r(w=u[y])),M=t;S<v;++S)(M=o(w>0?g[S]+" "+E:l(E,/&\f/g,g[S])))&&(f[x++]=M);return b(t,e,n,0===a?B:c,f,d,p)}function Y(t,e,n){return b(t,e,n,F,a(y),h(t,2,-2),0)}function K(t,e,n,i){return b(t,e,n,H,h(t,0,i),h(t,i+1,-1),i)}var J=function(t,e,n){for(var i=0,r=0;i=r,r=M(),38===i&&12===r&&(e[n]=1),!$(r);)E();return C(t,v)},Z=new WeakMap,Q=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Z.get(n))&&!i){Z.set(t,!0);for(var r=[],s=function(t,e){return R(function(t,e){var n=-1,i=44;do{switch($(i)){case 0:38===i&&12===M()&&(e[n]=1),t[n]+=J(v-1,e,n);break;case 2:t[n]+=O(i);break;case 4:if(44===i){t[++n]=58===M()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=a(i)}}while(i=E());return t}(A(t),e))}(e,r),o=n.props,l=0,u=0;l<s.length;l++)for(var c=0;c<o.length;c++,u++)t.props[u]=r[l]?s[l].replace(/&\f/g,o[c]):o[c]+" "+s[l]}}},tt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function et(t,e){switch(function(t,e){return 45^c(t,0)?(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3):0}(t,e)){case 5103:return z+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return z+t+L+t+N+t+t;case 6828:case 4268:return z+t+N+t+t;case 6165:return z+t+N+"flex-"+t+t;case 5187:return z+t+l(t,/(\w+).+(:[^]+)/,z+"box-$1$2"+N+"flex-$1$2")+t;case 5443:return z+t+N+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return z+t+N+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return z+t+N+l(t,"shrink","negative")+t;case 5292:return z+t+N+l(t,"basis","preferred-size")+t;case 6060:return z+"box-"+l(t,"-grow","")+z+t+N+l(t,"grow","positive")+t;case 4554:return z+l(t,/([^-])(transform)/g,"$1"+z+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+N+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,z+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+L+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~u(t,"stretch")?et(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,f(t)-3-(~u(t,"!important")&&10))){case 107:return l(t,":",":"+z)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===c(t,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+N+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return z+t+N+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return z+t+N+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return z+t+N+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return z+t+N+t+t}return t}var nt=[function(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case H:t.return=et(t.value,t.length);break;case V:return q([x(t,{value:l(t.value,"@","@"+z)})],i);case B:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=/(::plac\w+|:read-\w+)/.exec(t))?t[0]:t}(e)){case":read-only":case":read-write":return q([x(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return q([x(t,{props:[l(e,/:(plac\w+)/,":"+z+"input-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,N+"input-$1")]})],i)}return""}))}}],it={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function rt(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var at=/[A-Z]|^ms/g,st=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ot=function(t){return 45===t.charCodeAt(1)},lt=function(t){return null!=t&&"boolean"!=typeof t},ut=rt((function(t){return ot(t)?t:t.replace(at,"-$&").toLowerCase()})),ct=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(st,(function(t,e,n){return ft={name:e,styles:n,next:ft},e}))}return 1===it[t]||ot(t)||"number"!=typeof e||0===e?e:e+"px"};function ht(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return ft={name:n.name,styles:n.styles,next:ft},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)ft={name:i.name,styles:i.styles,next:ft},i=i.next;return n.styles+";"}return function(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=ht(t,e,n[r])+";";else for(var a in n){var s=n[a];if("object"!=typeof s)null!=e&&void 0!==e[s]?i+=a+"{"+e[s]+"}":lt(s)&&(i+=ut(a)+":"+ct(a,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=e&&void 0!==e[s[0]]){var o=ht(t,e,s);switch(a){case"animation":case"animationName":i+=ut(a)+":"+o+";";break;default:i+=a+"{"+o+"}"}}else for(var l=0;l<s.length;l++)lt(s[l])&&(i+=ut(a)+":"+ct(a,s[l])+";")}return i}(t,e,n);case"function":if(void 0!==t){var r=ft,a=n(t);return ft=r,ht(t,e,a)}}if(null==e)return n;var s=e[n];return void 0!==s?s:n}var ft,_t=/label:\s*([^\s;\n{]+)\s*(;|$)/g,dt=function(t,e,n){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,r="";ft=void 0;var a=t[0];null==a||void 0===a.raw?(i=!1,r+=ht(n,e,a)):r+=a[0];for(var s=1;s<t.length;s++)r+=ht(n,e,t[s]),i&&(r+=a[s]);_t.lastIndex=0;for(var o,l="";null!==(o=_t.exec(r));)l+="-"+o[1];var u=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+l;return{name:u,styles:r,next:ft}};function pt(t,e,n){var i="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):i+=n+" "})),i}function mt(t,e){if(void 0===t.inserted[e.name])return t.insert("",e,t.sheet,!0)}function gt(t,e,n){var i=[],r=pt(t,i,n);return i.length<2?n:r+e(i)}var vt=function t(e){for(var n="",i=0;i<e.length;i++){var r=e[i];if(null!=r){var a=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))a=t(r);else for(var s in a="",r)r[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=r}a&&(n&&(n+=" "),n+=a)}}return n},yt=function(t){var e=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r,a,s=t.stylisPlugins||nt,o={},l=[];r=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)o[e[n]]=!0;l.push(t)}));var u,c,h,f,d=[j,(f=function(t){u.insert(t)},function(t){t.root||(t=t.return)&&f(t)})],p=(c=[Q,tt].concat(s,d),h=_(c),function(t,e,n,i){for(var r="",a=0;a<h;a++)r+=c[a](t,e,n,i)||"";return r});a=function(t,e,n,i){u=n,q(G(t?t+"{"+e.styles+"}":e.styles),p),i&&(m.inserted[e.name]=!0)};var m={key:e,sheet:new i({key:e,container:r,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:a};return m.sheet.hydrate(l),m}({key:"css"});e.sheet.speedy=function(t){this.isSpeedy=t},e.compat=!0;var n=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=dt(n,e.registered,void 0);return function(t,e,n){!function(t,e,n){var i=t.key+"-"+e.name;void 0===t.registered[i]&&(t.registered[i]=e.styles)}(t,e);var i=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var r=e;do{t.insert(e===r?"."+i:"",r,t.sheet,!0),r=r.next}while(void 0!==r)}}(e,r),e.key+"-"+r.name};return{css:n,cx:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gt(e.registered,n,vt(i))},injectGlobal:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=dt(n,e.registered);mt(e,r)},keyframes:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=dt(n,e.registered),a="animation-"+r.name;return mt(e,{name:r.name,styles:"@keyframes "+a+"{"+r.styles+"}"}),a},hydrate:function(t){t.forEach((function(t){e.inserted[t]=!0}))},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:pt.bind(null,e.registered),merge:gt.bind(null,e.registered,n)}}(),wt=yt.flush,bt=yt.hydrate,xt=yt.cx,St=yt.merge,Et=yt.getRegisteredStyles,Mt=yt.injectGlobal,Tt=yt.keyframes,Ct=yt.css,$t=yt.sheet,At=yt.cache},553:(t,e,n)=>{"use strict";const{Deflate:i,deflate:r,deflateRaw:a,gzip:s}=n(348),{Inflate:o,inflate:l,inflateRaw:u,ungzip:c}=n(8),h=n(938);t.exports.Deflate=i,t.exports.deflate=r,t.exports.deflateRaw=a,t.exports.gzip=s,t.exports.Inflate=o,t.exports.inflate=l,t.exports.inflateRaw=u,t.exports.ungzip=c,t.exports.constants=h},348:(t,e,n)=>{"use strict";const i=n(948),r=n(465),a=n(798),s=n(410),o=n(287),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:c,Z_FULL_FLUSH:h,Z_FINISH:f,Z_OK:_,Z_STREAM_END:d,Z_DEFAULT_COMPRESSION:p,Z_DEFAULT_STRATEGY:m,Z_DEFLATED:g}=n(938);function v(t){this.options=r.assign({level:p,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==_)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=i.deflateSetDictionary(this.strm,t),n!==_)throw new Error(s[n]);this._dict_set=!0}}function y(t,e){const n=new v(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}v.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let s,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?f:u,"string"==typeof t?n.input=a.string2buf(t):"[object ArrayBuffer]"===l.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===c||o===h)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=i.deflate(n,o),s===d)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=i.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===_;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},v.prototype.onData=function(t){this.chunks.push(t)},v.prototype.onEnd=function(t){t===_&&(this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=v,t.exports.deflate=y,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,y(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,y(t,e)},t.exports.constants=n(938)},8:(t,e,n)=>{"use strict";const i=n(839),r=n(465),a=n(798),s=n(410),o=n(287),l=n(773),u=Object.prototype.toString,{Z_NO_FLUSH:c,Z_FINISH:h,Z_OK:f,Z_STREAM_END:_,Z_NEED_DICT:d,Z_STREAM_ERROR:p,Z_DATA_ERROR:m,Z_MEM_ERROR:g}=n(938);function v(t){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let n=i.inflateInit2(this.strm,e.windowBits);if(n!==f)throw new Error(s[n]);if(this.header=new l,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=a.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=i.inflateSetDictionary(this.strm,e.dictionary),n!==f)))throw new Error(s[n])}function y(t,e){const n=new v(e);if(n.push(t),n.err)throw n.msg||s[n.err];return n.result}v.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let o,l,v;if(this.ended)return!1;for(l=e===~~e?e:!0===e?h:c,"[object ArrayBuffer]"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=i.inflate(n,l),o===d&&s&&(o=i.inflateSetDictionary(n,s),o===f?o=i.inflate(n,l):o===m&&(o=d));n.avail_in>0&&o===_&&n.state.wrap>0&&0!==t[n.next_in];)i.inflateReset(n),o=i.inflate(n,l);switch(o){case p:case m:case d:case g:return this.onEnd(o),this.ended=!0,!1}if(v=n.avail_out,n.next_out&&(0===n.avail_out||o===_))if("string"===this.options.to){let t=a.utf8border(n.output,n.next_out),e=n.next_out-t,i=a.buf2string(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==f||0!==v){if(o===_)return o=i.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},v.prototype.onData=function(t){this.chunks.push(t)},v.prototype.onEnd=function(t){t===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=v,t.exports.inflate=y,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,y(t,e)},t.exports.ungzip=y,t.exports.constants=n(938)},465:t=>{"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const n in i)e(i,n)&&(t[n]=i[n])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,i=0,r=t.length;e<r;e++){let r=t[e];n.set(r,i),i+=r.length}return n}},798:t=>{"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){e=!1}const n=new Uint8Array(256);for(let t=0;t<256;t++)n[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;n[254]=n[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,i,r,a,s=t.length,o=0;for(r=0;r<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),a=0,r=0;a<o;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},t.exports.buf2string=(t,i)=>{const r=i||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,i));let a,s;const o=new Array(2*r);for(s=0,a=0;a<r;){let e=t[a++];if(e<128){o[s++]=e;continue}let i=n[e];if(i>4)o[s++]=65533,a+=i-1;else{for(e&=2===i?31:3===i?15:7;i>1&&a<r;)e=e<<6|63&t[a++],i--;i>1?o[s++]=65533:e<65536?o[s++]=e:(e-=65536,o[s++]=55296|e>>10&1023,o[s++]=56320|1023&e)}}return((t,n)=>{if(n<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let i="";for(let e=0;e<n;e++)i+=String.fromCharCode(t[e]);return i})(o,s)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+n[t[i]]>e?i:e}},274:t=>{"use strict";t.exports=(t,e,n,i)=>{let r=65535&t|0,a=t>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+e[i++]|0,a=a+r|0}while(--s);r%=65521,a%=65521}return r|a<<16|0}},938:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},442:t=>{"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());t.exports=(t,n,i,r)=>{const a=e,s=r+i;t^=-1;for(let e=r;e<s;e++)t=t>>>8^a[255&(t^n[e])];return-1^t}},948:(t,e,n)=>{"use strict";const{_tr_init:i,_tr_stored_block:r,_tr_flush_block:a,_tr_tally:s,_tr_align:o}=n(212),l=n(274),u=n(442),c=n(410),{Z_NO_FLUSH:h,Z_PARTIAL_FLUSH:f,Z_FULL_FLUSH:_,Z_FINISH:d,Z_BLOCK:p,Z_OK:m,Z_STREAM_END:g,Z_STREAM_ERROR:v,Z_DATA_ERROR:y,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:b,Z_FILTERED:x,Z_HUFFMAN_ONLY:S,Z_RLE:E,Z_FIXED:M,Z_DEFAULT_STRATEGY:T,Z_UNKNOWN:C,Z_DEFLATED:$}=n(938),A=258,R=262,O=42,I=113,k=666,U=(t,e)=>(t.msg=c[e],e),P=t=>2*t-(t>4?9:0),D=t=>{let e=t.length;for(;--e>=0;)t[e]=0},N=t=>{let e,n,i,r=t.w_size;e=t.hash_size,i=e;do{n=t.head[--i],t.head[i]=n>=r?n-r:0}while(--e);e=r,i=e;do{n=t.prev[--i],t.prev[i]=n>=r?n-r:0}while(--e)};let L=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const z=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},F=(t,e)=>{a(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,z(t.strm)},B=(t,e)=>{t.pending_buf[t.pending++]=e},H=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},V=(t,e,n,i)=>{let r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),n),1===t.state.wrap?t.adler=l(t.adler,e,r,n):2===t.state.wrap&&(t.adler=u(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)},q=(t,e)=>{let n,i,r=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-R?t.strstart-(t.w_size-R):0,u=t.window,c=t.w_mask,h=t.prev,f=t.strstart+A;let _=u[a+s-1],d=u[a+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(n=e,u[n+s]===d&&u[n+s-1]===_&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<f);if(i=A-(f-a),a=f-A,i>s){if(t.match_start=e,s=i,i>=o)break;_=u[a+s-1],d=u[a+s]}}}while((e=h[e&c])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},j=t=>{const e=t.w_size;let n,i,r;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-R)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),N(t),i+=e),0===t.strm.avail_in)break;if(n=V(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=L(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=L(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<R&&0!==t.strm.avail_in)},G=(t,e)=>{let n,i,a,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,l=t.strm.avail_in;do{if(n=65535,a=t.bi_valid+42>>3,t.strm.avail_out<a)break;if(a=t.strm.avail_out-a,i=t.strstart-t.block_start,n>i+t.strm.avail_in&&(n=i+t.strm.avail_in),n>a&&(n=a),n<s&&(0===n&&e!==d||e===h||n!==i+t.strm.avail_in))break;o=e===d&&n===i+t.strm.avail_in?1:0,r(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,z(t.strm),i&&(i>n&&(i=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,n-=i),n&&(V(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===o);return l-=t.strm.avail_in,l&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==h&&e!==d&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(a=t.window_size-t.strstart,t.strm.avail_in>a&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,a+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),a>t.strm.avail_in&&(a=t.strm.avail_in),a&&(V(t.strm,t.window,t.strstart,a),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.high_water<t.strstart&&(t.high_water=t.strstart),a=t.bi_valid+42>>3,a=t.pending_buf_size-a>65535?65535:t.pending_buf_size-a,s=a>t.w_size?t.w_size:a,i=t.strstart-t.block_start,(i>=s||(i||e===d)&&e!==h&&0===t.strm.avail_in&&i<=a)&&(n=i>a?a:i,o=e===d&&0===t.strm.avail_in&&n===i?1:0,r(t,t.block_start,n,o),t.block_start+=n,z(t.strm)),o?3:1)},W=(t,e)=>{let n,i;for(;;){if(t.lookahead<R){if(j(t),t.lookahead<R&&e===h)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-R&&(t.match_length=q(t,n)),t.match_length>=3)if(i=s(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=L(t,t.ins_h,t.window[t.strstart+1]);else i=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(F(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===d?(F(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(F(t,!1),0===t.strm.avail_out)?1:2},X=(t,e)=>{let n,i,r;for(;;){if(t.lookahead<R){if(j(t),t.lookahead<R&&e===h)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-R&&(t.match_length=q(t,n),t.match_length<=5&&(t.strategy===x||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=s(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=L(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(F(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=s(t,0,t.window[t.strstart-1]),i&&F(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=s(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===d?(F(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(F(t,!1),0===t.strm.avail_out)?1:2};function Y(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}const K=[new Y(0,0,0,0,G),new Y(4,4,8,4,W),new Y(4,5,16,8,W),new Y(4,6,32,32,W),new Y(4,4,16,16,X),new Y(8,16,32,32,X),new Y(8,16,128,128,X),new Y(8,32,128,256,X),new Y(32,128,258,1024,X),new Y(32,258,258,4096,X)];function J(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),D(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Z=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==O&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==I&&e.status!==k?1:0},Q=t=>{if(Z(t))return U(t,v);t.total_in=t.total_out=0,t.data_type=C;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?O:I,t.adler=2===e.wrap?0:1,e.last_flush=-2,i(e),m},tt=t=>{const e=Q(t);var n;return e===m&&((n=t.state).window_size=2*n.w_size,D(n.head),n.max_lazy_match=K[n.level].max_lazy,n.good_match=K[n.level].good_length,n.nice_match=K[n.level].nice_length,n.max_chain_length=K[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},et=(t,e,n,i,r,a)=>{if(!t)return v;let s=1;if(e===b&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==$||i<8||i>15||e<0||e>9||a<0||a>M||8===i&&1!==s)return U(t,v);8===i&&(i=9);const o=new J;return t.state=o,o.strm=t,o.status=O,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=a,o.method=n,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,$,15,8,T),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=Q,t.exports.deflateSetHeader=(t,e)=>Z(t)||2!==t.state.wrap?v:(t.state.gzhead=e,m),t.exports.deflate=(t,e)=>{if(Z(t)||e>p||e<0)return t?U(t,v):v;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===k&&e!==d)return U(t,0===t.avail_out?w:v);const i=n.last_flush;if(n.last_flush=e,0!==n.pending){if(z(t),0===t.avail_out)return n.last_flush=-1,m}else if(0===t.avail_in&&P(e)<=P(i)&&e!==d)return U(t,w);if(n.status===k&&0!==t.avail_in)return U(t,w);if(n.status===O&&0===n.wrap&&(n.status=I),n.status===O){let e=$+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=S||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=i<<6,0!==n.strstart&&(e|=32),e+=31-e%31,H(n,e),0!==n.strstart&&(H(n,t.adler>>>16),H(n,65535&t.adler)),t.adler=1,n.status=I,z(t),0!==n.pending)return n.last_flush=-1,m}if(57===n.status)if(t.adler=0,B(n,31),B(n,139),B(n,8),n.gzhead)B(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),B(n,255&n.gzhead.time),B(n,n.gzhead.time>>8&255),B(n,n.gzhead.time>>16&255),B(n,n.gzhead.time>>24&255),B(n,9===n.level?2:n.strategy>=S||n.level<2?4:0),B(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(B(n,255&n.gzhead.extra.length),B(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=u(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(B(n,0),B(n,0),B(n,0),B(n,0),B(n,0),B(n,9===n.level?2:n.strategy>=S||n.level<2?4:0),B(n,3),n.status=I,z(t),0!==n.pending)return n.last_flush=-1,m;if(69===n.status){if(n.gzhead.extra){let e=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=u(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=r,z(t),0!==n.pending)return n.last_flush=-1,m;e=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>e&&(t.adler=u(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i)),z(t),0!==n.pending)return n.last_flush=-1,m;i=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,B(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i)),z(t),0!==n.pending)return n.last_flush=-1,m;i=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,B(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(z(t),0!==n.pending))return n.last_flush=-1,m;B(n,255&t.adler),B(n,t.adler>>8&255),t.adler=0}if(n.status=I,z(t),0!==n.pending)return n.last_flush=-1,m}if(0!==t.avail_in||0!==n.lookahead||e!==h&&n.status!==k){let i=0===n.level?G(n,e):n.strategy===S?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===h)return 1;break}if(t.match_length=0,n=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(F(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===d?(F(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(F(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===E?((t,e)=>{let n,i,r,a;const o=t.window;for(;;){if(t.lookahead<=A){if(j(t),t.lookahead<=A&&e===h)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){a=t.strstart+A;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<a);t.match_length=A-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=s(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(F(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===d?(F(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(F(t,!1),0===t.strm.avail_out)?1:2})(n,e):K[n.level].func(n,e);if(3!==i&&4!==i||(n.status=k),1===i||3===i)return 0===t.avail_out&&(n.last_flush=-1),m;if(2===i&&(e===f?o(n):e!==p&&(r(n,0,0,!1),e===_&&(D(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),z(t),0===t.avail_out))return n.last_flush=-1,m}return e!==d?m:n.wrap<=0?g:(2===n.wrap?(B(n,255&t.adler),B(n,t.adler>>8&255),B(n,t.adler>>16&255),B(n,t.adler>>24&255),B(n,255&t.total_in),B(n,t.total_in>>8&255),B(n,t.total_in>>16&255),B(n,t.total_in>>24&255)):(H(n,t.adler>>>16),H(n,65535&t.adler)),z(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?m:g)},t.exports.deflateEnd=t=>{if(Z(t))return v;const e=t.state.status;return t.state=null,e===I?U(t,y):m},t.exports.deflateSetDictionary=(t,e)=>{let n=e.length;if(Z(t))return v;const i=t.state,r=i.wrap;if(2===r||1===r&&i.status!==O||i.lookahead)return v;if(1===r&&(t.adler=l(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===r&&(D(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(n-i.w_size,n),0),e=t,n=i.w_size}const a=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,j(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=L(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,j(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=s,t.input=o,t.avail_in=a,i.wrap=r,m},t.exports.deflateInfo="pako deflate (from Nodeca project)"},773:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},861:t=>{"use strict";const e=16209;t.exports=function(t,n){let i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T;const C=t.state;i=t.next_in,M=t.input,r=i+(t.avail_in-5),a=t.next_out,T=t.output,s=a-(n-t.avail_out),o=a+(t.avail_out-257),l=C.dmax,u=C.wsize,c=C.whave,h=C.wnext,f=C.window,_=C.hold,d=C.bits,p=C.lencode,m=C.distcode,g=(1<<C.lenbits)-1,v=(1<<C.distbits)-1;t:do{d<15&&(_+=M[i++]<<d,d+=8,_+=M[i++]<<d,d+=8),y=p[_&g];e:for(;;){if(w=y>>>24,_>>>=w,d-=w,w=y>>>16&255,0===w)T[a++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=p[(65535&y)+(_&(1<<w)-1)];continue e}if(32&w){C.mode=16191;break t}t.msg="invalid literal/length code",C.mode=e;break t}b=65535&y,w&=15,w&&(d<w&&(_+=M[i++]<<d,d+=8),b+=_&(1<<w)-1,_>>>=w,d-=w),d<15&&(_+=M[i++]<<d,d+=8,_+=M[i++]<<d,d+=8),y=m[_&v];n:for(;;){if(w=y>>>24,_>>>=w,d-=w,w=y>>>16&255,!(16&w)){if(0==(64&w)){y=m[(65535&y)+(_&(1<<w)-1)];continue n}t.msg="invalid distance code",C.mode=e;break t}if(x=65535&y,w&=15,d<w&&(_+=M[i++]<<d,d+=8,d<w&&(_+=M[i++]<<d,d+=8)),x+=_&(1<<w)-1,x>l){t.msg="invalid distance too far back",C.mode=e;break t}if(_>>>=w,d-=w,w=a-s,x>w){if(w=x-w,w>c&&C.sane){t.msg="invalid distance too far back",C.mode=e;break t}if(S=0,E=f,0===h){if(S+=u-w,w<b){b-=w;do{T[a++]=f[S++]}while(--w);S=a-x,E=T}}else if(h<w){if(S+=u+h-w,w-=h,w<b){b-=w;do{T[a++]=f[S++]}while(--w);if(S=0,h<b){w=h,b-=w;do{T[a++]=f[S++]}while(--w);S=a-x,E=T}}}else if(S+=h-w,w<b){b-=w;do{T[a++]=f[S++]}while(--w);S=a-x,E=T}for(;b>2;)T[a++]=E[S++],T[a++]=E[S++],T[a++]=E[S++],b-=3;b&&(T[a++]=E[S++],b>1&&(T[a++]=E[S++]))}else{S=a-x;do{T[a++]=T[S++],T[a++]=T[S++],T[a++]=T[S++],b-=3}while(b>2);b&&(T[a++]=T[S++],b>1&&(T[a++]=T[S++]))}break}}break}}while(i<r&&a<o);b=d>>3,i-=b,d-=b<<3,_&=(1<<d)-1,t.next_in=i,t.next_out=a,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=a<o?o-a+257:257-(a-o),C.hold=_,C.bits=d}},839:(t,e,n)=>{"use strict";const i=n(274),r=n(442),a=n(861),s=n(86),{Z_FINISH:o,Z_BLOCK:l,Z_TREES:u,Z_OK:c,Z_STREAM_END:h,Z_NEED_DICT:f,Z_STREAM_ERROR:_,Z_DATA_ERROR:d,Z_MEM_ERROR:p,Z_BUF_ERROR:m,Z_DEFLATED:g}=n(938),v=16180,y=16190,w=16191,b=16192,x=16194,S=16199,E=16200,M=16206,T=16209,C=16210,$=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function A(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const R=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<v||e.mode>16211?1:0},O=t=>{if(R(t))return _;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=v,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,c},I=t=>{if(R(t))return _;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,O(t)},k=(t,e)=>{let n;if(R(t))return _;const i=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,I(t))},U=(t,e)=>{if(!t)return _;const n=new A;t.state=n,n.strm=t,n.window=null,n.mode=v;const i=k(t,e);return i!==c&&(t.state=null),i};let P,D,N=!0;const L=t=>{if(N){P=new Int32Array(512),D=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,P,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,D,0,t.work,{bits:5}),N=!1}t.lencode=P,t.lenbits=9,t.distcode=D,t.distbits=5},z=(t,e,n,i)=>{let r;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(e.subarray(n-i,n-i+r),a.wnext),(i-=r)?(a.window.set(e.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};t.exports.inflateReset=I,t.exports.inflateReset2=k,t.exports.inflateResetKeep=O,t.exports.inflateInit=t=>U(t,15),t.exports.inflateInit2=U,t.exports.inflate=(t,e)=>{let n,A,O,I,k,U,P,D,N,F,B,H,V,q,j,G,W,X,Y,K,J,Z,Q=0;const tt=new Uint8Array(4);let et,nt;const it=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(R(t)||!t.output||!t.input&&0!==t.avail_in)return _;n=t.state,n.mode===w&&(n.mode=b),k=t.next_out,O=t.output,P=t.avail_out,I=t.next_in,A=t.input,U=t.avail_in,D=n.hold,N=n.bits,F=U,B=P,Z=c;t:for(;;)switch(n.mode){case v:if(0===n.wrap){n.mode=b;break}for(;N<16;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(2&n.wrap&&35615===D){0===n.wbits&&(n.wbits=15),n.check=0,tt[0]=255&D,tt[1]=D>>>8&255,n.check=r(n.check,tt,2,0),D=0,N=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&D)<<8)+(D>>8))%31){t.msg="incorrect header check",n.mode=T;break}if((15&D)!==g){t.msg="unknown compression method",n.mode=T;break}if(D>>>=4,N-=4,J=8+(15&D),0===n.wbits&&(n.wbits=J),J>15||J>n.wbits){t.msg="invalid window size",n.mode=T;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&D?16189:w,D=0,N=0;break;case 16181:for(;N<16;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(n.flags=D,(255&n.flags)!==g){t.msg="unknown compression method",n.mode=T;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=T;break}n.head&&(n.head.text=D>>8&1),512&n.flags&&4&n.wrap&&(tt[0]=255&D,tt[1]=D>>>8&255,n.check=r(n.check,tt,2,0)),D=0,N=0,n.mode=16182;case 16182:for(;N<32;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}n.head&&(n.head.time=D),512&n.flags&&4&n.wrap&&(tt[0]=255&D,tt[1]=D>>>8&255,tt[2]=D>>>16&255,tt[3]=D>>>24&255,n.check=r(n.check,tt,4,0)),D=0,N=0,n.mode=16183;case 16183:for(;N<16;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}n.head&&(n.head.xflags=255&D,n.head.os=D>>8),512&n.flags&&4&n.wrap&&(tt[0]=255&D,tt[1]=D>>>8&255,n.check=r(n.check,tt,2,0)),D=0,N=0,n.mode=16184;case 16184:if(1024&n.flags){for(;N<16;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}n.length=D,n.head&&(n.head.extra_len=D),512&n.flags&&4&n.wrap&&(tt[0]=255&D,tt[1]=D>>>8&255,n.check=r(n.check,tt,2,0)),D=0,N=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(H=n.length,H>U&&(H=U),H&&(n.head&&(J=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(A.subarray(I,I+H),J)),512&n.flags&&4&n.wrap&&(n.check=r(n.check,A,H,I)),U-=H,I+=H,n.length-=H),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===U)break t;H=0;do{J=A[I+H++],n.head&&J&&n.length<65536&&(n.head.name+=String.fromCharCode(J))}while(J&&H<U);if(512&n.flags&&4&n.wrap&&(n.check=r(n.check,A,H,I)),U-=H,I+=H,J)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===U)break t;H=0;do{J=A[I+H++],n.head&&J&&n.length<65536&&(n.head.comment+=String.fromCharCode(J))}while(J&&H<U);if(512&n.flags&&4&n.wrap&&(n.check=r(n.check,A,H,I)),U-=H,I+=H,J)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;N<16;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(4&n.wrap&&D!==(65535&n.check)){t.msg="header crc mismatch",n.mode=T;break}D=0,N=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=w;break;case 16189:for(;N<32;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}t.adler=n.check=$(D),D=0,N=0,n.mode=y;case y:if(0===n.havedict)return t.next_out=k,t.avail_out=P,t.next_in=I,t.avail_in=U,n.hold=D,n.bits=N,f;t.adler=n.check=1,n.mode=w;case w:if(e===l||e===u)break t;case b:if(n.last){D>>>=7&N,N-=7&N,n.mode=M;break}for(;N<3;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}switch(n.last=1&D,D>>>=1,N-=1,3&D){case 0:n.mode=16193;break;case 1:if(L(n),n.mode=S,e===u){D>>>=2,N-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=T}D>>>=2,N-=2;break;case 16193:for(D>>>=7&N,N-=7&N;N<32;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if((65535&D)!=(D>>>16^65535)){t.msg="invalid stored block lengths",n.mode=T;break}if(n.length=65535&D,D=0,N=0,n.mode=x,e===u)break t;case x:n.mode=16195;case 16195:if(H=n.length,H){if(H>U&&(H=U),H>P&&(H=P),0===H)break t;O.set(A.subarray(I,I+H),k),U-=H,I+=H,P-=H,k+=H,n.length-=H;break}n.mode=w;break;case 16196:for(;N<14;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(n.nlen=257+(31&D),D>>>=5,N-=5,n.ndist=1+(31&D),D>>>=5,N-=5,n.ncode=4+(15&D),D>>>=4,N-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=T;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;N<3;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}n.lens[it[n.have++]]=7&D,D>>>=3,N-=3}for(;n.have<19;)n.lens[it[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,et={bits:n.lenbits},Z=s(0,n.lens,0,19,n.lencode,0,n.work,et),n.lenbits=et.bits,Z){t.msg="invalid code lengths set",n.mode=T;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;Q=n.lencode[D&(1<<n.lenbits)-1],j=Q>>>24,G=Q>>>16&255,W=65535&Q,!(j<=N);){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(W<16)D>>>=j,N-=j,n.lens[n.have++]=W;else{if(16===W){for(nt=j+2;N<nt;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(D>>>=j,N-=j,0===n.have){t.msg="invalid bit length repeat",n.mode=T;break}J=n.lens[n.have-1],H=3+(3&D),D>>>=2,N-=2}else if(17===W){for(nt=j+3;N<nt;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}D>>>=j,N-=j,J=0,H=3+(7&D),D>>>=3,N-=3}else{for(nt=j+7;N<nt;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}D>>>=j,N-=j,J=0,H=11+(127&D),D>>>=7,N-=7}if(n.have+H>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=T;break}for(;H--;)n.lens[n.have++]=J}}if(n.mode===T)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=T;break}if(n.lenbits=9,et={bits:n.lenbits},Z=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,et),n.lenbits=et.bits,Z){t.msg="invalid literal/lengths set",n.mode=T;break}if(n.distbits=6,n.distcode=n.distdyn,et={bits:n.distbits},Z=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,et),n.distbits=et.bits,Z){t.msg="invalid distances set",n.mode=T;break}if(n.mode=S,e===u)break t;case S:n.mode=E;case E:if(U>=6&&P>=258){t.next_out=k,t.avail_out=P,t.next_in=I,t.avail_in=U,n.hold=D,n.bits=N,a(t,B),k=t.next_out,O=t.output,P=t.avail_out,I=t.next_in,A=t.input,U=t.avail_in,D=n.hold,N=n.bits,n.mode===w&&(n.back=-1);break}for(n.back=0;Q=n.lencode[D&(1<<n.lenbits)-1],j=Q>>>24,G=Q>>>16&255,W=65535&Q,!(j<=N);){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(G&&0==(240&G)){for(X=j,Y=G,K=W;Q=n.lencode[K+((D&(1<<X+Y)-1)>>X)],j=Q>>>24,G=Q>>>16&255,W=65535&Q,!(X+j<=N);){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}D>>>=X,N-=X,n.back+=X}if(D>>>=j,N-=j,n.back+=j,n.length=W,0===G){n.mode=16205;break}if(32&G){n.back=-1,n.mode=w;break}if(64&G){t.msg="invalid literal/length code",n.mode=T;break}n.extra=15&G,n.mode=16201;case 16201:if(n.extra){for(nt=n.extra;N<nt;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}n.length+=D&(1<<n.extra)-1,D>>>=n.extra,N-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;Q=n.distcode[D&(1<<n.distbits)-1],j=Q>>>24,G=Q>>>16&255,W=65535&Q,!(j<=N);){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(0==(240&G)){for(X=j,Y=G,K=W;Q=n.distcode[K+((D&(1<<X+Y)-1)>>X)],j=Q>>>24,G=Q>>>16&255,W=65535&Q,!(X+j<=N);){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}D>>>=X,N-=X,n.back+=X}if(D>>>=j,N-=j,n.back+=j,64&G){t.msg="invalid distance code",n.mode=T;break}n.offset=W,n.extra=15&G,n.mode=16203;case 16203:if(n.extra){for(nt=n.extra;N<nt;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}n.offset+=D&(1<<n.extra)-1,D>>>=n.extra,N-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=T;break}n.mode=16204;case 16204:if(0===P)break t;if(H=B-P,n.offset>H){if(H=n.offset-H,H>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=T;break}H>n.wnext?(H-=n.wnext,V=n.wsize-H):V=n.wnext-H,H>n.length&&(H=n.length),q=n.window}else q=O,V=k-n.offset,H=n.length;H>P&&(H=P),P-=H,n.length-=H;do{O[k++]=q[V++]}while(--H);0===n.length&&(n.mode=E);break;case 16205:if(0===P)break t;O[k++]=n.length,P--,n.mode=E;break;case M:if(n.wrap){for(;N<32;){if(0===U)break t;U--,D|=A[I++]<<N,N+=8}if(B-=P,t.total_out+=B,n.total+=B,4&n.wrap&&B&&(t.adler=n.check=n.flags?r(n.check,O,B,k-B):i(n.check,O,B,k-B)),B=P,4&n.wrap&&(n.flags?D:$(D))!==n.check){t.msg="incorrect data check",n.mode=T;break}D=0,N=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;N<32;){if(0===U)break t;U--,D+=A[I++]<<N,N+=8}if(4&n.wrap&&D!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=T;break}D=0,N=0}n.mode=16208;case 16208:Z=h;break t;case T:Z=d;break t;case C:return p;default:return _}return t.next_out=k,t.avail_out=P,t.next_in=I,t.avail_in=U,n.hold=D,n.bits=N,(n.wsize||B!==t.avail_out&&n.mode<T&&(n.mode<M||e!==o))&&z(t,t.output,t.next_out,B-t.avail_out)?(n.mode=C,p):(F-=t.avail_in,B-=t.avail_out,t.total_in+=F,t.total_out+=B,n.total+=B,4&n.wrap&&B&&(t.adler=n.check=n.flags?r(n.check,O,B,t.next_out-B):i(n.check,O,B,t.next_out-B)),t.data_type=n.bits+(n.last?64:0)+(n.mode===w?128:0)+(n.mode===S||n.mode===x?256:0),(0===F&&0===B||e===o)&&Z===c&&(Z=m),Z)},t.exports.inflateEnd=t=>{if(R(t))return _;let e=t.state;return e.window&&(e.window=null),t.state=null,c},t.exports.inflateGetHeader=(t,e)=>{if(R(t))return _;const n=t.state;return 0==(2&n.wrap)?_:(n.head=e,e.done=!1,c)},t.exports.inflateSetDictionary=(t,e)=>{const n=e.length;let r,a,s;return R(t)?_:(r=t.state,0!==r.wrap&&r.mode!==y?_:r.mode===y&&(a=1,a=i(a,e,n,0),a!==r.check)?d:(s=z(t,e,n,n),s?(r.mode=C,p):(r.havedict=1,c)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},86:t=>{"use strict";const e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),r=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,a,s,o,l,u,c,h)=>{const f=h.bits;let _,d,p,m,g,v,y=0,w=0,b=0,x=0,S=0,E=0,M=0,T=0,C=0,$=0,A=null;const R=new Uint16Array(16),O=new Uint16Array(16);let I,k,U,P=null;for(y=0;y<=15;y++)R[y]=0;for(w=0;w<o;w++)R[a[s+w]]++;for(S=f,x=15;x>=1&&0===R[x];x--);if(S>x&&(S=x),0===x)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(b=1;b<x&&0===R[b];b++);for(S<b&&(S=b),T=1,y=1;y<=15;y++)if(T<<=1,T-=R[y],T<0)return-1;if(T>0&&(0===t||1!==x))return-1;for(O[1]=0,y=1;y<15;y++)O[y+1]=O[y]+R[y];for(w=0;w<o;w++)0!==a[s+w]&&(c[O[a[s+w]]++]=w);if(0===t?(A=P=c,v=20):1===t?(A=e,P=n,v=257):(A=i,P=r,v=0),$=0,w=0,y=b,g=u,E=S,M=0,p=-1,C=1<<S,m=C-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){I=y-M,c[w]+1<v?(k=0,U=c[w]):c[w]>=v?(k=P[c[w]-v],U=A[c[w]-v]):(k=96,U=0),_=1<<y-M,d=1<<E,b=d;do{d-=_,l[g+($>>M)+d]=I<<24|k<<16|U|0}while(0!==d);for(_=1<<y-1;$&_;)_>>=1;if(0!==_?($&=_-1,$+=_):$=0,w++,0==--R[y]){if(y===x)break;y=a[s+c[w]]}if(y>S&&($&m)!==p){for(0===M&&(M=S),g+=b,E=y-M,T=1<<E;E+M<x&&(T-=R[E+M],!(T<=0));)E++,T<<=1;if(C+=1<<E,1===t&&C>852||2===t&&C>592)return 1;p=$&m,l[p]=S<<24|E<<16|g-u|0}}return 0!==$&&(l[g+$]=y-M<<24|64<<16|0),h.bits=S,0}},410:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},212:t=>{"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),i=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),a=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);e(s);const o=new Array(60);e(o);const l=new Array(512);e(l);const u=new Array(256);e(u);const c=new Array(29);e(c);const h=new Array(30);function f(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}let _,d,p;function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(h);const g=t=>t<256?l[t]:l[256+(t>>>7)],v=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},y=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,v(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},w=(t,e,n)=>{y(t,n[2*e],n[2*e+1])},b=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},x=(t,e,n)=>{const i=new Array(16);let r,a,s=0;for(r=1;r<=15;r++)s=s+n[r-1]<<1,i[r]=s;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=b(i[e]++,e))}},S=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},E=t=>{t.bi_valid>8?v(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},M=(t,e,n,i)=>{const r=2*e,a=2*n;return t[r]<t[a]||t[r]===t[a]&&i[e]<=i[n]},T=(t,e,n)=>{const i=t.heap[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&M(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!M(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i},C=(t,e,r)=>{let a,s,o,l,f=0;if(0!==t.sym_next)do{a=255&t.pending_buf[t.sym_buf+f++],a+=(255&t.pending_buf[t.sym_buf+f++])<<8,s=t.pending_buf[t.sym_buf+f++],0===a?w(t,s,e):(o=u[s],w(t,o+256+1,e),l=n[o],0!==l&&(s-=c[o],y(t,s,l)),a--,o=g(a),w(t,o,r),l=i[o],0!==l&&(a-=h[o],y(t,a,l)))}while(f<t.sym_next);w(t,256,e)},$=(t,e)=>{const n=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,o,l,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<a;s++)0!==n[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):n[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=i[2*l+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)T(t,n,s);l=a;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,n,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,n[2*l]=n[2*s]+n[2*o],t.depth[l]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,n[2*s+1]=n[2*o+1]=l,t.heap[1]=l++,T(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,c,h,f,_,d,p=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)c=t.heap[u],f=n[2*n[2*c+1]+1]+1,f>l&&(f=l,p++),n[2*c+1]=f,c>i||(t.bl_count[f]++,_=0,c>=o&&(_=s[c-o]),d=n[2*c],t.opt_len+=d*(f+_),a&&(t.static_len+=d*(r[2*c+1]+_)));if(0!==p){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,p-=2}while(p>0);for(f=l;0!==f;f--)for(c=t.bl_count[f];0!==c;)h=t.heap[--u],h>i||(n[2*h+1]!==f&&(t.opt_len+=(f-n[2*h+1])*n[2*h],n[2*h+1]=f),c--)}})(t,e),x(n,u,t.bl_count)},A=(t,e,n)=>{let i,r,a=-1,s=e[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++o<l&&r===s||(o<u?t.bl_tree[2*r]+=o:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))},R=(t,e,n)=>{let i,r,a=-1,s=e[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++o<l&&r===s)){if(o<u)do{w(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(w(t,r,t.bl_tree),o--),w(t,16,t.bl_tree),y(t,o-3,2)):o<=10?(w(t,17,t.bl_tree),y(t,o-3,3)):(w(t,18,t.bl_tree),y(t,o-11,7));o=0,a=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4)}};let O=!1;const I=(t,e,n,i)=>{y(t,0+(i?1:0),3),E(t),v(t,n),v(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};t.exports._tr_init=t=>{O||((()=>{let t,e,a,m,g;const v=new Array(16);for(a=0,m=0;m<28;m++)for(c[m]=a,t=0;t<1<<n[m];t++)u[a++]=m;for(u[a-1]=m,g=0,m=0;m<16;m++)for(h[m]=g,t=0;t<1<<i[m];t++)l[g++]=m;for(g>>=7;m<30;m++)for(h[m]=g<<7,t=0;t<1<<i[m]-7;t++)l[256+g++]=m;for(e=0;e<=15;e++)v[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,v[8]++;for(;t<=255;)s[2*t+1]=9,t++,v[9]++;for(;t<=279;)s[2*t+1]=7,t++,v[7]++;for(;t<=287;)s[2*t+1]=8,t++,v[8]++;for(x(s,287,v),t=0;t<30;t++)o[2*t+1]=5,o[2*t]=b(t,5);_=new f(s,n,257,286,15),d=new f(o,i,0,30,15),p=new f(new Array(0),r,0,19,7)})(),O=!0),t.l_desc=new m(t.dyn_ltree,_),t.d_desc=new m(t.dyn_dtree,d),t.bl_desc=new m(t.bl_tree,p),t.bi_buf=0,t.bi_valid=0,S(t)},t.exports._tr_stored_block=I,t.exports._tr_flush_block=(t,e,n,i)=>{let r,l,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),$(t,t.l_desc),$(t,t.d_desc),u=(t=>{let e;for(A(t,t.dyn_ltree,t.l_desc.max_code),A(t,t.dyn_dtree,t.d_desc.max_code),$(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*a[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=r&&(r=l)):r=l=n+5,n+4<=r&&-1!==e?I(t,e,n,i):4===t.strategy||l===r?(y(t,2+(i?1:0),3),C(t,s,o)):(y(t,4+(i?1:0),3),((t,e,n,i)=>{let r;for(y(t,e-257,5),y(t,n-1,5),y(t,i-4,4),r=0;r<i;r++)y(t,t.bl_tree[2*a[r]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),C(t,t.dyn_ltree,t.dyn_dtree)),S(t),i&&E(t)},t.exports._tr_tally=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(u[n]+256+1)]++,t.dyn_dtree[2*g(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{y(t,2,3),w(t,256,s),(t=>{16===t.bi_valid?(v(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},287:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},936:(t,e,n)=>{"use strict";var i=n(204),r=n(489);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(o[t]=e,t=0;t<e.length;t++)s.add(e[t])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},d={};function p(t,e,n,i,r,a,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new p(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new p(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new p(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new p(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new p(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new p(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new p(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new p(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new p(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function y(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null==e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(d,t)||!h.call(_,t)&&(f.test(t)?d[t]=!0:(_[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,v);m[e]=new p(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,v);m[e]=new p(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,v);m[e]=new p(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new p(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new p(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var U=Symbol.iterator;function P(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=U&&t[U]||t["@@iterator"])?t:null}var D,N=Object.assign;function L(t){if(void 0===D)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var z=!1;function F(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var i=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){i=t}t.call(e.prototype)}else{try{throw Error()}catch(t){i=t}t()}}catch(e){if(e&&i&&"string"==typeof e.stack){for(var r=e.stack.split("\n"),a=i.stack.split("\n"),s=r.length-1,o=a.length-1;1<=s&&0<=o&&r[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(r[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||r[s]!==a[o]){var l="\n"+r[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?L(t):""}function B(t){switch(t.tag){case 5:return L(t.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return F(t.type,!1);case 11:return F(t.type.render,!1);case 1:return F(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case x:return"Portal";case M:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case $:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case O:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case I:e=t._payload,t=t._init;try{return H(t(e))}catch(t){}}return null}function V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function q(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function j(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function G(t){t._valueTracker||(t._valueTracker=function(t){var e=j(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=j(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function X(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=q(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&y(t,"checked",e,!1)}function Z(t,e){J(t,e);var n=q(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+q(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(et(n)){if(1<n.length)throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:q(n)}}function at(t,e){var n=q(e.value),i=q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function ft(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var _t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function pt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||_t.hasOwnProperty(t)&&_t[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=pt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(_t).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_t[e]=_t[t]}))}));var gt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(gt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(a(62))}}function yt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,St=null,Et=null;function Mt(t){if(t=yr(t)){if("function"!=typeof xt)throw Error(a(280));var e=t.stateNode;e&&(e=br(e),xt(t.stateNode,t.type,e))}}function Tt(t){St?Et?Et.push(t):Et=[t]:St=t}function Ct(){if(St){var t=St,e=Et;if(Et=St=null,Mt(t),e)for(t=0;t<e.length;t++)Mt(e[t])}}function $t(t,e){return t(e)}function At(){}var Rt=!1;function Ot(t,e,n){if(Rt)return t(e,n);Rt=!0;try{return $t(t,e,n)}finally{Rt=!1,(null!==St||null!==Et)&&(At(),Ct())}}function It(t,e){var n=t.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(a(231,e,typeof n));return n}var kt=!1;if(c)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){kt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(ct){kt=!1}function Pt(t,e,n,i,r,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var Dt=!1,Nt=null,Lt=!1,zt=null,Ft={onError:function(t){Dt=!0,Nt=t}};function Bt(t,e,n,i,r,a,s,o,l){Dt=!1,Nt=null,Pt.apply(Ft,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Vt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function qt(t){if(Ht(t)!==t)throw Error(a(188))}function jt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return qt(r),t;if(s===i)return qt(r),e;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t))?Gt(t):null}function Gt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Gt(t);if(null!==e)return e;t=t.sibling}return null}var Wt=r.unstable_scheduleCallback,Xt=r.unstable_cancelCallback,Yt=r.unstable_shouldYield,Kt=r.unstable_requestPaint,Jt=r.unstable_now,Zt=r.unstable_getCurrentPriorityLevel,Qt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,ae=null,se=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2,ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fe(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes,s=268435455&n;if(0!==s){var o=s&~r;0!==o?i=he(o):0!=(a&=s)&&(i=he(a))}else 0!=(s=n&~r)?i=he(s):0!==a&&(i=he(a));if(0===i)return 0;if(0!==e&&e!==i&&0==(e&r)&&((r=i&-i)>=(a=e&-e)||16===r&&0!=(4194240&a)))return e;if(0!=(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-se(e)),i|=t[n],e&=~r;return i}function _e(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function pe(){var t=ue;return 0==(4194240&(ue<<=1))&&(ue=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ge(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-se(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ye=0;function we(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var be,xe,Se,Ee,Me,Te=!1,Ce=[],$e=null,Ae=null,Re=null,Oe=new Map,Ie=new Map,ke=[],Ue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pe(t,e){switch(t){case"focusin":case"focusout":$e=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Re=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ie.delete(e.pointerId)}}function De(t,e,n,i,r,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==e&&null!==(e=yr(e))&&xe(e),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Ne(t){var e=vr(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Vt(n)))return t.blockedOn=e,void Me(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Le(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=yr(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);wt=i,n.target.dispatchEvent(i),wt=null,e.shift()}return!0}function ze(t,e,n){Le(t)&&n.delete(e)}function Fe(){Te=!1,null!==$e&&Le($e)&&($e=null),null!==Ae&&Le(Ae)&&(Ae=null),null!==Re&&Le(Re)&&(Re=null),Oe.forEach(ze),Ie.forEach(ze)}function Be(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fe)))}function He(t){function e(e){return Be(e,t)}if(0<Ce.length){Be(Ce[0],t);for(var n=1;n<Ce.length;n++){var i=Ce[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==$e&&Be($e,t),null!==Ae&&Be(Ae,t),null!==Re&&Be(Re,t),Oe.forEach(e),Ie.forEach(e),n=0;n<ke.length;n++)(i=ke[n]).blockedOn===t&&(i.blockedOn=null);for(;0<ke.length&&null===(n=ke[0]).blockedOn;)Ne(n),null===n.blockedOn&&ke.shift()}var Ve=w.ReactCurrentBatchConfig,qe=!0;function je(t,e,n,i){var r=ye,a=Ve.transition;Ve.transition=null;try{ye=1,We(t,e,n,i)}finally{ye=r,Ve.transition=a}}function Ge(t,e,n,i){var r=ye,a=Ve.transition;Ve.transition=null;try{ye=4,We(t,e,n,i)}finally{ye=r,Ve.transition=a}}function We(t,e,n,i){if(qe){var r=Ye(t,e,n,i);if(null===r)qi(t,e,i,Xe,n),Pe(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return $e=De($e,t,e,n,i,r),!0;case"dragenter":return Ae=De(Ae,t,e,n,i,r),!0;case"mouseover":return Re=De(Re,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return Oe.set(a,De(Oe.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Ie.set(a,De(Ie.get(a)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Pe(t,i),4&e&&-1<Ue.indexOf(t)){for(;null!==r;){var a=yr(r);if(null!==a&&be(a),null===(a=Ye(t,e,n,i))&&qi(t,e,i,Xe,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else qi(t,e,i,null,n)}}var Xe=null;function Ye(t,e,n,i){if(Xe=null,null!==(t=vr(t=bt(i))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Vt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Je=null,Ze=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Ze,i=n.length,r="value"in Je?Je.value:Je.textContent,a=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[a-e];e++);return Qe=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function an(t){function e(e,n,i,r,a){for(var s in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=N({},un,{view:0,detail:0}),fn=an(hn),_n=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,on=t.screenY-ln.screenY):on=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:on}}),dn=an(_n),pn=an(N({},_n,{dataTransfer:0})),mn=an(N({},hn,{relatedTarget:0})),gn=an(N({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=N({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yn=an(vn),wn=an(N({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Mn(){return En}var Tn=N({},hn,{key:function(t){if(t.key){var e=bn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cn=an(Tn),$n=an(N({},_n,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Rn=an(N({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=N({},_n,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(On),kn=[9,13,27,32],Un=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Dn=c&&"TextEvent"in window&&!Pn,Nn=c&&(!Un||Pn&&8<Pn&&11>=Pn),Ln=String.fromCharCode(32),zn=!1;function Fn(t,e){switch(t){case"keyup":return-1!==kn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1,Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function jn(t,e,n,i){Tt(i),0<(e=Gi(e,"onChange")).length&&(n=new cn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Gn=null,Wn=null;function Xn(t){Li(t,0)}function Yn(t){if(W(wr(t)))return t}function Kn(t,e){if("change"===t)return e}var Jn=!1;if(c){var Zn;if(c){var Qn="oninput"in document;if(!Qn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Qn="function"==typeof ti.oninput}Zn=Qn}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function ei(){Gn&&(Gn.detachEvent("onpropertychange",ni),Wn=Gn=null)}function ni(t){if("value"===t.propertyName&&Yn(Wn)){var e=[];jn(e,Wn,t,bt(t)),Ot(Xn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Wn=n,(Gn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Wn)}function ai(t,e){if("click"===t)return Yn(e)}function si(t,e){if("input"===t||"change"===t)return Yn(e)}var oi="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function li(t,e){if(oi(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!oi(t[r],e[r]))return!1}return!0}function ui(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ci(t,e){var n,i=ui(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ui(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fi(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function _i(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function di(t){var e=fi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&_i(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!t.extend&&a>i&&(r=i,i=a,a=r),r=ci(n,a);var s=ci(n,i);r&&s&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pi=c&&"documentMode"in document&&11>=document.documentMode,mi=null,gi=null,vi=null,yi=!1;function wi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==mi||mi!==X(i)||(i="selectionStart"in(i=mi)&&_i(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Gi(gi,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function bi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Si={},Ei={};function Mi(t){if(Si[t])return Si[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ei)return Si[t]=n[e];return t}c&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ti=Mi("animationend"),Ci=Mi("animationiteration"),$i=Mi("animationstart"),Ai=Mi("transitionend"),Ri=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){Ri.set(t,e),l(e,[t])}for(var ki=0;ki<Oi.length;ki++){var Ui=Oi[ki];Ii(Ui.toLowerCase(),"on"+(Ui[0].toUpperCase()+Ui.slice(1)))}Ii(Ti,"onAnimationEnd"),Ii(Ci,"onAnimationIteration"),Ii($i,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Ai,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Ni(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,s,o,l,u){if(Bt.apply(this,arguments),Dt){if(!Dt)throw Error(a(198));var c=Nt;Dt=!1,Nt=null,Lt||(Lt=!0,zt=c)}}(i,e,void 0,t),t.currentTarget=null}function Li(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var a=void 0;if(e)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break t;Ni(r,o,u),a=l}else for(s=0;s<i.length;s++){if(l=(o=i[s]).instance,u=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break t;Ni(r,o,u),a=l}}}if(Lt)throw t=zt,Lt=!1,zt=null,t}function zi(t,e){var n=e[pr];void 0===n&&(n=e[pr]=new Set);var i=t+"__bubble";n.has(i)||(Vi(e,t,2,!1),n.add(i))}function Fi(t,e,n){var i=0;e&&(i|=4),Vi(n,t,i,e)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[Bi]){t[Bi]=!0,s.forEach((function(e){"selectionchange"!==e&&(Di.has(e)||Fi(e,!1,t),Fi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Bi]||(e[Bi]=!0,Fi("selectionchange",!1,e))}}function Vi(t,e,n,i){switch(Ke(e)){case 1:var r=je;break;case 4:r=Ge;break;default:r=We}n=r.bind(null,e,n,t),r=void 0,!kt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qi(t,e,n,i,r){var a=i;if(0==(1&e)&&0==(2&e)&&null!==i)t:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==o;){if(null===(s=vr(o)))return;if(5===(l=s.tag)||6===l){i=a=s;continue t}o=o.parentNode}}i=i.return}Ot((function(){var i=a,r=bt(n),s=[];t:{var o=Ri.get(t);if(void 0!==o){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ti:case Ci:case $i:l=gn;break;case Ai:l=Rn;break;case"scroll":l=fn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=$n}var c=0!=(4&e),h=!c&&"scroll"===t,f=c?null!==o?o+"Capture":null:o;c=[];for(var _,d=i;null!==d;){var p=(_=d).stateNode;if(5===_.tag&&null!==p&&(_=p,null!==f&&null!=(p=It(d,f))&&c.push(ji(d,p,_))),h)break;d=d.return}0<c.length&&(o=new l(o,u,null,n,r),s.push({event:o,listeners:c}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===wt||!(u=n.relatedTarget||n.fromElement)||!vr(u)&&!u[dr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?vr(u):null)&&(u!==(h=Ht(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=dn,p="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=$n,p="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==l?o:wr(l),_=null==u?o:wr(u),(o=new c(p,d+"leave",l,n,r)).target=h,o.relatedTarget=_,p=null,vr(r)===i&&((c=new c(f,d+"enter",u,n,r)).target=_,c.relatedTarget=h,p=c),h=p,l&&u)t:{for(f=u,d=0,_=c=l;_;_=Wi(_))d++;for(_=0,p=f;p;p=Wi(p))_++;for(;0<d-_;)c=Wi(c),d--;for(;0<_-d;)f=Wi(f),_--;for(;d--;){if(c===f||null!==f&&c===f.alternate)break t;c=Wi(c),f=Wi(f)}c=null}else c=null;null!==l&&Xi(s,o,l,c,!1),null!==u&&null!==h&&Xi(s,h,u,c,!0)}if("select"===(l=(o=i?wr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Kn;else if(qn(o))if(Jn)m=si;else{m=ri;var g=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ai);switch(m&&(m=m(t,i))?jn(s,m,n,r):(g&&g(t,o,i),"focusout"===t&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&tt(o,"number",o.value)),g=i?wr(i):window,t){case"focusin":(qn(g)||"true"===g.contentEditable)&&(mi=g,gi=i,vi=null);break;case"focusout":vi=gi=mi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,wi(s,n,r);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":wi(s,n,r)}var v;if(Un)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Hn?Fn(t,n)&&(y="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(y="onCompositionStart");y&&(Nn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(v=tn()):(Ze="value"in(Je=r)?Je.value:Je.textContent,Hn=!0)),0<(g=Gi(i,y)).length&&(y=new wn(y,t,null,n,r),s.push({event:y,listeners:g}),(v||null!==(v=Bn(n)))&&(y.data=v))),(v=Dn?function(t,e){switch(t){case"compositionend":return Bn(e);case"keypress":return 32!==e.which?null:(zn=!0,Ln);case"textInput":return(t=e.data)===Ln&&zn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Un&&Fn(t,e)?(t=tn(),Qe=Ze=Je=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&0<(i=Gi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=v)}Li(s,e)}))}function ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=It(t,n))&&i.unshift(ji(t,a,r)),null!=(a=It(t,e))&&i.push(ji(t,a,r))),t=t.return}return i}function Wi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xi(t,e,n,i,r){for(var a=e._reactName,s=[];null!==n&&n!==i;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==u&&(o=u,r?null!=(l=It(n,a))&&s.unshift(ji(n,l,o)):r||null!=(l=It(n,a))&&s.push(ji(n,l,o))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var Yi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Ji(t){return("string"==typeof t?t:""+t).replace(Yi,"\n").replace(Ki,"")}function Zi(t,e,n){if(e=Ji(e),Ji(t)!==e&&n)throw Error(a(425))}function Qi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"==typeof setTimeout?setTimeout:void 0,rr="function"==typeof clearTimeout?clearTimeout:void 0,ar="function"==typeof Promise?Promise:void 0,sr="function"==typeof queueMicrotask?queueMicrotask:void 0!==ar?function(t){return ar.resolve(null).then(t).catch(or)}:ir;function or(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void He(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);He(e)}function ur(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function cr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),fr="__reactFiber$"+hr,_r="__reactProps$"+hr,dr="__reactContainer$"+hr,pr="__reactEvents$"+hr,mr="__reactListeners$"+hr,gr="__reactHandles$"+hr;function vr(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[fr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=cr(t);null!==t;){if(n=t[fr])return n;t=cr(t)}return e}n=(t=n).parentNode}return null}function yr(t){return!(t=t[fr]||t[dr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function wr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function br(t){return t[_r]||null}var xr=[],Sr=-1;function Er(t){return{current:t}}function Mr(t){0>Sr||(t.current=xr[Sr],xr[Sr]=null,Sr--)}function Tr(t,e){Sr++,xr[Sr]=t.current,t.current=e}var Cr={},$r=Er(Cr),Ar=Er(!1),Rr=Cr;function Or(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(t){return null!=t.childContextTypes}function kr(){Mr(Ar),Mr($r)}function Ur(t,e,n){if($r.current!==Cr)throw Error(a(168));Tr($r,e),Tr(Ar,n)}function Pr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(a(108,V(t)||"Unknown",r));return N({},n,i)}function Dr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,Rr=$r.current,Tr($r,t),Tr(Ar,Ar.current),!0}function Nr(t,e,n){var i=t.stateNode;if(!i)throw Error(a(169));n?(t=Pr(t,e,Rr),i.__reactInternalMemoizedMergedChildContext=t,Mr(Ar),Mr($r),Tr($r,t)):Mr(Ar),Tr(Ar,n)}var Lr=null,zr=!1,Fr=!1;function Br(t){null===Lr?Lr=[t]:Lr.push(t)}function Hr(){if(!Fr&&null!==Lr){Fr=!0;var t=0,e=ye;try{var n=Lr;for(ye=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Lr=null,zr=!1}catch(e){throw null!==Lr&&(Lr=Lr.slice(t+1)),Wt(Qt,Hr),e}finally{ye=e,Fr=!1}}return null}var Vr=[],qr=0,jr=null,Gr=0,Wr=[],Xr=0,Yr=null,Kr=1,Jr="";function Zr(t,e){Vr[qr++]=Gr,Vr[qr++]=jr,jr=t,Gr=e}function Qr(t,e,n){Wr[Xr++]=Kr,Wr[Xr++]=Jr,Wr[Xr++]=Yr,Yr=t;var i=Kr;t=Jr;var r=32-se(i)-1;i&=~(1<<r),n+=1;var a=32-se(e)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Kr=1<<32-se(e)+r|n<<r|i,Jr=a+t}else Kr=1<<a|n<<r|i,Jr=t}function ta(t){null!==t.return&&(Zr(t,1),Qr(t,1,0))}function ea(t){for(;t===jr;)jr=Vr[--qr],Vr[qr]=null,Gr=Vr[--qr],Vr[qr]=null;for(;t===Yr;)Yr=Wr[--Xr],Wr[Xr]=null,Jr=Wr[--Xr],Wr[Xr]=null,Kr=Wr[--Xr],Wr[Xr]=null}var na=null,ia=null,ra=!1,aa=null;function sa(t,e){var n=Iu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function oa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,na=t,ia=ur(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,na=t,ia=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yr?{id:Kr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Iu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,na=t,ia=null,!0);default:return!1}}function la(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function ua(t){if(ra){var e=ia;if(e){var n=e;if(!oa(t,e)){if(la(t))throw Error(a(418));e=ur(n.nextSibling);var i=na;e&&oa(t,e)?sa(i,n):(t.flags=-4097&t.flags|2,ra=!1,na=t)}}else{if(la(t))throw Error(a(418));t.flags=-4097&t.flags|2,ra=!1,na=t}}}function ca(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;na=t}function ha(t){if(t!==na)return!1;if(!ra)return ca(t),ra=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=ia)){if(la(t))throw fa(),Error(a(418));for(;e;)sa(t,e),e=ur(e.nextSibling)}if(ca(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ia=ur(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ia=null}}else ia=na?ur(t.stateNode.nextSibling):null;return!0}function fa(){for(var t=ia;t;)t=ur(t.nextSibling)}function _a(){ia=na=null,ra=!1}function da(t){null===aa?aa=[t]:aa.push(t)}var pa=w.ReactCurrentBatchConfig;function ma(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ga=Er(null),va=null,ya=null,wa=null;function ba(){wa=ya=va=null}function xa(t){var e=ga.current;Mr(ga),t._currentValue=e}function Sa(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ea(t,e){va=t,wa=ya=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(wo=!0),t.firstContext=null)}function Ma(t){var e=t._currentValue;if(wa!==t)if(t={context:t,memoizedValue:e,next:null},null===ya){if(null===va)throw Error(a(308));ya=t,va.dependencies={lanes:0,firstContext:t}}else ya=ya.next=t;return e}var Ta=null;function Ca(t){null===Ta?Ta=[t]:Ta.push(t)}function $a(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Ca(e)):(n.next=r.next,r.next=n),e.interleaved=n,Aa(t,i)}function Aa(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Oa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ka(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!=(2&Al)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Aa(t,n)}return null===(r=i.interleaved)?(e.next=e,Ca(i)):(e.next=r.next,r.next=e),i.interleaved=e,Aa(t,n)}function Pa(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Da(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?r=a=e:a=a.next=e}else r=a=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,i){var r=t.updateQueue;Ra=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var c=t.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==a){var h=r.baseState;for(s=0,c=u=l=null,o=a;;){var f=o.lane,_=o.eventTime;if((i&f)===f){null!==c&&(c=c.next={eventTime:_,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var d=t,p=o;switch(f=e,_=n,p.tag){case 1:if("function"==typeof(d=p.payload)){h=d.call(_,h,f);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null==(f="function"==typeof(d=p.payload)?d.call(_,h,f):d))break t;h=N({},h,f);break t;case 2:Ra=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(f=r.effects)?r.effects=[o]:f.push(o))}else _={eventTime:_,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=_,l=h):c=c.next=_,s|=f;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===c&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,null!==(e=r.shared.interleaved)){r=e;do{s|=r.lane,r=r.next}while(r!==e)}else null===a&&(r.shared.lanes=0);Nl|=s,t.lanes=s,t.memoizedState=h}}function La(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var za=(new i.Component).refs;function Fa(t,e,n,i){n=null==(n=n(i,e=t.memoizedState))?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ba={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=eu(),r=nu(t),a=ka(i,r);a.payload=e,null!=n&&(a.callback=n),null!==(e=Ua(t,a,r))&&(iu(e,t,r,i),Pa(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=eu(),r=nu(t),a=ka(i,r);a.tag=1,a.payload=e,null!=n&&(a.callback=n),null!==(e=Ua(t,a,r))&&(iu(e,t,r,i),Pa(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eu(),i=nu(t),r=ka(n,i);r.tag=2,null!=e&&(r.callback=e),null!==(e=Ua(t,r,i))&&(iu(e,t,i,n),Pa(e,t,i))}};function Ha(t,e,n,i,r,a,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,a,s):!(e.prototype&&e.prototype.isPureReactComponent&&li(n,i)&&li(r,a))}function Va(t,e,n){var i=!1,r=Cr,a=e.contextType;return"object"==typeof a&&null!==a?a=Ma(a):(r=Ir(e)?Rr:$r.current,a=(i=null!=(i=e.contextTypes))?Or(t,r):Cr),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ba,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function qa(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function ja(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=za,Oa(t);var a=e.contextType;"object"==typeof a&&null!==a?r.context=Ma(a):(a=Ir(e)?Rr:$r.current,r.context=Or(t,a)),r.state=t.memoizedState,"function"==typeof(a=e.getDerivedStateFromProps)&&(Fa(t,e,a,n),r.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(e=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Ba.enqueueReplaceState(r,r.state,null),Na(t,n,r,i),r.state=t.memoizedState),"function"==typeof r.componentDidMount&&(t.flags|=4194308)}function Ga(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,t));var r=i,s=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=r.refs;e===za&&(e=r.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!=typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Wa(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xa(t){return(0,t._init)(t._payload)}function Ya(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Uu(t,e)).index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Lu(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function u(t,e,n,i){var a=n.type;return a===S?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===I&&Xa(a)===e.type)?((i=r(e,n.props)).ref=Ga(t,e,n),i.return=t,i):((i=Pu(n.type,n.key,n.props,null,t.mode,i)).ref=Ga(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=zu(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,a){return null===e||7!==e.tag?((e=Du(n,t.mode,i,a)).return=t,e):((e=r(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Lu(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case b:return(n=Pu(e.type,e.key,e.props,null,t.mode,n)).ref=Ga(t,null,e),n.return=t,n;case x:return(e=zu(e,t.mode,n)).return=t,e;case I:return f(t,(0,e._init)(e._payload),n)}if(et(e)||P(e))return(e=Du(e,t.mode,n,null)).return=t,e;Wa(t,e)}return null}function _(t,e,n,i){var r=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:l(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?u(t,e,n,i):null;case x:return n.key===r?c(t,e,n,i):null;case I:return _(t,e,(r=n._init)(n._payload),i)}if(et(n)||P(n))return null!==r?null:h(t,e,n,i,null);Wa(t,n)}return null}function d(t,e,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case b:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case I:return d(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||P(i))return h(e,t=t.get(n)||null,i,r,null);Wa(e,i)}return null}function p(r,a,o,l){for(var u=null,c=null,h=a,p=a=0,m=null;null!==h&&p<o.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var g=_(r,h,o[p],l);if(null===g){null===h&&(h=m);break}t&&h&&null===g.alternate&&e(r,h),a=s(g,a,p),null===c?u=g:c.sibling=g,c=g,h=m}if(p===o.length)return n(r,h),ra&&Zr(r,p),u;if(null===h){for(;p<o.length;p++)null!==(h=f(r,o[p],l))&&(a=s(h,a,p),null===c?u=h:c.sibling=h,c=h);return ra&&Zr(r,p),u}for(h=i(r,h);p<o.length;p++)null!==(m=d(h,r,p,o[p],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?p:m.key),a=s(m,a,p),null===c?u=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(r,t)})),ra&&Zr(r,p),u}function m(r,o,l,u){var c=P(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,p=o,m=o=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var y=_(r,p,v.value,u);if(null===y){null===p&&(p=g);break}t&&p&&null===y.alternate&&e(r,p),o=s(y,o,m),null===h?c=y:h.sibling=y,h=y,p=g}if(v.done)return n(r,p),ra&&Zr(r,m),c;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=f(r,v.value,u))&&(o=s(v,o,m),null===h?c=v:h.sibling=v,h=v);return ra&&Zr(r,m),c}for(p=i(r,p);!v.done;m++,v=l.next())null!==(v=d(p,r,m,v.value,u))&&(t&&null!==v.alternate&&p.delete(null===v.key?m:v.key),o=s(v,o,m),null===h?c=v:h.sibling=v,h=v);return t&&p.forEach((function(t){return e(r,t)})),ra&&Zr(r,m),c}return function t(i,a,s,l){if("object"==typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case b:t:{for(var u=s.key,c=a;null!==c;){if(c.key===u){if((u=s.type)===S){if(7===c.tag){n(i,c.sibling),(a=r(c,s.props.children)).return=i,i=a;break t}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===I&&Xa(u)===c.type){n(i,c.sibling),(a=r(c,s.props)).ref=Ga(i,c,s),a.return=i,i=a;break t}n(i,c);break}e(i,c),c=c.sibling}s.type===S?((a=Du(s.props.children,i.mode,l,s.key)).return=i,i=a):((l=Pu(s.type,s.key,s.props,null,i.mode,l)).ref=Ga(i,a,s),l.return=i,i=l)}return o(i);case x:t:{for(c=s.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(i,a.sibling),(a=r(a,s.children||[])).return=i,i=a;break t}n(i,a);break}e(i,a),a=a.sibling}(a=zu(s,i.mode,l)).return=i,i=a}return o(i);case I:return t(i,a,(c=s._init)(s._payload),l)}if(et(s))return p(i,a,s,l);if(P(s))return m(i,a,s,l);Wa(i,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,s)).return=i,i=a):(n(i,a),(a=Lu(s,i.mode,l)).return=i,i=a),o(i)):n(i,a)}}var Ka=Ya(!0),Ja=Ya(!1),Za={},Qa=Er(Za),ts=Er(Za),es=Er(Za);function ns(t){if(t===Za)throw Error(a(174));return t}function is(t,e){switch(Tr(es,e),Tr(ts,t),Tr(Qa,Za),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Mr(Qa),Tr(Qa,e)}function rs(){Mr(Qa),Mr(ts),Mr(es)}function as(t){ns(es.current);var e=ns(Qa.current),n=lt(e,t.type);e!==n&&(Tr(ts,t),Tr(Qa,n))}function ss(t){ts.current===t&&(Mr(Qa),Mr(ts))}var os=Er(0);function ls(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function cs(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var hs=w.ReactCurrentDispatcher,fs=w.ReactCurrentBatchConfig,_s=0,ds=null,ps=null,ms=null,gs=!1,vs=!1,ys=0,ws=0;function bs(){throw Error(a(321))}function xs(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oi(t[n],e[n]))return!1;return!0}function Ss(t,e,n,i,r,s){if(_s=s,ds=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hs.current=null===t||null===t.memoizedState?so:oo,t=n(i,r),vs){s=0;do{if(vs=!1,ys=0,25<=s)throw Error(a(301));s+=1,ms=ps=null,e.updateQueue=null,hs.current=lo,t=n(i,r)}while(vs)}if(hs.current=ao,e=null!==ps&&null!==ps.next,_s=0,ms=ps=ds=null,gs=!1,e)throw Error(a(300));return t}function Es(){var t=0!==ys;return ys=0,t}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ms?ds.memoizedState=ms=t:ms=ms.next=t,ms}function Ts(){if(null===ps){var t=ds.alternate;t=null!==t?t.memoizedState:null}else t=ps.next;var e=null===ms?ds.memoizedState:ms.next;if(null!==e)ms=e,ps=t;else{if(null===t)throw Error(a(310));t={memoizedState:(ps=t).memoizedState,baseState:ps.baseState,baseQueue:ps.baseQueue,queue:ps.queue,next:null},null===ms?ds.memoizedState=ms=t:ms=ms.next=t}return ms}function Cs(t,e){return"function"==typeof e?e(t):e}function $s(t){var e=Ts(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=ps,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((_s&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,o=i):u=u.next=f,ds.lanes|=h,Nl|=h}c=c.next}while(null!==c&&c!==s);null===u?o=i:u.next=l,oi(i,e.memoizedState)||(wo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{s=r.lane,ds.lanes|=s,Nl|=s,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function As(t){var e=Ts(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=t(s,o.action),o=o.next}while(o!==r);oi(s,e.memoizedState)||(wo=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Rs(){}function Os(t,e){var n=ds,i=Ts(),r=e(),s=!oi(i.memoizedState,r);if(s&&(i.memoizedState=r,wo=!0),i=i.queue,Vs(Us.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||null!==ms&&1&ms.memoizedState.tag){if(n.flags|=2048,Ls(9,ks.bind(null,n,i,r,e),void 0,null),null===Rl)throw Error(a(349));0!=(30&_s)||Is(n,e,r)}return r}function Is(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ds.updateQueue)?(e={lastEffect:null,stores:null},ds.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function ks(t,e,n,i){e.value=n,e.getSnapshot=i,Ps(e)&&Ds(t)}function Us(t,e,n){return n((function(){Ps(e)&&Ds(t)}))}function Ps(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oi(t,n)}catch(t){return!0}}function Ds(t){var e=Aa(t,1);null!==e&&iu(e,t,1,-1)}function Ns(t){var e=Ms();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=eo.bind(null,ds,t),[e.memoizedState,t]}function Ls(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=ds.updateQueue)?(e={lastEffect:null,stores:null},ds.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function zs(){return Ts().memoizedState}function Fs(t,e,n,i){var r=Ms();ds.flags|=t,r.memoizedState=Ls(1|e,n,void 0,void 0===i?null:i)}function Bs(t,e,n,i){var r=Ts();i=void 0===i?null:i;var a=void 0;if(null!==ps){var s=ps.memoizedState;if(a=s.destroy,null!==i&&xs(i,s.deps))return void(r.memoizedState=Ls(e,n,a,i))}ds.flags|=t,r.memoizedState=Ls(1|e,n,a,i)}function Hs(t,e){return Fs(8390656,8,t,e)}function Vs(t,e){return Bs(2048,8,t,e)}function qs(t,e){return Bs(4,2,t,e)}function js(t,e){return Bs(4,4,t,e)}function Gs(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ws(t,e,n){return n=null!=n?n.concat([t]):null,Bs(4,4,Gs.bind(null,e,t),n)}function Xs(){}function Ys(t,e){var n=Ts();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&xs(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ks(t,e){var n=Ts();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&xs(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Js(t,e,n){return 0==(21&_s)?(t.baseState&&(t.baseState=!1,wo=!0),t.memoizedState=n):(oi(n,e)||(n=pe(),ds.lanes|=n,Nl|=n,t.baseState=!0),e)}function Zs(t,e){var n=ye;ye=0!==n&&4>n?n:4,t(!0);var i=fs.transition;fs.transition={};try{t(!1),e()}finally{ye=n,fs.transition=i}}function Qs(){return Ts().memoizedState}function to(t,e,n){var i=nu(t);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},no(t)?io(e,n):null!==(n=$a(t,e,n,i))&&(iu(n,t,i,eu()),ro(n,e,i))}function eo(t,e,n){var i=nu(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(t))io(e,r);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,o=a(s,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,s)){var l=e.interleaved;return null===l?(r.next=r,Ca(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(t){}null!==(n=$a(t,e,r,i))&&(iu(n,t,i,r=eu()),ro(n,e,i))}}function no(t){var e=t.alternate;return t===ds||null!==e&&e===ds}function io(t,e){vs=gs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ro(t,e,n){if(0!=(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}var ao={readContext:Ma,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},so={readContext:Ma,useCallback:function(t,e){return Ms().memoizedState=[t,void 0===e?null:e],t},useContext:Ma,useEffect:Hs,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Fs(4194308,4,Gs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fs(4,2,t,e)},useMemo:function(t,e){var n=Ms();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ms();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=to.bind(null,ds,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Ms().memoizedState=t},useState:Ns,useDebugValue:Xs,useDeferredValue:function(t){return Ms().memoizedState=t},useTransition:function(){var t=Ns(!1),e=t[0];return t=Zs.bind(null,t[1]),Ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ds,r=Ms();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Rl)throw Error(a(349));0!=(30&_s)||Is(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Hs(Us.bind(null,i,s,t),[t]),i.flags|=2048,Ls(9,ks.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ms(),e=Rl.identifierPrefix;if(ra){var n=Jr;e=":"+e+"R"+(n=(Kr&~(1<<32-se(Kr)-1)).toString(32)+n),0<(n=ys++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ws++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oo={readContext:Ma,useCallback:Ys,useContext:Ma,useEffect:Vs,useImperativeHandle:Ws,useInsertionEffect:qs,useLayoutEffect:js,useMemo:Ks,useReducer:$s,useRef:zs,useState:function(){return $s(Cs)},useDebugValue:Xs,useDeferredValue:function(t){return Js(Ts(),ps.memoizedState,t)},useTransition:function(){return[$s(Cs)[0],Ts().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Os,useId:Qs,unstable_isNewReconciler:!1},lo={readContext:Ma,useCallback:Ys,useContext:Ma,useEffect:Vs,useImperativeHandle:Ws,useInsertionEffect:qs,useLayoutEffect:js,useMemo:Ks,useReducer:As,useRef:zs,useState:function(){return As(Cs)},useDebugValue:Xs,useDeferredValue:function(t){var e=Ts();return null===ps?e.memoizedState=t:Js(e,ps.memoizedState,t)},useTransition:function(){return[As(Cs)[0],Ts().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Os,useId:Qs,unstable_isNewReconciler:!1};function uo(t,e){try{var n="",i=e;do{n+=B(i),i=i.return}while(i);var r=n}catch(t){r="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:r,digest:null}}function co(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ho(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}var fo="function"==typeof WeakMap?WeakMap:Map;function _o(t,e,n){(n=ka(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){jl||(jl=!0,Gl=i),ho(0,e)},n}function po(t,e,n){(n=ka(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"==typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ho(0,e)}}var a=t.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ho(0,e),"function"!=typeof i&&(null===Wl?Wl=new Set([this]):Wl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function mo(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fo;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Tu.bind(null,t,e,n),e.then(t,t))}function go(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vo(t,e,n,i,r){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=ka(-1,1)).tag=2,Ua(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var yo=w.ReactCurrentOwner,wo=!1;function bo(t,e,n,i){e.child=null===t?Ja(e,null,n,i):Ka(e,t.child,n,i)}function xo(t,e,n,i,r){n=n.render;var a=e.ref;return Ea(e,r),i=Ss(t,e,n,i,a,r),n=Es(),null===t||wo?(ra&&n&&ta(e),e.flags|=1,bo(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,jo(t,e,r))}function So(t,e,n,i,r){if(null===t){var a=n.type;return"function"!=typeof a||ku(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Pu(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Eo(t,e,a,i,r))}if(a=t.child,0==(t.lanes&r)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&t.ref===e.ref)return jo(t,e,r)}return e.flags|=1,(t=Uu(a,i)).ref=e.ref,t.return=e,e.child=t}function Eo(t,e,n,i,r){if(null!==t){var a=t.memoizedProps;if(li(a,i)&&t.ref===e.ref){if(wo=!1,e.pendingProps=i=a,0==(t.lanes&r))return e.lanes=t.lanes,jo(t,e,r);0!=(131072&t.flags)&&(wo=!0)}}return Co(t,e,n,i,r)}function Mo(t,e,n){var i=e.pendingProps,r=i.children,a=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Ul,kl),kl|=n;else{if(0==(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Ul,kl),kl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Tr(Ul,kl),kl|=i}else null!==a?(i=a.baseLanes|n,e.memoizedState=null):i=n,Tr(Ul,kl),kl|=i;return bo(t,e,r,n),e.child}function To(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Co(t,e,n,i,r){var a=Ir(n)?Rr:$r.current;return a=Or(e,a),Ea(e,r),n=Ss(t,e,n,i,a,r),i=Es(),null===t||wo?(ra&&i&&ta(e),e.flags|=1,bo(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,jo(t,e,r))}function $o(t,e,n,i,r){if(Ir(n)){var a=!0;Dr(e)}else a=!1;if(Ea(e,r),null===e.stateNode)qo(t,e),Va(e,n,i),ja(e,n,i,r),i=!0;else if(null===t){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=n.contextType;u="object"==typeof u&&null!==u?Ma(u):Or(e,u=Ir(n)?Rr:$r.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==i||l!==u)&&qa(e,s,i,u),Ra=!1;var f=e.memoizedState;s.state=f,Na(e,i,s,r),l=e.memoizedState,o!==i||f!==l||Ar.current||Ra?("function"==typeof c&&(Fa(e,n,c,i),l=e.memoizedState),(o=Ra||Ha(e,n,o,i,f,l,u))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.flags|=4194308)):("function"==typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=u,i=o):("function"==typeof s.componentDidMount&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Ia(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ma(e.type,o),s.props=u,h=e.pendingProps,f=s.context,l="object"==typeof(l=n.contextType)&&null!==l?Ma(l):Or(e,l=Ir(n)?Rr:$r.current);var _=n.getDerivedStateFromProps;(c="function"==typeof _||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==h||f!==l)&&qa(e,s,i,l),Ra=!1,f=e.memoizedState,s.state=f,Na(e,i,s,r);var d=e.memoizedState;o!==h||f!==d||Ar.current||Ra?("function"==typeof _&&(Fa(e,n,_,i),d=e.memoizedState),(u=Ra||Ha(e,n,u,i,f,d,l)||!1)?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(i,d,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,d,l)),"function"==typeof s.componentDidUpdate&&(e.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=d),s.props=i,s.state=d,s.context=l,i=u):("function"!=typeof s.componentDidUpdate||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Ao(t,e,n,i,a,r)}function Ao(t,e,n,i,r,a){To(t,e);var s=0!=(128&e.flags);if(!i&&!s)return r&&Nr(e,n,!1),jo(t,e,a);i=e.stateNode,yo.current=e;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&s?(e.child=Ka(e,t.child,null,a),e.child=Ka(e,null,o,a)):bo(t,e,o,a),e.memoizedState=i.state,r&&Nr(e,n,!0),e.child}function Ro(t){var e=t.stateNode;e.pendingContext?Ur(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ur(0,e.context,!1),is(t,e.containerInfo)}function Oo(t,e,n,i,r){return _a(),da(r),e.flags|=256,bo(t,e,n,i),e.child}var Io,ko,Uo,Po,Do={dehydrated:null,treeContext:null,retryLane:0};function No(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lo(t,e,n){var i,r=e.pendingProps,s=os.current,o=!1,l=0!=(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!=(2&s)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Tr(os,1&s),null===t)return ua(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},0==(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Nu(l,r,0,null),t=Du(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=No(n),e.memoizedState=Do,t):zo(e,l));if(null!==(s=t.memoizedState)&&null!==(i=s.dehydrated))return function(t,e,n,i,r,s,o){if(n)return 256&e.flags?(e.flags&=-257,Fo(t,e,o,i=co(Error(a(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Nu({mode:"visible",children:i.children},r,0,null),(s=Du(s,r,o,null)).flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!=(1&e.mode)&&Ka(e,t.child,null,o),e.child.memoizedState=No(o),e.memoizedState=Do,s);if(0==(1&e.mode))return Fo(t,e,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fo(t,e,o,i=co(s=Error(a(419)),i,void 0))}if(l=0!=(o&t.childLanes),wo||l){if(null!==(i=Rl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!=(r&(i.suspendedLanes|o))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Aa(t,r),iu(i,t,r,-1))}return mu(),Fo(t,e,o,i=co(Error(a(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=$u.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ia=ur(r.nextSibling),na=e,ra=!0,aa=null,null!==t&&(Wr[Xr++]=Kr,Wr[Xr++]=Jr,Wr[Xr++]=Yr,Kr=t.id,Jr=t.overflow,Yr=e),(e=zo(e,i.children)).flags|=4096,e)}(t,e,l,r,i,s,n);if(o){o=r.fallback,l=e.mode,i=(s=t.child).sibling;var u={mode:"hidden",children:r.children};return 0==(1&l)&&e.child!==s?((r=e.child).childLanes=0,r.pendingProps=u,e.deletions=null):(r=Uu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==i?o=Uu(i,o):(o=Du(o,l,n,null)).flags|=2,o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=null===(l=t.child.memoizedState)?No(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Do,r}return t=(o=t.child).sibling,r=Uu(o,{mode:"visible",children:r.children}),0==(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zo(t,e){return(e=Nu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Fo(t,e,n,i){return null!==i&&da(i),Ka(e,t.child,null,n),(t=zo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Bo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Sa(t.return,e,n)}function Ho(t,e,n,i,r){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Vo(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(bo(t,e,i.children,n),0!=(2&(i=os.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Bo(t,n,e);else if(19===t.tag)Bo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(os,i),0==(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ls(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ho(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ls(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ho(e,!0,n,null,a);break;case"together":Ho(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qo(t,e){0==(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Nl|=e.lanes,0==(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Uu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Uu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Go(t,e){if(!ra)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Wo(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Xo(t,e,n){var i=e.pendingProps;switch(ea(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(e),null;case 1:case 17:return Ir(e.type)&&kr(),Wo(e),null;case 3:return i=e.stateNode,rs(),Mr(Ar),Mr($r),cs(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ha(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==aa&&(ou(aa),aa=null))),ko(t,e),Wo(e),null;case 5:ss(e);var r=ns(es.current);if(n=e.type,null!==t&&null!=e.stateNode)Uo(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(a(166));return Wo(e),null}if(t=ns(Qa.current),ha(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[fr]=e,i[_r]=s,t=0!=(1&e.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Pi.length;r++)zi(Pi[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":K(i,s),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},zi("invalid",i);break;case"textarea":rt(i,s),zi("invalid",i)}for(var l in vt(n,s),r=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"==typeof u?i.textContent!==u&&(!0!==s.suppressHydrationWarning&&Zi(i.textContent,u,t),r=["children",u]):"number"==typeof u&&i.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Zi(i.textContent,u,t),r=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":G(i),Q(i,s,!0);break;case"textarea":G(i),st(i);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(i.onclick=Qi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[fr]=e,t[_r]=i,Io(t,e,!1,!1),e.stateNode=t;t:{switch(l=yt(n,i),n){case"dialog":zi("cancel",t),zi("close",t),r=i;break;case"iframe":case"object":case"embed":zi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Pi.length;r++)zi(Pi[r],t);r=i;break;case"source":zi("error",t),r=i;break;case"img":case"image":case"link":zi("error",t),zi("load",t),r=i;break;case"details":zi("toggle",t),r=i;break;case"input":K(t,i),r=Y(t,i),zi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=N({},i,{value:void 0}),zi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),zi("invalid",t)}for(s in vt(n,r),u=r)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?mt(t,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===s?"string"==typeof c?("textarea"!==n||""!==c)&&ft(t,c):"number"==typeof c&&ft(t,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&zi("scroll",t):null!=c&&y(t,s,c,l))}switch(n){case"input":G(t),Q(t,i,!1);break;case"textarea":G(t),st(t);break;case"option":null!=i.value&&t.setAttribute("value",""+q(i.value));break;case"select":t.multiple=!!i.multiple,null!=(s=i.value)?nt(t,!!i.multiple,s,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof r.onClick&&(t.onclick=Qi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Wo(e),null;case 6:if(t&&null!=e.stateNode)Po(t,e,t.memoizedProps,i);else{if("string"!=typeof i&&null===e.stateNode)throw Error(a(166));if(n=ns(es.current),ns(Qa.current),ha(e)){if(i=e.stateNode,n=e.memoizedProps,i[fr]=e,(s=i.nodeValue!==n)&&null!==(t=na))switch(t.tag){case 3:Zi(i.nodeValue,n,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!=(1&t.mode))}s&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=e,e.stateNode=i}return Wo(e),null;case 13:if(Mr(os),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ra&&null!==ia&&0!=(1&e.mode)&&0==(128&e.flags))fa(),_a(),e.flags|=98560,s=!1;else if(s=ha(e),null!==i&&null!==i.dehydrated){if(null===t){if(!s)throw Error(a(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(a(317));s[fr]=e}else _a(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Wo(e),s=!1}else null!==aa&&(ou(aa),aa=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!=(128&e.flags)?(e.lanes=n,e):((i=null!==i)!=(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&os.current)?0===Pl&&(Pl=3):mu())),null!==e.updateQueue&&(e.flags|=4),Wo(e),null);case 4:return rs(),ko(t,e),null===t&&Hi(e.stateNode.containerInfo),Wo(e),null;case 10:return xa(e.type._context),Wo(e),null;case 19:if(Mr(os),null===(s=e.memoizedState))return Wo(e),null;if(i=0!=(128&e.flags),null===(l=s.rendering))if(i)Go(s,!1);else{if(0!==Pl||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ls(t))){for(e.flags|=128,Go(s,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(os,1&os.current|2),e.child}t=t.sibling}null!==s.tail&&Jt()>Vl&&(e.flags|=128,i=!0,Go(s,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ls(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Go(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ra)return Wo(e),null}else 2*Jt()-s.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,i=!0,Go(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jt(),e.sibling=null,n=os.current,Tr(os,i?1&n|2:1&n),e):(Wo(e),null);case 22:case 23:return fu(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!=(1&e.mode)?0!=(1073741824&kl)&&(Wo(e),6&e.subtreeFlags&&(e.flags|=8192)):Wo(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}function Yo(t,e){switch(ea(e),e.tag){case 1:return Ir(e.type)&&kr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return rs(),Mr(Ar),Mr($r),cs(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return ss(e),null;case 13:if(Mr(os),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));_a()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Mr(os),null;case 4:return rs(),null;case 10:return xa(e.type._context),null;case 22:case 23:return fu(),null;default:return null}}Io=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ko=function(){},Uo=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ns(Qa.current);var a,s=null;switch(n){case"input":r=Y(t,r),i=Y(t,i),s=[];break;case"select":r=N({},r,{value:void 0}),i=N({},i,{value:void 0}),s=[];break;case"textarea":r=it(t,r),i=it(t,i),s=[];break;default:"function"!=typeof r.onClick&&"function"==typeof i.onClick&&(t.onclick=Qi)}for(c in vt(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var u=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zi("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}},Po=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ko=!1,Jo=!1,Zo="function"==typeof WeakSet?WeakSet:Set,Qo=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Mu(t,e,n)}else n.current=null}function el(t,e,n){try{n()}catch(n){Mu(t,e,n)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,void 0!==a&&el(e,n,a)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function al(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&(delete e[fr],delete e[_r],delete e[pr],delete e[mr],delete e[gr]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Qi));else if(4!==i&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var hl=null,fl=!1;function _l(t,e,n){for(n=n.child;null!==n;)dl(t,e,n),n=n.sibling}function dl(t,e,n){if(ae&&"function"==typeof ae.onCommitFiberUnmount)try{ae.onCommitFiberUnmount(re,n)}catch(t){}switch(n.tag){case 5:Jo||tl(n,e);case 6:var i=hl,r=fl;hl=null,_l(t,e,n),fl=r,null!==(hl=i)&&(fl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(t=hl,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),He(t)):lr(hl,n.stateNode));break;case 4:i=hl,r=fl,hl=n.stateNode.containerInfo,fl=!0,_l(t,e,n),hl=i,fl=r;break;case 0:case 11:case 14:case 15:if(!Jo&&null!==(i=n.updateQueue)&&null!==(i=i.lastEffect)){r=i=i.next;do{var a=r,s=a.destroy;a=a.tag,void 0!==s&&(0!=(2&a)||0!=(4&a))&&el(n,e,s),r=r.next}while(r!==i)}_l(t,e,n);break;case 1:if(!Jo&&(tl(n,e),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(t){Mu(n,e,t)}_l(t,e,n);break;case 21:_l(t,e,n);break;case 22:1&n.mode?(Jo=(i=Jo)||null!==n.memoizedState,_l(t,e,n),Jo=i):_l(t,e,n);break;default:_l(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Zo),e.forEach((function(e){var i=Au.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break t}l=l.return}if(null===hl)throw Error(a(160));dl(s,o,r),hl=null,fl=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(t){Mu(r,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),vl(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(e){Mu(t,t.return,e)}try{il(5,t,t.return)}catch(e){Mu(t,t.return,e)}}break;case 1:ml(e,t),vl(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),vl(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{ft(r,"")}catch(e){Mu(t,t.return,e)}}if(4&i&&null!=(r=t.stateNode)){var s=t.memoizedProps,o=null!==n?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(r,s),yt(l,o);var c=yt(l,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];"style"===h?mt(r,f):"dangerouslySetInnerHTML"===h?ht(r,f):"children"===h?ft(r,f):y(r,h,f,c)}switch(l){case"input":Z(r,s);break;case"textarea":at(r,s);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;null!=d?nt(r,!!s.multiple,d,!1):_!==!!s.multiple&&(null!=s.defaultValue?nt(r,!!s.multiple,s.defaultValue,!0):nt(r,!!s.multiple,s.multiple?[]:"",!1))}r[_r]=s}catch(e){Mu(t,t.return,e)}}break;case 6:if(ml(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(a(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(e){Mu(t,t.return,e)}}break;case 3:if(ml(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(e){Mu(t,t.return,e)}break;case 4:default:ml(e,t),vl(t);break;case 13:ml(e,t),vl(t),8192&(r=t.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Jt())),4&i&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Jo=(c=Jo)||h,ml(e,t),Jo=c):ml(e,t),vl(t),8192&i){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!=(1&t.mode))for(Qo=t,h=t.child;null!==h;){for(f=Qo=h;null!==Qo;){switch(d=(_=Qo).child,_.tag){case 0:case 11:case 14:case 15:il(4,_,_.return);break;case 1:tl(_,_.return);var p=_.stateNode;if("function"==typeof p.componentWillUnmount){i=_,n=_.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(t){Mu(i,n,t)}}break;case 5:tl(_,_.return);break;case 22:if(null!==_.memoizedState){xl(f);continue}}null!==d?(d.return=_,Qo=d):xl(f)}h=h.sibling}t:for(h=null,f=t;;){if(5===f.tag){if(null===h){h=f;try{r=f.stateNode,c?"function"==typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=f.stateNode,o=null!=(u=f.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=pt("display",o))}catch(e){Mu(t,t.return,e)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(e){Mu(t,t.return,e)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===t)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===t)break t;for(;null===f.sibling;){if(null===f.return||f.return===t)break t;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(e,t),vl(t),4&i&&pl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var i=n;break t}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ft(r,""),i.flags&=-33),cl(t,ll(t),r);break;case 3:case 4:var s=i.stateNode.containerInfo;ul(t,ll(t),s);break;default:throw Error(a(161))}}catch(e){Mu(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Qo=t,wl(t,e,n)}function wl(t,e,n){for(var i=0!=(1&t.mode);null!==Qo;){var r=Qo,a=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Ko;if(!s){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Ko;var u=Jo;if(Ko=s,(Jo=l)&&!u)for(Qo=r;null!==Qo;)l=(s=Qo).child,22===s.tag&&null!==s.memoizedState?Sl(r):null!==l?(l.return=s,Qo=l):Sl(r);for(;null!==a;)Qo=a,wl(a,e,n),a=a.sibling;Qo=r,Ko=o,Jo=u}bl(t)}else 0!=(8772&r.subtreeFlags)&&null!==a?(a.return=r,Qo=a):bl(t)}}function bl(t){for(;null!==Qo;){var e=Qo;if(0!=(8772&e.flags)){var n=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Jo||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Jo)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ma(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&La(e,s,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}La(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&He(f)}}}break;default:throw Error(a(163))}Jo||512&e.flags&&al(e)}catch(t){Mu(e,e.return,t)}}if(e===t){Qo=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qo=n;break}Qo=e.return}}function xl(t){for(;null!==Qo;){var e=Qo;if(e===t){Qo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qo=n;break}Qo=e.return}}function Sl(t){for(;null!==Qo;){var e=Qo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(t){Mu(e,n,t)}break;case 1:var i=e.stateNode;if("function"==typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(t){Mu(e,r,t)}}var a=e.return;try{al(e)}catch(t){Mu(e,a,t)}break;case 5:var s=e.return;try{al(e)}catch(t){Mu(e,s,t)}}}catch(t){Mu(e,e.return,t)}if(e===t){Qo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Qo=o;break}Qo=e.return}}var El,Ml=Math.ceil,Tl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,$l=w.ReactCurrentBatchConfig,Al=0,Rl=null,Ol=null,Il=0,kl=0,Ul=Er(0),Pl=0,Dl=null,Nl=0,Ll=0,zl=0,Fl=null,Bl=null,Hl=0,Vl=1/0,ql=null,jl=!1,Gl=null,Wl=null,Xl=!1,Yl=null,Kl=0,Jl=0,Zl=null,Ql=-1,tu=0;function eu(){return 0!=(6&Al)?Jt():-1!==Ql?Ql:Ql=Jt()}function nu(t){return 0==(1&t.mode)?1:0!=(2&Al)&&0!==Il?Il&-Il:null!==pa.transition?(0===tu&&(tu=pe()),tu):0!==(t=ye)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function iu(t,e,n,i){if(50<Jl)throw Jl=0,Zl=null,Error(a(185));ge(t,n,i),0!=(2&Al)&&t===Rl||(t===Rl&&(0==(2&Al)&&(Ll|=n),4===Pl&&lu(t,Il)),ru(t,i),1===n&&0===Al&&0==(1&e.mode)&&(Vl=Jt()+500,zr&&Hr()))}function ru(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-se(a),o=1<<s,l=r[s];-1===l?0!=(o&n)&&0==(o&i)||(r[s]=_e(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}(t,e);var i=fe(t,t===Rl?Il:0);if(0===i)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){zr=!0,Br(t)}(uu.bind(null,t)):Br(uu.bind(null,t)),sr((function(){0==(6&Al)&&Hr()})),n=null;else{switch(we(i)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Ru(n,au.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function au(t,e){if(Ql=-1,tu=0,0!=(6&Al))throw Error(a(327));var n=t.callbackNode;if(Su()&&t.callbackNode!==n)return null;var i=fe(t,t===Rl?Il:0);if(0===i)return null;if(0!=(30&i)||0!=(i&t.expiredLanes)||e)e=gu(t,i);else{e=i;var r=Al;Al|=2;var s=pu();for(Rl===t&&Il===e||(ql=null,Vl=Jt()+500,_u(t,e));;)try{yu();break}catch(e){du(t,e)}ba(),Tl.current=s,Al=r,null!==Ol?e=0:(Rl=null,Il=0,e=Pl)}if(0!==e){if(2===e&&0!==(r=de(t))&&(i=r,e=su(t,r)),1===e)throw n=Dl,_u(t,0),lu(t,i),ru(t,Jt()),n;if(6===e)lu(t,i);else{if(r=t.current.alternate,0==(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!oi(a(),r))return!1}catch(t){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=gu(t,i))&&0!==(s=de(t))&&(i=s,e=su(t,s)),1===e))throw n=Dl,_u(t,0),lu(t,i),ru(t,Jt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(a(345));case 2:case 5:xu(t,Bl,ql);break;case 3:if(lu(t,i),(130023424&i)===i&&10<(e=Hl+500-Jt())){if(0!==fe(t,0))break;if(((r=t.suspendedLanes)&i)!==i){eu(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xu.bind(null,t,Bl,ql),e);break}xu(t,Bl,ql);break;case 4:if(lu(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-se(i);s=1<<o,(o=e[o])>r&&(r=o),i&=~s}if(i=r,10<(i=(120>(i=Jt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ml(i/1960))-i)){t.timeoutHandle=ir(xu.bind(null,t,Bl,ql),i);break}xu(t,Bl,ql);break;default:throw Error(a(329))}}}return ru(t,Jt()),t.callbackNode===n?au.bind(null,t):null}function su(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(_u(t,e).flags|=256),2!==(t=gu(t,e))&&(e=Bl,Bl=n,null!==e&&ou(e)),t}function ou(t){null===Bl?Bl=t:Bl.push.apply(Bl,t)}function lu(t,e){for(e&=~zl,e&=~Ll,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),i=1<<n;t[n]=-1,e&=~i}}function uu(t){if(0!=(6&Al))throw Error(a(327));Su();var e=fe(t,0);if(0==(1&e))return ru(t,Jt()),null;var n=gu(t,e);if(0!==t.tag&&2===n){var i=de(t);0!==i&&(e=i,n=su(t,i))}if(1===n)throw n=Dl,_u(t,0),lu(t,e),ru(t,Jt()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xu(t,Bl,ql),ru(t,Jt()),null}function cu(t,e){var n=Al;Al|=1;try{return t(e)}finally{0===(Al=n)&&(Vl=Jt()+500,zr&&Hr())}}function hu(t){null!==Yl&&0===Yl.tag&&0==(6&Al)&&Su();var e=Al;Al|=1;var n=$l.transition,i=ye;try{if($l.transition=null,ye=1,t)return t()}finally{ye=i,$l.transition=n,0==(6&(Al=e))&&Hr()}}function fu(){kl=Ul.current,Mr(Ul)}function _u(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(ea(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&kr();break;case 3:rs(),Mr(Ar),Mr($r),cs();break;case 5:ss(i);break;case 4:rs();break;case 13:case 19:Mr(os);break;case 10:xa(i.type._context);break;case 22:case 23:fu()}n=n.return}if(Rl=t,Ol=t=Uu(t.current,null),Il=kl=e,Pl=0,Dl=null,zl=Ll=Nl=0,Bl=Fl=null,null!==Ta){for(e=0;e<Ta.length;e++)if(null!==(i=(n=Ta[e]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var s=a.next;a.next=r,i.next=s}n.pending=i}Ta=null}return t}function du(t,e){for(;;){var n=Ol;try{if(ba(),hs.current=ao,gs){for(var i=ds.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}gs=!1}if(_s=0,ms=ps=ds=null,vs=!1,ys=0,Cl.current=null,null===n||null===n.return){Pl=1,Dl=e,Ol=null;break}t:{var s=t,o=n.return,l=n,u=e;if(e=Il,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,h=l,f=h.tag;if(0==(1&h.mode)&&(0===f||11===f||15===f)){var _=h.alternate;_?(h.updateQueue=_.updateQueue,h.memoizedState=_.memoizedState,h.lanes=_.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=go(o);if(null!==d){d.flags&=-257,vo(d,o,l,0,e),1&d.mode&&mo(s,c,e),u=c;var p=(e=d).updateQueue;if(null===p){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break t}if(0==(1&e)){mo(s,c,e),mu();break t}u=Error(a(426))}else if(ra&&1&l.mode){var g=go(o);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),vo(g,o,l,0,e),da(uo(u,l));break t}}s=u=uo(u,l),4!==Pl&&(Pl=2),null===Fl?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Da(s,_o(0,u,e));break t;case 1:l=u;var v=s.type,y=s.stateNode;if(0==(128&s.flags)&&("function"==typeof v.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Wl||!Wl.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e,Da(s,po(s,l,e));break t}}s=s.return}while(null!==s)}bu(n)}catch(t){e=t,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function pu(){var t=Tl.current;return Tl.current=ao,null===t?ao:t}function mu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Rl||0==(268435455&Nl)&&0==(268435455&Ll)||lu(Rl,Il)}function gu(t,e){var n=Al;Al|=2;var i=pu();for(Rl===t&&Il===e||(ql=null,_u(t,e));;)try{vu();break}catch(e){du(t,e)}if(ba(),Al=n,Tl.current=i,null!==Ol)throw Error(a(261));return Rl=null,Il=0,Pl}function vu(){for(;null!==Ol;)wu(Ol)}function yu(){for(;null!==Ol&&!Yt();)wu(Ol)}function wu(t){var e=El(t.alternate,t,kl);t.memoizedProps=t.pendingProps,null===e?bu(t):Ol=e,Cl.current=null}function bu(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Xo(n,e,kl)))return void(Ol=n)}else{if(null!==(n=Yo(n,e)))return n.flags&=32767,void(Ol=n);if(null===t)return Pl=6,void(Ol=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ol=e);Ol=e=t}while(null!==e);0===Pl&&(Pl=5)}function xu(t,e,n){var i=ye,r=$l.transition;try{$l.transition=null,ye=1,function(t,e,n,i){do{Su()}while(null!==Yl);if(0!=(6&Al))throw Error(a(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-se(n),a=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~a}}(t,s),t===Rl&&(Ol=Rl=null,Il=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Xl||(Xl=!0,Ru(ee,(function(){return Su(),null}))),s=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||s){s=$l.transition,$l.transition=null;var o=ye;ye=1;var l=Al;Al|=4,Cl.current=null,function(t,e){if(tr=qe,_i(t=fi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(t){n=null;break t}var o=0,l=-1,u=-1,c=0,h=0,f=t,_=null;e:for(;;){for(var d;f!==n||0!==r&&3!==f.nodeType||(l=o+r),f!==s||0!==i&&3!==f.nodeType||(u=o+i),3===f.nodeType&&(o+=f.nodeValue.length),null!==(d=f.firstChild);)_=f,f=d;for(;;){if(f===t)break e;if(_===n&&++c===r&&(l=o),_===s&&++h===i&&(u=o),null!==(d=f.nextSibling))break;_=(f=_).parentNode}f=d}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},qe=!1,Qo=e;null!==Qo;)if(t=(e=Qo).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,Qo=t;else for(;null!==Qo;){e=Qo;try{var p=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ma(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(t){Mu(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,Qo=t;break}Qo=e.return}p=nl,nl=!1}(t,n),gl(n,t),di(er),qe=!!tr,er=tr=null,t.current=n,yl(n,t,r),Kt(),Al=l,ye=o,$l.transition=s}else t.current=n;if(Xl&&(Xl=!1,Yl=t,Kl=r),0===(s=t.pendingLanes)&&(Wl=null),function(t){if(ae&&"function"==typeof ae.onCommitFiberRoot)try{ae.onCommitFiberRoot(re,t,void 0,128==(128&t.current.flags))}catch(t){}}(n.stateNode),ru(t,Jt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)i((r=e[n]).value,{componentStack:r.stack,digest:r.digest});if(jl)throw jl=!1,t=Gl,Gl=null,t;0!=(1&Kl)&&0!==t.tag&&Su(),0!=(1&(s=t.pendingLanes))?t===Zl?Jl++:(Jl=0,Zl=t):Jl=0,Hr()}(t,e,n,i)}finally{$l.transition=r,ye=i}return null}function Su(){if(null!==Yl){var t=we(Kl),e=$l.transition,n=ye;try{if($l.transition=null,ye=16>t?16:t,null===Yl)var i=!1;else{if(t=Yl,Yl=null,Kl=0,0!=(6&Al))throw Error(a(331));var r=Al;for(Al|=4,Qo=t.current;null!==Qo;){var s=Qo,o=s.child;if(0!=(16&Qo.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qo=c;null!==Qo;){var h=Qo;switch(h.tag){case 0:case 11:case 15:il(8,h,s)}var f=h.child;if(null!==f)f.return=h,Qo=f;else for(;null!==Qo;){var _=(h=Qo).sibling,d=h.return;if(sl(h),h===c){Qo=null;break}if(null!==_){_.return=d,Qo=_;break}Qo=d}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Qo=s}}if(0!=(2064&s.subtreeFlags)&&null!==o)o.return=s,Qo=o;else t:for(;null!==Qo;){if(0!=(2048&(s=Qo).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Qo=v;break t}Qo=s.return}}var y=t.current;for(Qo=y;null!==Qo;){var w=(o=Qo).child;if(0!=(2064&o.subtreeFlags)&&null!==w)w.return=o,Qo=w;else t:for(o=y;null!==Qo;){if(0!=(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(t){Mu(l,l.return,t)}if(l===o){Qo=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Qo=b;break t}Qo=l.return}}if(Al=r,Hr(),ae&&"function"==typeof ae.onPostCommitFiberRoot)try{ae.onPostCommitFiberRoot(re,t)}catch(t){}i=!0}return i}finally{ye=n,$l.transition=e}}return!1}function Eu(t,e,n){t=Ua(t,e=_o(0,e=uo(n,e),1),1),e=eu(),null!==t&&(ge(t,1,e),ru(t,e))}function Mu(t,e,n){if(3===t.tag)Eu(t,t,n);else for(;null!==e;){if(3===e.tag){Eu(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Wl||!Wl.has(i))){e=Ua(e,t=po(e,t=uo(n,t),1),1),t=eu(),null!==e&&(ge(e,1,t),ru(e,t));break}}e=e.return}}function Tu(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&n,Rl===t&&(Il&n)===n&&(4===Pl||3===Pl&&(130023424&Il)===Il&&500>Jt()-Hl?_u(t,0):zl|=n),ru(t,e)}function Cu(t,e){0===e&&(0==(1&t.mode)?e=1:(e=ce,0==(130023424&(ce<<=1))&&(ce=4194304)));var n=eu();null!==(t=Aa(t,e))&&(ge(t,e,n),ru(t,n))}function $u(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Cu(t,n)}function Au(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(e),Cu(t,n)}function Ru(t,e){return Wt(t,e)}function Ou(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(t,e,n,i){return new Ou(t,e,n,i)}function ku(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Uu(t,e){var n=t.alternate;return null===n?((n=Iu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pu(t,e,n,i,r,s){var o=2;if(i=t,"function"==typeof t)ku(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case S:return Du(n.children,r,s,e);case E:o=8,r|=8;break;case M:return(t=Iu(12,n,e,2|r)).elementType=M,t.lanes=s,t;case A:return(t=Iu(13,n,e,r)).elementType=A,t.lanes=s,t;case R:return(t=Iu(19,n,e,r)).elementType=R,t.lanes=s,t;case k:return Nu(n,r,s,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case T:o=10;break t;case C:o=9;break t;case $:o=11;break t;case O:o=14;break t;case I:o=16,i=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Iu(o,n,e,r)).elementType=t,e.type=i,e.lanes=s,e}function Du(t,e,n,i){return(t=Iu(7,t,i,e)).lanes=n,t}function Nu(t,e,n,i){return(t=Iu(22,t,i,e)).elementType=k,t.lanes=n,t.stateNode={isHidden:!1},t}function Lu(t,e,n){return(t=Iu(6,t,null,e)).lanes=n,t}function zu(t,e,n){return(e=Iu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fu(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bu(t,e,n,i,r,a,s,o,l){return t=new Fu(t,e,n,o,l),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Iu(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),t}function Hu(t){if(!t)return Cr;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(Ir(n))return Pr(t,n,e)}return e}function Vu(t,e,n,i,r,a,s,o,l){return(t=Bu(n,i,!0,t,0,a,0,o,l)).context=Hu(null),n=t.current,(a=ka(i=eu(),r=nu(n))).callback=null!=e?e:null,Ua(n,a,r),t.current.lanes=r,ge(t,r,i),ru(t,i),t}function qu(t,e,n,i){var r=e.current,a=eu(),s=nu(r);return n=Hu(n),null===e.context?e.context=n:e.pendingContext=n,(e=ka(a,s)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Ua(r,e,s))&&(iu(t,r,s,a),Pa(t,r,s)),s}function ju(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wu(t,e){Gu(t,e),(t=t.alternate)&&Gu(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)wo=!0;else{if(0==(t.lanes&n)&&0==(128&e.flags))return wo=!1,function(t,e,n){switch(e.tag){case 3:Ro(e),_a();break;case 5:as(e);break;case 1:Ir(e.type)&&Dr(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(ga,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(os,1&os.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Lo(t,e,n):(Tr(os,1&os.current),null!==(t=jo(t,e,n))?t.sibling:null);Tr(os,1&os.current);break;case 19:if(i=0!=(n&e.childLanes),0!=(128&t.flags)){if(i)return Vo(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(os,os.current),i)break;return null;case 22:case 23:return e.lanes=0,Mo(t,e,n)}return jo(t,e,n)}(t,e,n);wo=0!=(131072&t.flags)}else wo=!1,ra&&0!=(1048576&e.flags)&&Qr(e,Gr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;qo(t,e),t=e.pendingProps;var r=Or(e,$r.current);Ea(e,n),r=Ss(null,e,i,t,r,n);var s=Es();return e.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(i)?(s=!0,Dr(e)):s=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oa(e),r.updater=Ba,e.stateNode=r,r._reactInternals=e,ja(e,i,t,n),e=Ao(null,e,i,!0,s,n)):(e.tag=0,ra&&s&&ta(e),bo(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(qo(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"==typeof t)return ku(t)?1:0;if(null!=t){if((t=t.$$typeof)===$)return 11;if(t===O)return 14}return 2}(i),t=ma(i,t),r){case 0:e=Co(null,e,i,t,n);break t;case 1:e=$o(null,e,i,t,n);break t;case 11:e=xo(null,e,i,t,n);break t;case 14:e=So(null,e,i,ma(i.type,t),n);break t}throw Error(a(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Co(t,e,i,r=e.elementType===i?r:ma(i,r),n);case 1:return i=e.type,r=e.pendingProps,$o(t,e,i,r=e.elementType===i?r:ma(i,r),n);case 3:t:{if(Ro(e),null===t)throw Error(a(387));i=e.pendingProps,r=(s=e.memoizedState).element,Ia(t,e),Na(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Oo(t,e,i,n,r=uo(Error(a(423)),e));break t}if(i!==r){e=Oo(t,e,i,n,r=uo(Error(a(424)),e));break t}for(ia=ur(e.stateNode.containerInfo.firstChild),na=e,ra=!0,aa=null,n=Ja(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_a(),i===r){e=jo(t,e,n);break t}bo(t,e,i,n)}e=e.child}return e;case 5:return as(e),null===t&&ua(e),i=e.type,r=e.pendingProps,s=null!==t?t.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==s&&nr(i,s)&&(e.flags|=32),To(t,e),bo(t,e,o,n),e.child;case 6:return null===t&&ua(e),null;case 13:return Lo(t,e,n);case 4:return is(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Ka(e,null,i,n):bo(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xo(t,e,i,r=e.elementType===i?r:ma(i,r),n);case 7:return bo(t,e,e.pendingProps,n),e.child;case 8:case 12:return bo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Tr(ga,i._currentValue),i._currentValue=o,null!==s)if(oi(s.value,o)){if(s.children===r.children&&!Ar.current){e=jo(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===s.tag){(u=ka(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Sa(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===s.tag)o=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o,n,e),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}bo(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ea(e,n),i=i(r=Ma(r)),e.flags|=1,bo(t,e,i,n),e.child;case 14:return r=ma(i=e.type,e.pendingProps),So(t,e,i,r=ma(i.type,r),n);case 15:return Eo(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ma(i,r),qo(t,e),e.tag=1,Ir(i)?(t=!0,Dr(e)):t=!1,Ea(e,n),Va(e,i,r),ja(e,i,r,n),Ao(null,e,i,!0,t,n);case 19:return Vo(t,e,n);case 22:return Mo(t,e,n)}throw Error(a(156,e.tag))};var Xu="function"==typeof reportError?reportError:function(t){console.error(t)};function Yu(t){this._internalRoot=t}function Ku(t){this._internalRoot=t}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Zu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qu(){}function tc(t,e,n,i,r){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof r){var o=r;r=function(){var t=ju(s);o.call(t)}}qu(e,s,t,r)}else s=function(t,e,n,i,r){if(r){if("function"==typeof i){var a=i;i=function(){var t=ju(s);a.call(t)}}var s=Vu(e,i,t,0,null,!1,0,"",Qu);return t._reactRootContainer=s,t[dr]=s.current,Hi(8===t.nodeType?t.parentNode:t),hu(),s}for(;r=t.lastChild;)t.removeChild(r);if("function"==typeof i){var o=i;i=function(){var t=ju(l);o.call(t)}}var l=Bu(t,0,!1,null,0,!1,0,"",Qu);return t._reactRootContainer=l,t[dr]=l.current,Hi(8===t.nodeType?t.parentNode:t),hu((function(){qu(e,l,n,i)})),l}(n,e,t,r,i);return ju(s)}Ku.prototype.render=Yu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(a(409));qu(t,e,null,null)},Ku.prototype.unmount=Yu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){qu(null,t,null,null)})),e[dr]=null}},Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ke.length&&0!==e&&e<ke[n].priority;n++);ke.splice(n,0,t),0===n&&Ne(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),ru(e,Jt()),0==(6&Al)&&(Vl=Jt()+500,Hr()))}break;case 13:hu((function(){var e=Aa(t,1);if(null!==e){var n=eu();iu(e,t,1,n)}})),Wu(t,1)}},xe=function(t){if(13===t.tag){var e=Aa(t,134217728);null!==e&&iu(e,t,134217728,eu()),Wu(t,134217728)}},Se=function(t){if(13===t.tag){var e=nu(t),n=Aa(t,e);null!==n&&iu(n,t,e,eu()),Wu(t,e)}},Ee=function(){return ye},Me=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}},xt=function(t,e,n){switch(e){case"input":if(Z(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=br(i);if(!r)throw Error(a(90));W(i),Z(i,r)}}}break;case"textarea":at(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},$t=cu,At=hu;var ec={usingClientEntryPoint:!1,Events:[yr,wr,br,Tt,Ct,cu]},nc={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=jt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{re=rc.inject(ic),ae=rc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(e))throw Error(a(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Ju(t))throw Error(a(299));var n=!1,i="",r=Xu;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Bu(t,1,!1,null,0,n,0,i,r),t[dr]=e.current,Hi(8===t.nodeType?t.parentNode:t),new Yu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return null===(t=jt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,n){if(!Zu(e))throw Error(a(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Ju(t))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",o=Xu;if(null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Vu(e,null,t,1,null!=n?n:null,r,0,s,o),t[dr]=e.current,Hi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ku(e)},e.render=function(t,e,n){if(!Zu(e))throw Error(a(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(a(40));return!!t._reactRootContainer&&(hu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[dr]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Zu(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return tc(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},279:(t,e,n)=>{"use strict";var i=n(457);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},457:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(936)},481:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),_=Symbol.iterator,d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||d}function v(){}function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||d}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=g.prototype;var w=y.prototype=new v;w.constructor=y,p(w,g.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,i){var r,a={},s=null,o=null;if(null!=e)for(r in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,r)&&!E.hasOwnProperty(r)&&(a[r]=e[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:t,key:s,ref:o,props:a,_owner:S.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function $(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,r,a,s){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=t),t=""===a?"."+$(l,0):a,b(s)?(r="",null!=t&&(r=t.replace(C,"$&/")+"/"),A(s,e,r,"",(function(t){return t}))):null!=s&&(T(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+t)),e.push(s)),1;if(l=0,a=""===a?".":a+":",b(t))for(var u=0;u<t.length;u++){var c=a+$(o=t[u],u);l+=A(o,e,r,c,s)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=_&&t[_]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),u=0;!(o=t.next()).done;)l+=A(o=o.value,e,r,c=a+$(o,u++),s);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function R(t,e,n){if(null==t)return t;var i=[],r=0;return A(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function O(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var I={current:null},k={transition:null},U={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};e.Children={map:R,forEach:function(t,e,n){R(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return R(t,(function(){e++})),e},toArray:function(t){return R(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=r,e.Profiler=s,e.PureComponent=y,e.StrictMode=a,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,e.cloneElement=function(t,e,i){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=p({},t.props),a=t.key,s=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,o=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)x.call(e,u)&&!E.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:t.type,key:a,ref:s,props:r,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=M,e.createFactory=function(t){var e=M.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:O}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=k.transition;k.transition={};try{t()}finally{k.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return I.current.useCallback(t,e)},e.useContext=function(t){return I.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return I.current.useDeferredValue(t)},e.useEffect=function(t,e){return I.current.useEffect(t,e)},e.useId=function(){return I.current.useId()},e.useImperativeHandle=function(t,e,n){return I.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return I.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return I.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return I.current.useMemo(t,e)},e.useReducer=function(t,e,n){return I.current.useReducer(t,e,n)},e.useRef=function(t){return I.current.useRef(t)},e.useState=function(t){return I.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return I.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return I.current.useTransition()},e.version="18.2.0"},204:(t,e,n)=>{"use strict";t.exports=n(481)},221:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<a(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,s=r>>>1;i<s;){var o=2*(i+1)-1,l=t[o],u=o+1,c=t[u];if(0>a(l,n))u<r&&0>a(c,l)?(t[i]=c,t[u]=n,i=u):(t[i]=l,t[o]=n,i=o);else{if(!(u<r&&0>a(c,n)))break t;t[i]=c,t[u]=n,i=u}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,_=3,d=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function w(t){for(var e=i(c);null!==e;){if(null===e.callback)r(c);else{if(!(e.startTime<=t))break;r(c),e.sortIndex=e.expirationTime,n(u,e)}e=i(c)}}function b(t){if(m=!1,w(t),!p)if(null!==i(u))p=!0,k(x);else{var e=i(c);null!==e&&U(b,e.startTime-t)}}function x(t,n){p=!1,m&&(m=!1,v(T),T=-1),d=!0;var a=_;try{for(w(n),f=i(u);null!==f&&(!(f.expirationTime>n)||t&&!A());){var s=f.callback;if("function"==typeof s){f.callback=null,_=f.priorityLevel;var o=s(f.expirationTime<=n);n=e.unstable_now(),"function"==typeof o?f.callback=o:f===i(u)&&r(u),w(n)}else r(u);f=i(u)}if(null!==f)var l=!0;else{var h=i(c);null!==h&&U(b,h.startTime-n),l=!1}return l}finally{f=null,_=a,d=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,T=-1,C=5,$=-1;function A(){return!(e.unstable_now()-$<C)}function R(){if(null!==M){var t=e.unstable_now();$=t;var n=!0;try{n=M(!0,t)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"==typeof y)S=function(){y(R)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,I=O.port2;O.port1.onmessage=R,S=function(){I.postMessage(null)}}else S=function(){g(R,0)};function k(t){M=t,E||(E=!0,S())}function U(t,n){T=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){p||d||(p=!0,k(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return i(u)},e.unstable_next=function(t){switch(_){case 1:case 2:case 3:var e=3;break;default:e=_}var n=_;_=e;try{return t()}finally{_=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=_;_=t;try{return e()}finally{_=n}},e.unstable_scheduleCallback=function(t,r,a){var s=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(t.sortIndex=a,n(c,t),null===i(u)&&t===i(c)&&(m?(v(T),T=-1):m=!0,U(b,a-s))):(t.sortIndex=o,n(u,t),p||d||(p=!0,k(x))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=_;return function(){var n=_;_=e;try{return t.apply(this,arguments)}finally{_=n}}}},489:(t,e,n)=>{"use strict";t.exports=n(221)},868:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n,i=e.$_$.d7,r=e.$_$.a8,a=e.$_$.z6,s=e.$_$.x6,o=e.$_$.b8,l=e.$_$.z7,u=e.$_$.bc,c=e.$_$.d;function h(t){for(var e=0,n=i(Array(t),null);e<t;)n[e]=m(null),e=e+1|0;this.jl_1=n}function f(){n=this,d.call(this)}function _(){return null==n&&new f,n}function d(){}function p(t){this.kotlinx$atomicfu$value=t}function m(t){return function(t,e){return e=e===c?_():e,new p(t)}(t,_())}function g(t){this.kotlinx$atomicfu$value=t}function v(t){this.kotlinx$atomicfu$value=t}function y(t){this.kotlinx$atomicfu$value=t}return o(h,"AtomicArray",s),o(d,"TraceBase",s),o(f,"None",l,d),o(p,"AtomicRef",s),o(g,"AtomicBoolean",s),o(v,"AtomicInt",s),o(y,"AtomicLong",s),r(h).kl=function(){return this.jl_1.length},r(h).atomicfu$get=function(t){return this.jl_1[t]},r(d).atomicfu$Trace$append$1=function(t){},r(d).atomicfu$Trace$append$2=function(t,e){},r(d).atomicfu$Trace$append$3=function(t,e,n){},r(d).atomicfu$Trace$append$4=function(t,e,n,i){},r(p).ll=function(t){this.kotlinx$atomicfu$value=t},r(p).ml=function(){return this.kotlinx$atomicfu$value},r(p).atomicfu$compareAndSet=function(t,e){return this.kotlinx$atomicfu$value===t&&(this.kotlinx$atomicfu$value=e,!0)},r(p).atomicfu$getAndSet=function(t){var e=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t,e},r(p).toString=function(){return u(this.kotlinx$atomicfu$value)},r(g).nl=function(t){this.kotlinx$atomicfu$value=t},r(g).ml=function(){return this.kotlinx$atomicfu$value},r(g).atomicfu$compareAndSet=function(t,e){return this.kotlinx$atomicfu$value===t&&(this.kotlinx$atomicfu$value=e,!0)},r(g).atomicfu$getAndSet=function(t){var e=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t,e},r(g).toString=function(){return this.kotlinx$atomicfu$value.toString()},r(v).ol=function(t){this.kotlinx$atomicfu$value=t},r(v).ml=function(){return this.kotlinx$atomicfu$value},r(v).atomicfu$compareAndSet=function(t,e){return this.kotlinx$atomicfu$value===t&&(this.kotlinx$atomicfu$value=e,!0)},r(v).atomicfu$getAndSet=function(t){var e=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t,e},r(v).atomicfu$getAndIncrement=function(){var t=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t+1|0,t},r(v).atomicfu$getAndDecrement=function(){var t=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t-1|0,t},r(v).atomicfu$getAndAdd=function(t){var e=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value+t|0,e},r(v).atomicfu$addAndGet=function(t){return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value+t|0,this.kotlinx$atomicfu$value},r(v).atomicfu$incrementAndGet=function(){return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value+1|0,this.kotlinx$atomicfu$value},r(v).atomicfu$decrementAndGet=function(){return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value-1|0,this.kotlinx$atomicfu$value},r(v).toString=function(){return this.kotlinx$atomicfu$value.toString()},r(y).pl=function(t){this.kotlinx$atomicfu$value=t},r(y).ml=function(){return this.kotlinx$atomicfu$value},r(y).atomicfu$compareAndSet=function(t,e){return!!this.kotlinx$atomicfu$value.equals(t)&&(this.kotlinx$atomicfu$value=e,!0)},r(y).atomicfu$getAndSet=function(t){var e=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t,e},r(y).atomicfu$getAndIncrement$long=function(){var t=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t.ga(),t},r(y).atomicfu$getAndDecrement$long=function(){var t=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=t.ha(),t},r(y).atomicfu$getAndAdd$long=function(t){var e=this.kotlinx$atomicfu$value;return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value.ba(t),e},r(y).atomicfu$addAndGet$long=function(t){return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value.ba(t),this.kotlinx$atomicfu$value},r(y).atomicfu$incrementAndGet$long=function(){return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value.ga(),this.kotlinx$atomicfu$value},r(y).atomicfu$decrementAndGet$long=function(){return this.kotlinx$atomicfu$value=this.kotlinx$atomicfu$value.ha(),this.kotlinx$atomicfu$value},r(y).toString=function(){return this.kotlinx$atomicfu$value.toString()},a(r(h),"atomicfu$size",r(h).kl),t.$_$=t.$_$||{},t.$_$.a=function(t){return new h(t)},t.$_$.b=function(t){return function(t,e){return e=e===c?_():e,new g(t)}(t,_())},t.$_$.c=function(t){return function(t,e){return e=e===c?_():e,new y(t)}(t,_())},t.$_$.d=m,t.$_$.e=function(t){return function(t,e){return e=e===c?_():e,new v(t)}(t,_())},t})?i.apply(e,r):i)||(t.exports=a)},843:function(t,e,n){var i,r,a;r=[e,n(585),n(6),n(279),n(553),n(204),n(748),n(675),n(866),n(115),n(706),n(298),n(738),n(787),n(997),n(754),n(646),n(368),n(735),n(107)],void 0===(a="function"==typeof(i=function(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y){"use strict";var w,b,x,S,E,M,T,C,$,A,R,O,I,k,U,P,D,N,L,z,F,B,H,V,q,j,G,W,X,Y,K,J,Z,Q,tt,et,nt,it,rt,at,st,ot,lt,ut,ct,ht,ft,_t,dt,pt,mt,gt,vt,yt,wt,bt,xt,St,Et,Mt,Tt,Ct,$t=Math.imul,At=n.OrbitControls,Rt=i.createRoot,Ot=a.useState,It=s.css,kt=o.$_$.a8,Ut=o.$_$.h7,Pt=o.$_$.ib,Dt=o.$_$.b7,Nt=o.$_$.x6,Lt=o.$_$.b8,zt=o.$_$.a3,Ft=o.$_$.g,Bt=o.$_$.c8,Ht=o.$_$.cc,Vt=o.$_$.h,qt=o.$_$.q5,jt=o.$_$.l,Gt=o.$_$.e8,Wt=l.$_$.l,Xt=o.$_$.z7,Yt=o.$_$.o6,Kt=o.$_$.xa,Jt=o.$_$.y7,Zt=o.$_$.wb,Qt=o.$_$.r3,te=o.$_$.k7,ee=o.$_$.j7,ne=o.$_$.t3,ie=o.$_$.s3,re=(o.$_$.t2,o.$_$.e7),ae=(o.$_$.s2,o.$_$.a7),se=o.$_$.d8,oe=o.$_$.u7,le=o.$_$.sb,ue=o.$_$.p6,ce=u.$_$.c,he=o.$_$.db,fe=o.$_$.v5,_e=o.$_$.o2,de=o.$_$.lb,pe=o.$_$.l2,me=o.$_$.kb,ge=o.$_$.f8,ve=o.$_$.m5,ye=o.$_$.k5,we=o.$_$.d,be=o.$_$.l4,xe=c.$_$.i,Se=o.$_$.v2,Ee=c.$_$.l,Me=c.$_$.n,Te=o.$_$.fb,Ce=o.$_$.m2,$e=o.$_$.d7,Ae=o.$_$.ac,Re=u.$_$.b,Oe=o.$_$.m6,Ie=h.$_$.i,ke=o.$_$.x5,Ue=o.$_$.aa,Pe=c.$_$.f,De=c.$_$.g,Ne=o.$_$.n8,Le=c.$_$.e,ze=c.$_$.d,Fe=u.$_$.d,Be=h.$_$.h,He=h.$_$.a,Ve=o.$_$.n3,qe=o.$_$.u4,je=o.$_$.k8,Ge=o.$_$.k,We=h.$_$.j,Xe=o.$_$.a9,Ye=o.$_$.y8,Ke=o.$_$.ma,Je=o.$_$.ea,Ze=o.$_$.ga,Qe=o.$_$.r4,tn=(c.$_$.h,c.$_$.j),en=c.$_$.m,nn=c.$_$.k,rn=c.$_$.a,an=f.$_$.b,sn=c.$_$.b,on=o.$_$.i4,ln=o.$_$.y1,un=o.$_$.f2,cn=_.$_$.c,hn=_.$_$.d,fn=d.$_$.f,_n=_.$_$.e,dn=p.$_$.b,pn=o.$_$.w2,mn=o.$_$.pb,gn=o.$_$.a,vn=p.$_$.k,yn=o.$_$.f9,wn=o.$_$.qa,bn=o.$_$.n2,xn=c.$_$.c,Sn=o.$_$.b4,En=m.$_$.j,Mn=m.$_$.x,Tn=m.$_$.k1,Cn=o.$_$.g8,$n=g.$_$.b,An=o.$_$.s7,Rn=o.$_$.w7,On=u.$_$.a,In=o.$_$.la,kn=o.$_$.u5,Un=o.$_$.g4,Pn=o.$_$.a1,Dn=o.$_$.yb,Nn=o.$_$.qb,Ln=o.$_$.x9,zn=o.$_$.g2,Fn=m.$_$.y,Bn=o.$_$.r7,Hn=_.$_$.a,Vn=o.$_$.w9,qn=o.$_$.ka,jn=o.$_$.o7,Gn=_.$_$.b,Wn=_.$_$.f,Xn=o.$_$.a4,Yn=v.$_$.a,Kn=(y.$_$.a,o.$_$.t8),Jn=o.$_$.jb,Zn=o.$_$.g7,Qn=m.$_$.k,ti=g.$_$.a,ei=o.$_$.t4,ni=o.$_$.w4,ii=o.$_$.k3,ri=o.$_$.x3,ai=o.$_$.j4,si=o.$_$.n5;function oi(t,e,n,i){this.z59_1=t,this.a5a_1=e,this.b5a_1=n,this.c5a_1=i}function li(){}function ui(){}function ci(){return null==D&&(D=Yt([Bi(),(hi(),x),(hi(),S),(hi(),E),(hi(),M),(hi(),T),(hi(),C),(hi(),$),(hi(),A),(hi(),R),(hi(),O),(hi(),I),(hi(),k)])),D}function hi(){if(P)return zt;P=!0,b=new fi("TAG_End",0,0),x=new fi("TAG_Byte",1,1),S=new fi("TAG_Short",2,2),E=new fi("TAG_Int",3,3),M=new fi("TAG_Long",4,4),T=new fi("TAG_Float",5,5),C=new fi("TAG_Double",6,6),$=new fi("TAG_Byte_Array",7,7),A=new fi("TAG_String",8,8),R=new fi("TAG_List",9,9),O=new fi("TAG_Compound",10,10),I=new fi("TAG_Int_Array",11,11),k=new fi("TAG_Long_Array",12,12)}function fi(t,e,n){Kt.call(this,t,e),this.k5a_1=n}function _i(t){return function(t,e){return $i.call(e,t.ok()),e}(t,Jt(kt($i)))}function di(t){return function(t,e){return Ai.call(e,t.pk()),e}(t,Jt(kt(Ai)))}function pi(t){return function(t,e){return Ri.call(e,t.qk()),e}(t,Jt(kt(Ri)))}function mi(t){return function(t,e){return Oi.call(e,t.rk()),e}(t,Jt(kt(Oi)))}function gi(t,e){return Ii.call(e,(n=t.qk(),re(n))),e;var n}function vi(t,e){return ki.call(e,(n=t.rk(),ae(n))),e;var n}function yi(t,e){return Ui.call(e,(i=(n=t).qk(),n.tk(se(i)))),e;var n,i}function wi(t,e){return Pi.call(e,(i=(n=t).pk(),n.sk(se(i)))),e;var n,i}function bi(t,e){return Di.call(e,function(t){var e=le(U.h5a(t.ok())),n=t.qk(),i=Ft(n),r=0;if(r<n)do{r=r+1|0;var a=N.l5a(e,t);i.p(a)}while(r<n);return i}(t)),e}function xi(t,e){return Ni.call(e,function(t){var e=jt();try{t:for(;;){var n=U.h5a(t.ok());if(null==n)break t;var i=n;if(i.equals(Bi()))break t;var r=t.pk(),a=t.sk(se(r)),s=N.l5a(i,t);e.a2(a,s)}}catch(t){if(t instanceof ce)return ue("EOF EXCEPTION"),e;throw t}return e}(t)),e}function Si(t){return xi(t,Jt(kt(Ni)))}function Ei(t,e){return Li.call(e,function(t){for(var e=t.qk(),n=0,i=new Int32Array(e);n<e;)i[n]=t.qk(),n=n+1|0;return i}(t)),e}function Mi(t,e){return zi.call(e,function(t){for(var e=t.qk(),n=0,i=oe(e);n<e;)i[n]=t.rk(),n=n+1|0;return i}(t)),e}function Ti(){}function Ci(){L=this,Fi.call(this,0,"TAG_End")}function $i(t){Fi.call(this,1,"TAG_Byte"),this.q5a_1=t}function Ai(t){Fi.call(this,2,"TAG_Short"),this.t5a_1=t}function Ri(t){Fi.call(this,3,"TAG_Int"),this.w5a_1=t}function Oi(t){Fi.call(this,4,"TAG_Long"),this.z5a_1=t}function Ii(t){Fi.call(this,5,"TAG_Float"),this.c5b_1=t}function ki(t){Fi.call(this,6,"TAG_Double"),this.f5b_1=t}function Ui(t){Fi.call(this,7,"TAG_Byte_Array"),this.i5b_1=t}function Pi(t){Fi.call(this,8,"TAG_String"),this.l5b_1=t}function Di(t){Fi.call(this,9,"TAG_List"),this.o5b_1=t}function Ni(t){Fi.call(this,10,"TAG_Compound"),this.r5b_1=t}function Li(t){Fi.call(this,11,"TAG_Int_Array"),this.u5b_1=t}function zi(t){Fi.call(this,12,"TAG_Long_Array"),this.x5b_1=t}function Fi(t,e){this.m5a_1=t,this.n5a_1=e}function Bi(){return hi(),b}function Hi(t){this.y5b_1=t}function Vi(t,e){var n=e.cd_1,i=t.cd_1;return fe(n,i)}function qi(t){var e,n=t.bd_1;if("number"==typeof n){var i=pe(n);e=new me(i)}else if("number"==typeof n){var r=_e(n);e=new de(r)}else e=n;return ge(e)+": "+t.cd_1}function ji(t,e,n){this.z5b_1=t,this.a5c_1=e,this.b5c_1=n}function Gi(t,e,n,i){ji.call(this,t,e,i),this.j5c_1=n}function Wi(t,e,n,i){ji.call(this,t,e,i),this.t5c_1=n}function Xi(){z=this,this.u5c_1=9,this.v5c_1=1<<this.u5c_1,this.w5c_1=$t(this.v5c_1,this.v5c_1)}function Yi(){return null==z&&new Xi,z}function Ki(){for(var t=0,e=Yi().v5c_1,n=$e(Array(e),null);t<e;){for(var i=t,r=0,a=Yi().v5c_1,s=new Int16Array(a);r<a;)s[r]=0,r=r+1|0;n[i]=s,t=t+1|0}this.x5c_1=n;for(var o=0,l=Yi().v5c_1,u=$e(Array(l),null);o<l;){for(var c=o,h=0,f=Yi().v5c_1,_=new Int16Array(f);h<f;)_[h]=0,h=h+1|0;u[c]=_,o=o+1|0}this.y5c_1=u;for(var d=0,p=Yi().v5c_1,m=$e(Array(p),null);d<p;){for(var g=d,v=0,y=Yi().v5c_1,w=new Int16Array(y);v<y;)w[v]=0,v=v+1|0;m[g]=w,d=d+1|0}this.z5c_1=m;for(var b=0,x=Yi().v5c_1,S=$e(Array(x),null);b<x;){for(var E=b,M=0,T=Yi().v5c_1,C=new Int8Array(T);M<T;)C[M]=0,M=M+1|0;S[E]=C,b=b+1|0}this.a5d_1=S;for(var $=0,A=Yi().v5c_1,R=$e(Array(A),null);$<A;){for(var O=$,I=0,k=Yi().v5c_1,U=new Int8Array(k);I<k;)U[I]=0,I=I+1|0;R[O]=U,$=$+1|0}this.b5d_1=R;for(var P=0,D=Yi().v5c_1,N=$e(Array(D),null);P<D;){for(var L=P,z=0,F=Yi().v5c_1,B=new Int8Array(F);z<F;)B[z]=0,z=z+1|0;N[L]=B,P=P+1|0}this.c5d_1=N}function Ji(){F=this,this.m5c_1=xe().g3b(0,0,0,255),this.n5c_1=xe().g3b(255,255,255,255),this.o5c_1=xe().g3b(0,0,255,255),this.p5c_1=xe().g3b(0,0,0,0)}function Zi(){return null==F&&new Ji,F}function Qi(){}function tr(){}function er(){if(q)return zt;q=!0,H=new or("SHORT",0),V=new or("BYTE",1)}function nr(){if(Y)return zt;Y=!0,j=new lr("HEIGHT",0,Sr()),G=new lr("BLOCKSTATE",1,xr()),W=new lr("LIGHT",2,Sr()),X=new lr("BIOMEID",3,xr())}function ir(){return null==ct&&(ct=Yt([(rr(),K),(rr(),J),(rr(),Z),(rr(),Q),(rr(),tt),(rr(),et),(rr(),nt),(rr(),it),(rr(),rt),(rr(),at),(rr(),st),(rr(),ot),(rr(),lt)])),ct}function rr(){if(ut)return zt;ut=!0,K=new ur("HEIGHT",0,0,Er()),J=new ur("BLOCKSTATE",1,1,Mr()),Z=new ur("LIGHT",2,3,Tr()),Q=new ur("OCEANFLOORHEIGHT",3,4,Er()),tt=new ur("OCEANFLOORBLOCKSTATE",4,5,Mr()),et=new ur("OCEANFLOORLIGHT",5,7,Tr()),nt=new ur("TRANSPARENTHEIGHT",6,8,Er()),it=new ur("TRANSPARENTBLOCKSTATE",7,9,Mr()),rt=new ur("TRANSPARENTLIGHT",8,11,Tr()),at=new ur("FOLIAGEHEIGHT",9,12,Er()),st=new ur("FOLIAGEBLOCKSTATE",10,13,Mr()),ot=new ur("FOLIAGELIGHT",11,15,Tr()),lt=new ur("BIOMEID",12,16,(nr(),X))}function ar(t,e,n,i){var r=(e+$t(n,256)|0)+$t(65536,i)|0;return t.r3a()[r]}function sr(t,e){var n,i=new Re,r=e.k5d_1,a=$t(65536,r);switch(e.l5d_1.o5d_1.n9_1){case 1:var s=0;if(s<256)do{s=s+1|0;var o=0;if(o<256)do{o=o+1|0;var l=t.r3a(),u=a;a=u+1|0,i.bl(l[u])}while(o<256)}while(s<256);n=new Wi(256,256,i.uk(),e.l5d_1);break;case 0:var c=0;if(c<256)do{c=c+1|0;var h=0;if(h<256)do{h=h+1|0,i.bl(t.r3a()[a]);var f=t.r3a(),_=a;a=_+1|0,i.bl(f[_+65536|0])}while(h<256)}while(c<256);n=new Gi(256,256,w.d5a(i),e.l5d_1);break;default:Zt()}return n}function or(t,e){Kt.call(this,t,e)}function lr(t,e,n){Kt.call(this,t,e),this.o5d_1=n}function ur(t,e,n,i){Kt.call(this,t,e),this.k5d_1=n,this.l5d_1=i}function cr(){this.p5d_1=256,this.q5d_1=256,this.r5d_1=65536,this.s5d_1=18,this.t5d_1=0,this.u5d_1=1,this.v5d_1=3,this.w5d_1=4,this.x5d_1=5,this.y5d_1=7,this.z5d_1=8,this.a5e_1=9,this.b5e_1=11,this.c5e_1=12,this.d5e_1=13,this.e5e_1=15,this.f5e_1=16}function hr(t){Oe.call(this,t)}function fr(t){var e=new hr(t),n=function(t,n){return e.p5e(t,n)};return n.$arity=1,n}function _r(t){return"New entry. Key: ["+t.bd_1+"], Value: ["+t.cd_1+"]"}function dr(t){return Ue(t,[" "])}function pr(t){return 2===t.n()}function mr(t){return t.bd_1+" -> "+Pe(t.cd_1.b38_1)}function gr(t){return Pe(t.cd_1.b38_1)}function vr(t){return function(e,n){var i,r=B.l5c().k2(function(t,e,n){return Bt((255&ar(t,e,n,1))<<8|255&ar(t,e,n,2))}(t,e,n)),a=null==r?null:r.b38_1;return i=null==(null==a?null:new Me(a))?Zi().o5c_1:a,new Me(i)}}function yr(t){return function(e,n){var i,r=De(t.t36(e,n));if(0===n){var a=De(t.t36(e,n)),s=De(t.t36(e,n+1|0));i=$t(s-a|0,2)}else if(n===(r-1|0)){var o=De(t.t36(e,n-1|0)),l=De(t.t36(e,n));i=$t(l-o|0,2)}else{var u=De(t.t36(e,n-1|0));i=De(t.t36(e,n+1|0))-u|0}var c,h=Ne(i,-128,127);switch(e){case 0:var f=De(t.t36(e,n)),_=De(t.t36(e+1|0,n));c=$t(_-f|0,2);break;case 255:var d=De(t.t36(e-1|0,n)),p=De(t.t36(e,n));c=$t(p-d|0,2);break;default:var m=De(t.t36(e-1|0,n));c=De(t.t36(e+1|0,n))-m|0}var g=Ne(c,-128,127),v=r;return new Me(xe().g3b(h,g,v,255))}}function wr(t,e,n,i,r,a,s,o,l){return function(u,c){var h=t.t36(u,c),f=De(h),_=Le(h),d=e[f+n|0],p=e[_+n|0],m=xe().i3b(.1+1.5*(d*i+p*r),.1+1.5*(d*a+p*s),.1+1.5*(d*o+p*l),1);return new Me(m)}}function br(t,e,n,i,r,a,s,o,l,u,c){return function(h,f){var _=t.t36(h,f),d=De(_),p=Le(_),m=e.t36(h,f),g=n[d+i|0],v=n[p+i|0],y=.8+2.5*(g*r+v*a),w=.8+2.5*(g*s+v*o),b=.8+2.5*(g*l+v*u),x=xe().i3b(c*De(m)*y,c*Le(m)*w,c*ze(m)*b,1);return new Me(x)}}function xr(){return er(),H}function Sr(){return er(),V}function Er(){return nr(),j}function Mr(){return nr(),G}function Tr(){return nr(),W}function Cr(t,e,n,i){Oe.call(this,i),this.z5e_1=t,this.a5f_1=e,this.b5f_1=n}function $r(){Qi.call(this),this.f5d_1="",this.g5d_1="",this.h5d_1=jt()}function Ar(){ht=this,this.c5h_1=new he(64,0)}function Rr(t){return function(e){return Fe(e).vk(t),zt}}function Or(){null==ht&&new Ar,Qi.call(this)}function Ir(t){Oe.call(this,t)}function kr(t){var e=new Ir(t),n=function(t,n){return e.p5e(t,n)};return n.$arity=1,n}function Ur(t){return"New entry. Key: ["+t.bd_1+"], Value: ["+t.cd_1.length+"]"}function Pr(t,e,n,i){Oe.call(this,i),this.v5h_1=t,this.w5h_1=e,this.x5h_1=n}function Dr(){Qi.call(this)}function Nr(){ft=this,this.h5i_1=new Lr(0,0,0,0),this.i5i_1=new Lr(1,1,1,1),this.j5i_1=new Lr(0,0,0,1),this.k5i_1=new Lr(1,0,0,1),this.l5i_1=new Lr(0,1,0,1),this.m5i_1=new Lr(0,0,1,1)}function Lr(t,e,n,i){null==ft&&new Nr,i=i===we?1:i,this.n5i_1=t,this.o5i_1=e,this.p5i_1=n,this.q5i_1=i}function zr(t,e,n){Oe.call(this,n),this.z5i_1=t,this.a5j_1=e}function Fr(){this.o5j_1=Sn()}function Br(){return aa(),_t}function Hr(){return aa(),dt}function Vr(){return aa(),pt}function qr(){if(aa(),null!=mt)return mt;Ae("controls")}function jr(){if(aa(),null!=gt)return gt;Ae("textureUv")}function Gr(t){aa(),vt=t}function Wr(){if(aa(),null!=vt)return vt;Ae("averageColor")}function Xr(t){aa(),yt=t}function Yr(t,e){var n=new ra(t,e);return n.va_1=zt,n.wa_1=null,n.gb()}function Kr(t){aa();var n=Hr().children.length-1,i=Rn(An(n)?n:Pt());ue("Found "+i+" objects");var a=i;if(0<=a)do{var s=a;a=a+-1|0;var o=Hr();if(ue("Maybe deleting "+o.children[s].type),"Mesh"==Hr().children[s].type||"Group"==Hr().children[s].type){var l=Hr(),u=Hr().children[s];l.remove(u instanceof e.Object3D?u:Pt())}}while(0<=a);La().v(),ue(On(t)),ue(In(t));var c=r.ungzip(new Uint8Array(kn(t)));ue(c);var h=new Re;h.yk(c),ue("buffer written");var f=Si(h);ue(f);var _=f.x1e(""),d=null==_?null:_.x1e("Metadata"),p=le(null==d?null:d.x1e("EnclosingSize")),m=p.x1e("x"),g=(m instanceof Ri?m:Pt()).w5a_1,v=p.x1e("y"),y=(v instanceof Ri?v:Pt()).w5a_1,w=p.x1e("z"),b=(w instanceof Ri?w:Pt()).w5a_1;ue("schematic size("+$t($t(g,y),b)+"): "+g+", "+y+", "+b);var x=f.x1e(""),S=null==x?null:x.x1e("Regions"),E=S instanceof Ni?S:Pt(),M=Un(E.x1());if(null==M)throw Pn("No regions found");var T=M,C=E.x1e(T),$=null==C?null:C.x1e("BlockStatePalette"),A=$ instanceof Di?$:Pt(),R=A.o5b_1.n(),O=Nn(Dn(R))+1|0;ue("palette size: "+R+", nBits: "+O);var I=E.x1e(T),k=null==I?null:I.x1e("BlockStates"),U=function(t,e,n){var i=Vt(),r=0,a=0;if(a<n)do{a=a+1|0;var s=r/64|0,o=((r+e|0)-1|0)/64|0,l=r%64|0;if(s===o){var u=t[s],c=new he(1,0).la(e).ca(se(1)),h=u.ma(l).oa(c);i.p(h)}else{var f=64-l|0,_=e-f|0,d=t[s],p=new he(1,0).la(f).ca(se(1)),m=d.ma(l).oa(p),g=t[o],v=new he(1,0).la(_).ca(se(1)),y=g.ma(0).oa(v);i.p(m.pa(y.la(f)))}r=r+e|0}while(a<n);return i}((k instanceof zi?k:Pt()).x5b_1,O,$t($t(g,y),b));ue("Blocks count: "+U.n()),ue(U),new e.TextureLoader;for(var P=A.o5b_1,D=Ft(Ve(P,10)),N=P.s();N.t();){var L=N.u().x1e("Name"),z=Ln((L instanceof Pi?L:Pt()).l5b_1,"minecraft:","");D.p(z)}var F=D,B=0,H=$t($t(g,y),b);if(B<H)do{var V=B;B=B+1|0,La().f5n(F.d1(U.d1(V).y8()))}while(B<H);var q=-1,j=new e.Group;Hr().add(j);var G=0;if(G<y)do{var W=G;G=G+1|0;var X=0;if(X<b)do{var Y=X;X=X+1|0;var K=0;if(K<g)do{var J=K;K=K+1|0,q=q+1|0;var Z=U.d1(q).y8(),Q=F.d1(Z);if("air"!==Q){var tt=Wr().k2(Q);(null==tt?new Lr(0,0,0,0):tt).q5i_1>.99?La().h5n(Q,J,Y,W,j):La().g5n(Q,J,Y,W,j)}}while(K<g)}while(X<b)}while(G<y);var et=((g+y|0)+b|0)/3;Vr().position.set(.5*(et+g),.5*(et+b),.5*(et+$t(y,2))),qr().target.set(0,0,.5*y),j.position.set(.5*(0|-g),.5*(0|-b),0)}function Jr(t){return aa(),jr().h2(t)}function Zr(t){aa();var e="static/textures/",n=".png";if(Jr(t))return e+t+n;var i=Ln(Ln(Ln(Ln(Ln(Ln(Ln(t,"_stairs",""),"_slab",""),"smooth_",""),"infested_",""),"stripped_",""),"wall_",""),"waxed_","");return Jr(i)?e+i+n:Jr(i+zn(ln(115)))?e+i+zn(ln(115))+n:Jr(i+"_block")?e+i+"_block"+n:Jr(i+"_top")?e+i+"_top"+n:Jr(i+"_front")?e+i+"_front"+n:Jr(i+"_side")?e+i+"_side"+n:Jr(i+"_planks")?e+i+"_planks"+n:Jr(Ln(i,"_carpet","_wool"))?e+Ln(i,"_carpet","_wool")+n:Jr(Ln(i,"_carpet","_block"))?e+Ln(i,"_carpet","_block")+n:Jr(Ln(i,"wood","log"))?e+Ln(i,"wood","log")+n:Jr(Ln(i,"pressure_plate","planks"))?e+Ln(i,"pressure_plate","planks")+n:Jr(Ln(i,"sticky_piston","piston_top_sticky"))?e+Ln(i,"sticky_piston","piston_top_sticky")+n:null}function Qr(t,e,n){var i,r,a;qr().update(n),t.render(Hr(),Vr()),window.requestAnimationFrame((i=t,r=e,(a=function(t){return Qr(i,r,t),zt}).callableName="animate",a)),0==(e._v%60|0)&&(t.info.memory.geometries,t.info.memory.textures,t.info.memory.programs,t.info.render.calls),e._v=e._v+1|0}function ta(t){return aa(),t.minFilter=e.NearestFilter,t.magFilter=e.NearestFilter,t.anisotropy=0,t.colorSpace=e.SRGBColorSpace,zt}function ea(t){Oe.call(this,t)}function na(t){return aa(),t.name="stone_generator.litematic",zt}function ia(t){Oe.call(this,t)}function ra(t,e){Oe.call(this,e),this.p5m_1=t}function aa(){wt||(wt=!0,_t=Wn(Gn),dt=new e.Scene,pt=new e.PerspectiveCamera(60,1.5,.1,1e3))}function sa(){}function oa(){xt=this,this.r5n_1=new e.TextureLoader}function la(){return null==xt&&new oa,xt}function ua(t){return t.minFilter=e.NearestFilter,t.magFilter=e.NearestFilter,t.anisotropy=0,t.wrapS=e.RepeatWrapping,t.wrapT=e.RepeatWrapping,t.colorSpace=e.SRGBColorSpace,zt}function ca(t,e,n){la(),this.d5m_1=t,this.e5m_1=e,this.f5m_1=n}function ha(){St=this,this.m5j_1=Wn(Gn)}function fa(){return null==St&&new ha,St}function _a(t,e){Ua();var n,i=Ot(e.name),r=Ot("stone"),a=Ot(""),s=Ot(""),o=Ot(""),l=Sn(),u=Ot(l),c=Ot(""),h=Xn(),f=Ot(h);Yn((n=f,function(t){return Tn(Qn,we,we,function(t,e){var n=new ya(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}(n,null)),zt}));t.y59("div",function(t){return function(e){for(var n=function(t){return Ua(),Zn("schematics.txt",Kn,!0,(function(){return Jn()})),t[0]}(t).s();n.t();){var i=n.u(),r="button";e.y59(r,xa(i))}return zt}}(f));var _,d;t.y59("div",(_=r,d=a,function(t){t.x59("Block verifier");var e="input";t.y59(e,function(t){return function(e){return e.value=pa(t),e.onChange=function(t){return function(e){return function(t,e){Ua(),Zn("blockName",Kn,!0,(function(){return Jn()})),t[1](e)}(t,e.target.value),zt}}(t),zt}}(_));var n="button";t.y59(n,function(t,e){return function(n){return n.x59("Verify"),n.onClick=function(t,e){return function(n){return Tn(Qn,we,we,function(t,e,n){var i=new Sa(t,e,n),r=function(t,e){return i.m1j(t,e)};return r.$arity=1,r}(t,e,null)),zt}}(t,e),zt}}(_,d));var i="div";t.y59(i,function(t){return function(e){return e.x59("Result: "+function(t){return Ua(),Zn("verifyResult",Kn,!0,(function(){return Jn()})),t[0]}(t)),zt}}(d));var r,a=Ot(""),s="button";t.y59(s,(r=a,function(t){return t.x59("Some button"),t.onClick=function(t){return function(e){return Tn(Qn,we,we,function(t,e){var n=new Ea(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}(t,null)),zt}}(r),zt}));var o="div";return t.y59(o,function(t){return function(e){return e.x59("Result: "+function(t){return Ua(),Zn("someResult",Kn,!0,(function(){return Jn()})),t[0]}(t)),zt}}(a)),zt}));var p;t.y59("div",(p=i,function(t){var e={};return e.padding=ge(5)+"px",e.backgroundColor="rgb(8,97,22)",e.color="rgb(56,246,137)",t.className=It(e),t.x59("Hello, "+da(p)),zt}));t.y59("div",Ma);var m;t.y59("img",(m=s,function(t){return t.id="heightMap",t.src=function(t){return Ua(),Zn("heightMap",Kn,!0,(function(){return Jn()})),t[0]}(m),zt}));var g;t.y59("img",(g=o,function(t){return t.id="blockMap",t.src=function(t){return Ua(),Zn("blockMap",Kn,!0,(function(){return Jn()})),t[0]}(g),zt}));t.y59("input",function(t){return function(e){var n={};return n.marginTop=ge(5)+"px",n.marginBottom=ge(5)+"px",n.fontSize=ge(14)+"px",e.className=It(n),e.type="text",e.value=da(t),e.onChange=function(t){return function(e){return function(t,e){Ua(),Zn("name",Kn,!0,(function(){return Jn()})),t[1](e)}(t,e.target.value),zt}}(t),zt}}(i));t.y59("button",function(t){return function(e){e.id="submit";var n={};return n.marginTop=ge(5)+"px",n.marginBottom=ge(5)+"px",n.fontSize=ge(14)+"px",e.className=It(n),e.x59("Submit"),e.onClick=function(t){return function(e){return ue("button clicked"),Tn(Qn,we,we,function(t,e){var n=new $a(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}(t,null)),zt}}(t),zt}}(i));t.y59("button",function(t){return function(e){e.id="loadWhyMap";var n={};return n.marginTop=ge(5)+"px",n.marginBottom=ge(5)+"px",n.fontSize=ge(14)+"px",e.className=It(n),e.x59("Load WhyMap"),e.onClick=function(t){return function(e){return ue("button clicked"),Tn(Qn,we,we,function(t,e){var n=new Aa(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}(t,null)),zt}}(t),zt}}(i));t.y59("button",function(t,e,n,i){return function(r){r.id="loadVoxel";var a={};return a.marginTop=ge(5)+"px",a.marginBottom=ge(5)+"px",a.fontSize=ge(14)+"px",r.className=It(a),r.x59("Load Voxel"),r.onClick=function(t,e,n,i){return function(r){return ue("button clicked"),Tn(Qn,we,we,function(t,e,n,i,r){var a=new Ra(t,e,n,i,r),s=function(t,e){return a.m1j(t,e)};return s.$arity=1,s}(t,e,n,i,null)),zt}}(t,e,n,i),zt}}(i,s,o,u));t.y59("button",function(t){return function(e){e.id="loadXaero";var n={};return n.marginTop=ge(5)+"px",n.marginBottom=ge(5)+"px",n.fontSize=ge(14)+"px",e.className=It(n),e.x59("Load Xaero"),e.onClick=function(t){return function(e){return ue("button clicked"),Tn(Qn,we,we,function(t,e){var n=new Oa(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}(t,null)),zt}}(t),zt}}(i));var v,y;t.y59("img",(v=u,y=c,function(t){t.id="layer";var e=ga(v).k2(function(t){return Ua(),Zn("layerSelected",Kn,!0,(function(){return Jn()})),t[0]}(y));t.src="data:image/png;base64,"+(null==e?"":e);var n={imageRendering:"crisp-edges"};return n.width=ge(512)+"px",n.height=ge(512)+"px",n.maxWidth="none",n.maxHeight="none",t.className=It(n),zt}));for(var w=ga(u).x1().s();w.t();){var b=w.u();t.y59("button",ka(b,c))}return zt}function da(t){return Ua(),Zn("name",Kn,!0,(function(){return Jn()})),t[0]}function pa(t){return Ua(),Zn("blockName",Kn,!0,(function(){return Jn()})),t[0]}function ma(t,e){return Ua(),Zn("blockMap",Kn,!0,(function(){return Jn()})),t[1](e)}function ga(t){return Ua(),Zn("encodedLayers",Kn,!0,(function(){return Jn()})),t[0]}function va(t,e){return Ua(),Zn("encodedLayers",Kn,!0,(function(){return Jn()})),t[1](e)}function ya(t,e){this.d5o_1=t,Oe.call(this,e)}function wa(t,e){this.v5o_1=t,Oe.call(this,e)}function ba(t){return function(e){return Tn(Qn,we,we,function(t,e){var n=new wa(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}(t,null)),zt}}function xa(t){return function(e){return e.x59(t),e.onClick=ba(t),zt}}function Sa(t,e,n){this.f5p_1=t,this.g5p_1=e,Oe.call(this,n)}function Ea(t,e){this.q5p_1=t,Oe.call(this,e)}function Ma(t){Ua(),t.id="drop_zone";var e={};return e.padding=ge(5)+"px",e.backgroundColor="rgb(8,97,22)",e.color="rgb(56,246,137)",t.className=It(e),t.x59("Drop schematic here"),t.onDragOver=Ta,t.onDrop=Ca,zt}function Ta(t){return Ua(),t.preventDefault(),ue("drag over"),zt}function Ca(t){Ua(),t.preventDefault(),ue("dropped");var e=t.dataTransfer.files;ue(e);var n=e[0],i=le(n);ue(i.name);var r,a=new FileReader;return a.onload=(r=a,function(t){ue("loaded");var e=r.result,n=e instanceof ArrayBuffer?e:Pt();return Kr(new Int8Array(n)),zt}),a.readAsArrayBuffer(i),zt}function $a(t,e){this.i5q_1=t,Oe.call(this,e)}function Aa(t,e){this.s5q_1=t,Oe.call(this,e)}function Ra(t,e,n,i,r){this.o5r_1=t,this.p5r_1=e,this.q5r_1=n,this.r5r_1=i,Oe.call(this,r)}function Oa(t,e){this.p5s_1=t,Oe.call(this,e)}function Ia(t,e){return function(n){return function(t,e){Ua(),Zn("layerSelected",Kn,!0,(function(){return Jn()})),t[1](e)}(e,t),zt}}function ka(t,e){return function(n){n.id="load"+t;var i={};return i.marginTop=ge(5)+"px",i.marginBottom=ge(5)+"px",i.fontSize=ge(14)+"px",n.className=It(i),n.x59("Load "+t),n.onClick=Ia(t,e),zt}}function Ua(){Mt||(Mt=!0,Et=ti(_a))}function Pa(){}function Da(t,e){var n=Zr(e),i=null==n?null:Ln(n,"static/textures/",""),r=null==i?null:Ln(i,".png","");return null==r?"none":r}function Na(){Tt=this,this.z5m_1=jt(),this.a5n_1=jt(),this.b5n_1=jt();var t=new Pa;t.color=65280,this.c5n_1=new e.MeshBasicMaterial(t);var n=new Pa;n.map=function(){if(aa(),null!=yt)return yt;Ae("textureAtlas.png")}(),n.transparent=!0,this.d5n_1=new e.MeshBasicMaterial(n),this.e5n_1=jt()}function La(){return null==Tt&&new Na,Tt}function za(){Ct=this,this.t5k_1=-.5,this.u5k_1=.5,this.v5k_1=0,this.w5k_1=1,this.x5k_1=0,this.y5k_1=1,this.z5k_1=new qa(1,1),this.a5l_1=new qa(0,1),this.b5l_1=new qa(0,0),this.c5l_1=new qa(1,0),this.d5l_1=new Ga(-.5,-.5,.5),this.e5l_1=new Ga(.5,-.5,.5),this.f5l_1=new Ga(.5,.5,.5),this.g5l_1=new Ga(-.5,.5,.5),this.h5l_1=new Ga(-.5,-.5,-.5),this.i5l_1=new Ga(.5,-.5,-.5),this.j5l_1=new Ga(.5,.5,-.5),this.k5l_1=new Ga(-.5,.5,-.5),this.l5l_1=new Wa(this.d5l_1,this.e5l_1,this.f5l_1,this.g5l_1),this.m5l_1=new Wa(this.h5l_1,this.k5l_1,this.j5l_1,this.i5l_1),this.n5l_1=new Wa(this.d5l_1,this.g5l_1,this.k5l_1,this.h5l_1),this.o5l_1=new Wa(this.e5l_1,this.i5l_1,this.j5l_1,this.f5l_1),this.p5l_1=new Wa(this.d5l_1,this.h5l_1,this.i5l_1,this.e5l_1),this.q5l_1=new Wa(this.g5l_1,this.f5l_1,this.j5l_1,this.k5l_1),this.r5l_1=ei([this.l5l_1,this.m5l_1]),this.s5l_1=ni([Ht(this.d5l_1,this.z5k_1),Ht(this.e5l_1,this.a5l_1),Ht(this.f5l_1,this.b5l_1),Ht(this.g5l_1,this.c5l_1),Ht(this.h5l_1,this.z5k_1),Ht(this.i5l_1,this.a5l_1),Ht(this.j5l_1,this.b5l_1),Ht(this.k5l_1,this.c5l_1)]),this.t5l_1=ei([this.n5l_1,this.o5l_1,this.p5l_1,this.q5l_1]),this.u5l_1=ni([Ht(this.d5l_1,this.z5k_1),Ht(this.e5l_1,this.a5l_1),Ht(this.f5l_1,this.z5k_1),Ht(this.g5l_1,this.a5l_1),Ht(this.h5l_1,this.c5l_1),Ht(this.i5l_1,this.b5l_1),Ht(this.j5l_1,this.c5l_1),Ht(this.k5l_1,this.b5l_1)]),this.v5l_1=new Ha(this.r5l_1,this.s5l_1).h5t(),this.w5l_1=new Ha(this.t5l_1,this.u5l_1).h5t(),this.x5l_1=this.v5l_1.l5t(this.w5l_1),this.y5l_1=this.x5l_1.c5m().s5n()}function Fa(){return null==Ct&&new za,Ct}function Ba(t,e,n){t=t===we?Vt():t,e=e===we?Vt():e,n=n===we?Vt():n,this.z5l_1=t,this.a5m_1=e,this.b5m_1=n}function Ha(t,e){this.f5t_1=t,this.g5t_1=e}function Va(t,e,n){this.i5t_1=t,this.j5t_1=e,this.k5t_1=n}function qa(t,e){this.t5t_1=t,this.u5t_1=e}function ja(t,e){this.m5t_1=t,this.n5t_1=e}function Ga(t,e,n){this.q5t_1=t,this.r5t_1=e,this.s5t_1=n}function Wa(t,e,n,i){this.v5t_1=t,this.w5t_1=e,this.x5t_1=n,this.y5t_1=i,this.z5t_1=ei([new Xa(this.v5t_1,this.w5t_1,this.x5t_1),new Xa(this.v5t_1,this.x5t_1,this.y5t_1)])}function Xa(t,e,n){this.a5u_1=t,this.b5u_1=e,this.c5u_1=n}return Lt(oi,"AtlasUV",Nt),Lt(li,"OkioUtils",Xt),Lt(ui,"Companion",Xt),Lt(fi,"WhyTagType",Nt,Kt),Lt(Ti,"Companion",Xt),Lt(Fi,"WhyTag",Nt),Lt(Ci,"WhyEndTag",Xt,Fi),Lt($i,"WhyByteTag",Nt,Fi),Lt(Ai,"WhyShortTag",Nt,Fi),Lt(Ri,"WhyIntTag",Nt,Fi),Lt(Oi,"WhyLongTag",Nt,Fi),Lt(Ii,"WhyFloatTag",Nt,Fi),Lt(ki,"WhyDoubleTag",Nt,Fi),Lt(Ui,"WhyByteArrayTag",Nt,Fi),Lt(Pi,"WhyStringTag",Nt,Fi),Lt(Di,"WhyListTag",Nt,Fi),Lt(Ni,"WhyCompoundTag",Nt,Fi),Lt(Li,"WhyIntArrayTag",Nt,Fi),Lt(zi,"WhyLongArrayTag",Nt,Fi),Lt(Hi,"sam$kotlin_Comparator$0",Nt),Lt(ji,"DataImage",Nt),Lt(Gi,"DataImageShort",Nt,ji),Lt(Wi,"DataImageByte",Nt,ji),Lt(Xi,"Constants",Xt),Lt(Ki,"MapRegion",Nt,we,we,Ki),Lt(Ji,"Colors",Xt),Lt(Qi,"MapFileHandler",Nt,we,we,we,we,we,[2]),Lt(tr,"TmpConsts",Xt),Lt(or,"ImageFieldSize",Nt,Kt),Lt(lr,"VoxelFieldType",Nt,Kt),Lt(ur,"VoxelDataField",Nt,Kt),Lt(cr,"Companion",Xt),Lt(hr,"VoxelFormatHandler$load$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Cr,"$loadCOROUTINE$0",Nt,Oe),Lt($r,"VoxelFormatHandler",Nt,Qi,we,$r,we,we,[2]),Lt(Ar,"Companion",Xt),Lt(Or,"WhyMapFileHandler",Nt,Qi,we,Or,we,we,[2]),Lt(Ir,"XaeroFileHandler$load$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Pr,"$loadCOROUTINE$1",Nt,Oe),Lt(Dr,"XaeroFileHandler",Nt,Qi,we,Dr,we,we,[2]),Lt(Nr,"Companion",Xt),Lt(Lr,"WhyColor",Nt),Lt(zr,"$initializeCOROUTINE$2",Nt,Oe),Lt(Fr,"BlockColors",Nt,we,we,Fr,we,we,[1]),Lt(ea,"main$slambda",Nt,Oe,we,we,we,we,[1]),Lt(ia,"$mainSuspendCOROUTINE$3",Nt,Oe),Lt(ra,"$loadSchematicCOROUTINE$4",Nt,Oe),Lt(sa,"CompressionHelper",Xt),Lt(oa,"Companion",Xt),Lt(ca,"WhyMeshExt",Nt),Lt(ha,"Utils",Xt),Lt(ya,"Welcome$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(wa,"Welcome$lambda$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Sa,"Welcome$lambda$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Ea,"Welcome$lambda$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt($a,"Welcome$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Aa,"Welcome$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Ra,"Welcome$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Oa,"Welcome$lambda$lambda$lambda$slambda",Nt,Oe,we,we,we,we,[1]),Lt(Pa,we,Nt),Lt(Na,"BlockCache",Xt),Lt(za,"Companion",Xt),Lt(Ba,"WhyMeshDto",Nt,we,we,Ba),Lt(Ha,"WhySubMesh",Nt),Lt(Va,"WhySubMeshDto",Nt),Lt(qa,"WhyVector2",Nt),Lt(ja,"WhyVector2f",Nt),Lt(Ga,"WhyVertex",Nt),Lt(Wa,"WhySquare",Nt),Lt(Xa,"WhyTriangle",Nt),kt(oi).toString=function(){return"AtlasUV(x1="+this.z59_1+", y1="+this.a5a_1+", x2="+this.b5a_1+", y2="+this.c5a_1+")"},kt(oi).hashCode=function(){var t=Ut(this.z59_1);return t=$t(t,31)+Ut(this.a5a_1)|0,t=$t(t,31)+Ut(this.b5a_1)|0,$t(t,31)+Ut(this.c5a_1)|0},kt(oi).equals=function(t){if(this===t)return!0;if(!(t instanceof oi))return!1;var e=t instanceof oi?t:Pt();return!!(Dt(this.z59_1,e.z59_1)&&Dt(this.a5a_1,e.a5a_1)&&Dt(this.b5a_1,e.b5a_1)&&Dt(this.c5a_1,e.c5a_1))},kt(li).d5a=function(t){return this.e5a((e=t,function(t){for(;!e.mk();)t.g1a(e.pk());return zt}));var e},kt(li).f5a=function(t){for(var e=new Int32Array(256),n=0,i=t.length;n<i;){var r=t[n];n=n+1|0;var a=255&r;e[a]=e[a]+1|0}for(var s=Ft(e.length),o=0,l=0,u=e.length;l<u;){var c=e[l];l=l+1|0;var h=o;o=h+1|0;var f=Ht(Bt(h),c);s.p(f)}for(var _=Vt(),d=s.s();d.t();){var p=d.u();0!==p.cd_1&&_.p(p)}return qt(_)},kt(li).g5a=function(t){for(var e=new Int32Array(65536),n=0,i=t.length;n<i;){var r=t[n];n=n+1|0;var a=65535&r;e[a]=e[a]+1|0}var s=jt(),o=0;if(o<65536)do{var l=o;o=o+1|0;var u=e[l];if(0!==u){var c=Gt(l);s.a2(c,u)}}while(o<65536);return s},kt(li).e5a=function(t){var e=new Wt;return t(e),e.h1a()},kt(ui).h5a=function(t){var e;t:{for(var n=ci().s();n.t();){var i=n.u();if(i.k5a_1===t){e=i;break t}}e=null}return e},kt(Ti).l5a=function(t,e){var n;switch(t.n9_1){case 0:null==L&&new Ci,n=L;break;case 1:n=_i(e);break;case 2:n=di(e);break;case 3:n=pi(e);break;case 4:n=mi(e);break;case 5:n=gi(e,Jt(kt(Ii)));break;case 6:n=function(t){return vi(t,Jt(kt(ki)))}(e);break;case 7:n=function(t){return yi(t,Jt(kt(Ui)))}(e);break;case 8:n=function(t){return wi(t,Jt(kt(Pi)))}(e);break;case 9:n=function(t){return bi(t,Jt(kt(Di)))}(e);break;case 10:n=Si(e);break;case 11:n=function(t){return Ei(t,Jt(kt(Li)))}(e);break;case 12:n=function(t){return Mi(t,Jt(kt(zi)))}(e);break;default:Zt()}return n},kt(Ci).toString=function(){return"WhyEndTag"},kt(Ci).hashCode=function(){return-107538837},kt(Ci).equals=function(t){return this===t||t instanceof Ci&&(t instanceof Ci||Pt(),!0)},kt($i).toString=function(){return"WhyByteTag(data="+this.q5a_1+")"},kt($i).hashCode=function(){return this.q5a_1},kt($i).equals=function(t){if(this===t)return!0;if(!(t instanceof $i))return!1;var e=t instanceof $i?t:Pt();return this.q5a_1===e.q5a_1},kt(Ai).toString=function(){return"WhyShortTag(data="+this.t5a_1+")"},kt(Ai).hashCode=function(){return this.t5a_1},kt(Ai).equals=function(t){if(this===t)return!0;if(!(t instanceof Ai))return!1;var e=t instanceof Ai?t:Pt();return this.t5a_1===e.t5a_1},kt(Ri).toString=function(){return"WhyIntTag(data="+this.w5a_1+")"},kt(Ri).hashCode=function(){return this.w5a_1},kt(Ri).equals=function(t){if(this===t)return!0;if(!(t instanceof Ri))return!1;var e=t instanceof Ri?t:Pt();return this.w5a_1===e.w5a_1},kt(Oi).toString=function(){return"WhyLongTag(data="+this.z5a_1.toString()+")"},kt(Oi).hashCode=function(){return this.z5a_1.hashCode()},kt(Oi).equals=function(t){if(this===t)return!0;if(!(t instanceof Oi))return!1;var e=t instanceof Oi?t:Pt();return!!this.z5a_1.equals(e.z5a_1)},kt(Ii).toString=function(){return"WhyFloatTag(data="+this.c5b_1+")"},kt(Ii).hashCode=function(){return Ut(this.c5b_1)},kt(Ii).equals=function(t){if(this===t)return!0;if(!(t instanceof Ii))return!1;var e=t instanceof Ii?t:Pt();return!!Dt(this.c5b_1,e.c5b_1)},kt(ki).toString=function(){return"WhyDoubleTag(data="+this.f5b_1+")"},kt(ki).hashCode=function(){return Ut(this.f5b_1)},kt(ki).equals=function(t){if(this===t)return!0;if(!(t instanceof ki))return!1;var e=t instanceof ki?t:Pt();return!!Dt(this.f5b_1,e.f5b_1)},kt(Ui).toString=function(){return"WhyByteArrayTag(data="+Qt(this.i5b_1)+")"},kt(Ui).hashCode=function(){return te(this.i5b_1)},kt(Ui).equals=function(t){if(this===t)return!0;if(!(t instanceof Ui))return!1;var e=t instanceof Ui?t:Pt();return!!Dt(this.i5b_1,e.i5b_1)},kt(Pi).toString=function(){return"WhyStringTag(data="+this.l5b_1+")"},kt(Pi).hashCode=function(){return ee(this.l5b_1)},kt(Pi).equals=function(t){if(this===t)return!0;if(!(t instanceof Pi))return!1;var e=t instanceof Pi?t:Pt();return this.l5b_1===e.l5b_1},kt(Di).toString=function(){return"WhyListTag(data="+this.o5b_1+")"},kt(Di).hashCode=function(){return te(this.o5b_1)},kt(Di).equals=function(t){if(this===t)return!0;if(!(t instanceof Di))return!1;var e=t instanceof Di?t:Pt();return!!Dt(this.o5b_1,e.o5b_1)},kt(Ni).x1=function(){return this.r5b_1.x1()},kt(Ni).x1e=function(t){return this.r5b_1.k2(t)},kt(Ni).toString=function(){return"WhyCompoundTag(data="+this.r5b_1+")"},kt(Ni).hashCode=function(){return te(this.r5b_1)},kt(Ni).equals=function(t){if(this===t)return!0;if(!(t instanceof Ni))return!1;var e=t instanceof Ni?t:Pt();return!!Dt(this.r5b_1,e.r5b_1)},kt(Li).toString=function(){return"WhyIntArrayTag(data="+ne(this.u5b_1)+")"},kt(Li).hashCode=function(){return te(this.u5b_1)},kt(Li).equals=function(t){if(this===t)return!0;if(!(t instanceof Li))return!1;var e=t instanceof Li?t:Pt();return!!Dt(this.u5b_1,e.u5b_1)},kt(zi).toString=function(){return"WhyLongArrayTag(data="+ie(this.x5b_1)+")"},kt(zi).hashCode=function(){return te(this.x5b_1)},kt(zi).equals=function(t){if(this===t)return!0;if(!(t instanceof zi))return!1;var e=t instanceof zi?t:Pt();return!!Dt(this.x5b_1,e.x5b_1)},kt(Fi).x1e=function(t){return null},kt(Hi).e8=function(t,e){return this.y5b_1(t,e)},kt(Hi).compare=function(t,e){return this.e8(t,e)},kt(ji).d5c=function(){var t=ve(this.c5c()),e=new Hi(Vi);return ye(t,e)},kt(ji).e5c=function(){var t=this.d5c();return be(t,"\n",we,we,we,we,qi)},kt(Gi).c5c=function(){return w.g5a(this.j5c_1)},kt(Gi).f5c=function(){var t=new Ee(this.z5b_1,this.a5c_1),e=jt(),n=0,i=this.a5c_1;if(n<i)do{var r=n;n=n+1|0;var a=0,s=this.z5b_1;if(a<s)do{var o=a;a=a+1|0;var l,u=this.j5c_1[$t(this.z5b_1,r)+o|0];switch(this.b5c_1.n9_1){case 1:var c=B.l5c().k2(u),h=null==c?null:c.b38_1;l=null==(null==h?null:new Me(h))?Zi().o5c_1:h;break;case 3:var f,_=e.k2(u),d=null==_?null:_.b38_1;if(null==(null==d?null:new Me(d))){var p=xe().g3b(Se().qe(0,255),Se().qe(0,255),Se().qe(0,255),255);e.a2(u,new Me(p)),f=p}else f=d;l=f;break;default:throw new Te}var m=l;t.u38(o,r,m)}while(a<s)}while(n<i);return t},kt(Wi).c5c=function(){return w.f5a(this.t5c_1)},kt(Wi).f5c=function(){var t=new Ee(this.z5b_1,this.a5c_1),e=0,n=this.a5c_1;if(e<n)do{var i=e;e=e+1|0;var r=0,a=this.z5b_1;if(r<a)do{var s=r;r=r+1|0;var o,l=this.t5c_1[$t(this.z5b_1,i)+s|0],u=pe(l),c=255&Ce(u);switch(this.b5c_1.n9_1){case 2:c=c<<4&255,o=xe().g3b(c,c,c,255);break;case 0:o=xe().g3b(c,c,c,255);break;default:throw new Te}var h=o;t.u38(s,i,h)}while(r<a)}while(e<n);return t},kt(tr).l5c=function(){var t=this.k5c_1;if(null!=t)return t;Ae("blockColors")},kt(hr).p5e=function(t,e){var n=this.q5e(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(hr).tb=function(t,e){return this.p5e(t instanceof Ie?t:Pt(),e)},kt(hr).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.o5e_1.v25(this))===ke())return t;continue t;case 1:return t;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},kt(hr).q5e=function(t,e){var n=new hr(e);return n.o5e_1=t,n},kt(Cr).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=13,this.ta_1=1;var e=Be(Fe(this.a5f_1).uk());if((t=He(e,we,we,fr(null),this))===ke())return t;continue t;case 1:this.c5f_1=t,this.d5f_1=je(qe(Ve(this.c5f_1,10)),16);for(var n=this.c5f_1,i=Ge(this.d5f_1),r=n.s();r.t();){var a=r.u();i.a2(We(a),a)}this.e5f_1=i;var s=ve(this.e5f_1);if(ue(be(s,"\n",we,we,we,we,_r)),this.ta_1=2,(t=le(this.e5f_1.k2("control")).u25(we,this))===ke())return t;continue t;case 2:if(this.f5f_1=t,ue("version: "+this.f5f_1),this.ta_1=3,(t=le(this.e5f_1.k2("key")).t25(we,this))===ke())return t;continue t;case 3:this.g5f_1=t,this.h5f_1=Xe(this.g5f_1,dr),this.i5f_1=Ye(this.h5f_1,pr);for(var o=this.i5f_1,l=jt(),u=o.s();u.t();){var c=u.u(),h=Ht(Ke(c.d1(0)),c.d1(1));l.a2(h.bd_1,h.cd_1)}this.j5f_1=l;for(var f=this.j5f_1,_=Ge(qe(this.j5f_1.n())),d=f.z1().s();d.t();){var p=d.u(),m=p.c2();_.a2(m,Qe(Ue(Ze(Je(p.d2(),"Block{"),"}"),[":"])))}if(this.k5f_1=_,ue("keys: "+this.k5f_1),this.ta_1=4,(t=le(this.e5f_1.k2("data")).r25(this))===ke())return t;continue t;case 4:this.l5f_1=t,this.z5e_1.d5d_1=this.l5f_1,ue("data: "+this.z5e_1.r3a().length);for(var g=tn.a39(256),v=0,y=$t(256,256),w=new Int8Array(y);v<y;){var b=v%256|0,x=v/256|0;w[v]=ar(this.z5e_1,b,x,0),v=v+1|0}this.m5f_1=new en(256,256,w,g),this.n5f_1=Se();for(var S=B,E=this.k5f_1,M=Ft(E.n()),T=E.z1().s();T.t();){var C,$=T.u(),A=$.c2(),R=$.d2(),O=this.z5e_1.a5h().k2(R),I=null==O?null:O.b38_1;C=null==(null==I?null:new Me(I))?Zi().p5c_1:I,M.p(Ht(A,new Me(C)))}S.k5c_1=qt(M);var k=ve(this.z5e_1.a5h());ue(be(k,we,we,we,we,we,mr));var U=ve(B.l5c());if(ue(be(U,we,we,we,we,we,gr)),this.ta_1=5,(t=rn(this.m5f_1,nn(),we,this))===ke())return t;continue t;case 5:if(this.o5f_1=t,this.p5f_1=an(this.o5f_1),this.z5e_1.f5d_1=this.p5f_1,this.q5f_1=sn(256,256,vr(this.z5e_1)),this.ta_1=6,(t=rn(this.q5f_1,nn(),we,this))===ke())return t;continue t;case 6:this.r5f_1=t,this.s5f_1=an(this.r5f_1),this.z5e_1.g5d_1=this.s5f_1,this.t5f_1=jt(),this.u5f_1=ir().s(),this.ta_1=7;continue t;case 7:if(!this.u5f_1.t()){this.ta_1=9;continue t}this.v5f_1=this.u5f_1.u(),this.w5f_1=sr(this.z5e_1,this.v5f_1),ue("field: "+this.v5f_1+", stats: "+this.w5f_1.e5c()),this.x5f_1=this.w5f_1.f5c();var P=this.t5f_1,D=this.v5f_1.m9_1,N=this.x5f_1;if(P.a2(D,N),this.y5f_1=this.z5e_1.h5d_1,this.z5f_1=this.v5f_1.m9_1,this.ta_1=8,(t=rn(this.x5f_1,nn(),we,this))===ke())return t;continue t;case 8:this.a5g_1=t,this.b5g_1=an(this.a5g_1),this.y5f_1.a2(this.z5f_1,this.b5g_1),this.ta_1=7;continue t;case 9:if(this.c5g_1=le(this.t5f_1.k2("BLOCKSTATE")),this.d5g_1=le(this.t5f_1.k2("HEIGHT")),this.e5g_1=sn(256,256,yr(this.d5g_1)),this.f5g_1=this.z5e_1.h5d_1,this.g5g_1="NORMALMAP",this.ta_1=10,(t=rn(this.e5g_1,nn(),we,this))===ke())return t;continue t;case 10:this.h5g_1=t,this.i5g_1=an(this.h5g_1),this.f5g_1.a2(this.g5g_1,this.i5g_1),this.j5g_1=768;for(var L=0,z=$t(this.j5g_1,2),F=new Float32Array(z);L<z;){var H=L,V=.5*(H-this.j5g_1|0);F[H]=.35*Math.atan(V),L=L+1|0}if(this.k5g_1=F,this.l5g_1=.8,this.m5g_1=.6,this.n5g_1=.2,this.o5g_1=1-this.l5g_1,this.p5g_1=1-this.m5g_1,this.q5g_1=1-this.n5g_1,this.r5g_1=sn(256,256,wr(this.e5g_1,this.k5g_1,this.j5g_1,this.l5g_1,this.o5g_1,this.m5g_1,this.p5g_1,this.n5g_1,this.q5g_1)),this.s5g_1=this.z5e_1.h5d_1,this.t5g_1="SHADE",this.ta_1=11,(t=rn(this.r5g_1,nn(),we,this))===ke())return t;continue t;case 11:if(this.u5g_1=t,this.v5g_1=an(this.u5g_1),this.s5g_1.a2(this.t5g_1,this.v5g_1),this.w5g_1=.00392156862745098,this.x5g_1=sn(256,256,br(this.e5g_1,this.c5g_1,this.k5g_1,this.j5g_1,this.l5g_1,this.o5g_1,this.m5g_1,this.p5g_1,this.n5g_1,this.q5g_1,this.w5g_1)),this.y5g_1=this.z5e_1.h5d_1,this.z5g_1="RENDERED",this.ta_1=12,(t=rn(this.x5g_1,nn(),we,this))===ke())return t;continue t;case 12:var q=an(t);return this.y5g_1.a2(this.z5g_1,q),zt;case 13:throw this.wa_1}}catch(t){var j=t;if(13===this.ua_1)throw j;this.ta_1=this.ua_1,this.wa_1=j}},kt($r).r3a=function(){var t=this.d5d_1;if(null!=t)return t;Ae("data")},kt($r).a5h=function(){var t=this.e5d_1;if(null!=t)return t;Ae("colorMap.txt")},kt($r).b5h=function(t,e,n){var i=new Cr(this,t,e,n);return i.va_1=zt,i.wa_1=null,i.gb()},kt(Or).b5h=function(t,e,n){var i=new Re;t.wi(i,new he(64,0)),i.uk();var r=new Int8Array($t(Yi().w5c_1,9));return bt.d5h(t,Rr(r)),zt},kt(Ir).p5e=function(t,e){var n=this.q5e(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(Ir).tb=function(t,e){return this.p5e(t instanceof Ie?t:Pt(),e)},kt(Ir).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.m5h_1.v25(this))===ke())return t;continue t;case 1:return t;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},kt(Ir).q5e=function(t,e){var n=new Ir(e);return n.m5h_1=t,n},kt(Pr).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.ta_1=1;var e=Be(Fe(this.w5h_1).uk());if((t=He(e,we,we,kr(null),this))===ke())return t;continue t;case 1:this.y5h_1=t,this.z5h_1=je(qe(Ve(this.y5h_1,10)),16),this.a5i_1=this.y5h_1,this.b5i_1=Ge(this.z5h_1),this.c5i_1=this.a5i_1.s(),this.ta_1=2;continue t;case 2:if(!this.c5i_1.t()){this.ta_1=4;continue t}if(this.d5i_1=this.c5i_1.u(),this.e5i_1=this.b5i_1,this.f5i_1=this.d5i_1,this.g5i_1=We(this.f5i_1),this.ta_1=3,(t=this.f5i_1.q25(this))===ke())return t;continue t;case 3:var n=t,i=Ht(this.g5i_1,n);this.e5i_1.a2(i.bd_1,i.cd_1),this.ta_1=2;continue t;case 4:var r=this.b5i_1,a=ve(r);ue(be(a,"\n",we,we,we,we,Ur));var s=-1,o=0,l=on(r.y1()),u=(new Re).yk(l);if(-1===u.nk().ok()){u.ok();var c=u.qk(),h=ln(65535);s=c&un(h);var f=c>>16,_=ln(65535);if(o=f&un(_),ue("Versions: ["+o+", "+s+"]"),2===o&&s>=5&&u.qk(),5<s||6<o)return ue("Trying to load a newer region "+this.x5h_1+" save using an older version of Xaero's World Map!"),zt}return zt;case 5:throw this.wa_1}}catch(t){var d=t;if(5===this.ua_1)throw d;this.ta_1=this.ua_1,this.wa_1=d}},kt(Dr).b5h=function(t,e,n){var i=new Pr(this,t,e,n);return i.va_1=zt,i.wa_1=null,i.gb()},kt(zr).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,this.b5j_1=fa(),this.c5j_1=this.a5j_1,this.d5j_1=this.b5j_1.m5j_1,this.e5j_1="static/"+this.c5j_1,this.f5j_1=this.d5j_1,this.g5j_1=this.f5j_1;var e=new cn;if(hn(e,this.e5j_1),this.h5j_1=e,this.h5j_1.d4e_1=fn().i45_1,this.i5j_1=this.g5j_1,this.j5j_1=this.h5j_1,this.ta_1=1,(t=new _n(this.j5j_1,this.i5j_1).m54(this))===ke())return t;continue t;case 1:this.k5j_1=t,this.l5j_1=this.k5j_1,this.ta_1=2;var n,i=this.l5j_1.l4h(),r=dn,a=pn().z6();try{n=gn(pn().z6(),mn([]),!1)}catch(t){if(!(t instanceof Error))throw t;n=null}if((t=i.o4g(vn(r,a,n),this))===ke())return t;continue t;case 2:for(var s=null!=t&&"string"==typeof t?t:Pt(),o=Ue(s,["\n"]),l=this.z5i_1,u=je(qe(Ve(o,10)),16),c=Ge(u),h=o.s();h.t();){var f=h.u(),_=Ue(f,["="]),d=_.d1(0),p=_.d1(1),m=Qe(Ue(d,["."])),g=fa(),v=wn(yn(p,1),16),y=g.n5j(bn(v)),w=Ht(m,new Me(xn(y)));c.a2(w.bd_1,w.cd_1)}return l.o5j_1=c,ue("BlockColors initialized: "+this.z5i_1.o5j_1.n()+" entries"),zt;case 3:throw this.wa_1}}catch(t){var b=t;if(3===this.ua_1)throw b;this.ta_1=this.ua_1,this.wa_1=b}},kt(Fr).p5j=function(t,e){var n=new zr(this,t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(ea).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(ea).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(ea).gb=function(){var t,e=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,t=void 0,(t=new ia(this)).va_1=zt,t.wa_1=null,(e=t.gb())===ke())return e;continue t;case 1:return zt;case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},kt(ea).n1j=function(t,e){var n=new ea(e);return n.q5n_1=t,n},kt(ia).gb=function(){var t,n=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.y5j_1=Br(),this.z5j_1="uvMap.txt",this.a5k_1=this.y5j_1,this.b5k_1=this.a5k_1;var i=new cn;if(hn(i,this.z5j_1),this.c5k_1=i,this.c5k_1.d4e_1=fn().i45_1,this.d5k_1=this.b5k_1,this.e5k_1=this.c5k_1,this.ta_1=1,(n=new _n(this.e5k_1,this.d5k_1).m54(this))===ke())return n;continue t;case 1:if(this.f5k_1=n,this.ta_1=2,(n=Hn(this.f5k_1,we,this))===ke())return n;continue t;case 2:this.g5k_1=n,this.h5k_1=Vn(this.g5k_1);for(var r=this.h5k_1,a=Ft(Ve(this.h5k_1,10)),s=r.s();s.t();){var o=s.u();a.p(Ue(o,[" "]))}this.i5k_1=a,this.j5k_1=je(qe(Ve(this.i5k_1,10)),16);for(var l=this.i5k_1,u=Ge(this.j5k_1),c=l.s();c.t();){var h=c.u(),f=h.d1(0),_=h.d1(1),d=qn(_),p=h.d1(2),m=qn(p),g=h.d1(3),v=qn(g),y=h.d1(4),w=qn(y),b=Ht(f,new oi(d,m,v,w));u.a2(b.bd_1,b.cd_1)}this.k5k_1=u,t=this.k5k_1,aa(),gt=t,Xr((new e.TextureLoader).load("textureAtlas.png",ta)),this.l5k_1=Br(),this.m5k_1="colorMap.txt",this.n5k_1=this.l5k_1,this.o5k_1=this.n5k_1;var x=new cn;if(hn(x,this.m5k_1),this.p5k_1=x,this.p5k_1.d4e_1=fn().i45_1,this.q5k_1=this.o5k_1,this.r5k_1=this.p5k_1,this.ta_1=3,(n=new _n(this.r5k_1,this.q5k_1).m54(this))===ke())return n;continue t;case 3:if(this.s5k_1=n,this.ta_1=4,(n=Hn(this.s5k_1,we,this))===ke())return n;continue t;case 4:for(var S=Vn(n),E=Ft(Ve(S,10)),M=S.s();M.t();){var T=M.u();E.p(Ue(T,[" "]))}for(var C=je(qe(Ve(E,10)),16),$=Ge(C),A=E.s();A.t();){var R=A.u(),O=R.d1(0),I=R.d1(1),k=qn(I),U=R.d1(2),P=qn(U),D=R.d1(3),N=qn(D),L=R.d1(4),z=qn(L),F=Ht(O,new Lr(k,P,N,z));$.a2(F.bd_1,F.cd_1)}return Gr($),ue(jr()),zt;case 5:throw this.wa_1}}catch(t){var B=t;if(5===this.ua_1)throw B;this.ta_1=this.ua_1,this.wa_1=B}},kt(ra).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,this.q5m_1=Br(),this.r5m_1="static/"+this.p5m_1,this.s5m_1=this.q5m_1,this.t5m_1=this.s5m_1;var e=new cn;if(hn(e,this.r5m_1),this.u5m_1=e,this.u5m_1.d4e_1=fn().i45_1,this.v5m_1=this.t5m_1,this.w5m_1=this.u5m_1,this.ta_1=1,(t=new _n(this.w5m_1,this.v5m_1).m54(this))===ke())return t;continue t;case 1:this.x5m_1=t,ue("received response"),this.y5m_1=this.x5m_1,this.ta_1=2;var n,i=this.y5m_1.l4h(),r=dn,a=pn().d7();try{n=gn(pn().d7(),mn([]),!1)}catch(t){if(!(t instanceof Error))throw t;n=null}if((t=i.o4g(vn(r,a,n),this))===ke())return t;continue t;case 2:return Kr(null!=t&&jn(t)?t:Pt()),zt;case 3:throw this.wa_1}}catch(t){var s=t;if(3===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},kt(sa).d5h=function(t,e){throw new Te("An operation is not implemented: Not yet implemented")},kt(ca).s5n=function(){var t=new e.BufferGeometry;return t.setAttribute("position",new e.Float32BufferAttribute(this.d5m_1,3)),t.setAttribute("uv",new e.Float32BufferAttribute(this.f5m_1,2)),t.setIndex(this.e5m_1),t},kt(ca).t5n=function(t){return new e.Mesh(this.s5n(),t)},kt(ca).u5n=function(t){var n=new Pa;return n.map=t,this.t5n(new e.MeshBasicMaterial(n))},kt(ca).g5m=function(t){var e=la().r5n_1.load(t,ua);return this.u5n(e)},kt(ha).n5j=function(t){return(255&t)<<24|(t>>24&255)<<16|(t>>16&255)<<8|t>>8&255},kt(ya).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(ya).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(ya).gb=function(){var t,e,n=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,this.f5o_1=Br(),this.g5o_1="schematics.txt",this.h5o_1=this.f5o_1,this.i5o_1=this.h5o_1;var i=new cn;if(hn(i,this.g5o_1),this.j5o_1=i,this.j5o_1.d4e_1=fn().i45_1,this.k5o_1=this.i5o_1,this.l5o_1=this.j5o_1,this.ta_1=1,(n=new _n(this.l5o_1,this.k5o_1).m54(this))===ke())return n;continue t;case 1:if(this.m5o_1=n,this.ta_1=2,(n=Hn(this.m5o_1,we,this))===ke())return n;continue t;case 2:var r=Ue(n,["\n"]);return t=this.d5o_1,e=r,Ua(),Zn("schematics.txt",Kn,!0,(function(){return Jn()})),t[1](e),zt;case 3:throw this.wa_1}}catch(t){var a=t;if(3===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},kt(ya).n1j=function(t,e){var n=new ya(this.d5o_1,e);return n.e5o_1=t,n},kt(wa).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(wa).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(wa).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=Yr(this.v5o_1,this))===ke())return t;continue t;case 1:return zt;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},kt(wa).n1j=function(t,e){var n=new wa(this.v5o_1,e);return n.w5o_1=t,n},kt(Sa).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(Sa).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(Sa).gb=function(){for(this.va_1;;)try{var t=this.ta_1;if(0===t){this.ua_1=1;var e=Zr(pa(this.f5p_1));return n=this.g5p_1,i=null==e?"Not found":e,Ua(),Zn("verifyResult",Kn,!0,(function(){return Jn()})),n[1](i),zt}if(1===t)throw this.wa_1}catch(t){throw t}var n,i},kt(Sa).n1j=function(t,e){var n=new Sa(this.f5p_1,this.g5p_1,e);return n.h5p_1=t,n},kt(Ea).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(Ea).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(Ea).gb=function(){var t,e,n=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,this.s5p_1=Br(),this.t5p_1="static",this.u5p_1=this.s5p_1,this.v5p_1=this.u5p_1;var i=new cn;if(hn(i,this.t5p_1),this.w5p_1=i,this.w5p_1.d4e_1=fn().i45_1,this.x5p_1=this.v5p_1,this.y5p_1=this.w5p_1,this.ta_1=1,(n=new _n(this.y5p_1,this.x5p_1).m54(this))===ke())return n;continue t;case 1:this.z5p_1=n,this.ta_1=2;var r,a=this.z5p_1.l4h(),s=dn,o=pn().z6();try{r=gn(pn().z6(),mn([]),!0)}catch(t){if(!(t instanceof Error))throw t;r=null}if((n=a.o4g(vn(s,o,r),this))===ke())return n;continue t;case 2:var l=null==n||"string"==typeof n?n:Pt(),u=null==l?"Not found":l;return t=this.q5p_1,e=u,Ua(),Zn("someResult",Kn,!0,(function(){return Jn()})),t[1](e),zt;case 3:throw this.wa_1}}catch(t){var c=t;if(3===this.ua_1)throw c;this.ta_1=this.ua_1,this.wa_1=c}},kt(Ea).n1j=function(t,e){var n=new Ea(this.q5p_1,e);return n.r5p_1=t,n},kt($a).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt($a).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt($a).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=Yr(da(this.i5q_1),this))===ke())return t;continue t;case 1:return zt;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},kt($a).n1j=function(t,e){var n=new $a(this.i5q_1,e);return n.j5q_1=t,n},kt(Aa).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(Aa).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(Aa).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.u5q_1=fa(),this.v5q_1=da(this.s5q_1),this.w5q_1=this.u5q_1.m5j_1,this.x5q_1="static/"+this.v5q_1,this.y5q_1=this.w5q_1,this.z5q_1=this.y5q_1;var e=new cn;if(hn(e,this.x5q_1),this.a5r_1=e,this.a5r_1.d4e_1=fn().i45_1,this.b5r_1=this.z5q_1,this.c5r_1=this.a5r_1,this.ta_1=1,(t=new _n(this.c5r_1,this.b5r_1).m54(this))===ke())return t;continue t;case 1:this.d5r_1=t,this.e5r_1=this.d5r_1,this.ta_1=2;var n,i=this.e5r_1.l4h(),r=dn,a=pn().d7();try{n=gn(pn().d7(),mn([]),!1)}catch(t){if(!(t instanceof Error))throw t;n=null}if((t=i.o4g(vn(r,a,n),this))===ke())return t;continue t;case 2:if(this.f5r_1=null!=t&&jn(t)?t:Pt(),this.ta_1=3,(t=(new Or).b5h((new Re).yk(this.f5r_1),new Ki,this))===ke())return t;continue t;case 3:return zt;case 4:throw this.wa_1}}catch(t){var s=t;if(4===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},kt(Aa).n1j=function(t,e){var n=new Aa(this.s5q_1,e);return n.t5q_1=t,n},kt(Ra).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(Ra).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(Ra).gb=function(){var t,e,n=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.t5r_1=fa(),this.u5r_1=da(this.o5r_1),this.v5r_1=this.t5r_1.m5j_1,this.w5r_1="static/"+this.u5r_1,this.x5r_1=this.v5r_1,this.y5r_1=this.x5r_1;var i=new cn;if(hn(i,this.w5r_1),this.z5r_1=i,this.z5r_1.d4e_1=fn().i45_1,this.a5s_1=this.y5r_1,this.b5s_1=this.z5r_1,this.ta_1=1,(n=new _n(this.b5s_1,this.a5s_1).m54(this))===ke())return n;continue t;case 1:this.c5s_1=n,this.d5s_1=this.c5s_1,this.ta_1=2;var r,a=this.d5s_1.l4h(),s=dn,o=pn().d7();try{r=gn(pn().d7(),mn([]),!1)}catch(t){if(!(t instanceof Error))throw t;r=null}if((n=a.o4g(vn(s,o,r),this))===ke())return n;continue t;case 2:if(this.e5s_1=null!=n&&jn(n)?n:Pt(),this.f5s_1=new $r,this.g5s_1=new Fr,this.ta_1=3,(n=this.g5s_1.p5j("blockcolors.txt",this))===ke())return n;continue t;case 3:if(this.f5s_1.e5d_1=this.g5s_1.o5j_1,this.ta_1=4,(n=this.f5s_1.b5h((new Re).yk(this.e5s_1),new Ki,this))===ke())return n;continue t;case 4:return t=this.p5r_1,e="data:image/png;base64,"+this.f5s_1.f5d_1,Ua(),Zn("heightMap",Kn,!0,(function(){return Jn()})),t[1](e),ma(this.q5r_1,"data:image/png;base64,"+this.f5s_1.g5d_1),va(this.r5r_1,this.f5s_1.h5d_1),zt;case 5:throw this.wa_1}}catch(t){var l=t;if(5===this.ua_1)throw l;this.ta_1=this.ua_1,this.wa_1=l}},kt(Ra).n1j=function(t,e){var n=new Ra(this.o5r_1,this.p5r_1,this.q5r_1,this.r5r_1,e);return n.s5r_1=t,n},kt(Oa).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=zt,n.wa_1=null,n.gb()},kt(Oa).tb=function(t,e){return this.m1j(null!=t&&Bn(t,Fn)?t:Pt(),e)},kt(Oa).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.r5s_1=fa(),this.s5s_1=da(this.p5s_1),this.t5s_1=this.r5s_1.m5j_1,this.u5s_1="static/"+this.s5s_1,this.v5s_1=this.t5s_1,this.w5s_1=this.v5s_1;var e=new cn;if(hn(e,this.u5s_1),this.x5s_1=e,this.x5s_1.d4e_1=fn().i45_1,this.y5s_1=this.w5s_1,this.z5s_1=this.x5s_1,this.ta_1=1,(t=new _n(this.z5s_1,this.y5s_1).m54(this))===ke())return t;continue t;case 1:this.a5t_1=t,this.b5t_1=this.a5t_1,this.ta_1=2;var n,i=this.b5t_1.l4h(),r=dn,a=pn().d7();try{n=gn(pn().d7(),mn([]),!1)}catch(t){if(!(t instanceof Error))throw t;n=null}if((t=i.o4g(vn(r,a,n),this))===ke())return t;continue t;case 2:if(this.c5t_1=null!=t&&jn(t)?t:Pt(),this.d5t_1=new Dr,this.ta_1=3,(t=this.d5t_1.b5h((new Re).yk(this.c5t_1),new Ki,this))===ke())return t;continue t;case 3:return zt;case 4:throw this.wa_1}}catch(t){var s=t;if(4===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},kt(Oa).n1j=function(t,e){var n=new Oa(this.p5s_1,e);return n.q5s_1=t,n},kt(Na).f5n=function(t){return e=this,n=Da(0,t),i=e.z5m_1,r=e.z5m_1.k2(n),a=(null==r?0:r)+1|0,void i.a2(n,a);var e,n,i,r,a},kt(Na).g5n=function(t,n,i,r,a){var s,o=Da(0,t),l=this.e5n_1,u=l.k2(o);if(null==u){var c="none"===o?Fa().y5l_1:Fa().e5t(le(jr().k2(o)));l.a2(o,c),s=c}else s=u;var h=s,f=new e.Mesh(h,this.d5n_1);f.position.set(n,i,r),null==f.parent&&a.add(f)},kt(Na).h5n=function(t,n,i,r,a){var s=Da(0,t),o=this.b5n_1.k2(s),l=null==o?0:o,u=this.z5m_1.k2(s);if(l>=(null==u?0:u))return ue("Too many blocks of type "+s+" ("+l+" out of "+La().z5m_1.k2(s)+")"),zt;var c=function(t,n){var i,r=t.a5n_1,a=r.k2(n);if(null==a){var s;if("none"===n){var o=Fa().y5l_1,l=La().c5n_1,u=La().z5m_1.k2(n);s=new e.InstancedMesh(o,l,null==u?0:u)}else{var c=Fa().e5t(le(jr().k2(n))),h=La().d5n_1,f=La().z5m_1.k2(n);s=new e.InstancedMesh(c,h,null==f?0:f)}var _=s;r.a2(n,_),i=_}else i=a;return i}(this,s);c.setMatrixAt(l,(new e.Matrix4).setPosition(n,i,r)),null==c.parent&&a.add(c);var h=l+1|0;this.b5n_1.a2(s,h)},kt(Na).v=function(){this.a5n_1.v(),this.b5n_1.v(),this.z5m_1.v()},kt(za).e5t=function(t){for(var e=new ja(t.z59_1,t.a5a_1),n=new ja(t.b5a_1,t.a5a_1),i=new ja(t.b5a_1,t.c5a_1),r=new ja(t.z59_1,t.c5a_1),a=ni([Ht(this.d5l_1,e),Ht(this.e5l_1,n),Ht(this.f5l_1,i),Ht(this.g5l_1,r),Ht(this.h5l_1,e),Ht(this.i5l_1,n),Ht(this.j5l_1,i),Ht(this.k5l_1,r)]),s=Ge(qe(a.n())),o=a.z1().s();o.t();){var l=o.u(),u=l.c2(),c=l.d2().o5t();s.a2(u,c)}for(var h=s,f=ni([Ht(this.d5l_1,e),Ht(this.e5l_1,n),Ht(this.f5l_1,e),Ht(this.g5l_1,n),Ht(this.h5l_1,r),Ht(this.i5l_1,i),Ht(this.j5l_1,r),Ht(this.k5l_1,i)]),_=Ge(qe(f.n())),d=f.z1().s();d.t();){var p=d.u(),m=p.c2(),g=p.d2().o5t();_.a2(m,g)}var v=_,y=new Ha(this.r5l_1,h).h5t(),w=new Ha(this.t5l_1,v).h5t();return y.l5t(w).c5m().s5n()},kt(Ba).p5t=function(t){var e=this.z5l_1.n(),n=this.z5l_1,i=t.i5t_1;ii(n,i);for(var r=this.a5m_1,a=t.j5t_1,s=Ft(Ve(a,10)),o=a.s();o.t();){for(var l=o.u(),u=Ft(Ve(l,10)),c=l.s();c.t();){var h=c.u()+e|0;u.p(h)}s.p(u)}ii(r,s);var f=this.b5m_1,_=t.k5t_1;ii(f,_)},kt(Ba).c5m=function(){for(var t=this.z5l_1,e=Vt(),n=t.s();n.t();){var i=n.u(),r=ei([i.q5t_1,i.r5t_1,i.s5t_1]);ii(e,r)}for(var a=ri(e),s=new Float32Array(a),o=ai(this.a5m_1),l=ri(o),u=this.b5m_1,c=Vt(),h=u.s();h.t();){var f=h.u(),_=ei([f.t5t_1,f.u5t_1]);ii(c,_)}var d=ri(c);return new ca(s,l,new Float32Array(d))},kt(Ha).h5t=function(){for(var t=si(this.g5t_1.x1()),e=this.f5t_1,n=Vt(),i=e.s();i.t();){for(var r=i.u().z5t_1,a=Ft(Ve(r,10)),s=r.s();s.t();){var o=s.u(),l=ei([t.n1(o.a5u_1),t.n1(o.b5u_1),t.n1(o.c5u_1)]);a.p(l)}ii(n,a)}return new Va(t,n,si(this.g5t_1.y1()))},kt(Va).l5t=function(t){var e=new Ba;return e.p5t(this),e.p5t(t),e},kt(qa).toString=function(){return"WhyVector2(x="+this.t5t_1+", y="+this.u5t_1+")"},kt(qa).hashCode=function(){var t=Ut(this.t5t_1);return $t(t,31)+Ut(this.u5t_1)|0},kt(qa).equals=function(t){if(this===t)return!0;if(!(t instanceof qa))return!1;var e=t instanceof qa?t:Pt();return!!Dt(this.t5t_1,e.t5t_1)&&!!Dt(this.u5t_1,e.u5t_1)},kt(ja).o5t=function(){return new qa(this.m5t_1,this.n5t_1)},kt(ja).toString=function(){return"WhyVector2f(x="+this.m5t_1+", y="+this.n5t_1+")"},kt(ja).hashCode=function(){var t=Ut(this.m5t_1);return $t(t,31)+Ut(this.n5t_1)|0},kt(ja).equals=function(t){if(this===t)return!0;if(!(t instanceof ja))return!1;var e=t instanceof ja?t:Pt();return!!Dt(this.m5t_1,e.m5t_1)&&!!Dt(this.n5t_1,e.n5t_1)},kt(Ga).toString=function(){return"WhyVertex(x="+this.q5t_1+", y="+this.r5t_1+", z="+this.s5t_1+")"},kt(Ga).hashCode=function(){var t=Ut(this.q5t_1);return t=$t(t,31)+Ut(this.r5t_1)|0,$t(t,31)+Ut(this.s5t_1)|0},kt(Ga).equals=function(t){if(this===t)return!0;if(!(t instanceof Ga))return!1;var e=t instanceof Ga?t:Pt();return!!Dt(this.q5t_1,e.q5t_1)&&!!Dt(this.r5t_1,e.r5t_1)&&!!Dt(this.s5t_1,e.s5t_1)},kt(Wa).toString=function(){return"WhySquare(v1="+this.v5t_1+", v2="+this.w5t_1+", v3="+this.x5t_1+", v4="+this.y5t_1+")"},kt(Wa).hashCode=function(){var t=this.v5t_1.hashCode();return t=$t(t,31)+this.w5t_1.hashCode()|0,t=$t(t,31)+this.x5t_1.hashCode()|0,$t(t,31)+this.y5t_1.hashCode()|0},kt(Wa).equals=function(t){if(this===t)return!0;if(!(t instanceof Wa))return!1;var e=t instanceof Wa?t:Pt();return!!(this.v5t_1.equals(e.v5t_1)&&this.w5t_1.equals(e.w5t_1)&&this.x5t_1.equals(e.x5t_1)&&this.y5t_1.equals(e.y5t_1))},kt(Xa).toString=function(){return"WhyTriangle(v1="+this.a5u_1+", v2="+this.b5u_1+", v3="+this.c5u_1+")"},kt(Xa).hashCode=function(){var t=this.a5u_1.hashCode();return t=$t(t,31)+this.b5u_1.hashCode()|0,$t(t,31)+this.c5u_1.hashCode()|0},kt(Xa).equals=function(t){if(this===t)return!0;if(!(t instanceof Xa))return!1;var e=t instanceof Xa?t:Pt();return!!this.a5u_1.equals(e.a5u_1)&&!!this.b5u_1.equals(e.b5u_1)&&!!this.c5u_1.equals(e.c5u_1)},w=new li,U=new ui,N=new Ti,B=new tr,new cr,bt=new sa,function(){aa();var t,n,i=Mn(En().cw_1);Tn(i,we,we,(t=new ea(null),(n=function(e,n){return t.m1j(e,n)}).$arity=1,n));var r=document.createElement("div");le(document.body).appendChild(r);var a=document.createElement("div");Vr().position.set(0,0,5),Vr().lookAt(new e.Vector3(0,0,0)),Vr().up.set(0,0,1);var s=new e.WebGLRenderer;s.setSize(1200,800),s.setPixelRatio(window.devicePixelRatio),s.antialias=!0,a.appendChild(s.domElement),r.appendChild(a);var o=new e.GridHelper(10,10);o.rotation.x=Cn()/2,Hr().add(o);var l,u=Fa().x5l_1.c5m().g5m("static/textures/grass_block_side.png");Hr().add(u),s.render(Hr(),Vr()),l=new At(Vr(),s.domElement),aa(),mt=l,qr().autoRotate=!0,qr().enableDamping=!0,qr().dampingFactor=.1,window.requestAnimationFrame(function(t,e){var n=function(n){return Qr(t,e,n),zt};return n.callableName="animate",n}(s,{_v:0})),Rt(r);var c=(Ua(),Et),h=$n(c,na),f=document.createElement("div");le(document.body).appendChild(f),Rt(f).render(h)}(),t})?i.apply(e,r):i)||(t.exports=a)},866:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n,i,r=Math.imul,a=Math.log2,s=e.$_$.a8,o=e.$_$.z7,l=e.$_$.b8,u=e.$_$.a3,c=e.$_$.o3,h=e.$_$.q3,f=e.$_$.l7,_=e.$_$.x6,d=e.$_$.d,p=e.$_$.p6,m=e.$_$.f8,g=e.$_$.i1,v=e.$_$.db,y=e.$_$.d8,w=e.$_$.f5,b=e.$_$.ib,x=e.$_$.q7,S=e.$_$.w3,E=e.$_$.l5,M=e.$_$.b7,T=e.$_$.e3,C=e.$_$.r7,$=e.$_$.s,A=e.$_$.y1,R=e.$_$.d3,O=e.$_$.e8,I=e.$_$.u3,k=e.$_$.c8,U=e.$_$.l1,P=e.$_$.y7,D=e.$_$.d7,N=e.$_$.n7,L=e.$_$.n5,z=e.$_$.n3,F=e.$_$.g,B=e.$_$.cc,H=e.$_$.g3,V=e.$_$.k7,q=e.$_$.t,j=e.$_$.j3,G=e.$_$.s8,W=e.$_$.l4,X=e.$_$.m7,Y=e.$_$.g1,K=e.$_$.w7,J=e.$_$.l,Z=e.$_$.l3,Q=e.$_$.n1,tt=e.$_$.b3,et=e.$_$.x3,nt=e.$_$.p4,it=e.$_$.m4,rt=e.$_$.h3;function at(){}function st(t,e,n){this.y18_1=t,this.z18_1=e,this.a19_1=n,i.b19(this.y18_1,this.z18_1,this.a19_1.length)}function ot(t,e){if(e<=t.t19_1.p19_1)return u;if(!t.s19_1){var n="Can't grow ByteArrayDeque. Need to write "+e+", but only "+t.t19_1.p19_1+" is available";throw p("ERROR: "+n),g(m(n))}var i,r,s=t,o=new Gt(0|(i=t.t19_1.q19_1+e|0,r=a(i),K(r)+2));o.x19(t.t19_1),s.t19_1=o}function lt(t,e){t=t===d?10:t,e=e===d||e,this.r19_1=t,this.s19_1=e,this.t19_1=new Gt(this.r19_1),this.u19_1=new Int8Array(1024),this.v19_1=new v(0,0),this.w19_1=new v(0,0)}function ut(){}function ct(t){t=t===d?7:t;var e=new Int32Array(t);this.a1a_1=x(e)?e:b(),this.b1a_1=0}function ht(t){t=t===d?7:t,this.f1a_1=new ct(t)}function ft(t,e){t.i1a_1,t.j1a_1.p1a(e),t.l1a_1=t.l1a_1+e.length|0}function _t(t,e,n){var i=t;e.i1a_1,e.k1a_1=e.k1a_1+n|0,e.l1a_1=e.l1a_1-n|0,e.k1a_1>=i.length&&(e.j1a_1.mc(),e.k1a_1=0)}function dt(){this.i1a_1=new le,this.j1a_1=mt(),this.k1a_1=0,this.l1a_1=0}function pt(t){return t.o1a_1.length}function mt(){return t=P(s(bt)),bt.call(t,16),t;var t}function gt(t,e){if((t.n()+e|0)>pt(t)){var n=t.o1a_1,i=t.m1a_1,a=t.o1a_1.length+7|0,s=t.n()+e|0,o=r(t.o1a_1.length,2),l=Math.max(s,o),u=Math.max(a,l),c=D(Array(u),null),h=N(c)?c:b();(function(t,e,n,i,r){var a=e.length-n|0,s=Math.min(a,r),o=r-s|0;re(e,n,i,0,s),o>0&&re(e,0,i,s,o)})(0,n,i,h,t.n1a_1),t.o1a_1=h,t.m1a_1=0}}function vt(t,e){(function(t){return t.o1a_1}(t))[e]=null}function yt(t,e){return ne(t.m1a_1+e|0,pt(t))}function wt(t,e){this.u1a_1=t,this.v1a_1=e,this.t1a_1=0}function bt(t){this.m1a_1=0,this.n1a_1=0;var e=D(Array(t),null);this.o1a_1=N(e)?e:b()}function xt(){}function St(){}function Et(t,e,n){if(!(0<=e&&e<t.c19()&&0<=n&&n<t.d19()))throw U();return r(n,t.c19())+e|0}function Mt(t,e,n){e=e===d?.75:e;var i,r,s,o=(i=t=t===d?16:t,r=a(i),s=Math.ceil(r),K(s)),l=Math.max(4,o);return Pt.call(n,l,e,!0),n}function Tt(t,e){return Mt(t,e,P(s(Pt)))}function Ct(){this.c1b_1=2147483646,this.d1b_1=2147483647,this.e1b_1=0}function $t(t){return t.m1b_1.length-t.l1b_1|0}function At(t){var e=t.f1b_1<20?3:1,n=new Pt(t.f1b_1+e|0,t.g1b_1,!0),i=0,r=t.m1b_1.length-1|0;if(i<=r)do{var a=i;i=i+1|0;var s=t.m1b_1[a];0!==s&&n.q1b(s,t.n1b_1[a])}while(i<=r);t.f1b_1=n.f1b_1,t.h1b_1=n.h1b_1,t.k1b_1=n.k1b_1,t.l1b_1=n.l1b_1,t.m1b_1=n.m1b_1,t.n1b_1=n.n1b_1,t.o1b_1=n.o1b_1}function Rt(t,e){if(0===e)return t.i1b_1?2147483647:-1;var n=It(t,e);if(t.m1b_1[n]===e)return n;var i=kt(t,e);if(t.m1b_1[i]===e)return i;var r=Ut(t,e);if(t.m1b_1[r]===e)return r;var a=$t(t),s=t.m1b_1.length;if(a<s)do{var o=a;if(a=a+1|0,t.m1b_1[o]===e)return o}while(a<s);return-1}function Ot(t,e,n,i){if(0!==t.m1b_1[e])throw Y();return t.m1b_1[e]=n,t.n1b_1[e]=i,t.p1b_1=t.p1b_1+1|0,0}function It(t,e){return Lt(e,t.k1b_1)}function kt(t,e){return zt(e,t.k1b_1)}function Ut(t,e){return Ft(e,t.k1b_1)}function Pt(t,e,n){this.f1b_1=t,this.g1b_1=e,this.h1b_1=1<<this.f1b_1,this.i1b_1=!1,this.j1b_1=0,this.k1b_1=this.h1b_1-1|0,this.l1b_1=1+r(this.f1b_1,this.f1b_1)|0,this.m1b_1=new Int32Array(this.r1b()),this.n1b_1=new Int32Array(this.r1b()),this.o1b_1=K(this.h1b_1*this.g1b_1),this.p1b_1=0}function Dt(t,e){if(0===e)return t.v1b_1?2147483647:-1;var n=function(t,e){return Lt(e,t.x1b_1)}(t,e);if(t.z1b_1[n]===e)return n;var i=function(t,e){return zt(e,t.x1b_1)}(t,e);if(t.z1b_1[i]===e)return i;var r=function(t,e){return Ft(e,t.x1b_1)}(t,e);if(t.z1b_1[r]===e)return r;var a=function(t){return t.z1b_1.length-t.y1b_1|0}(t),s=t.z1b_1.length;if(a<s)do{var o=a;if(a=a+1|0,t.z1b_1[o]===e)return o}while(a<s);return-1}function Nt(){}function Lt(t,e){return Bt(t,e)}function zt(t,e){return Bt(r(t,1294968109),e)}function Ft(t,e){return Bt(r(t,294969449),e)}function Bt(t,e){return(((t+(255&(t>>>8|0))|0)+(255&(t>>>16|0))|0)+(t>>24&255)|0)&e}function Ht(){}function Vt(t){return u}function qt(t){return u}function jt(t,e,n){var i;t=t===d?Vt:t,e=e===d?0:e,this.b1c_1=t,this.c1c_1=n,this.d1c_1=i===d?ae():i,this.e1c_1=0;var r=0;if(r<e)do{r=r+1|0;var a=this.e1c_1;this.e1c_1=a+1|0,Kt(this.d1c_1,this.c1c_1(a))}while(r<e)}function Gt(t){Wt.call(this,t)}function Wt(t){this.j19_1=t,this.k19_1=1<<this.j19_1,this.l19_1=this.k19_1-1|0,this.m19_1=new Int8Array(this.k19_1),this.n19_1=0,this.o19_1=0,this.p19_1=this.k19_1,this.q19_1=0}function Xt(t){return t.n()}function Yt(){}function Kt(t,e){t.p(e)}function Jt(t,e){return t.y(e)}function Zt(t){return t.hashCode()}function Qt(t){this.u1c_1=t}function te(t){t=t===d?null:t,this.v1c_1=t}function ee(t,e){t=t===d?null:t,this.w1c_1=t,this.x1c_1=e}function ne(t,e){var n=t%e|0;return n<0?n+e|0:n}function ie(t,e,n,i,r){return Z(t,n,i,e,e+r|0),n}function re(t,e,n,i,r){return Z(t,n,i,e,e+r|0),n}function ae(){return t=P(s(oe)),oe.call(t,[]),t;var t}function se(t,e){if(e<0||e>=t.n())throw Q("index: "+e+", size: "+t.n());return e}function oe(t){tt.call(this),this.t1c_1=t}function le(){}return l(at,"Companion",o),l(St,"IArray2",X),l(st,"IntArray2",_,d,[St]),l(lt,"ByteArrayDeque",_,d,d,lt),l(ut,"Companion",o),l(ct,"IntArrayList",_,d,[R],ct),l(ht,"ShortArrayList",_,d,d,ht),l(dt,"ChunkedByteDeque",_,d,d,dt),l(wt,d,_),l(bt,"TGenDeque",_,d,[R],mt),l(xt,"Companion",o),l(Ct,"Companion",o),l(Pt,"IntIntMap",_,d,d,Tt),l(Nt,"IntMap",_),l(Ht,"Companion",o),l(jt,"Pool",_),l(Wt,"ByteRingBuffer",_),l(Gt,"RingBuffer",_,Wt),l(Yt,"Companion",o),l(Qt,"TGenStack",_,d,[R]),l(te,"Mixin",_,d,d,te),l(ee,"Property",_),l(oe,"FastArrayList",_,tt,[tt,rt]),l(le,"NonRecursiveLock",_,d,d,le),s(st).c19=function(){return this.y18_1},s(st).d19=function(){return this.z18_1},s(st).e19=function(t){return this.a19_1[t]},s(st).equals=function(t){return!!(t instanceof st&&this.y18_1===t.y18_1&&this.z18_1===t.z18_1)&&c(this.a19_1,t.a19_1)},s(st).f19=function(t,e){return this.a19_1[Et(this,t,e)]},s(st).g19=function(t,e,n){this.a19_1[Et(this,t,e)]=n},s(st).hashCode=function(){return(this.y18_1+this.z18_1|0)+h(this.a19_1)|0},s(st).s=function(){return f(this.a19_1)},s(st).toString=function(){return this.h19()},s(lt).y19=function(){return this.t19_1.q19_1},s(lt).zk=function(t,e,n){ot(this,n);var i=this.t19_1.zk(t,e,n);return i>0&&(this.v19_1=this.v19_1.ba(y(i))),i},s(lt).wk=function(t,e,n){var i=this.t19_1.wk(t,e,n);return i>0&&(this.w19_1=this.w19_1.ba(y(i))),i},s(lt).hashCode=function(){return this.t19_1.z19()},s(lt).equals=function(t){return t instanceof lt&&this.t19_1.equals(t.t19_1)},s(ct).n=function(){return this.b1a_1},s(ct).c1a=function(t){if((this.b1a_1+t|0)>this.a1a_1.length){var e=this.a1a_1,n=this.b1a_1+t|0,i=r(this.a1a_1.length,3),a=Math.max(n,i),s=S(e,a);this.a1a_1=x(s)?s:b()}},s(ct).d1a=function(t){this.c1a(1);var e=this.a1a_1,n=this.b1a_1;this.b1a_1=n+1|0,e[n]=t},s(ct).d1=function(t){return this.a1a_1[t]},s(ct).e19=function(t){return this.a1a_1[t]},s(ct).s=function(){return this.o1(0)},s(ct).ye=function(t){var e=0,n=this.b1a_1;if(e<n)do{var i=e;if(e=e+1|0,this.a1a_1[i]===t)return!0}while(e<n);return!1},s(ct).e1a=function(t){for(var e=t.s();e.t();){var n=e.u();if(!this.ye(n))return!1}return!0},s(ct).y=function(t){return this.e1a(t)},s(ct).z=function(){return 0===this.n()},s(ct).o1=function(t){return E(this.a1a_1,this.b1a_1).o1(t)},s(ct).hashCode=function(){return function(t,e,n){var i=n-e|0,a=0,s=0;if(s<i)do{var o=s;s=s+1|0,a=(a=r(a,7))+t[e+o|0]|0}while(s<i);return a}(this.a1a_1,0,this.n())},s(ct).equals=function(t){return t instanceof ct?this.n()===t.n()&&function(t,e,n,i){var r;t:{var a=i-n|0,s=0;if(s<a)do{var o=s;if(s=s+1|0,t[n+o|0]!==e[n+o|0]){r=!1;break t}}while(s<a);r=!0}return r}(this.a1a_1,t.a1a_1,0,this.n()):!(null==t||!C(t,T))&&M(t,this)},s(ct).toString=function(){var t=$(2+r(5,this.n())|0);t.h5(A(91));var e=0,n=this.n();if(e<n)do{var i=e;e=e+1|0,0!==i&&t.g5(", "),t.f5(this.e19(i))}while(e<n);return t.h5(A(93)),t.toString()},s(ht).n=function(){return this.f1a_1.n()},s(ht).g1a=function(t){return this.f1a_1.d1a(t)},s(ht).h1a=function(){var t=new Int16Array(this.n()),e=0,n=this.n();if(e<n)do{var i=e;e=e+1|0,t[i]=O(this.f1a_1.d1(i))}while(e<n);return t},s(dt).q1a=function(t,e,n){ft(this,I(t,e,e+n|0))},s(dt).r1a=function(t){ft(this,new Int8Array([k(t)]))},s(dt).wk=function(t,e,n){if(e<0||(e+n|0)>t.length)throw U();var i=e,r=n,a=0;t:for(;r>0;){this.i1a_1;var s=this.j1a_1.z()?null:this.j1a_1.s1a();if(null==s)break t;var o=s,l=o.length-this.k1a_1|0,u=r,c=Math.min(l,u);if(c<=0)break t;ie(o,this.k1a_1,t,i,c),i=i+c|0,r=r-c|0,a=a+c|0,_t(o,this,c)}return a},s(wt).u=function(){var t=this.t1a_1;return this.t1a_1=t+1|0,this.u1a_1.d1(t)},s(wt).t=function(){return this.t1a_1<this.v1a_1.n()},s(wt).w=function(){this.t1a_1=this.t1a_1-1|0,this.v1a_1.f1(this.t1a_1)},s(bt).n=function(){return this.n1a_1},s(bt).z=function(){return 0===this.n()},s(bt).w1a=function(t){gt(this,1),function(t,e){t.o1a_1[(t.m1a_1+t.n1a_1|0)%pt(t)|0]=e,t.n1a_1=t.n1a_1+1|0}(this,t)},s(bt).x1a=function(t){var e=t.n();gt(this,e);var n=this.m1a_1+this.n1a_1|0,i=0;if(i<e)do{var r=i;i=i+1|0,this.o1a_1[(n+r|0)%pt(this)|0]=t.d1(r)}while(i<e);return this.n1a_1=this.n1a_1+e|0,!0},s(bt).y1a=function(t){return this.x1a(L(t))},s(bt).q=function(t){return this.y1a(t)},s(bt).mc=function(){if(this.n1a_1<=0)throw U();var t=this.s1a();return vt(this,this.m1a_1),this.m1a_1=(this.m1a_1+1|0)%pt(this)|0,this.n1a_1=this.n1a_1-1|0,t},s(bt).oc=function(){if(this.n1a_1<=0)throw U();var t=this.z1a();return vt(this,yt(this,this.n()-1|0)),this.n1a_1=this.n1a_1-1|0,t},s(bt).f1=function(t){if(t<0||t>=this.n())throw U();if(0===t)return this.mc();if(t===(this.n()-1|0))return this.oc();var e=this.d1(t);if(t<(this.n()/2|0)){var n=t;if(1<=n)do{var i=n;n=n+-1|0,this.a1b(i,this.d1(i-1|0))}while(1<=n);this.m1a_1=ne(this.m1a_1+1|0,pt(this))}else{var r=t,a=this.n()-1|0;if(r<a)do{var s=r;r=r+1|0,this.a1b(s,this.d1(s+1|0))}while(r<a)}return this.n1a_1=this.n1a_1-1|0,e},s(bt).p1a=function(t){return this.w1a(t),!0},s(bt).p=function(t){return this.p1a(null==t||null!=t?t:b())},s(bt).s1a=function(){return this.o1a_1[this.m1a_1]},s(bt).z1a=function(){return this.o1a_1[yt(this,this.n()-1|0)]},s(bt).a1b=function(t,e){this.o1a_1[yt(this,t)]=e},s(bt).d1=function(t){return this.o1a_1[yt(this,t)]},s(bt).b1b=function(t){for(var e=F(z(t,10)),n=t.s();n.t();){var i=n.u(),r=B(i,0);e.p(r)}var a,s=function(t){for(var e=J(),n=t.s();n.t();){var i=n.u(),r=i.dd(),a=i.ed();e.a2(r,a)}return e}(e),o=0,l=this.n();if(o<l)do{var u=o;o=o+1|0;var c=this.d1(u);(C(s,H)?s:b()).h2(c)&&s.a2(c,1)}while(o<l);t:{var h=s.y1();if(C(h,R)&&h.z())a=!0;else{for(var f=h.s();f.t();)if(1!==f.u()){a=!1;break t}a=!0}}return a},s(bt).y=function(t){return this.b1b(t)},s(bt).s=function(){return new wt(this,this)},s(bt).hashCode=function(){var t=this.n(),e=1,n=0;if(n<t)do{var i=n;n=n+1|0;var a=r(31,e),s=this.d1(i),o=null==s?null:V(s);e=a+(null==o?0:o)|0}while(n<t);return e},s(bt).equals=function(t){if(!(t instanceof bt))return!1;if(t.n()!==this.n())return!1;var e=0,n=this.n();if(e<n)do{var i=e;if(e=e+1|0,!M(this.d1(i),t.d1(i)))return!1}while(e<n);return!0},s(bt).toString=function(){var t=q();t.h5(A(91));var e=0,n=this.n();if(e<n)do{var i=e;e=e+1|0,t.f5(this.d1(i)),i!==(this.n()-1|0)&&t.g5(", ")}while(e<n);return t.h5(A(93)),t.toString()},s(xt).b19=function(t,e,n){if(!(n>=r(t,e)))throw g(m("backing array of size="+n+", has less elements than "+t+" * "+e))},s(Pt).toString=function(){return m(this.s1b())},s(Pt).r1b=function(){return this.h1b_1+this.l1b_1|0},s(Pt).t1b=function(t){for(var e=this.i1b_1?2147483647:this.u1b(this.m1b_1,0);2147483646!==e;){var n;switch(e){case 2147483647:case 2147483646:n=0;break;default:n=this.m1b_1[e]}var i=n,r=this.d1(n);t.a2(i,r),e=this.u1b(this.m1b_1,2147483647===e?0:e+1|0)}return t},s(Pt).s1b=function(t,e){return t=t===d?function(t){for(var e=J(),n=0,i=t.length;n<i;){var r=t[n];n=n+1|0;var a=r.dd(),s=r.ed();e.a2(a,s)}return e}([]):t,e===d?this.t1b(t):e.t1b.call(this,t)},s(Pt).ye=function(t){return Rt(this,t)>=0},s(Pt).d1=function(t){var e=Rt(this,t);return e<0?0:2147483647===e?this.j1b_1:this.n1b_1[e]},s(Pt).q1b=function(t,e){for(;;){var n=Rt(this,t);if(!(n<0)){if(2147483647===n){var i=this.j1b_1;return this.j1b_1=e,i}var a=this.n1b_1[n];return this.n1b_1[n]=e,a}if(0===t)return this.i1b_1=!0,this.j1b_1=e,this.p1b_1=this.p1b_1+1|0,0;this.p1b_1>=this.o1b_1&&At(this);var s=It(this,t);if(0===this.m1b_1[s])return Ot(this,s,t,e);var o=kt(this,t);if(0===this.m1b_1[o])return Ot(this,o,t,e);var l=Ut(this,t);if(0===this.m1b_1[l])return Ot(this,l,t,e);var u=$t(this),c=this.m1b_1.length;if(u<c)do{var h=u;if(u=u+1|0,0===this.m1b_1[h])return Ot(this,h,t,e)}while(u<c);this.l1b_1>512?At(this):((f=this).l1b_1=r(f.l1b_1,2),f.m1b_1=S(f.m1b_1,f.r1b()),f.n1b_1=S(f.n1b_1,f.r1b()))}var f},s(Pt).u1b=function(t,e){var n=e,i=t.length;if(n<i)do{var r=n;if(n=n+1|0,0!==t[r])return r}while(n<i);return 2147483646},s(Pt).equals=function(t){if(!(t instanceof Nt))return!1;for(var e=this.i1b_1?2147483647:this.u1b(this.m1b_1,0);2147483646!==e;){var n;switch(e){case 2147483647:case 2147483646:n=0;break;default:n=this.m1b_1[e]}var i=n,r=this.d1(n);if(!M(t.d1(i),r))return!1;e=this.u1b(this.m1b_1,2147483647===e?0:e+1|0)}return!0},s(Pt).hashCode=function(){for(var t=0,e=this.i1b_1?2147483647:this.u1b(this.m1b_1,0);2147483646!==e;){var n;switch(e){case 2147483647:case 2147483646:n=0;break;default:n=this.m1b_1[e]}t=t+(n+this.d1(n)|0)|0,e=this.u1b(this.m1b_1,2147483647===e?0:e+1|0)}return t},s(Nt).d1=function(t){var e=Dt(this,t);return e<0?null:2147483647===e?this.w1b_1:this.a1c_1[e]},s(jt).f1c=function(){return Xt(this.d1c_1)},s(jt).g1c=function(){var t,e;if(new Qt(this.d1c_1).z()){var n=this.e1c_1;this.e1c_1=n+1|0,t=this.c1c_1(n)}else t=(e=this.d1c_1).f1(e.n()-1|0);return t},s(jt).h1c=function(t){this.b1c_1(t),Kt(this.d1c_1,t)},s(jt).hashCode=function(){return Zt(this.d1c_1)},s(jt).equals=function(t){return!!(t instanceof jt&&M(this.d1c_1,t.d1c_1))&&this.f1c()===t.f1c()},s(Wt).i1c=function(){return this.m19_1},s(Wt).j1c=function(){return this.n19_1&this.l19_1},s(Wt).k1c=function(){return this.o19_1&this.l19_1},s(Wt).l1c=function(t){if(t<0||t>this.p19_1)throw g(m("Try to write more than available"));this.o19_1=this.o19_1+t|0,this.q19_1=this.q19_1+t|0,this.p19_1=this.p19_1-t|0},s(Wt).m1c=function(t){if(t<0||t>this.q19_1)throw g(m("Try to write more than available"));this.n19_1=this.n19_1+t|0,this.q19_1=this.q19_1-t|0,this.p19_1=this.p19_1+t|0},s(Wt).n1c=function(){var t=this.q19_1,e=this.k19_1-(this.n19_1&this.l19_1)|0;return Math.min(t,e)},s(Wt).o1c=function(){var t=this.p19_1,e=this.k19_1-(this.o19_1&this.l19_1)|0;return Math.min(t,e)},s(Wt).x19=function(t){for(;t.q19_1>0;){var e=t.n1c(),n=this.o1c(),i=Math.min(e,n);ie(t.i1c(),t.j1c(),this.i1c(),this.k1c(),i),t.m1c(i),this.l1c(i)}},s(Wt).zk=function(t,e,n){var i=this.p19_1,r=Math.min(i,n),a=e,s=0;t:for(;r>0;){var o=r,l=this.o1c(),u=Math.min(o,l);if(u<=0)break t;ie(t,a,this.m19_1,this.k1c(),u),this.l1c(u),a=a+u|0,r=r-u|0,s=s+u|0}return s},s(Wt).wk=function(t,e,n){return this.p1c(this.q1c(t,e,n))},s(Wt).p1c=function(t){var e=this.q19_1,n=Math.min(e,t);return this.n19_1=(this.n19_1+n|0)&this.l19_1,this.p19_1=this.p19_1+n|0,this.q19_1=this.q19_1-n|0,n},s(Wt).q1c=function(t,e,n){var i=this.q19_1,r=Math.min(i,n),a=0,s=this.m19_1,o=this.l19_1,l=e,u=this.n19_1;t:for(;;){var c=r,h=this.n1c(),f=Math.min(c,h);if(f<=0)break t;ie(s,u&o,t,l,f),r=r-f|0,l=l+f|0,u=u+f|0,a=a+f|0}return a},s(Wt).ok=function(){if(this.q19_1<=0)return-1;var t=255&this.m19_1[this.n19_1];return this.n19_1=(this.n19_1+1|0)&this.l19_1,this.q19_1=this.q19_1-1|0,this.p19_1=this.p19_1+1|0,t},s(Wt).r1c=function(t){return this.m19_1[(this.n19_1+t|0)&this.l19_1]},s(Wt).equals=function(t){var e;if(t instanceof Wt&&this.q19_1===t.q19_1){var n;t:{var i=this.q19_1,r=0;if(r<i)do{var a=r;if(r=r+1|0,this.r1c(a)!==t.r1c(a)){n=!1;break t}}while(r<i);n=!0}e=n}else e=!1;return e},s(Wt).hashCode=function(){return this.z19()},s(Wt).z19=function(){var t=this.q19_1,e=0,n=0;if(n<t)do{var i=n;n=n+1|0,e=(e=r(e,7))+this.r1c(i)|0}while(n<t);return e},s(Qt).n=function(){return Xt(this.u1c_1)},s(Qt).z=function(){return 0===Xt(this.u1c_1)},s(Qt).b1b=function(t){return Jt(this.u1c_1,t)},s(Qt).y=function(t){return function(t,e){return Jt(t.u1c_1,e)}(this,t)},s(Qt).s=function(){return this.u1c_1.s()},s(Qt).toString=function(){return"TGenStack(items="+this.u1c_1+")"},s(Qt).hashCode=function(){return Zt(this.u1c_1)},s(Qt).equals=function(t){return function(t,e){if(!(e instanceof Qt))return!1;var n=e instanceof Qt?e.u1c_1:b();return!!t.equals(n)}(this.u1c_1,t)},s(oe).n=function(){return this.t1c_1.length},s(oe).d1=function(t){return this.t1c_1[se(this,t)]},s(oe).o=function(t,e){se(this,t);var n=this.t1c_1[t];return this.t1c_1[t]=e,n},s(oe).p=function(t){return this.t1c_1.push(t),this.e1_1=this.e1_1+1|0,!0},s(oe).l1=function(t,e){this.t1c_1.splice(function(t,e){if(e<0||e>t.n())throw Q("index: "+e+", size: "+t.n());return e}(this,t),0,e),this.e1_1=this.e1_1+1|0},s(oe).q=function(t){return function(t,e){if(0===e.length)return!1;var n=t.t1c_1;return function(){var t=n;return t.push.apply(t,[].slice.call(e.slice()))}.call(this),t.e1_1=t.e1_1+1|0,!0}(this,et(t))},s(oe).f1=function(t){return se(this,t),this.e1_1=this.e1_1+1|0,0===t?this.t1c_1.shift():t===nt(this)?this.t1c_1.pop():this.t1c_1.splice(t,1)[0]},s(oe).y1c=function(t){var e=this.t1c_1,n=0,i=e.length;if(n<i)do{var r=n;n=n+1|0;var a=e[r];if(M(a,t))return e.splice(r,1),this.e1_1=this.e1_1+1|0,!0}while(n<i);return!1},s(oe).m1=function(t,e){this.t1c_1.splice(t,e-t|0),this.e1_1=this.e1_1+1|0},s(oe).v=function(){this.t1c_1.length=0,this.e1_1=this.e1_1+1|0},s(oe).n1=function(t){return this.t1c_1.indexOf(t)},s(oe).toString=function(){var t=this.t1c_1;return"["+it(t,", ")+"]"},s(oe).t2=function(){return this.t1c_1.concat()},s(oe).toArray=function(){return this.t2()},s(st).i19=function(t,e){return this.e19(Et(this,t,e))},s(st).h19=function(){var t,e=G(0,this.d19());return W(e,"\n",d,d,d,d,(t=this,function(e){for(var n=G(0,t.c19()),i=F(z(n,10)),r=n.s();r.t();){var a=r.u(),s=t.i19(a,e);i.p(s)}return W(i,", ")}))},n=new at,new ut,i=new xt,new Ct,new Ht,new Yt,t.$_$=t.$_$||{},t.$_$.a=ae,t.$_$.b=Tt,t.$_$.c=function(t,e){return function(t,e,n){return t=t===d?0:t,jt.call(n,qt,t,e),n}(t,e,P(s(jt)))},t.$_$.d=n,t.$_$.e=le,t.$_$.f=lt,t.$_$.g=dt,t.$_$.h=te,t.$_$.i=ee,t.$_$.j=st,t.$_$.k=Gt,t.$_$.l=ht,t.$_$.m=function(t){var e=function(t,e){t=t===d?0:t;var n=[];return oe.call(e,n),e}(t.length,P(s(oe)));return j(e,t),e},t.$_$.n=function(t,e){var n;e=e===d?1:e;var i=t.length,r=ne(e,i);if(0!==r){if(!(1<=r&&r<i))throw g(m("Check failed."));w(t,0,i),w(t,0,r),w(t,r,i)}else n=u;return n},t.$_$.o=function(t,e,n){var i=t[e];t[e]=t[n],t[n]=i},t})?i.apply(e,r):i)||(t.exports=a)},988:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n,i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S=Math.imul,E=e.$_$.db,M=e.$_$.a8,T=e.$_$.d,C=e.$_$.z7,$=e.$_$.b8,A=e.$_$.a3,R=e.$_$.xa,O=e.$_$.x6,I=e.$_$.x7,k=e.$_$.y6,U=e.$_$.ib,P=(e.$_$.s2,e.$_$.t4),D=e.$_$.h7,N=e.$_$.b7,L=e.$_$.wa,z=e.$_$.w7;function F(t,e,n,i){return e*b+n*w+i*pt()}function B(){n=this,this.d17_1=new E(1,0),this.e17_1=0,this.f17_1=621355968e5}function H(){return null==n&&new B,n}function V(t,e){for(var n=0,i=0,r=new Int32Array(13);i<13;){var a=i;n=n+(0===a?0:j().j17_1[a-1|0].y17(e))|0,r[a]=n,i=i+1|0}return r}function q(){p=this,this.h17_1=new E(1,0),this.i17_1=12,this.j17_1=[X(),Y(),K(),J(),Z(),Q(),tt(),et(),nt(),it(),rt(),at()],this.k17_1=V(0,!0),this.l17_1=V(0,!1)}function j(){return G(),null==p&&new q,p}function G(){if(m)return A;m=!0,i=new W("January",0,1,31),r=new W("February",1,2,28,29),a=new W("March",2,3,31),s=new W("April",3,4,30),o=new W("May",4,5,31),l=new W("June",5,6,30),u=new W("July",6,7,31),c=new W("August",7,8,31),h=new W("September",8,9,30),f=new W("October",9,10,31),_=new W("November",10,11,30),d=new W("December",11,12,31),j()}function W(t,e,n,i,r){r=r===T?i:r,R.call(this,t,e),this.p17_1=n,this.q17_1=i,this.r17_1=r}function X(){return G(),i}function Y(){return G(),r}function K(){return G(),a}function J(){return G(),s}function Z(){return G(),o}function Q(){return G(),l}function tt(){return G(),u}function et(){return G(),c}function nt(){return G(),h}function it(){return G(),f}function rt(){return G(),_}function at(){return G(),d}function st(t,e){return k(t,e)}function ot(){g=this,this.d18_1=new E(1,0),this.e18_1=.001,this.f18_1=1e-6,this.g18_1=0,this.h18_1=NaN,this.i18_1=P([60,60,24])}function lt(){return null==g&&new ot,g}function ut(t){return e=t,(Math.floor(e)===e?""+z(e):""+e)+"ms";var e}function ct(t){lt(),this.c18_1=t}function ht(){v=this,this.m18_1=new E(1,0),this.n18_1=365,this.o18_1=366,this.p18_1=1,this.q18_1=24,this.r18_1=97,this.s18_1=1461,this.t18_1=36524,this.u18_1=146097}function ft(){return null==v&&new ht,v}function _t(t){return ft().v18(t)}function dt(t,e){var n=t%e|0;return n<0?n+e|0:n}function pt(){return y}function mt(t,e,n){return(t-e|0)/(1+(n-e|0)|0)|0}function gt(t,e,n){return dt(t-e|0,1+(n-e|0)|0)+e|0}return $(B,"Companion",C),$(q,"Companion",C),$(W,"Month",O,R),$(ot,"Companion",C),$(ct,"TimeSpan",O,T,[L]),$(ht,"Companion",C),M(B).g17=function(t,e,n,i,r,a,s){var o=t,l=e,u=n,c=i,h=r,f=a;h=h+mt(f,0,59)|0,f=gt(f,0,59),c=c+mt(h,0,59)|0,h=gt(h,0,59),u=u+mt(c,0,23)|0,c=gt(c,0,23);t:for(;;){var _=j().m17(l).s17(o);if(l=l+mt(u,1,_)|0,u=gt(u,1,_),o=o+mt(l,1,12)|0,l=gt(l,1,12),gt(u,1,j().m17(l).s17(o))===u)break t}return this.t17(o,l,u,c,h,f,s)},M(B).u17=function(t,e,n,i,r,a,s,o){return i=i===T?0:i,r=r===T?0:r,a=a===T?0:a,s=s===T?0:s,o===T?this.g17(t,e,n,i,r,a,s):o.g17.call(this,t,e,n,i,r,a,s).v17_1},M(B).t17=function(t,e,n,i,r,a,s){return H().w17(t,e,n)+F(H(),i,r,a)+s},M(B).w17=function(t,e,n){return(((0|(i=t,ft().x18(i)+j().m17(e).x17(t)))+n|0)-1|0)*x-621355968e5;var i},M(q).m17=function(t){return this.z17(t)},M(q).z17=function(t){return this.j17_1[dt(t-1|0,12)]},M(W).a18=function(){return this.p17_1-1|0},M(W).y17=function(t){return t?this.r17_1:this.q17_1},M(W).s17=function(t){return this.y17(_t(t))},M(W).b18=function(t){return(e=j(),n=t,n?e.k17_1:e.l17_1)[this.a18()];var e,n},M(W).x17=function(t){return this.b18(_t(t))},M(ot).j18=function(t){return 0===t?this.g18_1:t},M(ot).k18=function(t){return this.j18(t*pt())},M(ct).l18=function(t){return st(this.c18_1,t)},M(ct).d=function(t){return function(t,e){return st(t.c18_1,e instanceof ct?e.c18_1:U())}(this,t)},M(ct).toString=function(){return ut(this.c18_1)},M(ct).hashCode=function(){return t=this.c18_1,D(t);var t},M(ct).equals=function(t){return function(t,e){if(!(e instanceof ct))return!1;var n=e instanceof ct?e.c18_1:U();return!!N(t,n)}(this.c18_1,t)},M(ht).v18=function(t){return 0==(t%4|0)&&(0!=(t%100|0)||0==(t%400|0))},M(ht).w18=function(t){if(t<1){for(var e=0,n=1;n>=t;)_t(n)&&(e=e-1|0),n=n-1|0;return e}var i=t-1|0;return((i/4|0)-(i/100|0)|0)+(i/400|0)|0},M(ht).x18=function(t){return S(365,t-1|0)+this.w18(t)|0},y=1e3,w=6e4,b=36e5,x=864e5,t.$_$=t.$_$||{},t.$_$.a=function(t){return I(t)},t.$_$.b=H,t.$_$.c=lt,t.$_$.d=ct,t})?i.apply(e,r):i)||(t.exports=a)},51:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n,i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$,A=e.$_$.a3,R=e.$_$.xa,O=e.$_$.a8,I=e.$_$.x6,k=e.$_$.b8,U=e.$_$.p6,P=e.$_$.t,D=e.$_$.n4,N=e.$_$.d,L=e.$_$.y1,z=e.$_$.m7,F=e.$_$.y9,B=e.$_$.u4,H=e.$_$.k8,V=e.$_$.k,q=e.$_$.z7,j=e.$_$.b4,G=e.$_$.i,W=e.$_$.sb,X=e.$_$.u8,Y=e.$_$.i7,K=e.$_$.cc,J=e.$_$.l,Z=e.$_$.s6,Q=e.$_$.z9,tt=e.$_$.p4,et=e.$_$.h,nt=e.$_$.ib,it=e.$_$.n7,rt=e.$_$.d7,at=e.$_$.sa,st=e.$_$.g,ot=e.$_$.f4,lt=e.$_$.q5,ut=e.$_$.v8,ct=e.$_$.vb;function ht(t,e,n,i){return t.h5(L(27)),t.h5(L(91)),t.f5(e),null!=n&&t.g5(n),t.h5(i),t}function ft(t,e,n){return this.r1e(t,30+e.v1e_1|0,n?";1":null)}function _t(){if(s)return A;s=!0,i=new dt("ERROR",0,0,(mt(),o)),r=new dt("WARN",1,1,(mt(),u)),new dt("INFO",2,2,(mt(),c)),new dt("DEBUG",3,3,(mt(),h)),new dt("TRACE",4,4,(mt(),l)),a=new dt("LOG",5,5,null)}function dt(t,e,n,i){R.call(this,t,e),this.g1e_1=n,this.h1e_1=i}function pt(){}function mt(){if(f)return A;f=!0,new gt("BLACK",0,0),o=new gt("RED",1,1),l=new gt("GREEN",2,2),u=new gt("YELLOW",3,3),c=new gt("BLUE",4,4),new gt("PURPLE",5,5),h=new gt("CYAN",6,6),new gt("WHITE",7,7)}function gt(t,e,n){R.call(this,t,e),this.v1e_1=n}function vt(){}function yt(){w=this;for(var t=[Tt(),Ct(),$t(),At(),Rt(),Ot(),It()],e=H(B(t.length),16),n=V(e),i=0,r=t.length;i<r;){var a=t[i];i=i+1|0;var s=a.m9_1;n.a2(s,a)}this.w1e_1=n}function wt(){return bt(),null==w&&new yt,w}function bt(){if(b)return A;b=!0,_=new Et("NONE",0,0),d=new Et("FATAL",1,1),p=new Et("ERROR",2,2),m=new Et("WARN",3,3),g=new Et("INFO",4,4),v=new Et("DEBUG",5,5),y=new Et("TRACE",6,6),wt()}function xt(){x=this,this.y1e_1=new Ft(j()),this.z1e_1=new Ft(null),this.a1f_1=new Ft(T)}function St(){return null==x&&new xt,x}function Et(t,e,n){R.call(this,t,e),this.q1f_1=n}function Mt(){}function Tt(){return bt(),_}function Ct(){return bt(),d}function $t(){return bt(),p}function At(){return bt(),m}function Rt(){return bt(),g}function Ot(){return bt(),v}function It(){return bt(),y}function kt(t,e,n){St(),this.h1f_1=t,this.i1f_1=e,this.j1f_1=n,this.k1f_1=null,this.l1f_1=null,this.m1f_1=null}function Ut(t,e,n){return t.g1f_1}function Pt(t,e,n,i){t.g1f_1=i}function Dt(){if(null==E){for(var t=Bt(),e=V(B(t.n())),n=t.z1().s();n.t();){var i=n.u(),r=i.c2().toUpperCase(),a=i.d2();e.a2(r,a)}E=e}return W(E)}function Nt(){M=this,pt.call(this)}function Lt(){return null==M&&new Nt,M}function zt(){}function Ft(t){this.g1f_1=t}function Bt(){qt();var t=C;return Y("miniEnvironmentVariables",0,ut,(function(){return Bt()}),null),t.d2()}function Ht(t){qt();for(var e=function(t){qt();var e=function(t){qt();for(var e=0,n=t.length,i=rt(Array(n),null);e<n;){var r=e;i[r]=t[r],e=e+1|0}return i}(function(t){return qt(),Object.keys(t)}(t));return it(e)?e:nt()}(t),n=H(B(e.length),16),i=V(n),r=0,a=e.length;r<a;){var s=e[r];r=r+1|0;var o=K(s,t[s]);i.a2(o.bd_1,o.cd_1)}return i}function Vt(){var t;if(qt(),"undefined"!=typeof process)t=Ht(process.env);else if("undefined"!=typeof Deno)t=Ht(Deno.env);else{for(var e=document.location,n=null==e?null:e.search,i=function(t){qt();for(var e=J(),n=Q(t,Z([L(38)])).s();n.t();){var i,r=n.u(),a=Q(r,Z([L(61)]),N,2),s=a.d1(0),o=1<=tt(a)?a.d1(1):s,l=e.k2(s);if(null==l){var u=et();e.a2(s,u),i=u}else i=l;i.p(o)}return e}(at(null==n?"":n,Z([L(63)]))),r=st(i.n()),a=i.z1().s();a.t();){var s=a.u(),o=s.c2(),l=ot(s.d2()),u=K(o,null==l?s.c2():l);r.p(u)}t=lt(r)}return t}function qt(){$||($=!0,C=ct(Vt))}return k(dt,"Kind",I,R),k(vt,"AnsiEscape",z),k(pt,"BaseConsole",I,N,[vt],pt),k(gt,"Color",I,R),k(yt,"Companion",q),k(xt,"Companion",q),k(Et,"Level",I,R),k(Mt,"ConsoleLogOutput",q),k(kt,"Logger",I),k(Nt,"Console",q,pt),k(zt,"DefaultLogOutput",q),k(Ft,"KloggerAtomicRef",I),O(pt).j1e=function(t,e){var i,r;null!=n?n(t,e,(i=this,(r=function(t,e){return i.i1e(t,e),A}).callableName="logInternal",r)):this.i1e(t,e.slice())},O(pt).i1e=function(t,e){U(this.k1e(t,e.slice()))},O(pt).k1e=function(t,e){var n=P(),i=t.h1e_1;return null!=i&&this.l1e(n,i),D(e,n,", "),null!=i&&this.m1e(n),n.toString()},O(pt).n1e=function(t){return this.j1e((_t(),a),t.slice())},O(pt).o1e=function(t){return this.j1e((_t(),r),t.slice())},O(pt).p1e=function(t){return this.j1e((_t(),i),t.slice())},O(yt).x1e=function(t){var e=t.toUpperCase(),n=this.w1e_1.k2(e);return null==n?Tt():n},O(xt).b1f=function(t){return Pt(this.z1e_1,0,Y("defaultLevel",1,X,(function(t){return t.c1f()}),(function(t,e){return t.b1f(e)})),t)},O(xt).c1f=function(){return Ut(this.z1e_1,0,Y("defaultLevel",1,X,(function(t){return t.c1f()}),(function(t,e){return t.b1f(e)})))},O(xt).d1f=function(t){return Pt(this.a1f_1,0,Y("defaultOutput",1,X,(function(t){return t.e1f()}),(function(t,e){return t.d1f(e)})),t)},O(xt).e1f=function(){return Ut(this.a1f_1,0,Y("defaultOutput",1,X,(function(t){return t.e1f()}),(function(t,e){return t.d1f(e)})))},O(xt).f1f=function(t){var e=function(t,e){return F(F(e,L(46),L(95)),L(47),L(95)).toUpperCase()}(0,t);if(null==this.y1e_1.g1f_1.k2(e)){var n=new kt(t,e,!0),i=Dt().k2("LOG_"+e);if(null==i||n.n1f(wt().x1e(i)),this.y1e_1.g1f_1.z()){var r=Dt().k2("LOG_LEVEL");null==r||St().b1f(wt().x1e(r))}var a=this.y1e_1,s=a,o=a.g1f_1,l=G(o);l.a2(e,n),s.g1f_1=l}var u=this.y1e_1.g1f_1.k2(e);return W(u)},O(Mt).r1f=function(t,e,n){switch(e.n9_1){case 2:Lt().p1e([t.h1f_1,n]);break;case 3:Lt().o1e([t.h1f_1,n]);break;default:Lt().n1e([t.h1f_1,n])}},O(kt).n1f=function(t){this.l1f_1=t},O(kt).s1f=function(){var t=this.l1f_1,e=null==t?St().c1f():t;return null==e?At():e},O(kt).t1f=function(){var t=this.m1f_1;return null==t?St().e1f():t},O(kt).u1f=function(t){return t.q1f_1<=this.s1f().q1f_1},O(kt).v1f=function(t,e){this.t1f().r1f(this,t,e)},O(Nt).i1e=function(t,e){switch(t.n9_1){case 0:(function(){var t=console;return t.error.apply(t,[].slice.call(e.slice()))}).call(this);break;case 1:(function(){var t=console;return t.warn.apply(t,[].slice.call(e.slice()))}).call(this);break;case 2:(function(){var t=console;return t.info.apply(t,[].slice.call(e.slice()))}).call(this);break;case 3:(function(){var t=console;return t.log.apply(t,[].slice.call(e.slice()))}).call(this);break;case 4:(function(){var t=console;return t.log.apply(t,[].slice.call(e.slice()))}).call(this);break;case 5:(function(){var t=console;return t.log.apply(t,[].slice.call(e.slice()))}).call(this)}},O(zt).r1f=function(t,e,n){return S.r1f(t,e,n)},O(pt).q1e=ht,O(pt).r1e=function(t,e,n,i,r){return n=n===N?null:n,i=i===N?L(109):i,r===N?this.q1e(t,e,n,i):ht(t,e,n,i)},O(pt).m1e=function(t){return this.r1e(t,0)},O(pt).s1e=ft,O(pt).l1e=function(t,e,n,i){return n=n!==N&&n,i===N?this.s1e(t,e,n):ft(t,e,n)},n=null,S=new Mt,E=null,T=new zt,t.$_$=t.$_$||{},t.$_$.a=$t,t.$_$.b=St,t})?i.apply(e,r):i)||(t.exports=a)},350:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n=Math.imul,i=Math.clz32,r=e.$_$.l3,a=e.$_$.a3,s=e.$_$.c8,o=e.$_$.e4,l=e.$_$.d,u=e.$_$.f8,c=e.$_$.k7,h=e.$_$.ib,f=e.$_$.b7,_=e.$_$.a8,d=e.$_$.x6,p=e.$_$.b8,m=e.$_$.y7,g=e.$_$.r1,v=e.$_$.u2,y=e.$_$.i1,w=e.$_$.v3,b=e.$_$.d8,x=e.$_$.i8,S=e.$_$.w7;function E(t,e,n,i,a){r(t,n,i,e,e+a|0)}function M(t){return t}function T(t){return t}function C(t){return t.length}function $(t){this.z1c_1=t}function A(t,e){return t<<(32-e|0)>>(32-e|0)}function R(t,e){return s(t>>>e|0)}function O(t){return(1<<t)-1|0}function I(t){return function(t,e){return t=t===l?4096:t,U.call(e,new Int8Array(t),0),e}(t,m(_(U)))}function k(t,e){if(t.b1d_1.length<e){if(!t.c1d_1)throw g("ByteArrayBuffer configured to not grow!");var i=n(t.b1d_1.length+7|0,5),r=i<0?v.MAX_VALUE/2|0:i;if(i<0&&e>r)throw y(u("ByteArrayBuffer can't grow that much"));var a=t,s=t.b1d_1,o=Math.max(e,r);a.b1d_1=w(s,o)}}function U(t,e,n){e=e===l?t.length:e,n=n===l||n,this.b1d_1=t,this.c1d_1=n,this.d1d_1=e}function P(t,e,n){t[e+0|0]=R(n,0),t[e+1|0]=R(n,8)}function D(t,e){return function(t,e){return 255&t[e]}(t,e)}function N(t){this.i1d_1=t,this.j1d_1=0}function L(t,e){this.k1d_1=t,this.l1d_1=e}function z(t,e,n,i){this.m1d_1=t,this.n1d_1=e,this.o1d_1=n,this.p1d_1=i}function F(t,e,n,i){this.q1d_1=t,this.r1d_1=e,this.s1d_1=n,this.t1d_1=i}return p($,"UByteArrayInt",d),p(U,"ByteArrayBuilder",d,l,l,I),p(N,"FixedSizeByteArrayBuilder",d),p(L,"Int2Pack",d),p(z,"Int4Pack",d),p(F,"Short4Pack",d),_($).toString=function(){return t=this.z1c_1,"UByteArrayInt(data="+u(t)+")";var t},_($).hashCode=function(){return t=this.z1c_1,c(t);var t},_($).equals=function(t){return function(t,e){if(!(e instanceof $))return!1;var n=e instanceof $?e.z1c_1:h();return!!f(t,n)}(this.z1c_1,t)},_(U).e1d=function(t){var e=this.d1d_1,n=t;k(this,n),this.d1d_1=n,n>e&&function(t,e,n,i){n=n===l?0:n,i=i===l?t.length:i,o(t,e,n,i)}(this.b1d_1,0,e,n)},_(U).n=function(){return this.d1d_1},_(U).f1d=function(t,e,n){var i,r;r=n,k(i=this,i.d1d_1+r|0),E(t,e,this.b1d_1,this.d1d_1,n),this.d1d_1=this.d1d_1+n|0},_(U).g1d=function(t,e,n,i){var r;return e=e===l?0:e,n=n===l?t.length-e|0:n,i===l?(this.f1d(t,e,n),r=a):r=i.f1d.call(this,t,e,n),r},_(U).h1d=function(t){k(this,this.d1d_1+1|0);var e=this.b1d_1,n=this.d1d_1;this.d1d_1=n+1|0,e[n]=t},_(U).dk=function(){return w(this.b1d_1,this.d1d_1)},_(N).v=function(){this.j1d_1=0},_(N).f1d=function(t,e,n){E(t,e,this.i1d_1,this.j1d_1,n),this.j1d_1=this.j1d_1+n|0},_(N).h1d=function(t){var e=this.j1d_1;this.j1d_1=e+1|0,this.i1d_1[e]=t},_(L).toString=function(){return"Int2Pack(x="+this.k1d_1+", y="+this.l1d_1+")"},_(L).hashCode=function(){var t=this.k1d_1;return n(t,31)+this.l1d_1|0},_(L).equals=function(t){if(this===t)return!0;if(!(t instanceof L))return!1;var e=t instanceof L?t:h();return this.k1d_1===e.k1d_1&&this.l1d_1===e.l1d_1},_(z).toString=function(){return"Int4Pack(x="+this.m1d_1+", y="+this.n1d_1+", z="+this.o1d_1+", w="+this.p1d_1+")"},_(z).hashCode=function(){var t=this.m1d_1;return t=n(t,31)+this.n1d_1|0,t=n(t,31)+this.o1d_1|0,n(t,31)+this.p1d_1|0},_(z).equals=function(t){if(this===t)return!0;if(!(t instanceof z))return!1;var e=t instanceof z?t:h();return this.m1d_1===e.m1d_1&&this.n1d_1===e.n1d_1&&this.o1d_1===e.o1d_1&&this.p1d_1===e.p1d_1},_(F).toString=function(){return"Short4Pack(x="+this.q1d_1+", y="+this.r1d_1+", z="+this.s1d_1+", w="+this.t1d_1+")"},_(F).hashCode=function(){var t=this.q1d_1;return t=n(t,31)+this.r1d_1|0,t=n(t,31)+this.s1d_1|0,n(t,31)+this.t1d_1|0},_(F).equals=function(t){if(this===t)return!0;if(!(t instanceof F))return!1;var e=t instanceof F?t:h();return this.q1d_1===e.q1d_1&&this.r1d_1===e.r1d_1&&this.s1d_1===e.s1d_1&&this.t1d_1===e.t1d_1},t.$_$=t.$_$||{},t.$_$.a=I,t.$_$.b=function(t){return function(t,e){return N.call(e,new Int8Array(t)),e}(t,m(_(N)))},t.$_$.c=function(t,e,n,i,r){var u;return n=n===l?0:n,i=i===l?C(t):i,r===l?(function(t,e,n,i){o(t,s(e),n,i)}(t,e,n,i),u=a):u=(null==r?null:new $(r)).a1d.call(new $(t),e,n,i),u},t.$_$.d=M,t.$_$.e=function(t){return new Int8Array(t)},t.$_$.f=T,t.$_$.g=function(t,e){return 255&t[e]},t.$_$.h=function(t,e,n){t[e]=s(n)},t.$_$.i=C,t.$_$.j=function(t){return t.k1d_1},t.$_$.k=function(t){return t.m1d_1},t.$_$.l=function(t){return t.l1d_1},t.$_$.m=function(t){return t.n1d_1},t.$_$.n=function(t){return t.o1d_1},t.$_$.o=function(t){return t.p1d_1},t.$_$.p=function(t,e){return new L(t,e)},t.$_$.q=function(t,e,n,i){return new z(t,e,n,i)},t.$_$.r=function(t){return t.q1d_1},t.$_$.s=function(t){return t.r1d_1},t.$_$.t=function(t){return t.s1d_1},t.$_$.u=function(t){return t.t1d_1},t.$_$.v=function(t,e,n,i){return new F(t,e,n,i)},t.$_$.w=U,t.$_$.x=$,t.$_$.y=E,t.$_$.z=function(t,e,n,i,a){r(t,n,i,e,e+a|0)},t.$_$.a1=function(t,e,n,i,r){return E(t,e,n,i,r)},t.$_$.b1=function(t){return function(t,e,n){return t<e?e:t>n?n:t}(t,0,1)},t.$_$.c1=function(t){var e=t&(0|-(t>=0?1:0));return 255&(e|(255-e|0)>>31)},t.$_$.d1=function(t,e,n){return t<e?e:t>n?n:t},t.$_$.e1=function(t,e,n){return t.t8(e)<0?e:t.t8(n)>0?n:t},t.$_$.f1=function(t,e,n,i,r){return function(t,e,n){return t<e?e:t>n?n:t}(function(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}(t,e,n,i,r),i,r)},t.$_$.g1=function(t,e){return 0!=(t%e|0)?1+(t/e|0)|0:t/e|0},t.$_$.h1=function(t,e,n){return(t>>>e|0)&O(n)},t.$_$.i1=function(t){return 0===t?-1:31-i(t)|0},t.$_$.j1=function(t,e,n){return t&~(3<<n)|(3&e)<<n},t.$_$.k1=function(t,e,n,i){var r=O(i);return t&~(r<<n)|(e&r)<<n},t.$_$.l1=function(t,e,n){return t&~(1<<n)|(e?1:0)<<n},t.$_$.m1=function(t){var e=t;return e=e-1|0,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,1+(e|=e>>16)|0},t.$_$.n1=function(t,e,n){return n?function(t,e){return A(D(t,e+0|0)<<0|D(t,e+1|0)<<8,16)}(t,e):function(t,e){return A(D(t,e+1|0)<<0|D(t,e+0|0)<<8,16)}(t,e)},t.$_$.o1=function(t,e){return D(t,e+3|0)<<0|D(t,e+2|0)<<8|D(t,e+1|0)<<16|D(t,e+0|0)<<24},t.$_$.p1=function(t,e){return D(t,e+0|0)<<0|D(t,e+1|0)<<8|D(t,e+2|0)<<16|D(t,e+3|0)<<24},t.$_$.q1=function(t,e){return D(t,e+0|0)<<0|D(t,e+1|0)<<8},t.$_$.r1=function(t,e,n){return e=e===l?v.MIN_VALUE:e,n=n===l?v.MAX_VALUE:n,t.t8(b(e))<0?e:t.t8(b(n))>0?n:t.y8()},t.$_$.s1=function(t){var e=x(t);return S(e)},t.$_$.t1=function(t,e){var n=t%e|0,i=0===n?0:n;return i<0?i+e|0:i},t.$_$.u1=P,t.$_$.v1=function(t,e,n,i){i?P(t,e,n):function(t,e,n){t[e+1|0]=R(n,0),t[e+0|0]=R(n,8)}(t,e,n)},t.$_$.w1=function(t,e,n){t[e+3|0]=R(n,0),t[e+2|0]=R(n,8),t[e+1|0]=R(n,16),t[e+0|0]=R(n,24)},t.$_$.x1=function(t,e,n){t[e]=s(n)},t})?i.apply(e,r):i)||(t.exports=a)},706:function(t,e,n){var i,r,a;r=[e,n(866),n(756),n(675),n(350),n(298),n(738),n(988)],void 0===(a="function"==typeof(i=function(t,e,n,i,r,a,s,o){"use strict";var l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$,A,R,O,I,k,U,P=Math.imul,D=Math.log2,N=e.$_$.h,L=n.$_$.h,z=i.$_$.vb,F=n.$_$.q,B=i.$_$.a8,H=i.$_$.a3,V=i.$_$.d,q=i.$_$.fb,j=r.$_$.d1,G=i.$_$.wb,W=n.$_$.a,X=n.$_$.c,Y=e.$_$.j,K=(e.$_$.d,i.$_$.ib),J=i.$_$.q7,Z=a.$_$.l,Q=i.$_$.x6,tt=i.$_$.b8,et=i.$_$.w8,nt=i.$_$.i7,it=e.$_$.i,rt=i.$_$.y7,at=i.$_$.d4,st=i.$_$.z7,ot=i.$_$.m6,lt=i.$_$.x8,ut=i.$_$.s8,ct=i.$_$.x5,ht=i.$_$.r1,ft=r.$_$.z,_t=i.$_$.t,dt=i.$_$.z8,pt=r.$_$.g,mt=r.$_$.h,gt=r.$_$.y,vt=i.$_$.c8,yt=i.$_$.w3,wt=e.$_$.b,bt=r.$_$.d,xt=r.$_$.i1,St=r.$_$.h1,Et=r.$_$.k1,Mt=n.$_$.r,Tt=n.$_$.s,Ct=n.$_$.k,$t=n.$_$.m,At=n.$_$.t,Rt=n.$_$.l,Ot=n.$_$.i,It=n.$_$.u,kt=n.$_$.j,Ut=n.$_$.n,Pt=n.$_$.b,Dt=n.$_$.e,Nt=n.$_$.g,Lt=n.$_$.d,zt=n.$_$.f,Ft=n.$_$.o,Bt=n.$_$.p,Ht=i.$_$.cc,Vt=i.$_$.w4,qt=i.$_$.y1,jt=s.$_$.a,Gt=i.$_$.y6,Wt=i.$_$.wa,Xt=i.$_$.w7,Yt=i.$_$.xa,Kt=i.$_$.v5,Jt=i.$_$.h,Zt=i.$_$.k3,Qt=i.$_$.n3,te=i.$_$.g,ee=i.$_$.y3,ne=i.$_$.k5,ie=i.$_$.f4,re=i.$_$.s4,ae=i.$_$.u2,se=e.$_$.m,oe=i.$_$.u4,le=i.$_$.k8,ue=i.$_$.k,ce=i.$_$.e1,he=i.$_$.p7,fe=i.$_$.ua,_e=i.$_$.f8,de=i.$_$.t5,pe=i.$_$.v1,me=r.$_$.a,ge=a.$_$.n,ve=i.$_$.j7,ye=i.$_$.h7,we=i.$_$.k7,be=i.$_$.f7,xe=i.$_$.b7,Se=i.$_$.o5,Ee=i.$_$.x4,Me=a.$_$.g,Te=a.$_$.b,Ce=a.$_$.k,$e=i.$_$.x1,Ae=i.$_$.s5,Re=i.$_$.g5,Oe=i.$_$.u8,Ie=e.$_$.e,ke=o.$_$.c,Ue=o.$_$.d,Pe=i.$_$.a4,De=i.$_$.sb,Ne=r.$_$.c,Le=r.$_$.i,ze=i.$_$.l2,Fe=i.$_$.m2,Be=a.$_$.m,He=i.$_$.v3,Ve=a.$_$.d,qe=a.$_$.o,je=a.$_$.q,Ge=a.$_$.c,We=a.$_$.e,Xe=a.$_$.f,Ye=a.$_$.p,Ke=i.$_$.t4,Je=r.$_$.f1,Ze=r.$_$.g1,Qe=r.$_$.e,tn=i.$_$.d7,en=r.$_$.x,nn=r.$_$.f,rn=r.$_$.x1,an=(i.$_$.s2,i.$_$.o1),sn=r.$_$.a1,on=r.$_$.b1,ln=r.$_$.s1,un=r.$_$.c1;function cn(t,e,n,i,r){var a;this.g30_1=t,this.h30_1=e,this.i30_1=n,this.j30_1=r,this.k30_1=new N,this.l30_1=L(0,0,this.g30_1,this.h30_1),this.m30_1=null,this.n30_1=i,this.o30_1=!1,this.p30_1=z((a=this,function(){return new Int32Array(P(a.g30_1,2))})),this.q30_1=0,this.r30_1=null,this.s30_1=!1}function hn(){return _n(),null}function fn(){return _n(),null}function _n(){l||(l=!0,new it(V,hn),new it(V,fn))}function dn(){u=this,this.d38_1=new gn(0,0,V,!0)}function pn(){return null==u&&new dn,u}function mn(t,e){this.n38_1=t,ot.call(this,e)}function gn(t,e,n,i){if(pn(),n=n===V?new Int32Array(P(t,e)):n,i=i===V||i,cn.call(this,t,e,32,i,n),this.x37_1=n,this.x37_1.length<P(t,e))throw ht("Bitmap data is too short: width="+t+", height="+e+", data=ByteArray("+this.x37_1.length+"), area="+P(t,e));var r=Math.max(t,e);this.y37_1=new Int32Array(r),this.z37_1=L(0,0,t,e)}function vn(){}function yn(t,e,n,i){n=n===V?new Int8Array(P(t,e)):n,i=i===V?d.a39(256):i,wn.call(this,8,t,e,n,i)}function wn(t,e,n,i,r){if(i=i===V?new Int8Array(P(e,n)/(8/t|0)|0):i,r=r===V?d.a39(1<<t):r,cn.call(this,e,n,t,!1,i),this.i3a_1=i,this.j3a_1=r,this.i3a_1.length<(P(e,n)/(8/t|0)|0))throw ht("Bitmap data is too short: width="+e+", height="+n+", data=ByteArray("+this.r3a().length+"), area="+P(e,n));var a=Math.max(e,n);this.k3a_1=new Int8Array(a),this.l3a_1=bt(this.r3a()),this.m3a_1=8/t|0,this.n3a_1=xt(this.m3a_1),this.o3a_1=this.m3a_1-1|0}function bn(t){return xn(t)}function xn(t){return t.y2z()}function Sn(t,e,n,i,r){e=e===V?L(0,0,t.g30_1,t.h30_1):e,n=n===V?null:n,i=i===V?Mt().n2y_1:i,r=r===V?Tt().o2x_1:r;var a=j(Ct(e),0,t.g30_1),s=j($t(e),0,t.h30_1);return new It(t,At.r2x(a,s,j(Rt(e),a,t.g30_1),j(Ot(e),s,t.h30_1)),i,r,n)}function En(t){var e=Pt(t.y2y_1)?kt(t.x2y_1):Ut(t.x2y_1),n=Pt(t.y2y_1)?Ut(t.x2y_1):kt(t.x2y_1),i=xn(t).i37(e+Dt(t.z2y_1)|0,n+Nt(t.z2y_1)|0),r=i instanceof cn?i:K(),a=function(t){var e=xn(t).i37(Ut(t.x2y_1),kt(t.x2y_1)),n=e instanceof cn?e:K();return xn(t).w36(Ft(t.x2y_1),Bt(t.x2y_1),n,0,0,Ut(t.x2y_1),kt(t.x2y_1)),n}(t).h37(t.y2y_1);return a.z36(0,0,r,Lt(t.z2y_1),zt(t.z2y_1),a.g30_1,a.h30_1),r}function Mn(){return f||(f=!0,h=Sn(pn().e38(1,1,Vn(Rn().g31_1)),V,"transparent"),Sn(pn().e38(1,1,Vn(Rn().b31_1)),V,"white")),h}function Tn(){}function Cn(t,e,n,i){e=e===V?null:e,n=n===V?0:n,i=i===V?0:i,this.w3a_1=t,this.x3a_1=e,this.y3a_1=n,this.z3a_1=i}function $n(){this.a3b_1=32}function An(){_=this,this.b31_1=jn().g3b(255,255,255,255),this.c31_1=jn().g3b(0,0,0,255),this.d31_1=jn().g3b(255,0,0,255),this.e31_1=jn().g3b(0,255,0,255),this.f31_1=jn().g3b(0,0,255,255),this.g31_1=jn().g3b(0,0,0,0),this.h31_1=jn().g3b(255,255,255,0),this.i31_1=jn().h3b(240,248,255),this.j31_1=jn().h3b(250,235,215),this.k31_1=jn().h3b(0,255,255),this.l31_1=jn().h3b(127,255,212),this.m31_1=jn().h3b(240,255,255),this.n31_1=jn().h3b(245,245,220),this.o31_1=jn().h3b(255,228,196),this.p31_1=jn().h3b(255,235,205),this.q31_1=jn().h3b(138,43,226),this.r31_1=jn().h3b(165,42,42),this.s31_1=jn().h3b(222,184,135),this.t31_1=jn().h3b(95,158,160),this.u31_1=jn().h3b(127,255,0),this.v31_1=jn().h3b(210,105,30),this.w31_1=jn().h3b(255,127,80),this.x31_1=jn().h3b(100,149,237),this.y31_1=jn().h3b(255,248,220),this.z31_1=jn().h3b(220,20,60),this.a32_1=jn().h3b(0,0,139),this.b32_1=jn().h3b(0,255,255),this.c32_1=jn().h3b(0,139,139),this.d32_1=jn().h3b(184,134,11),this.e32_1=jn().h3b(169,169,169),this.f32_1=jn().h3b(0,100,0),this.g32_1=jn().h3b(169,169,169),this.h32_1=jn().h3b(189,183,107),this.i32_1=jn().h3b(255,0,255),this.j32_1=jn().h3b(139,0,139),this.k32_1=jn().h3b(85,107,47),this.l32_1=jn().h3b(255,140,0),this.m32_1=jn().h3b(153,50,204),this.n32_1=jn().h3b(139,0,0),this.o32_1=jn().h3b(233,150,122),this.p32_1=jn().h3b(143,188,143),this.q32_1=jn().h3b(72,61,139),this.r32_1=jn().h3b(47,79,79),this.s32_1=jn().h3b(47,79,79),this.t32_1=jn().h3b(0,206,209),this.u32_1=jn().h3b(148,0,211),this.v32_1=jn().h3b(255,20,147),this.w32_1=jn().h3b(0,191,255),this.x32_1=jn().h3b(105,105,105),this.y32_1=jn().h3b(105,105,105),this.z32_1=jn().h3b(30,144,255),this.a33_1=jn().h3b(178,34,34),this.b33_1=jn().h3b(255,250,240),this.c33_1=jn().h3b(34,139,34),this.d33_1=jn().h3b(255,0,255),this.e33_1=jn().h3b(220,220,220),this.f33_1=jn().h3b(248,248,255),this.g33_1=jn().h3b(255,215,0),this.h33_1=jn().h3b(218,165,32),this.i33_1=jn().h3b(173,255,47),this.j33_1=jn().h3b(240,255,240),this.k33_1=jn().h3b(255,105,180),this.l33_1=jn().h3b(205,92,92),this.m33_1=jn().h3b(75,0,130),this.n33_1=jn().h3b(255,255,240),this.o33_1=jn().h3b(240,230,140),this.p33_1=jn().h3b(230,230,250),this.q33_1=jn().h3b(255,240,245),this.r33_1=jn().h3b(124,252,0),this.s33_1=jn().h3b(255,250,205),this.t33_1=jn().h3b(173,216,230),this.u33_1=jn().h3b(240,128,128),this.v33_1=jn().h3b(224,255,255),this.w33_1=jn().h3b(250,250,210),this.x33_1=jn().h3b(211,211,211),this.y33_1=jn().h3b(144,238,144),this.z33_1=jn().h3b(211,211,211),this.a34_1=jn().h3b(255,182,193),this.b34_1=jn().h3b(255,160,122),this.c34_1=jn().h3b(32,178,170),this.d34_1=jn().h3b(135,206,250),this.e34_1=jn().h3b(119,136,153),this.f34_1=jn().h3b(119,136,153),this.g34_1=jn().h3b(176,196,222),this.h34_1=jn().h3b(255,255,224),this.i34_1=jn().h3b(0,255,0),this.j34_1=jn().h3b(50,205,50),this.k34_1=jn().h3b(250,240,230),this.l34_1=jn().h3b(128,0,0),this.m34_1=jn().h3b(102,205,170),this.n34_1=jn().h3b(0,0,205),this.o34_1=jn().h3b(186,85,211),this.p34_1=jn().h3b(147,112,219),this.q34_1=jn().h3b(60,179,113),this.r34_1=jn().h3b(123,104,238),this.s34_1=jn().h3b(0,250,154),this.t34_1=jn().h3b(72,209,204),this.u34_1=jn().h3b(199,21,133),this.v34_1=jn().h3b(25,25,112),this.w34_1=jn().h3b(245,255,250),this.x34_1=jn().h3b(255,228,225),this.y34_1=jn().h3b(255,228,181),this.z34_1=jn().h3b(255,222,173),this.a35_1=jn().h3b(0,0,128),this.b35_1=jn().h3b(253,245,230),this.c35_1=jn().h3b(128,128,0),this.d35_1=jn().h3b(107,142,35),this.e35_1=jn().h3b(255,165,0),this.f35_1=jn().h3b(255,69,0),this.g35_1=jn().h3b(218,112,214),this.h35_1=jn().h3b(238,232,170),this.i35_1=jn().h3b(152,251,152),this.j35_1=jn().h3b(175,238,238),this.k35_1=jn().h3b(219,112,147),this.l35_1=jn().h3b(255,239,213),this.m35_1=jn().h3b(255,218,185),this.n35_1=jn().h3b(205,133,63),this.o35_1=jn().h3b(255,192,203),this.p35_1=jn().h3b(221,160,221),this.q35_1=jn().h3b(176,224,230),this.r35_1=jn().h3b(128,0,128),this.s35_1=jn().h3b(188,143,143),this.t35_1=jn().h3b(65,105,225),this.u35_1=jn().h3b(139,69,19),this.v35_1=jn().h3b(250,128,114),this.w35_1=jn().h3b(244,164,96),this.x35_1=jn().h3b(46,139,87),this.y35_1=jn().h3b(255,245,238),this.z35_1=jn().h3b(160,82,45),this.a36_1=jn().h3b(192,192,192),this.b36_1=jn().h3b(135,206,235),this.c36_1=jn().h3b(106,90,205),this.d36_1=jn().h3b(112,128,144),this.e36_1=jn().h3b(112,128,144),this.f36_1=jn().h3b(255,250,250),this.g36_1=jn().h3b(0,255,127),this.h36_1=jn().h3b(70,130,180),this.i36_1=jn().h3b(210,180,140),this.j36_1=jn().h3b(0,128,128),this.k36_1=jn().h3b(216,191,216),this.l36_1=jn().h3b(255,99,71),this.m36_1=jn().h3b(64,224,208),this.n36_1=jn().h3b(238,130,238),this.o36_1=jn().h3b(245,222,179),this.p36_1=jn().h3b(245,245,245),this.q36_1=jn().h3b(154,205,50),this.r36_1=jn().h3b(255,255,0),this.s36_1=Vt([Ht("black",new Gn(this.c31_1)),Ht("white",new Gn(this.b31_1)),Ht("red",new Gn(this.d31_1)),Ht("green",new Gn(this.e31_1)),Ht("blue",new Gn(this.f31_1)),Ht("aliceblue",new Gn(this.i31_1)),Ht("antiquewhite",new Gn(this.j31_1)),Ht("aqua",new Gn(this.k31_1)),Ht("aquamarine",new Gn(this.l31_1)),Ht("azure",new Gn(this.m31_1)),Ht("beige",new Gn(this.n31_1)),Ht("bisque",new Gn(this.o31_1)),Ht("blanchedalmond",new Gn(this.p31_1)),Ht("blueviolet",new Gn(this.q31_1)),Ht("brown",new Gn(this.r31_1)),Ht("burlywood",new Gn(this.s31_1)),Ht("cadetblue",new Gn(this.t31_1)),Ht("chartreuse",new Gn(this.u31_1)),Ht("chocolate",new Gn(this.v31_1)),Ht("coral",new Gn(this.w31_1)),Ht("cornflowerblue",new Gn(this.x31_1)),Ht("cornsilk",new Gn(this.y31_1)),Ht("crimson",new Gn(this.z31_1)),Ht("cyan",new Gn(this.b32_1)),Ht("darkblue",new Gn(this.a32_1)),Ht("darkcyan",new Gn(this.c32_1)),Ht("darkgoldenrod",new Gn(this.d32_1)),Ht("darkgray",new Gn(this.e32_1)),Ht("darkgreen",new Gn(this.f32_1)),Ht("darkgrey",new Gn(this.g32_1)),Ht("darkkhaki",new Gn(this.h32_1)),Ht("darkmagenta",new Gn(this.j32_1)),Ht("darkolivegreen",new Gn(this.k32_1)),Ht("darkorange",new Gn(this.l32_1)),Ht("darkorchid",new Gn(this.m32_1)),Ht("darkred",new Gn(this.n32_1)),Ht("darksalmon",new Gn(this.o32_1)),Ht("darkseagreen",new Gn(this.p32_1)),Ht("darkslateblue",new Gn(this.q32_1)),Ht("darkslategray",new Gn(this.r32_1)),Ht("darkslategrey",new Gn(this.s32_1)),Ht("darkturquoise",new Gn(this.t32_1)),Ht("darkviolet",new Gn(this.u32_1)),Ht("deeppink",new Gn(this.v32_1)),Ht("deepskyblue",new Gn(this.w32_1)),Ht("dimgray",new Gn(this.x32_1)),Ht("dimgrey",new Gn(this.y32_1)),Ht("dodgerblue",new Gn(this.z32_1)),Ht("firebrick",new Gn(this.a33_1)),Ht("floralwhite",new Gn(this.b33_1)),Ht("forestgreen",new Gn(this.c33_1)),Ht("fuchsia",new Gn(this.d33_1)),Ht("gainsboro",new Gn(this.e33_1)),Ht("ghostwhite",new Gn(this.f33_1)),Ht("gold",new Gn(this.g33_1)),Ht("goldenrod",new Gn(this.h33_1)),Ht("greenyellow",new Gn(this.i33_1)),Ht("honeydew",new Gn(this.j33_1)),Ht("hotpink",new Gn(this.k33_1)),Ht("indianred",new Gn(this.l33_1)),Ht("indigo",new Gn(this.m33_1)),Ht("ivory",new Gn(this.n33_1)),Ht("khaki",new Gn(this.o33_1)),Ht("lavender",new Gn(this.p33_1)),Ht("lavenderblush",new Gn(this.q33_1)),Ht("lawngreen",new Gn(this.r33_1)),Ht("lemonchiffon",new Gn(this.s33_1)),Ht("lightblue",new Gn(this.t33_1)),Ht("lightcoral",new Gn(this.u33_1)),Ht("lightcyan",new Gn(this.v33_1)),Ht("lightgoldenrodyellow",new Gn(this.w33_1)),Ht("lightgray",new Gn(this.x33_1)),Ht("lightgreen",new Gn(this.y33_1)),Ht("lightgrey",new Gn(this.z33_1)),Ht("lightpink",new Gn(this.a34_1)),Ht("lightsalmon",new Gn(this.b34_1)),Ht("lightseagreen",new Gn(this.c34_1)),Ht("lightskyblue",new Gn(this.d34_1)),Ht("lightslategray",new Gn(this.e34_1)),Ht("lightslategrey",new Gn(this.f34_1)),Ht("lightsteelblue",new Gn(this.g34_1)),Ht("lightyellow",new Gn(this.h34_1)),Ht("lime",new Gn(this.i34_1)),Ht("limegreen",new Gn(this.j34_1)),Ht("linen",new Gn(this.k34_1)),Ht("magenta",new Gn(this.i32_1)),Ht("maroon",new Gn(this.l34_1)),Ht("mediumaquamarine",new Gn(this.m34_1)),Ht("mediumblue",new Gn(this.n34_1)),Ht("mediumorchid",new Gn(this.o34_1)),Ht("mediumpurple",new Gn(this.p34_1)),Ht("mediumseagreen",new Gn(this.q34_1)),Ht("mediumslateblue",new Gn(this.r34_1)),Ht("mediumspringgreen",new Gn(this.s34_1)),Ht("mediumturquoise",new Gn(this.t34_1)),Ht("mediumvioletred",new Gn(this.u34_1)),Ht("midnightblue",new Gn(this.v34_1)),Ht("mintcream",new Gn(this.w34_1)),Ht("mistyrose",new Gn(this.x34_1)),Ht("moccasin",new Gn(this.y34_1)),Ht("navajowhite",new Gn(this.z34_1)),Ht("navy",new Gn(this.a35_1)),Ht("oldlace",new Gn(this.b35_1)),Ht("olive",new Gn(this.c35_1)),Ht("olivedrab",new Gn(this.d35_1)),Ht("orange",new Gn(this.e35_1)),Ht("orangered",new Gn(this.f35_1)),Ht("orchid",new Gn(this.g35_1)),Ht("palegoldenrod",new Gn(this.h35_1)),Ht("palegreen",new Gn(this.i35_1)),Ht("paleturquoise",new Gn(this.j35_1)),Ht("palevioletred",new Gn(this.k35_1)),Ht("papayawhip",new Gn(this.l35_1)),Ht("peachpuff",new Gn(this.m35_1)),Ht("peru",new Gn(this.n35_1)),Ht("pink",new Gn(this.o35_1)),Ht("plum",new Gn(this.p35_1)),Ht("powderblue",new Gn(this.q35_1)),Ht("purple",new Gn(this.r35_1)),Ht("rosybrown",new Gn(this.s35_1)),Ht("royalblue",new Gn(this.t35_1)),Ht("saddlebrown",new Gn(this.u35_1)),Ht("salmon",new Gn(this.v35_1)),Ht("sandybrown",new Gn(this.w35_1)),Ht("seagreen",new Gn(this.x35_1)),Ht("seashell",new Gn(this.y35_1)),Ht("sienna",new Gn(this.z35_1)),Ht("silver",new Gn(this.a36_1)),Ht("skyblue",new Gn(this.b36_1)),Ht("slateblue",new Gn(this.c36_1)),Ht("slategray",new Gn(this.d36_1)),Ht("slategrey",new Gn(this.e36_1)),Ht("snow",new Gn(this.f36_1)),Ht("springgreen",new Gn(this.g36_1)),Ht("steelblue",new Gn(this.h36_1)),Ht("tan",new Gn(this.i36_1)),Ht("teal",new Gn(this.j36_1)),Ht("thistle",new Gn(this.k36_1)),Ht("tomato",new Gn(this.l36_1)),Ht("turquoise",new Gn(this.m36_1)),Ht("violet",new Gn(this.n36_1)),Ht("wheat",new Gn(this.o36_1)),Ht("whitesmoke",new Gn(this.p36_1)),Ht("yellowgreen",new Gn(this.q36_1)),Ht("yellow",new Gn(this.r36_1))])}function Rn(){return null==_&&new An,_}function On(){}function In(t){return t.length}function kn(t,e){return t[e]}function Un(t,e,n){t[e]=n}function Pn(t){return t}function Dn(t){return 255&(t>>>0|0)}function Nn(t){return 255&(t>>>8|0)}function Ln(t){return 255&(t>>>16|0)}function zn(t){return 255&(t>>>24|0)}function Fn(t){var e=_t();return e.h5(qt(35)),jt(e,Dn(t)),jt(e,Nn(t)),jt(e,Ln(t)),jt(e,zn(t)),e.toString()}function Bn(t){return Fn(t)}function Hn(t,e){return Gt(t,e)}function Vn(t){return function(t){var e=zn(t)+1|0;if(e>=255)return t;if(e<=1)return 0;var n=16711935&(P(16711935&t,e)>>>8|0),i=65280&(P(65280&t,e)>>>8|0);return-16777216&t|n|i}(t)}function qn(){p=this,$n.call(this),this.c3b_1=0,this.d3b_1=8,this.e3b_1=16,this.f3b_1=24}function jn(){return null==p&&new qn,p}function Gn(t){jn(),this.b38_1=t}function Wn(t){var e,n=function(t){return 255&(t>>>24|0)}(t);if(0===n)e=Rn().g31_1;else{var i=255/n;e=jn().g3b(Xt(function(t){return 255&(t>>>0|0)}(t)*i),Xt(function(t){return 255&(t>>>8|0)}(t)*i),Xt(function(t){return 255&(t>>>16|0)}(t)*i),n)}return e}function Xn(t,e){Yt.call(this,t,e)}function Yn(t){this.l3b_1=t}function Kn(t,e){var n=t.m3b_1,i=e.m3b_1;return Kt(n,i)}function Jn(){return function(){if(g)return H;g=!0,new Xn("ONCE_FORWARD",0),new Xn("ONCE_REVERSE",1),m=new Xn("FORWARD",2),new Xn("REVERSE",3),new Xn("PING_PONG",4)}(),m}function Zn(t,e,n,i){var r;if(i===V){for(var a=Jt(),s=t.s();s.t();){var o=s.u().r3b_1;Zt(a,o)}for(var l=te(Qt(a,10)),u=a.s();u.t();){var c=u.u().u3b_1;l.p(c)}var h=ee(l),f=new Yn(Kn);r=ne(h,f)}else r=i;i=r,this.d3c_1=t,this.e3c_1=e,this.f3c_1=n,this.g3c_1=i;var _=ie(this.d3c_1);this.h3c_1=null==_?new ui(0):_}function Qn(){}function ti(t){this.k3c_1=t}function ei(t,e){var n,i=e.m3c()?ae.MAX_VALUE:P(P(e.l3c().g30_1,e.l3c().h30_1),P(e.l3c().i30_1,e.l3c().i30_1));return n=t.m3c()?ae.MAX_VALUE:P(P(t.l3c().g30_1,t.l3c().h30_1),P(t.l3c().i30_1,t.l3c().i30_1)),Kt(i,n)}function ni(t,e,n,i,r,a,s){var o,l;if(e=e===V?0:e,n===V){var u=ie(t),c=null==u?null:u.c19();o=null==c?1:c}else o=n;if(n=o,i===V){var h=ie(t),f=null==h?null:h.d19();l=null==f?1:f}else l=i;i=l,r=r===V?se([]):r,a=a===V?se([]):a,s=s===V?null:s,this.n3c_1=t,this.o3c_1=e,this.p3c_1=n,this.q3c_1=i,this.r3c_1=r,this.s3c_1=a,this.t3c_1=s,this.u3c_1=new N,this.v3c_1=new Zn(this.n3c_1,Jn(),"default");for(var _=this.s3c_1,d=le(oe(Qt(_,10)),16),p=ue(d),m=_.s();m.t();){var g=m.u(),v=g.f3c_1;p.a2(v,g)}this.w3c_1=p;for(var y=this.n3c_1,w=le(oe(Qt(y,10)),16),b=ue(w),x=y.s();x.t();){var S=x.u(),E=S.o9();b.a2(E,S)}this.x3c_1=b;var M=this.n3c_1,T=new ti(ei);this.y3c_1=ne(M,T)}function ii(t){for(var e=te(t.length),n=0,i=t.length;n<i;){var r=t[n];n=n+1|0;var a=r.toLowerCase(),s=_e(fe(he(a)?a:K()));e.p(s)}this.a3d_1=de(e)}function ri(t,e,n,i,r){t=t===V?"":t,e=e===V?.81:e,n=n===V?null:n,i=i===V||i,r=r===V?null:r,this.e3d_1=t,this.f3d_1=e,this.g3d_1=n,this.h3d_1=i,this.i3d_1=r;var a=this.i3d_1;null==a||a(this)}function ai(t){ii.call(this,[""]),this.k3d_1=Me(Ee(function(t){for(var e=Jt(),n=t.s();n.t();){var i=si(n.u());Zt(e,i)}return Ae(e)}(t),this))}function si(t){return t instanceof ai?t.n3d():Re(t)}function oi(){var t,e;t=[],e=this,ai.call(e,Se(t)),this.q3d_1=new Ie}function li(){}function ui(t,e,n){e=e===V?ke().k18(0):e,n=n===V?Pe():n,this.p3b_1=t,this.q3b_1=e,this.r3b_1=n,this.s3b_1=new N,this.t3b_1=ie(this.r3b_1)}function ci(t,e,n,i,r,a,s){n=n===V?0:n,i=i===V?0:i,r=r===V||r,a=a===V||a,s=s===V?null:s,this.u3b_1=t,this.v3b_1=n,this.w3b_1=i,this.x3b_1=r,this.y3b_1=a,this.z3b_1=s,this.a3c_1=null,this.b3c_1=null,this.c3c_1=e}function hi(){S=this,this.v3d_1=[di(),(fi(),b),(fi(),x)]}function fi(){if(E)return H;E=!0,w=new _i("NORMAL",0),b=new _i("GROUP",1),x=new _i("TILEMAP",2),fi(),null==S&&new hi}function _i(t,e){Yt.call(this,t,e)}function di(){return fi(),w}function pi(t,e,n){n=n===V?di():n,this.m3b_1=t,this.n3b_1=e,this.o3b_1=n}function mi(){R=this;for(var t=[Mi(),Ti(),Ci(),$i(),Ai()],e=le(oe(t.length),16),n=ue(e),i=0,r=t.length;i<r;){var a=t[i];i=i+1|0;var s=a.y3d_1;n.a2(s,a)}this.a3e_1=n}function gi(){if(O)return H;O=!0,M=new yi("GRAYSCALE",0,0,1),T=new yi("RGB",1,2,3),C=new yi("INDEXED",2,3,1),$=new yi("GRAYSCALE_ALPHA",3,4,2),A=new yi("RGBA",4,6,4),gi(),null==R&&new mi}function vi(t,e,n,i,r,a){this.b3e_1=t,this.c3e_1=e,this.d3e_1=n,this.e3e_1=i,this.f3e_1=r,this.g3e_1=a;var s=this.e3e_1,o=D(s);this.h3e_1=Xt(o)}function yi(t,e,n,i){Yt.call(this,t,e),this.y3d_1=n,this.z3d_1=i}function wi(t,e,n){var i=0;Ne(n,0);var r=0,a=Le(e);if(r<a)do{var s=r;r=r+1|0;var o=pt(e,s),l=ze(vt(o)),u=255&Fe(l),c=pt(n,u);mt(n,u,c+1|0)}while(r<a);var h=0;if(h<256)do{var f=h;h=h+1|0;var _=pt(n,f);if(0!==_){var d=1+f;i+=1/_*Math.sqrt(d)}}while(h<256);return i}function bi(t,e,n){var i=He(Be(e),4),r=Ve().j2w_1;r=Ve().i2w(r,i),r=Ve().i2w(r,n),qe(t,n.length),je(t,i),je(t,n),qe(t,r)}function xi(t,e,n,i){var r=me(n);return i(ge(r)),bi(t,e,r.dk())}function Si(t,e,n,i){var r,a,s;xi(n,"IHDR",13,(r=t,a=e,s=i,function(t){return qe(t,r),qe(t,a),Ye(t,8),Ye(t,s.y3d_1),Ye(t,0),Ye(t,0),Ye(t,0),H}))}function Ei(t){return H}function Mi(){return gi(),M}function Ti(){return gi(),T}function Ci(){return gi(),C}function $i(){return gi(),$}function Ai(){return gi(),A}function Ri(){I=this,ii.call(this,["png"]),this.j3e_1=-1991225785,this.k3e_1=218765834,this.l3e_1=Ke([new vi(0,0,8,8,8,8),new vi(0,4,8,8,8,4),new vi(4,0,8,4,4,4),new vi(0,2,4,4,4,2),new vi(2,0,4,2,2,2),new vi(0,1,2,2,2,1),new vi(1,0,2,1,1,1)]),this.m3e_1=re(new vi(0,0,1,1,1,1))}function Oi(){return null==I&&new Ri,I}function Ii(t){return ln(255*on(t))}function ki(t,e,n,i){return un(t)|un(e)<<8|un(n)<<16|un(i)<<24}return tt(cn,"Bitmap",Q),tt(dn,"Companion",st,V,V,V,V,V,[2,3]),tt(mn,"Bitmap32$iterator$slambda",Q,ot,V,V,V,V,[1]),tt(gn,"Bitmap32",Q,cn),tt(vn,"Companion",st),tt(wn,"BitmapIndexed",Q,cn),tt(yn,"Bitmap8",Q,wn),tt(Tn,"Bitmaps",st),tt(Cn,"Palette",Q),tt($n,"ColorFormat32",Q),tt(An,"Colors",st),tt(On,"Companion",st),tt(qn,"Companion",st,$n),tt(Gn,"RGBA",Q,V,[Wt]),tt(Xn,"Direction",Q,Yt),tt(Yn,"sam$kotlin_Comparator$0",Q),tt(Zn,"ImageAnimation",Q),tt(Qn,"Companion",st),tt(ti,"sam$kotlin_Comparator$0",Q),tt(ni,"ImageData",Q),tt(ii,"ImageFormat",Q,V,V,V,V,V,[2,1]),tt(ri,"ImageEncodingProps",Q,V,V,ri),tt(ai,"ImageFormats",Q,ii,V,V,V,V,[2,1]),tt(oi,"ImageFormatsMutable",Q,ai,V,oi,V,V,[2,1]),tt(li,"Companion",st),tt(ui,"ImageFrame",Q),tt(ci,"ImageFrameLayer",Q),tt(hi,"Companion",st),tt(_i,"Type",Q,Yt),tt(pi,"ImageLayer",Q),tt(mi,"Companion",st),tt(vi,"InterlacedPass",Q),tt(yi,"Colorspace",Q,Yt),tt(Ri,"PNG",st,ii,V,V,V,V,[2,1]),B(cn).x2z=function(){return F(this.g30_1,this.h30_1)},B(cn).t30=function(){var t=this.p30_1;return nt("tempInts",1,et,(function(t){return t.t30()}),null),t.d2()},B(cn).u30=function(){return P(this.g30_1,this.i30_1)/8|0},B(cn).a30=function(){return P(this.g30_1,this.h30_1)},B(cn).v30=function(t,e){return P(e,this.g30_1)+t|0},B(cn).w30=function(t,e,n,i,r,a){var s=a,o=0;if(o<i)do{var l=o;o=o+1|0;var u=0;if(u<n)do{var c=u;u=u+1|0;var h=s;s=h+1|0,r[h]=this.x30(c+t|0,l+e|0)}while(u<n)}while(o<i)},B(cn).y30=function(t,e,n,i,r,a){var s=a,o=0;if(o<i)do{var l=o;o=o+1|0;var u=0;if(u<n)do{var c=u;u=u+1|0;var h=c+t|0,f=l+e|0,_=s;s=_+1|0,this.z30(h,f,r[_])}while(u<n)}while(o<i)},B(cn).a31=function(t,e,n,i,r,a,s){var o;return a=a===V?0:a,s===V?(this.y30(t,e,n,i,r,a),o=H):o=s.y30.call(this,t,e,n,i,r,a),o},B(cn).z30=function(t,e,n){throw new q},B(cn).x30=function(t,e){return Rn().g31_1},B(cn).t36=function(t,e){return this.n30_1?Wn(this.x30(t,e)):this.x30(t,e)},B(cn).u36=function(t,e,n){return H},B(cn).v36=function(t,e){return 0},B(cn).w36=function(t,e,n,i,r,a,s){var o=this,l=o.x36(t),u=o.x36(t+a|0),c=o.y36(e),h=o.y36(e+s|0),f=n.x36(i),_=n.x36(i+a|0),d=n.y36(r),p=n.y36(r+s|0),m=l,g=c,v=f,y=d,w=u-l|0,b=_-f|0,x=Math.min(w,b),S=h-c|0,E=p-d|0,M=Math.min(S,E);this.z36(m,g,n,v,y,x,M)},B(cn).z36=function(t,e,n,i,r,a,s){var o=0;if(o<s)do{var l=o;o=o+1|0,this.w30(t,e+l|0,a,1,this.t30(),0),n.y30(i,r+l|0,a,1,this.t30(),0)}while(o<s)},B(cn).x36=function(t){return j(t,0,this.g30_1)},B(cn).y36=function(t){return j(t,0,this.h30_1)},B(cn).a37=function(){var t=0,e=this.h30_1/2|0;if(t<e)do{var n=t;t=t+1|0,this.b37(n,(this.h30_1-n|0)-1|0)}while(t<e);return this},B(cn).c37=function(){var t=0,e=this.g30_1/2|0;if(t<e)do{var n=t;t=t+1|0,this.d37(n,(this.g30_1-n|0)-1|0)}while(t<e);return this},B(cn).e37=function(t){var e;switch(t.n9_1){case 0:e=this.f37();break;case 1:e=this.g37().c37();break;case 2:e=this.g37().c37().g37().c37();break;case 3:e=this.g37().a37();break;default:G()}return e},B(cn).h37=function(t){var e=this.f37();return W(t)&&e.c37(),e.e37(X(t))},B(cn).g37=function(){for(var t=new Y(this.g30_1,this.h30_1,function(t,e,n,i,r){_n();var a=new Int32Array(P(i,r));return t.w30(e,n,i,r,a,0),a}(this,0,0,this.g30_1,this.h30_1)),e=this.h30_1,n=this.g30_1,i=0,r=P(e,n),a=new Int32Array(r);i<r;)a[i]=0,i=i+1|0;var s=a,o=new Y(e,n,J(s)?s:K()),l=0,u=this.h30_1;if(l<u)do{var c=l;l=l+1|0;var h=0,f=this.g30_1;if(h<f)do{var _=h;h=h+1|0,o.g19(c,_,t.f19(_,c))}while(h<f)}while(l<u);var d=this.i37(this.h30_1,this.g30_1);return d.a31(0,0,this.h30_1,this.g30_1,o.a19_1),d},B(cn).b37=function(t,e){var n=0,i=this.g30_1;if(n<i)do{var r=n;n=n+1|0;var a=this.v36(r,t),s=this.v36(r,e);this.u36(r,t,s),this.u36(r,e,a)}while(n<i)},B(cn).d37=function(t,e){var n=0,i=this.h30_1;if(n<i)do{var r=n;n=n+1|0;var a=this.v36(t,r),s=this.v36(e,r);this.u36(t,r,s),this.u36(e,r,a)}while(n<i)},B(cn).i37=function(t,e){Z("Unsupported createWithThisFormat ("+this+")")},B(cn).j37=function(){var t=new gn(this.g30_1,this.h30_1,V,this.n30_1);return this.w30(0,0,this.g30_1,this.h30_1,t.x37_1,0),t},B(cn).a38=function(){return this instanceof gn?this:this.j37()},B(cn).f37=function(){var t=this.i37(this.g30_1,this.h30_1);return this.z36(0,0,t,0,0,this.g30_1,this.h30_1),t},B(dn).e38=function(t,e,n){var i=new gn(t,e,V,!0);return at(i.x37_1,n),i},B(mn).r38=function(t,e){var n=this.s38(t,e);return n.va_1=H,n.wa_1=null,n.gb()},B(mn).tb=function(t,e){return this.r38(t instanceof lt?t:K(),e)},B(mn).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.p38_1=ut(0,this.n38_1.a30()).s(),this.ta_1=1;continue t;case 1:if(!this.p38_1.t()){this.ta_1=3;continue t}if(this.q38_1=this.p38_1.u(),this.ta_1=2,(t=this.o38_1.id(new Gn(this.n38_1.t38(this.q38_1)),this))===ct())return t;continue t;case 2:this.ta_1=1;continue t;case 3:return H;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},B(mn).s38=function(t,e){var n=new mn(this.n38_1,e);return n.o38_1=t,n},B(gn).i37=function(t,e){return new gn(t,e,V,this.n30_1)},B(gn).z36=function(t,e,n,i,r,a,s){if(!(n instanceof gn))return B(cn).z36.call(this,t,e,n,i,r,a,s);var o=this.x37_1,l=n.x37_1,u=0;if(u<s)do{var c=u;u=u+1|0,ft(o,this.v30(t,e+c|0),l,n.v30(i,r+c|0),a)}while(u<s)},B(gn).u38=function(t,e,n){this.v38(t,e,n)},B(gn).u36=function(t,e,n){this.x37_1[this.v30(t,e)]=n},B(gn).v36=function(t,e){return this.x37_1[this.v30(t,e)]},B(gn).x30=function(t,e){return this.v36(t,e)},B(gn).z30=function(t,e,n){return this.u36(t,e,n)},B(gn).v38=function(t,e,n){return this.c38(this.v30(t,e),n)},B(gn).t36=function(t,e){return this.t38(this.v30(t,e))},B(gn).c38=function(t,e){this.x37_1[t]=this.n30_1?Vn(e):e},B(gn).t38=function(t){return this.n30_1?Wn(this.x37_1[t]):this.x37_1[t]},B(gn).toString=function(){var t=_t();return t.g5("Bitmap32("),t.f5(this.g30_1),t.g5(", "),t.f5(this.h30_1),null!=this.m30_1&&(t.g5(", name="),t.g5(this.m30_1)),t.g5(")"),t.toString()},B(gn).b37=function(t,e){var n=this.v30(0,t),i=this.v30(0,e);ft(this.x37_1,n,this.y37_1,0,this.g30_1),ft(this.x37_1,i,this.x37_1,n,this.g30_1),ft(this.y37_1,0,this.x37_1,i,this.g30_1)},B(gn).f37=function(){var t=this.x37_1.slice();return new gn(this.g30_1,this.h30_1,t,this.n30_1)},B(gn).w38=function(){return this.n30_1?this.x38():this},B(gn).copyPremultiplied=function(){var t=this.f37();return t.y38(),t},B(gn).x38=function(){var t=this.f37();return t.z38(),t},B(gn).y38=function(){if(this.n30_1)return H;this.n30_1=!0;var t=0,e=this.a30();if(t<e)do{var n=t;t=t+1|0,this.x37_1[n]=Vn(this.x37_1[n])}while(t<e)},B(gn).z38=function(){if(!this.n30_1)return H;this.n30_1=!1;var t=0,e=this.a30();if(t<e)do{var n=t;t=t+1|0;var i=Wn(this.x37_1[n]);this.x37_1[n]=i}while(t<e)},B(gn).s=function(){return dt((t=new mn(this,null),(e=function(e,n){return t.r38(e,n)}).$arity=1,e));var t,e},B(gn).j37=function(){return this},B(yn).i37=function(t,e){return new yn(t,e,V,this.j3a_1)},B(yn).u36=function(t,e,n){return this.p3a(this.v30(t,e),n)},B(yn).v36=function(t,e){return pt(this.l3a_1,this.v30(t,e))},B(yn).x30=function(t,e){return kn(this.j3a_1,this.v36(t,e))},B(yn).q3a=function(t){return pt(this.l3a_1,t)},B(yn).p3a=function(t,e){mt(this.l3a_1,t,e)},B(yn).z36=function(t,e,n,i,r,a,s){if(!(n instanceof yn))return B(wn).z36.call(this,t,e,n,i,r,a,s);var o=0;if(o<s)do{var l=o;o=o+1|0;var u=this.r3a(),c=this.v30(t,e+l|0);gt(u,c,(n instanceof yn?n:K()).r3a(),n.v30(i,r+l|0),a)}while(o<s)},B(yn).f37=function(){var t=this.r3a().slice(),e=this.j3a_1.slice();return new yn(this.g30_1,this.h30_1,t,e)},B(yn).toString=function(){return"Bitmap8("+this.g30_1+", "+this.h30_1+", palette="+In(this.j3a_1)+")"},B(wn).r3a=function(){return this.i3a_1},B(wn).toString=function(){return"BitmapIndexed(bpp="+this.i30_1+", width="+this.g30_1+", height="+this.h30_1+", clut="+In(this.j3a_1)+")"},B(wn).v36=function(t,e){return this.q3a(this.v30(t,e))},B(wn).u36=function(t,e,n){return this.p3a(this.v30(t,e),n)},B(wn).q3a=function(t){var e=this.t3a(t),n=this.u3a(t);return St(pt(this.l3a_1,e),P(this.i30_1,n),this.i30_1)},B(wn).p3a=function(t,e){var n=this.t3a(t),i=this.u3a(t);mt(this.l3a_1,n,Et(pt(this.l3a_1,n),e,P(this.i30_1,i),this.i30_1))},B(wn).x30=function(t,e){return kn(this.j3a_1,this.v36(t,e))},B(wn).s3a=function(t,e){return this.t3a(this.v30(t,e))},B(wn).t3a=function(t){return t>>>this.n3a_1|0},B(wn).u3a=function(t){return t&this.o3a_1},B(wn).b37=function(t,e){var n=this.s3a(0,t),i=this.s3a(0,e);gt(this.r3a(),n,this.k3a_1,0,this.u30()),gt(this.r3a(),i,this.r3a(),n,this.u30()),gt(this.k3a_1,0,this.r3a(),i,this.u30())},B(wn).v3a=function(){var t=-1,e=0,n=this.a30();if(e<n)do{var i=e;e=e+1|0;var r=t,a=this.q3a(i);t=Math.max(r,a)}while(e<n);return t+1|0},B(wn).j37=function(){var t=new gn(this.g30_1,this.h30_1,V,this.n30_1),e=t.x37_1,n=this.j3a_1,i=0,r=this.a30();if(i<r)do{var a=i;i=i+1|0,e[a]=n[this.q3a(a)]}while(i<r);return t},B(Cn).toString=function(){var t=_t();t.g5("Palette(");var e=0,n=In(this.w3a_1);if(e<n)do{var i=e;e=e+1|0;var r=kn(this.w3a_1,i),a=this.x3a_1,s=null==a?null:a[i];i>0&&t.g5(", "),null!=s&&(t.g5(s),t.g5(": ")),t.g5(Bn(r))}while(e<n);return t.g5(")"),t.toString()},B(On).a39=function(t){return new Int32Array(t)},B(qn).i3b=function(t,e,n,i){return this.j3b(Ii(t),Ii(e),Ii(n),Ii(i))},B(qn).j3b=function(t,e,n,i){return function(t,e,n,i){return(255&t)<<0|(255&e)<<8|(255&n)<<16|(255&i)<<24}(t,e,n,i)},B(qn).g3b=function(t,e,n,i){return ki(t,e,n,i)},B(qn).h3b=function(t,e,n){return ki(t,e,n,255)},B(Gn).toString=function(){return Bn(this.b38_1)},B(Gn).k3b=function(t){return Hn(this.b38_1,t)},B(Gn).d=function(t){return function(t,e){return Hn(t.b38_1,e instanceof Gn?e.b38_1:K())}(this,t)},B(Gn).hashCode=function(){return this.b38_1},B(Gn).equals=function(t){return function(t,e){return e instanceof Gn&&t===(e instanceof Gn?e.b38_1:K())}(this.b38_1,t)},B(Yn).e8=function(t,e){return this.l3b_1(t,e)},B(Yn).compare=function(t,e){return this.e8(t,e)},B(Qn).i3c=function(t){return new ni(re(y.j3c(t)))},B(ti).e8=function(t,e){return this.k3c_1(t,e)},B(ti).compare=function(t,e){return this.e8(t,e)},B(ni).a30=function(){return function(t){for(var e=0,n=t.s();n.t();)e=e+n.u().a30()|0;return e}(this.n3c_1)},B(ni).z3c=function(){var t=ie(this.y3c_1),e=null==t?null:t.l3c();if(null==e)throw ce("No bitmap found");return e},B(ni).toString=function(){return"ImageData("+this.n3c_1+")"},B(ii).b3d=function(t,e,n){throw pe()},B(ii).c3d=function(t,e){var n=P(t.a30(),4),i=me(n),r=ge(i);return this.b3d(t,r,e),i.dk()},B(ii).d3d=function(t,e){return this.c3d(v.i3c(t),e)},B(ii).toString=function(){return"ImageFormat("+this.a3d_1+")"},B(ri).toString=function(){return"ImageEncodingProps(filename="+this.e3d_1+", quality="+this.f3d_1+", extra="+this.g3d_1+", depremultiplyIfRequired="+this.h3d_1+", init="+this.i3d_1+")"},B(ri).hashCode=function(){var t=ve(this.e3d_1);return t=P(t,31)+ye(this.f3d_1)|0,t=P(t,31)+(null==this.g3d_1?0:we(this.g3d_1))|0,t=P(t,31)+be(this.h3d_1)|0,P(t,31)+(null==this.i3d_1?0:we(this.i3d_1))|0},B(ri).equals=function(t){if(this===t)return!0;if(!(t instanceof ri))return!1;var e=t instanceof ri?t:K();return this.e3d_1===e.e3d_1&&!!xe(this.f3d_1,e.f3d_1)&&!!xe(this.g3d_1,e.g3d_1)&&this.h3d_1===e.h3d_1&&!!xe(this.i3d_1,e.i3d_1)},B(ai).l3d=function(t){var e=this.k3d_1;return nt("_formats",1,Oe,(function(t){return t.m3d()}),(function(t,e){return t.l3d(e)})),e.u22(t)},B(ai).m3d=function(){var t=this.k3d_1;return nt("_formats",1,Oe,(function(t){return t.m3d()}),(function(t,e){return t.l3d(e)})),t.d2()},B(ai).n3d=function(){return this.m3d()},B(ai).toString=function(){return"ImageFormats("+this.n3d().n()+")"+this.n3d()},B(ai).b3d=function(t,e,n){var i,r=Ce(Te(n.e3d_1));t:{for(var a=this.n3d().s();a.t();){var s=a.u();if(s.a3d_1.x(r)){i=s;break t}}i=null}var o=i;if(null==o){for(var l=this.n3d(),u=Jt(),c=l.s();c.t();){var h=c.u().a3d_1;Zt(u,h)}throw $e("Don't know how to generate file for extension '"+r+"' (supported extensions "+u+") (props "+n+")")}o.b3d(t,e,n)},B(li).r3d=function(t,e,n,i,r,a,s,o){return new ui(o,e,se([new ci(new pi(0,null,di()),Sn(t,V,s),n,i,r,a)]))},B(li).j3c=function(t,e,n,i,r,a,s,o,l){return e=e===V?ke().k18(0):e,n=n===V?0:n,i=i===V?0:i,r=r===V||r,a=a===V||a,s=s===V?null:s,o=o===V?0:o,l===V?this.r3d(t,e,n,i,r,a,s,o):l.r3d.call(this,t,new Ue(e),n,i,r,a,s,o)},B(ui).s3d=function(){var t=this.t3b_1,e=null==t?null:t.c3c_1;return null==e?Mn():e},B(ui).t3d=function(){var t=this.t3b_1,e=null==t?null:t.v3b_1;return null==e?0:e},B(ui).u3d=function(){var t=this.t3b_1,e=null==t?null:t.w3b_1;return null==e?0:e},B(ui).m3c=function(){var t=this.t3b_1,e=null==t?null:t.x3b_1;return null!=e&&e},B(ui).c19=function(){return this.s3d().f2z_1},B(ui).d19=function(){return this.s3d().g2z_1},B(ui).a30=function(){return this.s3d().a30()},B(ui).l3c=function(){var t=this.t3b_1,e=null==t?null:t.l3c();return null==e?bn(Mn()):e},B(ui).o9=function(){return this.s3d().a2z_1},B(ui).toString=function(){return"ImageFrame("+this.s3d()+", time="+new Ue(this.q3b_1)+", targetX="+this.t3d()+", targetY="+this.u3d()+", main="+this.m3c()+")"},B(ci).c19=function(){return this.c3c_1.f2z_1},B(ci).d19=function(){return this.c3c_1.g2z_1},B(ci).l3c=function(){return bn(this.c3c_1).g30_1===this.c19()&&bn(this.c3c_1).h30_1===this.d19()?bn(this.c3c_1):(null==this.a3c_1&&(this.a3c_1=En(this.c3c_1)),De(this.a3c_1))},B(vi).toString=function(){return"InterlacedPass(startingRow="+this.b3e_1+", startingCol="+this.c3e_1+", rowIncrement="+this.d3e_1+", colIncrement="+this.e3e_1+", blockHeight="+this.f3e_1+", blockWidth="+this.g3e_1+")"},B(vi).hashCode=function(){var t=this.b3e_1;return t=P(t,31)+this.c3e_1|0,t=P(t,31)+this.d3e_1|0,t=P(t,31)+this.e3e_1|0,t=P(t,31)+this.f3e_1|0,P(t,31)+this.g3e_1|0},B(vi).equals=function(t){if(this===t)return!0;if(!(t instanceof vi))return!1;var e=t instanceof vi?t:K();return this.b3e_1===e.b3e_1&&this.c3e_1===e.c3e_1&&this.d3e_1===e.d3e_1&&this.e3e_1===e.e3e_1&&this.f3e_1===e.f3e_1&&this.g3e_1===e.g3e_1},B(Ri).b3d=function(t,e,n){var i=t.z3c(),r=i.g30_1,a=i.h30_1;qe(e,-1991225785),qe(e,218765834);var s,o,l,u=Xt(Je(n.f3d_1,0,1,0,9));if(i instanceof wn){var c=i.v3a();Si(r,a,e,Ci()),xi(e,"PLTE",P(c,3),(o=c,l=i,function(t){var e=0;if(e<o)do{var n=e;e=e+1|0;var i=kn(l.j3a_1,n);Ye(t,Dn(i)),Ye(t,Nn(i)),Ye(t,Ln(i))}while(e<o);return H})),xi(e,"tRNS",P(In(i.j3a_1),1),function(t,e){return function(n){var i=0;if(i<t)do{var r=i;i=i+1|0;var a=kn(e.j3a_1,r);Ye(n,zn(a))}while(i<t);return H}}(c,i));var h=function(t){if(t instanceof wn){for(var e=0,n=P(t.g30_1,t.h30_1),i=new Int8Array(n);e<n;){var r=e;i[r]=vt(t.q3a(r)),e=e+1|0}return new yn(t.g30_1,t.h30_1,i,yt(t.j3a_1,256))}for(var a=t.a38().w38(),s=a.x37_1,o=new Cn(d.a39(256)),l=wt(),u=0,c=0,h=s.length;c<h;){var f=s[c];if(c=c+1|0,!l.ye(f)){var _,p=u;_=a.n30_1?Wn(f):f,Un(o.w3a_1,p,_);var m=u;u=m+1|0,l.q1b(f,m)}if(l.p1b_1>=256)return null}for(var g=0,v=P(a.g30_1,a.h30_1),y=new Int8Array(v);g<v;){var w=g;y[w]=vt(l.d1(s[w])),g=g+1|0}return new yn(a.g30_1,a.h30_1,y,o.w3a_1)}(i);s=null==h?i:h}else Si(r,a,e,Ai()),s=n.h3d_1?i.j37().w38():i.j37();for(var f=s,_=f instanceof yn?f:null,p=f instanceof gn?f:null,m=Ze(i.i30_1,8),g=P(r,m),v=Qe(g),y=0,w=tn(Array(3),null);y<3;){var b=y,x=Qe(g);w[b]=new en(x),y=y+1|0}var S=w,E=S[0].z1c_1,M=S[1].z1c_1,T=S[2].z1c_1,C=Qe(256),$=g+1|0,A=new Int8Array(P(a,$)),R=n.f3d_1>=.5,O=0;if(O<a)do{var I=O;O=O+1|0;var k,U=f.v30(0,I),D=0;if(null!=p){var N=0;if(N<r)do{var L=N;N=N+1|0;var z=p.t38(U+L|0),F=nn(E),B=D;D=B+1|0,rn(F,B,Dn(z));var V=nn(E),q=D;D=q+1|0,rn(V,q,Nn(z));var j=nn(E),G=D;D=G+1|0,rn(j,G,Ln(z));var W=nn(E),X=D;D=X+1|0,rn(W,X,zn(z))}while(N<r)}else if(null!=_){var Y=0;if(Y<r)do{var K=Y;Y=Y+1|0;var J=nn(E),Z=D;D=Z+1|0,rn(J,Z,_.q3a(U+K|0))}while(Y<r)}if(R){var Q=0;if(Q<m)do{var tt=Q;Q=Q+1|0,mt(M,tt,pt(E,tt))}while(Q<m);var et=m;if(et<g)do{var nt=et;et=et+1|0,mt(M,nt,255&(pt(E,nt)-pt(E,nt-m|0)|0))}while(et<g);if(I>0){var it=0;if(it<g)do{var rt=it;it=it+1|0,mt(T,rt,255&(pt(E,rt)-pt(v,rt)|0))}while(it<g)}}if(R)if(n.f3d_1<.9)k=0===I?1:2;else{for(var at=te(S.length),st=0,ot=0,lt=S.length;ot<lt;){var ut=S[ot].z1c_1;ot=ot+1|0;var ct,ht=st;st=ht+1|0,Ne(C,0),ct=I>0||ht<=1?wi(Oi(),ut,C):1/0;var ft=Ht(ht,ct);at.p(ft)}var _t,dt=at.s();if(!dt.t())throw an();var bt=dt.u();if(dt.t()){var xt=bt.cd_1;do{var St=dt.u(),Et=St.cd_1;Gt(xt,Et)>0&&(bt=St,xt=Et)}while(dt.t());_t=bt}else _t=bt;k=_t.bd_1}else k=0;var Mt=k,Tt=P(I,$),Ct=S[Mt].z1c_1;A[Tt]=vt(Mt),gt(nn(Ct),0,A,Tt+1|0,g),sn(E,0,v,0,g)}while(O<a);bi(e,"IDAT",function(t,e){return Xe(e,Ge(),new We(t))}(u,A)),xi(e,"IEND",0,Ei)},c=new vn,new Tn,d=new On,v=new Qn,y=new li,t.$_$=t.$_$||{},t.$_$.a=function(t,e,n,i){return e=e===V?(U||(U=!0,k=new oi),k):e,n=n===V?new ri:n,e.d3d(t,n)},t.$_$.b=function(t,e,n){return function(t,e,n,i){gn.call(i,t,e,V,!1);var r=i.g30_1-0|0,a=0,s=0+(i.h30_1-0|0)|0;if(a<s)do{var o=a;a=a+1|0;var l=i.v30(0,0+o|0),u=0,c=0+r|0;if(u<c)do{var h=u;u=u+1|0;var f=l;l=f+1|0,i.c38(f,n(h,o).b38_1)}while(u<c)}while(a<s);return i}(t,e,n,rt(B(gn)))},t.$_$.c=Pn,t.$_$.d=Ln,t.$_$.e=Nn,t.$_$.f=Fn,t.$_$.g=Dn,t.$_$.h=c,t.$_$.i=jn,t.$_$.j=d,t.$_$.k=Oi,t.$_$.l=gn,t.$_$.m=yn,t.$_$.n=Gn,t})?i.apply(e,r):i)||(t.exports=a)},298:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,factory;factory=function(_,kotlin_kotlin,kotlin_com_soywiz_korlibs_klock_klock,kotlin_com_soywiz_korlibs_kds_kds,kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core,kotlin_com_soywiz_korlibs_kmem_kmem,kotlin_com_soywiz_korlibs_klogger_klogger,kotlin_com_soywiz_korlibs_krypto_krypto){"use strict";var imul=Math.imul,protoOf=kotlin_kotlin.$_$.a8,objectMeta=kotlin_kotlin.$_$.z7,setMetadataFor=kotlin_kotlin.$_$.b8,Unit_instance=kotlin_kotlin.$_$.a3,CoroutineImpl=kotlin_kotlin.$_$.m6,Companion_getInstance=kotlin_com_soywiz_korlibs_klock_klock.$_$.c,get_COROUTINE_SUSPENDED=kotlin_kotlin.$_$.x5,classMeta=kotlin_kotlin.$_$.x6,toString=kotlin_kotlin.$_$.f8,IllegalStateException_init_$Create$=kotlin_kotlin.$_$.i1,VOID=kotlin_kotlin.$_$.d,ChunkedByteDeque=kotlin_com_soywiz_korlibs_kds_kds.$_$.g,Factory_getInstance=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.g,Channel=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.m,ilog2=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.i1,ByteArrayDeque=kotlin_com_soywiz_korlibs_kds_kds.$_$.f,CoroutineScope=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.x,CoroutineStart_UNDISPATCHED_getInstance=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.a,launch=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.k1,async=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.e1,THROW_CCE=kotlin_kotlin.$_$.ib,CoroutineScope_0=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.y,isInterface=kotlin_kotlin.$_$.r7,Level_ERROR_getInstance=kotlin_com_soywiz_korlibs_klogger_klogger.$_$.a,printStackTrace=kotlin_kotlin.$_$.xb,CancellationException=kotlin_kotlin.$_$.w5,KProperty0=kotlin_kotlin.$_$.v8,getPropertyCallableRef=kotlin_kotlin.$_$.i7,Companion_getInstance_0=kotlin_com_soywiz_korlibs_klogger_klogger.$_$.b,lazy=kotlin_kotlin.$_$.vb,_TimeSpan___get_millisecondsLong__impl__v1fxun=kotlin_com_soywiz_korlibs_klock_klock.$_$.a,delay=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.c,FastArrayList_init_$Create$=kotlin_com_soywiz_korlibs_kds_kds.$_$.a,ensureNotNull=kotlin_kotlin.$_$.sb,throwUninitializedPropertyAccessException=kotlin_kotlin.$_$.ac,Companion_instance=kotlin_kotlin.$_$.y2,createFailure=kotlin_kotlin.$_$.rb,_Result___init__impl__xyqfz8=kotlin_kotlin.$_$.h2,AbstractCoroutineContextElement=kotlin_kotlin.$_$.a6,Key_instance=kotlin_kotlin.$_$.q2,get=kotlin_kotlin.$_$.c6,minusKey=kotlin_kotlin.$_$.d6,releaseInterceptedContinuation=kotlin_kotlin.$_$.e6,ContinuationInterceptor=kotlin_kotlin.$_$.f6,Delay=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.z,Result__exceptionOrNull_impl_p6xea9=kotlin_kotlin.$_$.i2,throwOnFailure=kotlin_kotlin.$_$.zb,_Result___get_value__impl__bjfvqg=kotlin_kotlin.$_$.k2,Continuation=kotlin_kotlin.$_$.g6,interfaceMeta=kotlin_kotlin.$_$.m7,numberToInt=kotlin_kotlin.$_$.w7,ByteArrayBuilder_init_$Create$=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.a,FixedSizeByteArrayBuilder_init_$Create$=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.b,toByte=kotlin_kotlin.$_$.c8,Long=kotlin_kotlin.$_$.db,toLong=kotlin_kotlin.$_$.d8,fill=kotlin_kotlin.$_$.d4,extract=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.h1,NotImplementedError=kotlin_kotlin.$_$.fb,get_hex=kotlin_com_soywiz_korlibs_krypto_krypto.$_$.d,get_nextPowerOfTwo=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.m1,RingBuffer=kotlin_com_soywiz_korlibs_kds_kds.$_$.k,readU16LE=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.q1,readS32LE=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.p1,readS32BE=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.o1,numberToLong=kotlin_kotlin.$_$.x7,toShort=kotlin_kotlin.$_$.e8,until=kotlin_kotlin.$_$.s8,step=kotlin_kotlin.$_$.r8,listOf=kotlin_kotlin.$_$.t4,toIntClamp=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.r1,sliceArray=kotlin_kotlin.$_$.j5,get_hex_0=kotlin_com_soywiz_korlibs_krypto_krypto.$_$.c,copyOfRange=kotlin_kotlin.$_$.u3,endsWith=kotlin_kotlin.$_$.h9,_Char___init__impl__6a9atx=kotlin_kotlin.$_$.y1,substringBeforeLast=kotlin_kotlin.$_$.fa,substringAfterLast=kotlin_kotlin.$_$.da,LinkedHashMap_init_$Create$=kotlin_kotlin.$_$.l,listOf_0=kotlin_kotlin.$_$.s4,plus=kotlin_kotlin.$_$.b5,Map=kotlin_kotlin.$_$.g3,IllegalArgumentException_init_$Create$=kotlin_kotlin.$_$.e1,charArrayOf=kotlin_kotlin.$_$.s6,trim=kotlin_kotlin.$_$.ta,getStringHashCode=kotlin_kotlin.$_$.j7,getBooleanHashCode=kotlin_kotlin.$_$.f7,hashCode=kotlin_kotlin.$_$.k7,equals=kotlin_kotlin.$_$.b7,Companion_getInstance_1=kotlin_com_soywiz_korlibs_klock_klock.$_$.b,indexOf=kotlin_kotlin.$_$.l9,replace=kotlin_kotlin.$_$.y9,ArrayList_init_$Create$=kotlin_kotlin.$_$.h,split=kotlin_kotlin.$_$.aa,joinToString=kotlin_kotlin.$_$.l4,startsWith=kotlin_kotlin.$_$.ba,split_0=kotlin_kotlin.$_$.z9,charSequenceLength=kotlin_kotlin.$_$.v6,substringBefore=kotlin_kotlin.$_$.ha,contains=kotlin_kotlin.$_$.d9,charSequenceGet=kotlin_kotlin.$_$.u6,Enum=kotlin_kotlin.$_$.xa,IntCompanionObject_instance=kotlin_kotlin.$_$.u2,toList=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.b,getKClassFromExpression=kotlin_kotlin.$_$.b,lineSequence=kotlin_kotlin.$_$.v9,Mixin=kotlin_com_soywiz_korlibs_kds_kds.$_$.h,startsWith_0=kotlin_kotlin.$_$.ca,to=kotlin_kotlin.$_$.cc,mapOf=kotlin_kotlin.$_$.v4,mapCapacity=kotlin_kotlin.$_$.u4,LinkedHashMap_init_$Create$_0=kotlin_kotlin.$_$.k,isByteArray=kotlin_kotlin.$_$.o7,FlowCollector=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.o,flow=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.p,get_indices=kotlin_kotlin.$_$.k4,Collection=kotlin_kotlin.$_$.d3,Pool_init_$Create$=kotlin_com_soywiz_korlibs_kds_kds.$_$.c,StringBuilder_init_$Create$=kotlin_kotlin.$_$.t,numberToChar=kotlin_kotlin.$_$.v7,readS16=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.n1,Char__toInt_impl_vasixd=kotlin_kotlin.$_$.f2,write16=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.v1,IntIntMap_init_$Create$=kotlin_com_soywiz_korlibs_kds_kds.$_$.b,StringBuilder_init_$Create$_0=kotlin_kotlin.$_$.s,insert=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.k1,NonRecursiveLock=kotlin_com_soywiz_korlibs_kds_kds.$_$.e,UnsupportedOperationException_init_$Create$=kotlin_kotlin.$_$.x1,Exception=kotlin_kotlin.$_$.za,Exception_init_$Init$=kotlin_kotlin.$_$.z,captureStack=kotlin_kotlin.$_$.r6,clamp=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.d1,get_lastIndex=kotlin_kotlin.$_$.s9,lastIndexOf=kotlin_kotlin.$_$.t9,Regex_init_$Create$=kotlin_kotlin.$_$.r,get_lastIndex_0=kotlin_kotlin.$_$.p4,Char__toByte_impl_7s7yt0=kotlin_kotlin.$_$.e2,toInt=kotlin_kotlin.$_$.na,UnsupportedOperationException_init_$Create$_0=kotlin_kotlin.$_$.v1,UnsupportedOperationException=kotlin_kotlin.$_$.nb,objectCreate=kotlin_kotlin.$_$.y7,ClosedRange=kotlin_kotlin.$_$.j8,contains_0=kotlin_kotlin.$_$.p8,arraycopy=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.y,clamp_0=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.e1,Pair=kotlin_kotlin.$_$.gb,UnsupportedOperationException_init_$Init$=kotlin_kotlin.$_$.w1,RuntimeException_init_$Create$=kotlin_kotlin.$_$.t1,write16LE=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.u1,copyOf=kotlin_kotlin.$_$.v3,write32BE=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.w1,ByteArrayBuilder=kotlin_com_soywiz_korlibs_kmem_kmem.$_$.w,Companion_getInstance_2=kotlin_kotlin.$_$.x2,coerceAtLeast=kotlin_kotlin.$_$.k8,fillArrayVal=kotlin_kotlin.$_$.d7,isArray=kotlin_kotlin.$_$.n7,charSequenceSubSequence=kotlin_kotlin.$_$.w6,toMap=kotlin_kotlin.$_$.p5,KProperty1=kotlin_kotlin.$_$.w8,trimStart=kotlin_kotlin.$_$.sa,ArrayList_init_$Create$_0=kotlin_kotlin.$_$.g,firstOrNull=kotlin_kotlin.$_$.f4,toMap_0=kotlin_kotlin.$_$.q5,Companion_instance_0,logger,DEFAULT_SUSPEND_TEST_TIMEOUT,DEBUG_ASYNC_LAUNCH_ERRORS$delegate,properties_initialized_AsyncExt_kt_7k2grr,Deflate$delegate,Companion_instance_1,Companion_instance_2,properties_initialized_Deflate_kt_5ek8zp,Companion_instance_3,Companion_instance_4,Companion_instance_5,Companion_instance_6,Kind_DELETED_instance,Kind_MODIFIED_instance,Kind_CREATED_instance,Kind_RENAMED_instance,Kind_entriesInitialized,VfsOpenMode_READ_instance,VfsOpenMode_WRITE_instance,VfsOpenMode_APPEND_instance,VfsOpenMode_CREATE_OR_TRUNCATE_instance,VfsOpenMode_CREATE_instance,VfsOpenMode_CREATE_NEW_instance,VfsOpenMode_entriesInitialized,resourcesVfsDebug,bytesTempPool$delegate,smallBytesPool$delegate,properties_initialized_TempBytes_kt_bjneux,CHARSET_PROVIDERS,CHARSET_PROVIDERS_LOCK,LATIN1,UTF16_LE,UTF16_BE,ISO_8859_1_instance,Companion_instance_7,properties_initialized_Charset_kt_dajgec,customEnvironments,Companion_instance_8,formatRegex,replaceNonPrintableCharactersRegex$delegate,properties_initialized_StringExt_kt_sd962o,QueryString_instance,Companion_instance_9,EMPTY_BYTE_ARRAY,properties_initialized_AsyncStream_kt_gaoyh8,MINUS_ZERO_D,LONG_ZERO_TO_MAX_RANGE,properties_initialized_RangeExt_kt_dqkq5i,Adler32_instance,CRC32_instance,jsGlobalDynamic,jsGlobal,isDenoJs$delegate,isWeb$delegate,isWorker$delegate,isNodeJs$delegate,jsRuntime$delegate,properties_initialized_KorioNativeJs_kt_y4p8os,File_separatorChar,EnvironmentInternal_instance,UTF8,JS_UTF8,properties_initialized_UTF8_kt_emb36b,Companion_instance_10,JsRuntimeBrowser_instance,JsRuntimeDeno_instance,nodeFS$delegate,JsRuntimeNode_instance,properties_initialized_JsRuntimeNode_kt_f9ymrl;function write(t,e){var n=new $writeCOROUTINE$169(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function uncompress(t,e,n){unsupported()}function compress(t,e,n,i){unsupported()}function hasLength(t){var e=new $hasLengthCOROUTINE$172(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()}function getLength(t){throw UnsupportedOperationException_init_$Create$_0()}function getPosition(t){throw UnsupportedOperationException_init_$Create$_0()}function read(){var t;t:{var e=get_smallBytesPool(),n=e.g1c();try{t=this.wk(n,0,1)>0?255&n[0]:-1;break t}finally{e.h1c(n)}}return t}function write_0(t){t:{var e=get_smallBytesPool(),n=e.g1c();try{n[0]=toByte(t),this.q1a(n,0,1);break t}finally{e.h1c(n)}}return Unit_instance}function update$default(t,e,n,i,r){return n=n===VOID?0:n,i=i===VOID?e.length-n|0:i,r===VOID?this.r1s(t,e,n,i):r.r1s.call(this,t,e,n,i)}function Companion(){this.w1f_1=8388608}function Companion_getInstance_3(){return Companion_instance_0}function waitToWriteMore(t,e,n){var i=new $waitToWriteMoreCOROUTINE$0(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function $waitToWriteMoreCOROUTINE$0(t,e,n){CoroutineImpl.call(this,n),this.f1g_1=t,this.g1g_1=e}function $writeCOROUTINE$1(t,e,n,i,r){CoroutineImpl.call(this,r),this.t1g_1=t,this.u1g_1=e,this.v1g_1=n,this.w1g_1=i}function $writeCOROUTINE$2(t,e,n){CoroutineImpl.call(this,n),this.f1h_1=t,this.g1h_1=e}function $readCOROUTINE$3(t,e,n,i,r){CoroutineImpl.call(this,r),this.p1h_1=t,this.q1h_1=e,this.r1h_1=n,this.s1h_1=i}function AsyncByteArrayDequeChunked(t){t=t===VOID?8388608:t,this.h1g_1=t,this.i1g_1=null,this.j1g_1=new ChunkedByteDeque,this.k1g_1=!1}function $writeCOROUTINE$4(t,e,n,i,r){CoroutineImpl.call(this,r),this.g1i_1=t,this.h1i_1=e,this.i1i_1=n,this.j1i_1=i}function $readCOROUTINE$5(t,e,n,i,r){CoroutineImpl.call(this,r),this.y1i_1=t,this.z1i_1=e,this.a1j_1=n,this.b1j_1=i}function AsyncByteArrayDeque(t){t=t===VOID?1024:t,this.k1i_1=t,this.l1i_1=null,Factory_getInstance(),this.m1i_1=Channel(-1),Factory_getInstance(),this.n1i_1=Channel(-1),this.o1i_1=new ByteArrayDeque(ilog2(this.k1i_1)+1|0),this.p1i_1=!1}function get_logger(){return _init_properties_AsyncExt_kt__ahev1h(),logger}function get_DEBUG_ASYNC_LAUNCH_ERRORS(){_init_properties_AsyncExt_kt__ahev1h();var t=DEBUG_ASYNC_LAUNCH_ERRORS$delegate;return DEBUG_ASYNC_LAUNCH_ERRORS$factory(),t.d2()}function launchImmediately(t,e){return _init_properties_AsyncExt_kt__ahev1h(),launchImmediately_0(CoroutineScope(t),e)}function launchImmediately_0(t,e){return _init_properties_AsyncExt_kt__ahev1h(),_launch(t,CoroutineStart_UNDISPATCHED_getInstance(),e)}function asyncImmediately(t,e){return _init_properties_AsyncExt_kt__ahev1h(),_async(t,CoroutineStart_UNDISPATCHED_getInstance(),e)}function _launch(t,e,n){_init_properties_AsyncExt_kt__ahev1h();var i=t.wl();return launch(t,i,e,_launch$slambda_0(n,null))}function _async(t,e,n){_init_properties_AsyncExt_kt__ahev1h();var i=t.wl();return async(t,i,e,_async$slambda_0(n,null))}function asyncImmediately_0(t,e){return _init_properties_AsyncExt_kt__ahev1h(),asyncImmediately(CoroutineScope(t),e)}function DEBUG_ASYNC_LAUNCH_ERRORS$delegate$lambda(){return _init_properties_AsyncExt_kt__ahev1h(),"true"===Companion_instance_8.x1e("DEBUG_ASYNC_LAUNCH_ERRORS")}function _launch$slambda(t,e){this.k1j_1=t,CoroutineImpl.call(this,e)}function _launch$slambda_0(t,e){var n=new _launch$slambda(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}function _async$slambda(t,e){this.w1j_1=t,CoroutineImpl.call(this,e)}function _async$slambda_0(t,e){var n=new _async$slambda(t,e),i=function(t,e){return n.z1j(t,e)};return i.$arity=1,i}function DEBUG_ASYNC_LAUNCH_ERRORS$factory(){return getPropertyCallableRef("DEBUG_ASYNC_LAUNCH_ERRORS",0,KProperty0,(function(){return get_DEBUG_ASYNC_LAUNCH_ERRORS()}),null)}function _init_properties_AsyncExt_kt__ahev1h(){properties_initialized_AsyncExt_kt_7k2grr||(properties_initialized_AsyncExt_kt_7k2grr=!0,logger=Companion_getInstance_0().f1f("AsyncExt"),DEFAULT_SUSPEND_TEST_TIMEOUT=Companion_getInstance().k18(20),DEBUG_ASYNC_LAUNCH_ERRORS$delegate=lazy(DEBUG_ASYNC_LAUNCH_ERRORS$delegate$lambda))}function AsyncThread$sync$slambda(t,e,n){this.i1k_1=t,this.j1k_1=e,CoroutineImpl.call(this,n)}function AsyncThread$sync$slambda_0(t,e,n){var i=new AsyncThread$sync$slambda(t,e,n),r=function(t){return i.m1k(t)};return r.$arity=0,r}function AsyncThread(){this.p1k_1=null}function delay_0(t,e){return delay(_TimeSpan___get_millisecondsLong__impl__v1fxun(t),e)}function Signal$_init_$lambda_6vimhp(){return Unit_instance}function Signal(t){t=t===VOID?Signal$_init_$lambda_6vimhp:t,BaseSignal.call(this,t)}function BaseSignal$_init_$lambda_tuu04y(){return Unit_instance}function BaseSignal(t){t=t===VOID?BaseSignal$_init_$lambda_tuu04y:t,this.x1k_1=t,this.y1k_1=FastArrayList_init_$Create$(),this.z1k_1=FastArrayList_init_$Create$(),this.a1l_1=0}function runBlockingNoSuspensions(t){var e,n={_v:!1},i={_v:null},r={_v:null},a={_v:0};if(startCoroutineUndispatched(t,new runBlockingNoSuspensions$1(a,r,n,i)),n._v||invalidOp("runBlockingNoSuspensions was not completed synchronously! suspendCount="+a._v),null!=r._v)throw ensureNotNull(r._v);return null==i._v?throwUninitializedPropertyAccessException("rresult"):e=i._v,e}function startCoroutineUndispatched(t,e){t:{var n;try{e.ab(),n="function"==typeof t?t(e):t.o1k(e)}catch(t){if(t instanceof Error){var i=_Result___init__impl__xyqfz8(createFailure(t));e.hb(i);break t}throw t}var r=n;if(r!==get_COROUTINE_SUSPENDED()){var a=null==r||null!=r?r:THROW_CCE(),s=_Result___init__impl__xyqfz8(a);e.hb(s)}}}function _get_unitInstance__yoa8mq(t){return Unit_instance}function runBlockingNoSuspensions$1$context$1(t){this.g1l_1=t,AbstractCoroutineContextElement.call(this,Key_instance),this.f1l_1=Key_instance}function runBlockingNoSuspensions$1(t,e,n,i){this.i1l_1=e,this.j1l_1=n,this.k1l_1=i,this.h1l_1=new runBlockingNoSuspensions$1$context$1(t)}function CompressionMethod(){}function uncompressed(t,e,n,i){return uncompressStream(e,t,n=n===VOID?8388608:n,i)}function CompressionContext(t){t=t===VOID?6:t,this.o1l_1=t,this.p1l_1=null,this.q1l_1=null}function uncompressStream(t,e,n,i){return asyncStreamWriter(n=n===VOID?8388608:n,"uncompress:"+t,VOID,uncompressStream$slambda_0(t,e,null),i)}function uncompress_0(t,e,n,i){var r=new $uncompressCOROUTINE$11(t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function compress_0(t,e,n,i){n=n===VOID?new CompressionContext:n,i=i===VOID?numberToInt(1.1*t.length):i;var r=ByteArrayBuilder_init_$Create$(i),a=MemorySyncStream(r);return compress_1(e,openSync(t),a,n),r.dk()}function compress_1(t,e,n,i){return runBlockingNoSuspensions(compress$slambda_0(t,e,n,i=i===VOID?new CompressionContext:i,null))}function compress_2(t,e,n,i,r){var a=new $compressCOROUTINE$12(t,e,n,i=i===VOID?new CompressionContext:i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function uncompressStream$slambda(t,e,n){this.y1m_1=t,this.z1m_1=e,CoroutineImpl.call(this,n)}function uncompressStream$slambda_0(t,e,n){var i=new uncompressStream$slambda(t,e,n),r=function(t,e){return i.b1n(t,e)};return r.$arity=1,r}function compress$slambda(t,e,n,i,r){this.l1n_1=t,this.m1n_1=e,this.n1n_1=n,this.o1n_1=i,CoroutineImpl.call(this,r)}function compress$slambda_0(t,e,n,i,r){var a=new compress$slambda(t,e,n,i,r),s=function(t){return a.p1n(t)};return s.$arity=0,s}function $uncompressCOROUTINE$11(t,e,n,i){CoroutineImpl.call(this,i),this.z1l_1=t,this.a1m_1=e,this.b1m_1=n}function $compressCOROUTINE$12(t,e,n,i,r){CoroutineImpl.call(this,r),this.l1m_1=t,this.m1m_1=e,this.n1m_1=n,this.o1m_1=i}function get_Deflate(){_init_properties_Deflate_kt__jbr9mv();var t=Deflate$delegate;return Deflate$factory(),t.d2()}function Companion_0(){this.t1n_1=8388608,this.u1n_1=131072}function Companion_getInstance_4(){return Companion_instance_1}function SlidingWindowWithOutput(t,e,n,i){n=n===VOID?8388608:n,i=i===VOID?131072:i,this.v1n_1=t,this.w1n_1=e,this.x1n_1=n,this.y1n_1=i,this.z1n_1=FixedSizeByteArrayBuilder_init_$Create$(this.x1n_1+this.y1n_1|0)}function Companion_1(){Companion_instance_2=this,DeflatePortable.call(this,15);var t=new HuffmanTree,e=new Int32Array(288),n=0;if(n<=143)do{var i=n;n=n+1|0,e[i]=8}while(n<=143);var r=144;if(r<=255)do{var a=r;r=r+1|0,e[a]=9}while(r<=255);var s=256;if(s<=279)do{var o=s;s=s+1|0,e[o]=7}while(s<=279);var l=280;if(l<=287)do{var u=l;l=l+1|0,e[u]=8}while(l<=287);this.m1o_1=t.f1p(e);for(var c=new HuffmanTree,h=0,f=new Int32Array(32);h<32;)f[h]=5,h=h+1|0;this.n1o_1=c.f1p(f),this.o1o_1=new Int32Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),this.p1o_1=new Int32Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),this.q1o_1=new Int32Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),this.r1o_1=new Int32Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),this.s1o_1=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15])}function Companion_getInstance_5(){return null==Companion_instance_2&&new Companion_1,Companion_instance_2}function $compressCOROUTINE$13(t,e,n,i,r){CoroutineImpl.call(this,r),this.p1p_1=t,this.q1p_1=e,this.r1p_1=n,this.s1p_1=i}function $uncompressCOROUTINE$14(t,e,n,i){CoroutineImpl.call(this,i),this.e1q_1=t,this.f1q_1=e,this.g1q_1=n}function DeflatePortable(t){Companion_getInstance_5(),this.g1p_1=t}function Deflate$delegate$lambda(){return _init_properties_Deflate_kt__jbr9mv(),Deflate(15)}function Deflate$factory(){return getPropertyCallableRef("Deflate",0,KProperty0,(function(){return get_Deflate()}),null)}function _init_properties_Deflate_kt__jbr9mv(){properties_initialized_Deflate_kt_5ek8zp||(properties_initialized_Deflate_kt_5ek8zp=!0,Deflate$delegate=lazy(Deflate$delegate$lambda))}function ZLib$Companion$_init_$lambda_nrgg4o(t){return Deflate(t)}function $writeCOROUTINE$23(t,e,n,i,r){CoroutineImpl.call(this,r),this.j1s_1=t,this.k1s_1=e,this.l1s_1=n,this.m1s_1=i}function $readCOROUTINE$24(t,e,n,i,r){CoroutineImpl.call(this,r),this.a1t_1=t,this.b1t_1=e,this.c1t_1=n,this.d1t_1=i}function Companion_2(){Companion_instance_3=this,ZLib.call(this,ZLib$Companion$_init_$lambda_nrgg4o)}function Companion_getInstance_6(){return null==Companion_instance_3&&new Companion_2,Companion_instance_3}function ZLib$uncompress$2(t,e){this.n1s_1=t,this.o1s_1=e}function ZLib$compress$2(t,e){this.f1t_1=t,this.g1t_1=e,this.e1t_1=t}function $uncompressCOROUTINE$21(t,e,n,i){CoroutineImpl.call(this,i),this.t1t_1=t,this.u1t_1=e,this.v1t_1=n}function $compressCOROUTINE$22(t,e,n,i,r){CoroutineImpl.call(this,r),this.u1u_1=t,this.v1u_1=e,this.w1u_1=n,this.x1u_1=i}function ZLib(t){Companion_getInstance_6(),this.h1t_1=t}function $forInputCOROUTINE$27(t,e,n){CoroutineImpl.call(this,n),this.m1v_1=t,this.n1v_1=e}function Companion_3(){this.q1n_1=8388608,this.r1n_1=32768}function Companion_getInstance_7(){return Companion_instance_4}function $prepareBytesUpToCOROUTINE$29(t,e,n){CoroutineImpl.call(this,n),this.y1v_1=t,this.z1v_1=e}function $abytesCOROUTINE$30(t,e,n,i){CoroutineImpl.call(this,i),this.j1w_1=t,this.k1w_1=e,this.l1w_1=n}function $readCOROUTINE$31(t,e,n,i,r){CoroutineImpl.call(this,r),this.v1w_1=t,this.w1w_1=e,this.x1w_1=n,this.y1w_1=i}function $hasLengthCOROUTINE$34(t,e){CoroutineImpl.call(this,e),this.h1x_1=t}function $getLengthCOROUTINE$35(t,e){CoroutineImpl.call(this,e),this.s1x_1=t}function BitReader(t,e,n){e=e===VOID?8388608:e,n=n===VOID?32768:n,this.j1r_1=t,this.k1r_1=e,this.l1r_1=n,this.m1r_1=0,this.n1r_1=0,this.o1r_1=new RingBuffer(ilog2(get_nextPowerOfTwo(this.k1r_1))),this.p1r_1=0,this.q1r_1=0,this.r1r_1=new Int8Array(4)}function Companion_4(){this.a1y_1=-1,this.b1y_1=-2,this.c1y_1=1023,this.d1y_1=16,this.e1y_1=288,this.f1y_1=!0,this.g1y_1=!0,this.h1y_1=10}function Companion_getInstance_8(){return Companion_instance_5}function resetAlloc(t){t.w1o_1=0}function alloc(t,e,n,i){var r=t.w1o_1;return t.w1o_1=r+1|0,t.t1o_1[r]=e,t.u1o_1[r]=n,t.v1o_1[r]=i,r}function allocLeaf(t,e){return alloc(t,e,1023,1023)}function allocNode(t,e,n){return alloc(t,-1,e,n)}function computeFastLookup(t){fill(t.z1o_1,-1),computeEncodedValues(t,t.x1o_1,0,0)}function computeEncodedValues(t,e,n,i){-1===t.t1o_1[e]?i<10?(computeEncodedValues(t,t.u1o_1[e],n,i+1|0),computeEncodedValues(t,t.v1o_1[e],n|1<<i,i+1|0)):writeVariants(t,n,i,e,-2):writeVariants(t,n,i,e,t.t1o_1[e])}function writeVariants(t,e,n,i,r){var a=65535&r|n<<16,s=1<<(10-n|0),o=0;if(o<s)do{var l=o;o=o+1|0;var u=e|l<<n;t.z1o_1[u]=a,t.a1p_1[u]=i}while(o<s)}function HuffmanTree(){this.t1o_1=new Int32Array(1024),this.u1o_1=new Int32Array(1024),this.v1o_1=new Int32Array(1024),this.w1o_1=0,this.x1o_1=1023,this.y1o_1=0;for(var t=0,e=new Int32Array(1024);t<1024;)e[t]=-1,t=t+1|0;this.z1o_1=e;for(var n=0,i=new Int32Array(1024);n<1024;)i[n]=0,n=n+1|0;this.a1p_1=i,this.b1p_1=new Int32Array(17),this.c1p_1=new Int32Array(17),this.d1p_1=new Int32Array(17),this.e1p_1=new Int32Array(288)}function SlidingWindow(t){this.c1o_1=t,this.d1o_1=new Int8Array(1<<this.c1o_1),this.e1o_1=this.d1o_1.length-1|0,this.f1o_1=0}function $invokeCOROUTINE$36(t,e,n,i,r){CoroutineImpl.call(this,r),this.r1y_1=t,this.s1y_1=e,this.t1y_1=n,this.u1y_1=i}function Companion_5(){Companion_instance_6=this,this.x1y_1=new Int8Array([80,75,5,6])}function Companion_getInstance_9(){return null==Companion_instance_6&&new Companion_5,Companion_instance_6}function read_0(t,e){var n=new $readCOROUTINE$37(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function $readCOROUTINE$37(t,e){CoroutineImpl.call(this,e),this.h1z_1=t}function ZipFile(t,e,n,i){Companion_getInstance_9(),n=n===VOID||n,i=i===VOID?null:i,this.m21_1=t,this.n21_1=e,this.o21_1=n,this.p21_1=i,this.q21_1=LinkedHashMap_init_$Create$(),this.r21_1=LinkedHashMap_init_$Create$()}function ZipEntry2(t,e,n,i,r,a,s,o,l){this.b22_1=t,this.c22_1=e,this.d22_1=n,this.e22_1=i,this.f22_1=r,this.g22_1=a,this.h22_1=s,this.i22_1=o,this.j22_1=l}function DosFileDateTime(t,e){this.k22_1=t,this.l22_1=e,this.m22_1=Companion_getInstance_1().u17(this.n22(),this.o22(),this.p22(),this.q22(),this.r22(),this.s22())}function KorAtomicRef(t,e){this.t22_1=t}function KorAtomicRef_0(t){return korAtomic(t)}function normalize(t){var e,n=_PathInfo___get_fullPath__impl__21fx6x(t),i=indexOf(n,":");if(i>=0){var r,a=n.substring(i),s=i+(r=startsWith(a,"://")?3:1)|0,o=i+r|0;e=n.substring(0,s)+normalize(get_pathInfo(n.substring(o)))}else{for(var l=replace(n,_Char___init__impl__6a9atx(92),_Char___init__impl__6a9atx(47)),u=ArrayList_init_$Create$(),c=split(l,["/"]),h=0;h<c.n();){var f=h;h=f+1|0;var _=c.d1(f);switch(_){case"":case".":u.z()&&u.p("");break;case"..":u.z()||u.f1(u.n()-1|0);break;default:u.p(_)}}e=joinToString(u,"/")}return e}function _PathInfo___init__impl__vpw96a(t){return t}function _PathInfo___get_fullPath__impl__21fx6x(t){return t}function get_pathInfo(t){return _PathInfo___init__impl__vpw96a(t)}function VfsNamed(t){this.v22_1=t}function combine(t,e){var n=_PathInfo___get_fullPath__impl__21fx6x(t),i=_PathInfo___get_fullPath__impl__21fx6x(e);return get_pathInfo(isAbsolute(get_pathInfo(i))?normalize(get_pathInfo(i)):normalize(get_pathInfo(n+"/"+i)))}function get_baseName(t){return get_baseName_0(t.w22())}function get_fullName(t){return _PathInfo___get_fullPath__impl__21fx6x(t.w22())}function parts(t){return split_0(_PathInfo___get_fullPath__impl__21fx6x(t),charArrayOf([_Char___init__impl__6a9atx(47)]))}function get_folder(t){var e=_PathInfo___get_fullPath__impl__21fx6x(t),n=lastIndexOfOrNull(get_fullPathNormalized(t),_Char___init__impl__6a9atx(47)),i=null==n?0:n;return e.substring(0,i)}function isAbsolute(t){var e=_PathInfo___get_fullPath__impl__21fx6x(t);if(0===charSequenceLength(e))return!1;var n=substringBefore(replace(e,_Char___init__impl__6a9atx(92),_Char___init__impl__6a9atx(47)),_Char___init__impl__6a9atx(47));return 0===charSequenceLength(n)||!!contains(n,_Char___init__impl__6a9atx(58))}function get_baseName_0(t){return substringAfterLast(get_fullPathNormalized(t),_Char___init__impl__6a9atx(47))}function get_fullPathNormalized(t){return replace(_PathInfo___get_fullPath__impl__21fx6x(t),_Char___init__impl__6a9atx(92),_Char___init__impl__6a9atx(47))}function get_extensionLC(t){return get_extension(t).toLowerCase()}function get_extension(t){return substringAfterLast(get_baseName_0(t),_Char___init__impl__6a9atx(46),"")}function getPathFullComponents(t){var e=ArrayList_init_$Create$(),n=0,i=get_fullPathNormalized(t).length;if(n<i)do{var r=n;n=n+1|0;var a=charSequenceGet(get_fullPathNormalized(t),r);if(a===_Char___init__impl__6a9atx(47)||a===_Char___init__impl__6a9atx(92)){var s=get_fullPathNormalized(t).substring(0,r);e.p(s)}}while(n<i);var o=get_fullPathNormalized(t);return e.p(o),e}function Kind_initEntries(){if(Kind_entriesInitialized)return Unit_instance;Kind_entriesInitialized=!0,Kind_DELETED_instance=new Kind("DELETED",0),Kind_MODIFIED_instance=new Kind("MODIFIED",1),Kind_CREATED_instance=new Kind("CREATED",2),Kind_RENAMED_instance=new Kind("RENAMED",3)}function Kind(t,e){Enum.call(this,t,e)}function Kind_MODIFIED_getInstance(){return Kind_initEntries(),Kind_MODIFIED_instance}function FileEvent(t,e,n){n=n===VOID?null:n,this.x22_1=t,this.y22_1=e,this.z22_1=n}function $readRangeCOROUTINE$43(t,e,n,i){CoroutineImpl.call(this,i),this.i23_1=t,this.j23_1=e,this.k23_1=n}function $listSimpleCOROUTINE$49(t,e,n){CoroutineImpl.call(this,n),this.a24_1=t,this.b24_1=e}function Vfs(){}function VfsOpenMode_initEntries(){if(VfsOpenMode_entriesInitialized)return Unit_instance;VfsOpenMode_entriesInitialized=!0,VfsOpenMode_READ_instance=new VfsOpenMode("READ",0,"rb",!1),VfsOpenMode_WRITE_instance=new VfsOpenMode("WRITE",1,"r+b",!0,!0),VfsOpenMode_APPEND_instance=new VfsOpenMode("APPEND",2,"a+b",!0,!0),VfsOpenMode_CREATE_OR_TRUNCATE_instance=new VfsOpenMode("CREATE_OR_TRUNCATE",3,"w+b",!0,!0,!0),VfsOpenMode_CREATE_instance=new VfsOpenMode("CREATE",4,"w+b",!0,!0),VfsOpenMode_CREATE_NEW_instance=new VfsOpenMode("CREATE_NEW",5,"w+b",!0)}function VfsOpenMode(t,e,n,i,r,a){r=r!==VOID&&r,a=a!==VOID&&a,Enum.call(this,t,e),this.p24_1=n,this.q24_1=i,this.r24_1=r,this.s24_1=a}function VfsOpenMode_READ_getInstance(){return VfsOpenMode_initEntries(),VfsOpenMode_READ_instance}function $readLinesCOROUTINE$73(t,e,n){CoroutineImpl.call(this,n),this.b25_1=t,this.c25_1=e}function $readStringCOROUTINE$74(t,e,n){CoroutineImpl.call(this,n),this.m25_1=t,this.n25_1=e}function VfsFile(t,e){VfsNamed.call(this,get_pathInfo(e)),this.g24_1=t,this.h24_1=e,this.i24_1=new Mixin,this.j24_1=null}function Node(t,e,n,i){n=n!==VOID&&n,i=i===VOID?null:i,this.g26_1=t,this.w25_1=e,this.x25_1=n,this.y25_1=this.w25_1.toLowerCase(),this.z25_1=null,this.h26(i),this.a26_1=null,this.b26_1=null,this.c26_1=LinkedHashMap_init_$Create$(),this.d26_1=LinkedHashMap_init_$Create$(),this.e26_1=null,this.f26_1=null}function MemoryNodeTree(t){t=t===VOID||t,this.j26_1=t,this.k26_1=new Node(this,"",!0)}function MemoryVfs(t,e){t=t===VOID?LinkedHashMap_init_$Create$():t;for(var n=new NodeVfs(e=e===VOID||e),i=t.z1().s();i.t();){var r=i.u(),a=r.c2(),s=r.d2(),o=_PathInfo___init__impl__vpw96a(a);n.r26().m26(get_folder(o),!0).l26(get_baseName_0(o),!1).e26_1=s}return n.e24()}function VfsFileFromData(t,e){return MemoryVfsMix(mapOf(to("file."+(e=e===VOID?"bin":e),t))).x1e("file."+e)}function MemoryVfsMix(t,e,n){t=t===VOID?LinkedHashMap_init_$Create$():t,e=e===VOID||e,n=n===VOID?get_UTF8():n;for(var i=LinkedHashMap_init_$Create$_0(mapCapacity(t.n())),r=t.z1().s();r.t();){var a=r.u(),s=a.c2(),o=a.d2(),l=o instanceof SyncStream?toAsync(o):isByteArray(o)?openAsync(o):"string"==typeof o?openAsync_0(o,n):openAsync(toByteArray(toString(o),n));i.a2(s,l)}return MemoryVfs(i,e)}function createStream(t,e,n){return toAsyncStream(new NodeVfs$createStream$1(e,t,n))}function NodeVfs$createStream$1(t,e,n){this.s26_1=t,this.t26_1=e,this.u26_1=n,AsyncStreamBase.call(this)}function NodeVfs$listFlow$slambda(t,e,n){this.i27_1=t,this.j27_1=e,CoroutineImpl.call(this,n)}function NodeVfs$listFlow$slambda_0(t,e,n){var i=new NodeVfs$listFlow$slambda(t,e,n),r=function(t,e){return i.p27(t,e)};return r.$arity=1,r}function NodeVfs(t){t=t===VOID||t,Vfs.call(this),this.o26_1=t,this.p26_1=new Signal,this.q26_1=new MemoryNodeTree(this.o26_1)}function openAsZip(t,e,n,i,r){var a=new $openAsZipCOROUTINE$124(t,e=e===VOID||e,n=n===VOID||n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function openAsZip_0(t,e,n,i){var r=new $openAsZipCOROUTINE$125(t,e=e===VOID||e,n=n===VOID||n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function ZipVfs(t,e,n,i,r,a,s){var o=new $ZipVfsCOROUTINE$126(t,e=e===VOID?null:e,n=n===VOID||n,i=i!==VOID&&i,r=r===VOID||r,a=a===VOID?null:a,s);return o.va_1=Unit_instance,o.wa_1=null,o.gb()}function ZipVfs$Impl$listFlow$slambda(t,e,n,i){this.y29_1=t,this.z29_1=e,this.a2a_1=n,CoroutineImpl.call(this,i)}function ZipVfs$Impl$listFlow$slambda_0(t,e,n,i){var r=new ZipVfs$Impl$listFlow$slambda(t,e,n,i),a=function(t,e){return r.p27(t,e)};return a.$arity=1,a}function $closeCOROUTINE$127(t,e){CoroutineImpl.call(this,e),this.s2a_1=t}function $openCOROUTINE$128(t,e,n,i){CoroutineImpl.call(this,i),this.b2b_1=t,this.c2b_1=e,this.d2b_1=n}function ZipVfs$Impl(t,e,n,i){this.g2a_1=t,this.h2a_1=e,this.i2a_1=n,this.j2a_1=i,Vfs.call(this),this.f2a_1=this}function $openAsZipCOROUTINE$124(t,e,n,i,r){CoroutineImpl.call(this,r),this.i28_1=t,this.j28_1=e,this.k28_1=n,this.l28_1=i}function $openAsZipCOROUTINE$125(t,e,n,i){CoroutineImpl.call(this,i),this.y28_1=t,this.z28_1=e,this.a29_1=n}function $ZipVfsCOROUTINE$126(t,e,n,i,r,a,s){CoroutineImpl.call(this,s),this.k29_1=t,this.l29_1=e,this.m29_1=n,this.n29_1=i,this.o29_1=r,this.p29_1=a}function indexOf_0(t,e){var n=t,i=0,r=n.length-e.length|0;if(i<r)do{var a,s=i;i=i+1|0;t:{var o=get_indices(e);if(isInterface(o,Collection)&&o.z())a=!0;else{for(var l=o.s();l.t();){var u=l.u();if(n[s+u|0]!==e[u]){a=!1;break t}}a=!0}}if(a)return s}while(i<r);return-1}function get_smallBytesPool(){_init_properties_TempBytes_kt__9ttz0b();var t=smallBytesPool$delegate;return smallBytesPool$factory(),t.c2c_1.qs()}function bytesTempPool$delegate$lambda(){return _init_properties_TempBytes_kt__9ttz0b(),Pool_init_$Create$(1,bytesTempPool$delegate$lambda$lambda)}function bytesTempPool$delegate$lambda$lambda(t){return _init_properties_TempBytes_kt__9ttz0b(),new Int8Array(65536)}function smallBytesPool$delegate$lambda(){return _init_properties_TempBytes_kt__9ttz0b(),Pool_init_$Create$(16,smallBytesPool$delegate$lambda$lambda)}function smallBytesPool$delegate$lambda$lambda(t){return _init_properties_TempBytes_kt__9ttz0b(),new Int8Array(16)}function smallBytesPool$factory(){return getPropertyCallableRef("smallBytesPool",0,KProperty0,(function(){return get_smallBytesPool()}),null)}function _init_properties_TempBytes_kt__9ttz0b(){properties_initialized_TempBytes_kt_bjneux||(properties_initialized_TempBytes_kt_bjneux=!0,bytesTempPool$delegate=new threadLocal(bytesTempPool$delegate$lambda),smallBytesPool$delegate=new threadLocal(smallBytesPool$delegate$lambda))}function ISO_8859_1(){ISO_8859_1_instance=this;var t=StringBuilder_init_$Create$(),e=0;if(e<256)do{var n=e;e=e+1|0,t.h5(numberToChar(n))}while(e<256);var i=t.toString();SingleByteCharset.call(this,"ISO-8859-1",i)}function ISO_8859_1_getInstance(){return null==ISO_8859_1_instance&&new ISO_8859_1,ISO_8859_1_instance}function UTF16Charset(t){Charset.call(this,"UTF-16-"+(t?"LE":"BE")),this.n2c_1=t}function Companion_6(){}function Companion_getInstance_10(){return Companion_instance_7}function Charset(t){this.p2c_1=t}function SingleByteCharset(t,e){BaseSingleByteCharset.call(this,t),this.f2c_1=e;var n=IntIntMap_init_$Create$(),i=0,r=this.f2c_1.length;if(i<r)do{var a=i;i=i+1|0;var s=charSequenceGet(this.f2c_1,a),o=Char__toInt_impl_vasixd(s);n.q1b(o,a)}while(i<r);this.g2c_1=n}function BaseSingleByteCharset(t){Charset.call(this,t)}function toString_0(t,e,n,i){n=n===VOID?0:n,i=i===VOID?t.length:i,_init_properties_Charset_kt__c47y1m();var r=StringBuilder_init_$Create$_0(e.k2c(i-n|0));return e.i2c(r,t,n,i),r.toString()}function toByteArray(t,e,n,i){e=e===VOID?get_UTF8():e,n=n===VOID?0:n,i=i===VOID?t.length:i,_init_properties_Charset_kt__c47y1m();var r=ByteArrayBuilder_init_$Create$(e.l2c(i-n|0));return e.h2c(r,t,n,i),r.dk()}function createByte(t,e,n){return e>>n&63|128}function UTC8CharsetBase(t){Charset.call(this,t)}function _init_properties_Charset_kt__c47y1m(){properties_initialized_Charset_kt_dajgec||(properties_initialized_Charset_kt_dajgec=!0,CHARSET_PROVIDERS=ArrayList_init_$Create$(),CHARSET_PROVIDERS_LOCK=new NonRecursiveLock,LATIN1=ISO_8859_1_getInstance(),UTF16_LE=new UTF16Charset(!0),UTF16_BE=new UTF16Charset(!1))}function Closeable(){}function Companion_7(){}function Companion_getInstance_11(){return Companion_instance_8}function unsupported(t){throw UnsupportedOperationException_init_$Create$(t=t===VOID?"unsupported":t)}function invalidOp(t){throw new InvalidOperationException(t)}function InvalidOperationException(t){Exception_init_$Init$(t=t===VOID?"Invalid Operation":t,this),captureStack(this,InvalidOperationException)}function OutOfBoundsException(t,e){t=t===VOID?-1:t,Exception_init_$Init$(e=e===VOID?"Out Of Bounds":e,this),captureStack(this,OutOfBoundsException)}function substr(t,e,n){_init_properties_StringExt_kt__eg42u6();var i=clamp(e>=0?e:t.length+e|0,0,t.length),r=clamp(n>=0?i+n|0:t.length+n|0,0,t.length);return r>=i?t.substring(i,r):""}function lastIndexOfOrNull(t,e,n){n=n===VOID?get_lastIndex(t):n,_init_properties_StringExt_kt__eg42u6();var i=lastIndexOf(t,e,n);return i>=0?i:null}function replaceNonPrintableCharactersRegex$delegate$lambda(){return _init_properties_StringExt_kt__eg42u6(),Regex_init_$Create$("[^ -~]")}function _init_properties_StringExt_kt__eg42u6(){properties_initialized_StringExt_kt_sd962o||(properties_initialized_StringExt_kt_sd962o=!0,formatRegex=Regex_init_$Create$("%([-]?\\d+)?(\\w)"),replaceNonPrintableCharactersRegex$delegate=lazy(replaceNonPrintableCharactersRegex$delegate$lambda))}function threadLocal$local$1(t){this.v2c_1=t,NativeThreadLocal.call(this)}function threadLocal(t){this.b2c_1=t,this.c2c_1=new threadLocal$local$1(this)}function QueryString(){}function QueryString_getInstance(){return QueryString_instance}function Companion_8(){Companion_instance_9=this,this.y2c_1=0,this.z2c_1=Regex_init_$Create$("\\w+:")}function Companion_getInstance_12(){return null==Companion_instance_9&&new Companion_8,Companion_instance_9}function get_EMPTY_BYTE_ARRAY(){return _init_properties_AsyncStream_kt__y7xune(),EMPTY_BYTE_ARRAY}function readInternal(t,e,n,i,r){var a=new $readInternalCOROUTINE$163(t,e,n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function writeInternal(t,e,n,i,r){var a=new $writeInternalCOROUTINE$164(t,e,n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function AsyncStream$read$slambda(t,e,n,i,r){this.h2e_1=t,this.i2e_1=e,this.j2e_1=n,this.k2e_1=i,CoroutineImpl.call(this,r)}function AsyncStream$read$slambda_0(t,e,n,i,r){var a=new AsyncStream$read$slambda(t,e,n,i,r),s=function(t){return a.l2e(t)};return s.$arity=0,s}function AsyncStream$write$slambda(t,e,n,i,r){this.u2e_1=t,this.v2e_1=e,this.w2e_1=n,this.x2e_1=i,CoroutineImpl.call(this,r)}function AsyncStream$write$slambda_0(t,e,n,i,r){var a=new AsyncStream$write$slambda(t,e,n,i,r),s=function(t){return a.p1n(t)};return s.$arity=0,s}function $readCOROUTINE$161(t,e,n,i,r){CoroutineImpl.call(this,r),this.g2f_1=t,this.h2f_1=e,this.i2f_1=n,this.j2f_1=i}function $writeCOROUTINE$162(t,e,n,i,r){CoroutineImpl.call(this,r),this.t2f_1=t,this.u2f_1=e,this.v2f_1=n,this.w2f_1=i}function $readInternalCOROUTINE$163(t,e,n,i,r){CoroutineImpl.call(this,r),this.j2d_1=t,this.k2d_1=e,this.l2d_1=n,this.m2d_1=i}function $writeInternalCOROUTINE$164(t,e,n,i,r){CoroutineImpl.call(this,r),this.v2d_1=t,this.w2d_1=e,this.x2d_1=n,this.y2d_1=i}function $getAvailableCOROUTINE$165(t,e){CoroutineImpl.call(this,e),this.f2g_1=t}function AsyncStream(t,e,n){e=e===VOID?new Long(0,0):e,n=n!==VOID&&n,this.s21_1=t,this.t21_1=e,this.u21_1=n,this.v21_1=new Mixin,this.w21_1=new AsyncThread,this.x21_1=new AsyncThread}function toAsyncStream(t,e){return e=e===VOID?new Long(0,0):e,_init_properties_AsyncStream_kt__y7xune(),new AsyncStream(t,e)}function AsyncStreamBase(){}function AsyncInputStream(){}function readAll(t,e){var n=new $readAllCOROUTINE$168(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function asyncStreamWriter(t,e,n,i,r){return new asyncStreamWriter$1(n=n!==VOID&&n,t=t===VOID?8388608:t,e=e===VOID?null:e,i)}function $writeCOROUTINE$169(t,e,n){CoroutineImpl.call(this,n),this.m2h_1=t,this.n2h_1=e}function AsyncOutputStream(){}function readBytesExact(t,e,n){var i=new $readBytesExactCOROUTINE$171(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function $hasLengthCOROUTINE$172(t,e){CoroutineImpl.call(this,e),this.n2i_1=t}function AsyncGetLengthStream(){}function readS32BE_0(t,e){var n=new $readS32BECOROUTINE$175(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function AsyncPositionLengthStream(){}function AsyncLengthStream(){}function AsyncGetPositionStream(){}function readExact(t,e,n,i,r){var a=new $readExactCOROUTINE$177(t,e,n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function sliceWithBounds(t,e,n,i,r){var a=new $sliceWithBoundsCOROUTINE$178(t,e,n,i=i!==VOID&&i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function MemoryAsyncStreamBase_init_$Init$(t,e){return t=t===VOID?4096:t,MemoryAsyncStreamBase.call(e,ByteArrayBuilder_init_$Create$(t)),e}function MemoryAsyncStreamBase_init_$Create$(t){return MemoryAsyncStreamBase_init_$Init$(t,objectCreate(protoOf(MemoryAsyncStreamBase)))}function MemoryAsyncStreamBase(t){AsyncStreamBase.call(this),this.h2k_1=t}function clampPosition(t,e){return clamp_0(e,t.l2k_1,t.m2k_1)}function clampPositionLen(t,e,n){if(e.t8(new Long(0,0))<0)throw IllegalArgumentException_init_$Create$("Invalid position");var i=clampPosition(t,t.l2k_1.ba(e)),r=clampPosition(t,i.ba(toLong(n))).ca(i).y8();return new Pair(i,r)}function $closeCOROUTINE$182(t,e){CoroutineImpl.call(this,e),this.x2k_1=t}function SliceAsyncStreamBase(t,e,n,i){AsyncStreamBase.call(this),this.k2k_1=t,this.l2k_1=e,this.m2k_1=n,this.n2k_1=i,this.o2k_1=this.m2k_1.ca(this.l2k_1)}function readBytesUpTo(t,e,n){var i=new $readBytesUpToCOROUTINE$183(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function writeBytes(t,e,n){return t.u1h(e,0,e.length,n)}function write8(t,e,n){return t.v1h(e,n)}function getAvailable(t,e){var n=new $getAvailableCOROUTINE$185(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function write16LE_0(t,e,n){var i=new $write16LECOROUTINE$186(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function hasAvailable(t,e){var n=new $hasAvailableCOROUTINE$187(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function readBytesUpToCopy(t,e,n){var i=new $readBytesUpToCopyCOROUTINE$188(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function getAvailable_0(t,e){var n=new $getAvailableCOROUTINE$189(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function readBytesUpTo_0(t,e,n,i,r){var a=new $readBytesUpToCOROUTINE$190(t,e,n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()}function toAsync(t){return _init_properties_AsyncStream_kt__y7xune(),toAsyncStream(toAsync_0(t.r27_1),t.j2o())}function toAsync_0(t){return _init_properties_AsyncStream_kt__y7xune(),t instanceof MemorySyncStreamBase?new MemoryAsyncStreamBase(t.l2o_1):new SyncAsyncStreamBase(t)}function SyncAsyncStreamBase(t){AsyncStreamBase.call(this),this.m2o_1=t}function sliceStart(t,e,n,i){var r=new $sliceStartCOROUTINE$192(t,e=e===VOID?new Long(0,0):e,n=n!==VOID&&n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function readString(t,e,n,i){var r=new $readStringCOROUTINE$194(t,e,n=n===VOID?get_UTF8():n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function readSlice(t,e,n){var i=new $readSliceCOROUTINE$199(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function sliceWithSize(t,e,n,i,r){return i=i!==VOID&&i,sliceWithBounds(t,e,e.ba(n),i,r)}function readU16LE_0(t,e){var n=new $readU16LECOROUTINE$200(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function readS32LE_0(t,e){var n=new $readS32LECOROUTINE$201(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function toAsyncInputStream(t){return _init_properties_AsyncStream_kt__y7xune(),new toAsyncInputStream$1(t)}function toAsyncOutputStream(t){return _init_properties_AsyncStream_kt__y7xune(),new toAsyncOutputStream$1(t)}function write32BE_0(t,e,n){var i=new $write32BECOROUTINE$202(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function toAsyncStream_0(t){return _init_properties_AsyncStream_kt__y7xune(),toAsyncStream(new toAsyncStream$1(isInterface(t,AsyncInputStream)?t:null,isInterface(t,AsyncOutputStream)?t:null,isInterface(t,AsyncLengthStream)?t:null,isInterface(t,AsyncGetLengthStream)?t:null,t))}function withLength(t,e){return _init_properties_AsyncStream_kt__y7xune(),new withLength$1(t,{_v:new Long(0,0)},e)}function SeekNotSupportedException(t){UnsupportedOperationException_init_$Init$(t=t===VOID?"Seeking not supported!":t,this),captureStack(this,SeekNotSupportedException)}function readAvailable(t,e){return readAll(t,e)}function asyncStreamWriter$1$ensureJob$2$1(t){this.r2r_1=t}function checkException(t){if(null!=t.t2r_1)throw RuntimeException_init_$Create$("Error in asyncStreamWriter",ensureNotNull(t.t2r_1))}function ensureJob(t,e){if(null!=t.u2r_1)return Unit_instance;var n=t,i=e.ab();return n.u2r_1=launchImmediately(i,asyncStreamWriter$o$ensureJob$slambda_0(t.w2r_1,t,null)),Unit_instance}function asyncStreamWriter$o$ensureJob$slambda(t,e,n){this.f2s_1=t,this.g2s_1=e,CoroutineImpl.call(this,n)}function asyncStreamWriter$o$ensureJob$slambda_0(t,e,n){var i=new asyncStreamWriter$o$ensureJob$slambda(t,e,n),r=function(t){return i.p1n(t)};return r.$arity=0,r}function $readCOROUTINE$203(t,e,n,i,r){CoroutineImpl.call(this,r),this.s2s_1=t,this.t2s_1=e,this.u2s_1=n,this.v2s_1=i}function asyncStreamWriter$1(t,e,n,i){var r;if(this.w2r_1=i,t){var a=new AsyncByteArrayDeque(e);a.l1i_1=n,r=a}else{var s=new AsyncByteArrayDequeChunked(e);s.i1g_1=n,r=s}this.s2r_1=r,this.t2r_1=null,this.u2r_1=null,this.v2r_1=new Int8Array(1)}function $getPositionCOROUTINE$205(t,e){CoroutineImpl.call(this,e),this.e2t_1=t}function $getLengthCOROUTINE$206(t,e){CoroutineImpl.call(this,e),this.q2t_1=t}function toAsyncInputStream$1(t){this.h2t_1=t}function toAsyncOutputStream$1(t){this.t2t_1=t}function checkPosition(t,e){if(!e.equals(t.u2t_1))throw new SeekNotSupportedException}function $readCOROUTINE$207(t,e,n,i,r,a){CoroutineImpl.call(this,a),this.i2u_1=t,this.j2u_1=e,this.k2u_1=n,this.l2u_1=i,this.m2u_1=r}function $writeCOROUTINE$208(t,e,n,i,r,a){CoroutineImpl.call(this,a),this.v2u_1=t,this.w2u_1=e,this.x2u_1=n,this.y2u_1=i,this.z2u_1=r}function $getLengthCOROUTINE$210(t,e){CoroutineImpl.call(this,e),this.i2v_1=t}function toAsyncStream$1(t,e,n,i,r){this.v2t_1=t,this.w2t_1=e,this.x2t_1=n,this.y2t_1=i,this.z2t_1=r,AsyncStreamBase.call(this),this.u2t_1=new Long(0,0)}function $readCOROUTINE$211(t,e,n,i,r){CoroutineImpl.call(this,r),this.t2v_1=t,this.u2v_1=e,this.v2v_1=n,this.w2v_1=i}function withLength$1(t,e,n){this.y2v_1=t,this.z2v_1=e,this.a2w_1=n,this.x2v_1=t}function $readAllCOROUTINE$168(t,e){CoroutineImpl.call(this,e),this.q2g_1=t}function $readBytesExactCOROUTINE$171(t,e,n){CoroutineImpl.call(this,n),this.b2i_1=t,this.c2i_1=e}function $readS32BECOROUTINE$175(t,e){CoroutineImpl.call(this,e),this.x2i_1=t}function $readExactCOROUTINE$177(t,e,n,i,r){CoroutineImpl.call(this,r),this.n2j_1=t,this.o2j_1=e,this.p2j_1=n,this.q2j_1=i}function $sliceWithBoundsCOROUTINE$178(t,e,n,i,r){CoroutineImpl.call(this,r),this.c2k_1=t,this.d2k_1=e,this.e2k_1=n,this.f2k_1=i}function $readBytesUpToCOROUTINE$183(t,e,n){CoroutineImpl.call(this,n),this.g2l_1=t,this.h2l_1=e}function $getAvailableCOROUTINE$185(t,e){CoroutineImpl.call(this,e),this.a2m_1=t}function $write16LECOROUTINE$186(t,e,n){CoroutineImpl.call(this,n),this.k2m_1=t,this.l2m_1=e}function $hasAvailableCOROUTINE$187(t,e){CoroutineImpl.call(this,e),this.z2m_1=t}function $readBytesUpToCopyCOROUTINE$188(t,e,n){CoroutineImpl.call(this,n),this.i2n_1=t,this.j2n_1=e}function $getAvailableCOROUTINE$189(t,e){CoroutineImpl.call(this,e),this.s2n_1=t}function $readBytesUpToCOROUTINE$190(t,e,n,i,r){CoroutineImpl.call(this,r),this.c2o_1=t,this.d2o_1=e,this.e2o_1=n,this.f2o_1=i}function $sliceStartCOROUTINE$192(t,e,n,i){CoroutineImpl.call(this,i),this.v2o_1=t,this.w2o_1=e,this.x2o_1=n}function $readStringCOROUTINE$194(t,e,n,i){CoroutineImpl.call(this,i),this.h2p_1=t,this.i2p_1=e,this.j2p_1=n}function $readSliceCOROUTINE$199(t,e,n){CoroutineImpl.call(this,n),this.s2p_1=t,this.t2p_1=e}function $readU16LECOROUTINE$200(t,e){CoroutineImpl.call(this,e),this.e2q_1=t}function $readS32LECOROUTINE$201(t,e){CoroutineImpl.call(this,e),this.u2q_1=t}function $write32BECOROUTINE$202(t,e,n){CoroutineImpl.call(this,n),this.k2r_1=t,this.l2r_1=e}function _init_properties_AsyncStream_kt__y7xune(){properties_initialized_AsyncStream_kt_gaoyh8||(properties_initialized_AsyncStream_kt_gaoyh8=!0,EMPTY_BYTE_ARRAY=new Int8Array(0))}function openAsync(t,e){return e=e===VOID?"r":e,toAsyncStream(new MemoryAsyncStreamBase(new ByteArrayBuilder(t,VOID,!0)),new Long(0,0))}function SyncStream(t,e){e=e===VOID?new Long(0,0):e,this.r27_1=t,this.s27_1=new Mixin,this.t27_1=this.r27_1.w26_1,this.u27_1=this.r27_1.b2w(),this.v27_1=e,this.w27_1=e,this.x27_1=e,this.y27_1=new Long(0,0)}function openSync(t,e){return e=e===VOID?"r":e,toSyncStream(new MemorySyncStreamBase(new ByteArrayBuilder(t)),new Long(0,0))}function readString_0(t,e,n){return n=n===VOID?get_UTF8():n,toString_0(readBytes(t,e),n)}function write8_0(t,e){return t.r1a(e)}function write32BE_1(t,e){write8_0(t,255&(e>>>24|0)),write8_0(t,255&(e>>>16|0)),write8_0(t,255&(e>>>8|0)),write8_0(t,255&e)}function writeBytes_0(t,e){return t.q1a(e,0,e.length)}function SyncInputStream(){}function SyncPositionStream(){}function SyncOutputStream(){}function SyncLengthStream(){}function SyncStreamBase(){this.w26_1=new Int8Array(16)}function toSyncStream(t,e){return new SyncStream(t,e=e===VOID?new Long(0,0):e)}function MemorySyncStreamBase_init_$Init$(t,e){return t=t===VOID?4096:t,MemorySyncStreamBase.call(e,ByteArrayBuilder_init_$Create$(t)),e}function MemorySyncStreamBase_init_$Create$(t){return MemorySyncStreamBase_init_$Init$(t,objectCreate(protoOf(MemorySyncStreamBase)))}function MemorySyncStreamBase(t){SyncStreamBase.call(this),this.l2o_1=t}function readBytes(t,e){var n=new Int8Array(e),i=t.wk(n,0,e);return i!==e?copyOf(n,i):n}function MemorySyncStream(t){return toSyncStream(new MemorySyncStreamBase(t))}function readU8(t){return t.h2w()}function openAsync_0(t,e){return toAsync(openSync(toByteArray(t,e=e===VOID?get_UTF8():e),"r"))}function MemorySyncStream_0(t){return t=t===VOID?get_EMPTY_BYTE_ARRAY():t,toSyncStream(new MemorySyncStreamBase(new ByteArrayBuilder(t)))}function readS32BE_1(t){return readU8(t)<<24|readU8(t)<<16|readU8(t)<<8|readU8(t)}function readU32LE(t){return toLong(readU8(t)|readU8(t)<<8|readU8(t)<<16|readU8(t)<<24).oa(new Long(-1,0))}function readU16LE_1(t){return readU8(t)|readU8(t)<<8}function readS32LE_1(t){return readU8(t)|readU8(t)<<8|readU8(t)<<16|readU8(t)<<24}function get_LONG_ZERO_TO_MAX_RANGE(){return _init_properties_RangeExt_kt__vz0y4k(),LONG_ZERO_TO_MAX_RANGE}function _init_properties_RangeExt_kt__vz0y4k(){if(!properties_initialized_RangeExt_kt_dqkq5i){properties_initialized_RangeExt_kt_dqkq5i=!0;var t=new Long(0,0);Companion_getInstance_2(),LONG_ZERO_TO_MAX_RANGE=t.ka(new Long(-1,2147483647))}}function Adler32(){this.p1s_1=65521,this.q1s_1=1}function Adler32_getInstance(){return Adler32_instance}function CRC32(){CRC32_instance=this,this.j2w_1=0;for(var t=0,e=new Int32Array(256);t<256;){var n=t,i=n,r=0;if(r<8)do{r=r+1|0,i=0!=(1&i)?-306674912^(i>>>1|0):i>>>1|0}while(r<8);e[n]=i,t=t+1|0}this.k2w_1=e}function CRC32_getInstance(){return null==CRC32_instance&&new CRC32,CRC32_instance}function SimpleChecksum(){}function get_jsGlobalDynamic(){return _init_properties_KorioNativeJs_kt__151su(),jsGlobalDynamic}function get_isDenoJs(){_init_properties_KorioNativeJs_kt__151su();var t=isDenoJs$delegate;return isDenoJs$factory(),t.d2()}function get_isWeb(){_init_properties_KorioNativeJs_kt__151su();var t=isWeb$delegate;return isWeb$factory(),t.d2()}function get_isWorker(){_init_properties_KorioNativeJs_kt__151su();var t=isWorker$delegate;return isWorker$factory(),t.d2()}function get_isNodeJs(){_init_properties_KorioNativeJs_kt__151su();var t=isNodeJs$delegate;return isNodeJs$factory(),t.d2()}function get_jsRuntime(){_init_properties_KorioNativeJs_kt__151su();var t=jsRuntime$delegate;return jsRuntime$factory(),t.d2()}function get_isShell(){return _init_properties_KorioNativeJs_kt__151su(),!get_isWeb()&&!get_isNodeJs()&&!get_isWorker()}function jsObjectToMap(t){_init_properties_KorioNativeJs_kt__151su();for(var e=jsObjectKeysArray(t),n=coerceAtLeast(mapCapacity(e.length),16),i=LinkedHashMap_init_$Create$_0(n),r=0,a=e.length;r<a;){var s=e[r];r=r+1|0;var o=to(s,t[s]);i.a2(o.bd_1,o.cd_1)}return i}function jsToArray(t){_init_properties_KorioNativeJs_kt__151su();for(var e=0,n=t.length,i=fillArrayVal(Array(n),null);e<n;){var r=e;i[r]=t[r],e=e+1|0}return i}function jsObjectKeysArray(t){_init_properties_KorioNativeJs_kt__151su();var e=jsToArray(jsObjectKeys(t));return isArray(e)?e:THROW_CCE()}function jsObjectKeys(t){return _init_properties_KorioNativeJs_kt__151su(),Object.keys(t)}function isDenoJs$delegate$lambda(){return _init_properties_KorioNativeJs_kt__151su(),"object"==typeof Deno&&Deno.statSync}function isWeb$delegate$lambda(){return _init_properties_KorioNativeJs_kt__151su(),"object"==typeof window}function isWorker$delegate$lambda(){return _init_properties_KorioNativeJs_kt__151su(),"function"==typeof importScripts}function isNodeJs$delegate$lambda(){return _init_properties_KorioNativeJs_kt__151su(),"undefined"!=typeof process&&process.release&&-1!==process.release.name.search(/node|io.js/)}function jsRuntime$delegate$lambda(){return _init_properties_KorioNativeJs_kt__151su(),get_isDenoJs()?JsRuntimeDeno_getInstance():get_isNodeJs()?JsRuntimeNode_getInstance():JsRuntimeBrowser_getInstance()}function isDenoJs$factory(){return getPropertyCallableRef("isDenoJs",0,KProperty0,(function(){return get_isDenoJs()}),null)}function isWeb$factory(){return getPropertyCallableRef("isWeb",0,KProperty0,(function(){return get_isWeb()}),null)}function isWorker$factory(){return getPropertyCallableRef("isWorker",0,KProperty0,(function(){return get_isWorker()}),null)}function isNodeJs$factory(){return getPropertyCallableRef("isNodeJs",0,KProperty0,(function(){return get_isNodeJs()}),null)}function jsRuntime$factory(){return getPropertyCallableRef("jsRuntime",0,KProperty0,(function(){return get_jsRuntime()}),null)}function _init_properties_KorioNativeJs_kt__151su(){properties_initialized_KorioNativeJs_kt_y4p8os||(properties_initialized_KorioNativeJs_kt_y4p8os=!0,jsGlobalDynamic="undefined"!=typeof globalThis?globalThis:void 0!==__webpack_require__.g?__webpack_require__.g:self,jsGlobal=get_jsGlobalDynamic(),isDenoJs$delegate=lazy(isDenoJs$delegate$lambda),isWeb$delegate=lazy(isWeb$delegate$lambda),isWorker$delegate=lazy(isWorker$delegate$lambda),isNodeJs$delegate=lazy(isNodeJs$delegate$lambda),jsRuntime$delegate=lazy(jsRuntime$delegate$lambda))}function Deflate(t){return new DeflatePortable(t)}function korAtomic(t){return new KorAtomicRef(t,!0)}function get_portableSimpleName(t){var e=t.b6();return null==e?"unknown":e}function EnvironmentInternal(){}function EnvironmentInternal_getInstance(){return EnvironmentInternal_instance}function FileNotFoundException(t){IOException.call(this,t),captureStack(this,FileNotFoundException)}function IOException(t){Exception_init_$Init$(t,this),captureStack(this,IOException)}function EOFException(t){IOException.call(this,t),captureStack(this,EOFException)}function NativeThreadLocal(){this.d2c_1=this.w2c()}function get_UTF8(){return _init_properties_UTF8_kt__b4hq3z(),UTF8}function JS_UTF8$1(){var t,e;UTC8CharsetBase.call(this,"UTF-8");try{t=new TextDecoder("utf-8")}catch(e){t=null}this.r2w_1=t;try{e=new TextEncoder("utf-8")}catch(t){e=null}this.s2w_1=e}function _init_properties_UTF8_kt__b4hq3z(){properties_initialized_UTF8_kt_emb36b||(properties_initialized_UTF8_kt_emb36b=!0,UTF8=new UTC8CharsetBase("UTF-8"),JS_UTF8=new JS_UTF8$1)}function Companion_9(){Companion_instance_10=this,this.t2w_1=Companion_getInstance_0().f1f("JsRuntime")}function Companion_getInstance_13(){return null==Companion_instance_10&&new Companion_9,Companion_instance_10}function _get__envs__kxwcr8(t){var e=t.n2w_1;return _envs$factory(),e.d2()}function _get__envsUC__n5sgyq(t){var e=t.o2w_1;return _envsUC$factory(),e.d2()}function JsRuntime$_envs$delegate$lambda(t){return function(){return t.u2w()}}function JsRuntime$_envsUC$delegate$lambda(t){return function(){for(var e=_get__envs__kxwcr8(t),n=LinkedHashMap_init_$Create$_0(mapCapacity(e.n())),i=e.z1().s();i.t();){var r=i.u(),a=r.c2().toUpperCase(),s=r.d2();n.a2(a,s)}return toMap(n)}}function JsRuntime(){Companion_getInstance_13(),this.l2w_1="unknown",this.m2w_1=get_isDenoJs()?"deno.js":get_isWeb()?"web.js":get_isNodeJs()?"node.js":get_isWorker()?"worker.js":get_isShell()?"shell.js":"js",this.n2w_1=lazy(JsRuntime$_envs$delegate$lambda(this)),this.o2w_1=lazy(JsRuntime$_envsUC$delegate$lambda(this))}function _envs$factory(){return getPropertyCallableRef("_envs",1,KProperty1,(function(t){return _get__envs__kxwcr8(t)}),null)}function _envsUC$factory(){return getPropertyCallableRef("_envsUC",1,KProperty1,(function(t){return _get__envsUC__n5sgyq(t)}),null)}function JsRuntimeBrowser$href$delegate$lambda(){var t=document.location,e=null==t?null:t.href;return null==e?".":e}function JsRuntimeBrowser$baseUrl$delegate$lambda(){return endsWith(JsRuntimeBrowser_getInstance().c2x(),"/")?JsRuntimeBrowser_getInstance().c2x():substringBeforeLast(JsRuntimeBrowser_getInstance().c2x(),_Char___init__impl__6a9atx(47))}function JsRuntimeBrowser(){JsRuntimeBrowser_instance=this,JsRuntime.call(this),this.z2w_1=navigator.platform,this.a2x_1=lazy(JsRuntimeBrowser$href$delegate$lambda),this.b2x_1=lazy(JsRuntimeBrowser$baseUrl$delegate$lambda)}function JsRuntimeBrowser_getInstance(){return null==JsRuntimeBrowser_instance&&new JsRuntimeBrowser,JsRuntimeBrowser_instance}function href$factory(){return getPropertyCallableRef("href",1,KProperty1,(function(t){return t.c2x()}),null)}function JsRuntimeDeno(){JsRuntimeDeno_instance=this,JsRuntime.call(this)}function JsRuntimeDeno_getInstance(){return null==JsRuntimeDeno_instance&&new JsRuntimeDeno,JsRuntimeDeno_instance}function JsRuntimeNode$fs$delegate$lambda(){return require_node("fs")}function JsRuntimeNode$path$delegate$lambda(){return require_node("path")}function JsRuntimeNode(){JsRuntimeNode_instance=this,JsRuntime.call(this),this.l2x_1=process.platform,this.m2x_1=lazy(JsRuntimeNode$fs$delegate$lambda),this.n2x_1=lazy(JsRuntimeNode$path$delegate$lambda)}function JsRuntimeNode_getInstance(){return null==JsRuntimeNode_instance&&new JsRuntimeNode,JsRuntimeNode_instance}function require_node(name){return _init_properties_JsRuntimeNode_kt__v0s2kf(),eval("("+get_REQ()+"uire('"+name+"'))")}function get_REQ(){return _init_properties_JsRuntimeNode_kt__v0s2kf(),"req"}function nodeFS$delegate$lambda(){return _init_properties_JsRuntimeNode_kt__v0s2kf(),require_node("fs")}function _init_properties_JsRuntimeNode_kt__v0s2kf(){properties_initialized_JsRuntimeNode_kt_f9ymrl||(properties_initialized_JsRuntimeNode_kt_f9ymrl=!0,nodeFS$delegate=lazy(nodeFS$delegate$lambda))}return setMetadataFor(Companion,"Companion",objectMeta),setMetadataFor($waitToWriteMoreCOROUTINE$0,"$waitToWriteMoreCOROUTINE$0",classMeta,CoroutineImpl),setMetadataFor($writeCOROUTINE$1,"$writeCOROUTINE$1",classMeta,CoroutineImpl),setMetadataFor($writeCOROUTINE$2,"$writeCOROUTINE$2",classMeta,CoroutineImpl),setMetadataFor($readCOROUTINE$3,"$readCOROUTINE$3",classMeta,CoroutineImpl),setMetadataFor(AsyncOutputStream,"AsyncOutputStream",interfaceMeta,VOID,VOID,VOID,VOID,VOID,[3,1,0]),setMetadataFor(AsyncInputStream,"AsyncInputStream",interfaceMeta,VOID,VOID,VOID,VOID,VOID,[3,0]),setMetadataFor(AsyncByteArrayDequeChunked,"AsyncByteArrayDequeChunked",classMeta,VOID,[AsyncOutputStream,AsyncInputStream],AsyncByteArrayDequeChunked,VOID,VOID,[1,3,0]),setMetadataFor($writeCOROUTINE$4,"$writeCOROUTINE$4",classMeta,CoroutineImpl),setMetadataFor($readCOROUTINE$5,"$readCOROUTINE$5",classMeta,CoroutineImpl),setMetadataFor(AsyncByteArrayDeque,"AsyncByteArrayDeque",classMeta,VOID,[AsyncOutputStream,AsyncInputStream],AsyncByteArrayDeque,VOID,VOID,[3,0,1]),setMetadataFor(_launch$slambda,"_launch$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(_async$slambda,"_async$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(AsyncThread$sync$slambda,"AsyncThread$sync$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[0]),setMetadataFor(AsyncThread,"AsyncThread",classMeta,VOID,VOID,AsyncThread,VOID,VOID,[0,1]),setMetadataFor(BaseSignal,"BaseSignal",classMeta,VOID,VOID,VOID,VOID,VOID,[0]),setMetadataFor(Signal,"Signal",classMeta,BaseSignal,VOID,Signal,VOID,VOID,[0]),setMetadataFor(runBlockingNoSuspensions$1$context$1,VOID,classMeta,AbstractCoroutineContextElement,[AbstractCoroutineContextElement,ContinuationInterceptor,Delay],VOID,VOID,VOID,[1]),setMetadataFor(runBlockingNoSuspensions$1,VOID,classMeta,VOID,[Continuation]),setMetadataFor(CompressionMethod,"CompressionMethod",interfaceMeta,VOID,VOID,VOID,VOID,VOID,[2,3]),setMetadataFor(CompressionContext,"CompressionContext",classMeta,VOID,VOID,CompressionContext),setMetadataFor(uncompressStream$slambda,"uncompressStream$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(compress$slambda,"compress$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[0]),setMetadataFor($uncompressCOROUTINE$11,"$uncompressCOROUTINE$11",classMeta,CoroutineImpl),setMetadataFor($compressCOROUTINE$12,"$compressCOROUTINE$12",classMeta,CoroutineImpl),setMetadataFor(Companion_0,"Companion",objectMeta),setMetadataFor(SlidingWindowWithOutput,"SlidingWindowWithOutput",classMeta,VOID,VOID,VOID,VOID,VOID,[0,1]),setMetadataFor(DeflatePortable,"DeflatePortable",classMeta,VOID,[CompressionMethod],VOID,VOID,VOID,[3,2]),setMetadataFor(Companion_1,"Companion",objectMeta,DeflatePortable,VOID,VOID,VOID,VOID,[3,2]),setMetadataFor($compressCOROUTINE$13,"$compressCOROUTINE$13",classMeta,CoroutineImpl),setMetadataFor($uncompressCOROUTINE$14,"$uncompressCOROUTINE$14",classMeta,CoroutineImpl),setMetadataFor($writeCOROUTINE$23,"$writeCOROUTINE$23",classMeta,CoroutineImpl),setMetadataFor($readCOROUTINE$24,"$readCOROUTINE$24",classMeta,CoroutineImpl),setMetadataFor(ZLib,"ZLib",classMeta,VOID,[CompressionMethod],VOID,VOID,VOID,[2,3]),setMetadataFor(Companion_2,"Companion",objectMeta,ZLib,VOID,VOID,VOID,VOID,[2,3]),setMetadataFor(ZLib$uncompress$2,VOID,classMeta,VOID,[AsyncOutputStream],VOID,VOID,VOID,[0,3,1]),setMetadataFor(AsyncGetLengthStream,"AsyncGetLengthStream",interfaceMeta,VOID,VOID,VOID,VOID,VOID,[0]),setMetadataFor(AsyncGetPositionStream,"AsyncGetPositionStream",interfaceMeta,VOID,VOID,VOID,VOID,VOID,[0]),setMetadataFor(ZLib$compress$2,VOID,classMeta,VOID,[AsyncGetLengthStream,AsyncGetPositionStream,AsyncInputStream],VOID,VOID,VOID,[0,3]),setMetadataFor($uncompressCOROUTINE$21,"$uncompressCOROUTINE$21",classMeta,CoroutineImpl),setMetadataFor($compressCOROUTINE$22,"$compressCOROUTINE$22",classMeta,CoroutineImpl),setMetadataFor($forInputCOROUTINE$27,"$forInputCOROUTINE$27",classMeta,CoroutineImpl),setMetadataFor(Companion_3,"Companion",objectMeta,VOID,VOID,VOID,VOID,VOID,[1]),setMetadataFor($prepareBytesUpToCOROUTINE$29,"$prepareBytesUpToCOROUTINE$29",classMeta,CoroutineImpl),setMetadataFor($abytesCOROUTINE$30,"$abytesCOROUTINE$30",classMeta,CoroutineImpl),setMetadataFor($readCOROUTINE$31,"$readCOROUTINE$31",classMeta,CoroutineImpl),setMetadataFor($hasLengthCOROUTINE$34,"$hasLengthCOROUTINE$34",classMeta,CoroutineImpl),setMetadataFor($getLengthCOROUTINE$35,"$getLengthCOROUTINE$35",classMeta,CoroutineImpl),setMetadataFor(BitReader,"BitReader",classMeta,VOID,[AsyncGetLengthStream,AsyncGetPositionStream,AsyncInputStream],VOID,VOID,VOID,[0,1,2,3]),setMetadataFor(Companion_4,"Companion",objectMeta),setMetadataFor(HuffmanTree,"HuffmanTree",classMeta,VOID,VOID,HuffmanTree),setMetadataFor(SlidingWindow,"SlidingWindow",classMeta),setMetadataFor($invokeCOROUTINE$36,"$invokeCOROUTINE$36",classMeta,CoroutineImpl),setMetadataFor(Companion_5,"Companion",objectMeta,VOID,VOID,VOID,VOID,VOID,[3]),setMetadataFor($readCOROUTINE$37,"$readCOROUTINE$37",classMeta,CoroutineImpl),setMetadataFor(ZipFile,"ZipFile",classMeta,VOID,VOID,VOID,VOID,VOID,[0]),setMetadataFor(ZipEntry2,"ZipEntry2",classMeta),setMetadataFor(DosFileDateTime,"DosFileDateTime",classMeta),setMetadataFor(KorAtomicRef,"KorAtomicRef",classMeta),setMetadataFor(VfsNamed,"VfsNamed",classMeta),setMetadataFor(Kind,"Kind",classMeta,Enum),setMetadataFor(FileEvent,"FileEvent",classMeta),setMetadataFor($readRangeCOROUTINE$43,"$readRangeCOROUTINE$43",classMeta,CoroutineImpl),setMetadataFor($listSimpleCOROUTINE$49,"$listSimpleCOROUTINE$49",classMeta,CoroutineImpl),setMetadataFor(Vfs,"Vfs",classMeta,VOID,VOID,VOID,VOID,VOID,[0,3,2,4,1]),setMetadataFor(VfsOpenMode,"VfsOpenMode",classMeta,Enum),setMetadataFor($readLinesCOROUTINE$73,"$readLinesCOROUTINE$73",classMeta,CoroutineImpl),setMetadataFor($readStringCOROUTINE$74,"$readStringCOROUTINE$74",classMeta,CoroutineImpl),setMetadataFor(VfsFile,"VfsFile",classMeta,VfsNamed,VOID,VOID,VOID,VOID,[2,3,0,1,4,5]),setMetadataFor(Node,"Node",classMeta),setMetadataFor(MemoryNodeTree,"MemoryNodeTree",classMeta,VOID,VOID,MemoryNodeTree),setMetadataFor(AsyncLengthStream,"AsyncLengthStream",interfaceMeta,VOID,[AsyncGetLengthStream],VOID,VOID,VOID,[1,0]),setMetadataFor(AsyncStreamBase,"AsyncStreamBase",classMeta,VOID,[AsyncLengthStream],AsyncStreamBase,VOID,VOID,[4,1,0]),setMetadataFor(NodeVfs$createStream$1,VOID,classMeta,AsyncStreamBase,VOID,VOID,VOID,VOID,[4,1,0]),setMetadataFor(NodeVfs$listFlow$slambda,"NodeVfs$listFlow$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(NodeVfs,"NodeVfs",classMeta,Vfs,VOID,NodeVfs,VOID,VOID,[2,1,0,3,4]),setMetadataFor(ZipVfs$Impl$listFlow$slambda,"ZipVfs$Impl$listFlow$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor($closeCOROUTINE$127,"$closeCOROUTINE$127",classMeta,CoroutineImpl),setMetadataFor($openCOROUTINE$128,"$openCOROUTINE$128",classMeta,CoroutineImpl),setMetadataFor(ZipVfs$Impl,"Impl",classMeta,Vfs,VOID,VOID,VOID,VOID,[0,2,1,3,4]),setMetadataFor($openAsZipCOROUTINE$124,"$openAsZipCOROUTINE$124",classMeta,CoroutineImpl),setMetadataFor($openAsZipCOROUTINE$125,"$openAsZipCOROUTINE$125",classMeta,CoroutineImpl),setMetadataFor($ZipVfsCOROUTINE$126,"$ZipVfsCOROUTINE$126",classMeta,CoroutineImpl),setMetadataFor(Charset,"Charset",classMeta),setMetadataFor(BaseSingleByteCharset,"BaseSingleByteCharset",classMeta,Charset),setMetadataFor(SingleByteCharset,"SingleByteCharset",classMeta,BaseSingleByteCharset),setMetadataFor(ISO_8859_1,"ISO_8859_1",objectMeta,SingleByteCharset),setMetadataFor(UTF16Charset,"UTF16Charset",classMeta,Charset),setMetadataFor(Companion_6,"Companion",objectMeta),setMetadataFor(UTC8CharsetBase,"UTC8CharsetBase",classMeta,Charset),setMetadataFor(Closeable,"Closeable",interfaceMeta),setMetadataFor(Companion_7,"Companion",objectMeta),setMetadataFor(InvalidOperationException,"InvalidOperationException",classMeta,Exception,VOID,InvalidOperationException),setMetadataFor(OutOfBoundsException,"OutOfBoundsException",classMeta,Exception,VOID,OutOfBoundsException),setMetadataFor(NativeThreadLocal,"NativeThreadLocal",classMeta),setMetadataFor(threadLocal$local$1,VOID,classMeta,NativeThreadLocal),setMetadataFor(threadLocal,"threadLocal",classMeta),setMetadataFor(QueryString,"QueryString",objectMeta),setMetadataFor(Companion_8,"Companion",objectMeta),setMetadataFor(AsyncStream$read$slambda,"AsyncStream$read$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[0]),setMetadataFor(AsyncStream$write$slambda,"AsyncStream$write$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[0]),setMetadataFor($readCOROUTINE$161,"$readCOROUTINE$161",classMeta,CoroutineImpl),setMetadataFor($writeCOROUTINE$162,"$writeCOROUTINE$162",classMeta,CoroutineImpl),setMetadataFor($readInternalCOROUTINE$163,"$readInternalCOROUTINE$163",classMeta,CoroutineImpl),setMetadataFor($writeInternalCOROUTINE$164,"$writeInternalCOROUTINE$164",classMeta,CoroutineImpl),setMetadataFor($getAvailableCOROUTINE$165,"$getAvailableCOROUTINE$165",classMeta,CoroutineImpl),setMetadataFor(AsyncPositionLengthStream,"AsyncPositionLengthStream",interfaceMeta,VOID,[AsyncGetPositionStream,AsyncLengthStream],VOID,VOID,VOID,[1,0]),setMetadataFor(AsyncStream,"AsyncStream",classMeta,VOID,[AsyncInputStream,AsyncGetLengthStream,AsyncGetPositionStream,AsyncOutputStream,AsyncPositionLengthStream],VOID,VOID,VOID,[3,1,0]),setMetadataFor($writeCOROUTINE$169,"$writeCOROUTINE$169",classMeta,CoroutineImpl),setMetadataFor($hasLengthCOROUTINE$172,"$hasLengthCOROUTINE$172",classMeta,CoroutineImpl),setMetadataFor(MemoryAsyncStreamBase,"MemoryAsyncStreamBase",classMeta,AsyncStreamBase,VOID,MemoryAsyncStreamBase_init_$Create$,VOID,VOID,[1,0,4]),setMetadataFor($closeCOROUTINE$182,"$closeCOROUTINE$182",classMeta,CoroutineImpl),setMetadataFor(SliceAsyncStreamBase,"SliceAsyncStreamBase",classMeta,AsyncStreamBase,VOID,VOID,VOID,VOID,[4,0,1]),setMetadataFor(SyncAsyncStreamBase,"SyncAsyncStreamBase",classMeta,AsyncStreamBase,VOID,VOID,VOID,VOID,[4,1,0]),setMetadataFor(SeekNotSupportedException,"SeekNotSupportedException",classMeta,UnsupportedOperationException,VOID,SeekNotSupportedException),setMetadataFor(asyncStreamWriter$1$ensureJob$2$1,VOID,classMeta,VOID,[AsyncOutputStream],VOID,VOID,VOID,[3,1,0]),setMetadataFor(asyncStreamWriter$o$ensureJob$slambda,"asyncStreamWriter$o$ensureJob$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[0]),setMetadataFor($readCOROUTINE$203,"$readCOROUTINE$203",classMeta,CoroutineImpl),setMetadataFor(asyncStreamWriter$1,VOID,classMeta,VOID,[AsyncInputStream],VOID,VOID,VOID,[0,3]),setMetadataFor($getPositionCOROUTINE$205,"$getPositionCOROUTINE$205",classMeta,CoroutineImpl),setMetadataFor($getLengthCOROUTINE$206,"$getLengthCOROUTINE$206",classMeta,CoroutineImpl),setMetadataFor(toAsyncInputStream$1,VOID,classMeta,VOID,[AsyncGetLengthStream,AsyncGetPositionStream,AsyncInputStream],VOID,VOID,VOID,[3,0]),setMetadataFor(toAsyncOutputStream$1,VOID,classMeta,VOID,[AsyncOutputStream],VOID,VOID,VOID,[3,0,1]),setMetadataFor($readCOROUTINE$207,"$readCOROUTINE$207",classMeta,CoroutineImpl),setMetadataFor($writeCOROUTINE$208,"$writeCOROUTINE$208",classMeta,CoroutineImpl),setMetadataFor($getLengthCOROUTINE$210,"$getLengthCOROUTINE$210",classMeta,CoroutineImpl),setMetadataFor(toAsyncStream$1,VOID,classMeta,AsyncStreamBase,VOID,VOID,VOID,VOID,[4,1,0]),setMetadataFor($readCOROUTINE$211,"$readCOROUTINE$211",classMeta,CoroutineImpl),setMetadataFor(withLength$1,VOID,classMeta,VOID,[AsyncInputStream,AsyncGetLengthStream,AsyncGetPositionStream],VOID,VOID,VOID,[0,3]),setMetadataFor($readAllCOROUTINE$168,"$readAllCOROUTINE$168",classMeta,CoroutineImpl),setMetadataFor($readBytesExactCOROUTINE$171,"$readBytesExactCOROUTINE$171",classMeta,CoroutineImpl),setMetadataFor($readS32BECOROUTINE$175,"$readS32BECOROUTINE$175",classMeta,CoroutineImpl),setMetadataFor($readExactCOROUTINE$177,"$readExactCOROUTINE$177",classMeta,CoroutineImpl),setMetadataFor($sliceWithBoundsCOROUTINE$178,"$sliceWithBoundsCOROUTINE$178",classMeta,CoroutineImpl),setMetadataFor($readBytesUpToCOROUTINE$183,"$readBytesUpToCOROUTINE$183",classMeta,CoroutineImpl),setMetadataFor($getAvailableCOROUTINE$185,"$getAvailableCOROUTINE$185",classMeta,CoroutineImpl),setMetadataFor($write16LECOROUTINE$186,"$write16LECOROUTINE$186",classMeta,CoroutineImpl),setMetadataFor($hasAvailableCOROUTINE$187,"$hasAvailableCOROUTINE$187",classMeta,CoroutineImpl),setMetadataFor($readBytesUpToCopyCOROUTINE$188,"$readBytesUpToCopyCOROUTINE$188",classMeta,CoroutineImpl),setMetadataFor($getAvailableCOROUTINE$189,"$getAvailableCOROUTINE$189",classMeta,CoroutineImpl),setMetadataFor($readBytesUpToCOROUTINE$190,"$readBytesUpToCOROUTINE$190",classMeta,CoroutineImpl),setMetadataFor($sliceStartCOROUTINE$192,"$sliceStartCOROUTINE$192",classMeta,CoroutineImpl),setMetadataFor($readStringCOROUTINE$194,"$readStringCOROUTINE$194",classMeta,CoroutineImpl),setMetadataFor($readSliceCOROUTINE$199,"$readSliceCOROUTINE$199",classMeta,CoroutineImpl),setMetadataFor($readU16LECOROUTINE$200,"$readU16LECOROUTINE$200",classMeta,CoroutineImpl),setMetadataFor($readS32LECOROUTINE$201,"$readS32LECOROUTINE$201",classMeta,CoroutineImpl),setMetadataFor($write32BECOROUTINE$202,"$write32BECOROUTINE$202",classMeta,CoroutineImpl),setMetadataFor(SyncInputStream,"SyncInputStream",interfaceMeta,VOID,[Closeable]),setMetadataFor(SyncPositionStream,"SyncPositionStream",interfaceMeta),setMetadataFor(SyncOutputStream,"SyncOutputStream",interfaceMeta,VOID,[Closeable]),setMetadataFor(SyncLengthStream,"SyncLengthStream",interfaceMeta),setMetadataFor(SyncStream,"SyncStream",classMeta,VOID,[Closeable,SyncInputStream,SyncPositionStream,SyncOutputStream,SyncLengthStream]),setMetadataFor(SyncStreamBase,"SyncStreamBase",classMeta,VOID,[Closeable,SyncLengthStream],SyncStreamBase),setMetadataFor(MemorySyncStreamBase,"MemorySyncStreamBase",classMeta,SyncStreamBase,VOID,MemorySyncStreamBase_init_$Create$),setMetadataFor(SimpleChecksum,"SimpleChecksum",interfaceMeta),setMetadataFor(Adler32,"Adler32",objectMeta,VOID,[SimpleChecksum]),setMetadataFor(CRC32,"CRC32",objectMeta,VOID,[SimpleChecksum]),setMetadataFor(EnvironmentInternal,"EnvironmentInternal",objectMeta),setMetadataFor(IOException,"IOException",classMeta,Exception),setMetadataFor(FileNotFoundException,"FileNotFoundException",classMeta,IOException),setMetadataFor(EOFException,"EOFException",classMeta,IOException),setMetadataFor(JS_UTF8$1,VOID,classMeta,UTC8CharsetBase),setMetadataFor(Companion_9,"Companion",objectMeta),setMetadataFor(JsRuntime,"JsRuntime",classMeta,VOID,VOID,VOID,VOID,VOID,[1,4]),setMetadataFor(JsRuntimeBrowser,"JsRuntimeBrowser",objectMeta,JsRuntime,VOID,VOID,VOID,VOID,[1,4]),setMetadataFor(JsRuntimeDeno,"JsRuntimeDeno",objectMeta,JsRuntime,VOID,VOID,VOID,VOID,[1,4]),setMetadataFor(JsRuntimeNode,"JsRuntimeNode",objectMeta,JsRuntime,VOID,VOID,VOID,VOID,[1,4]),protoOf($waitToWriteMoreCOROUTINE$0).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=5,this.f1g_1.j1g_1.l1a_1>this.f1g_1.h1g_1){this.ta_1=1;continue t}this.ta_1=4;continue t;case 1:if(!(this.f1g_1.j1g_1.l1a_1>(1+(this.f1g_1.h1g_1/2|0)|0))){this.ta_1=3;continue t}if(this.ta_1=2,(t=delay_0(Companion_getInstance().j18(1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.ta_1=1;continue t;case 3:this.ta_1=4;continue t;case 4:return Unit_instance;case 5:throw this.wa_1}}catch(t){var e=t;if(5===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($writeCOROUTINE$1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.w1g_1<=0)return Unit_instance;if(this.t1g_1.k1g_1){var e="Trying to write to a completed "+this.t1g_1;throw IllegalStateException_init_$Create$(toString(e))}if(this.ta_1=1,(t=waitToWriteMore(this.t1g_1,this.w1g_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return this.t1g_1.j1g_1.q1a(this.u1g_1,this.v1g_1,this.w1g_1),Unit_instance;case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($writeCOROUTINE$2).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=waitToWriteMore(this.f1h_1,1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return this.f1h_1.j1g_1.r1a(this.g1h_1),Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readCOROUTINE$3).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.s1h_1<=0)return 0;if(this.r1h_1<0||(this.r1h_1+this.s1h_1|0)>this.q1h_1.length)throw new OutOfBoundsException;this.ta_1=1;continue t;case 1:if(this.t1h_1=this.p1h_1.j1g_1.wk(this.q1h_1,this.r1h_1,this.s1h_1),this.t1h_1<=0&&!this.p1h_1.k1g_1){if(this.ta_1=3,(t=delay_0(Companion_getInstance().j18(1),this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 2:return this.t1h_1;case 3:this.ta_1=1;continue t;case 4:throw this.wa_1;case 5:return Unit_instance}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(AsyncByteArrayDequeChunked).u1h=function(t,e,n,i){var r=new $writeCOROUTINE$1(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(AsyncByteArrayDequeChunked).v1h=function(t,e){var n=new $writeCOROUTINE$2(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(AsyncByteArrayDequeChunked).w1h=function(t,e,n,i){var r=new $readCOROUTINE$3(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(AsyncByteArrayDequeChunked).x1h=function(t){return this.k1g_1=!0,Unit_instance},protoOf(AsyncByteArrayDequeChunked).toString=function(){return"AsyncByteArrayDequeV2("+this.i1g_1+")"},protoOf($writeCOROUTINE$4).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.j1i_1<=0)return Unit_instance;if(this.g1i_1.p1i_1){var e="Trying to write to a completed "+this.g1i_1;throw IllegalStateException_init_$Create$(toString(e))}if(this.ta_1=1,(t=this.g1i_1.m1i_1.e12(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.g1i_1.o1i_1.zk(this.h1i_1,this.i1i_1,this.j1i_1),this.ta_1=2,(t=this.g1i_1.n1i_1.b12(Unit_instance,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($readCOROUTINE$5).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=5,this.b1j_1<=0)return this.b1j_1;if(this.y1i_1.o1i_1.y19()>0)return this.y1i_1.o1i_1.wk(this.z1i_1,this.a1j_1,this.b1j_1);if(this.ta_1=1,(t=this.y1i_1.m1i_1.b12(Unit_instance,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:case 3:this.ta_1=2;continue t;case 2:if(this.y1i_1.p1i_1||0!==this.y1i_1.o1i_1.y19()){this.ta_1=4;continue t}if(this.ta_1=3,(t=this.y1i_1.n1i_1.e12(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:return this.y1i_1.p1i_1&&0===this.y1i_1.o1i_1.y19()?-1:this.y1i_1.o1i_1.wk(this.z1i_1,this.a1j_1,this.b1j_1);case 5:throw this.wa_1}}catch(t){var e=t;if(5===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(AsyncByteArrayDeque).u1h=function(t,e,n,i){var r=new $writeCOROUTINE$4(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(AsyncByteArrayDeque).w1h=function(t,e,n,i){var r=new $readCOROUTINE$5(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(AsyncByteArrayDeque).x1h=function(t){return this.p1i_1=!0,this.n1i_1.b12(Unit_instance,t)},protoOf(AsyncByteArrayDeque).toString=function(){return"AsyncByteArrayDeque("+this.l1i_1+")"},protoOf(_launch$slambda).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(_launch$slambda).tb=function(t,e){return this.m1j(null!=t&&isInterface(t,CoroutineScope_0)?t:THROW_CCE(),e)},protoOf(_launch$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ua_1=2,this.ta_1=1,(t=this.k1j_1(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.ua_1=3,this.ta_1=4;continue t;case 2:if(this.ua_1=3,this.wa_1 instanceof CancellationException)throw this.wa_1;if(this.wa_1 instanceof Error){var e=this.wa_1;if(get_DEBUG_ASYNC_LAUNCH_ERRORS()){var n=get_logger(),i=Level_ERROR_getInstance();n.u1f(i)&&n.v1f(i,"CoroutineScope._launch.catch:"),printStackTrace(e)}throw e}throw this.wa_1;case 3:throw this.wa_1;case 4:return this.ua_1=3,Unit_instance}}catch(t){var r=t;if(3===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf(_launch$slambda).n1j=function(t,e){var n=new _launch$slambda(this.k1j_1,e);return n.l1j_1=t,n},protoOf(_async$slambda).z1j=function(t,e){var n=this.n1j(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(_async$slambda).tb=function(t,e){return this.z1j(null!=t&&isInterface(t,CoroutineScope_0)?t:THROW_CCE(),e)},protoOf(_async$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ua_1=2,this.ta_1=1,(t=this.w1j_1(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.y1j_1=t,this.ua_1=3,this.ta_1=4;continue t;case 2:if(this.ua_1=3,this.wa_1 instanceof Error){var e=this.wa_1;if(e instanceof CancellationException)throw e;if(get_DEBUG_ASYNC_LAUNCH_ERRORS()){var n=get_logger(),i=Level_ERROR_getInstance();n.u1f(i)&&n.v1f(i,"CoroutineScope._async.catch:"),printStackTrace(e)}throw e}throw this.wa_1;case 3:throw this.wa_1;case 4:return this.ua_1=3,this.y1j_1}}catch(t){var r=t;if(3===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf(_async$slambda).n1j=function(t,e){var n=new _async$slambda(this.w1j_1,e);return n.x1j_1=t,n},protoOf(AsyncThread$sync$slambda).m1k=function(t){var e=this.n1k(t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(AsyncThread$sync$slambda).o1k=function(t){return this.m1k(t)},protoOf(AsyncThread$sync$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.k1k_1=this.i1k_1,null==this.k1k_1){this.l1k_1=null,this.ta_1=2;continue t}if(this.ta_1=1,(t=this.k1k_1.lo(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.l1k_1=t,this.ta_1=2;continue t;case 2:if(this.ta_1=3,(t=this.j1k_1(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:return t;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(AsyncThread$sync$slambda).n1k=function(t){return new AsyncThread$sync$slambda(this.i1k_1,this.j1k_1,t)},protoOf(AsyncThread).q1k=function(t,e){var n=e.ab();return this.r1k(n,t).lo(e)},protoOf(AsyncThread).r1k=function(t,e){var n=asyncImmediately_0(t,AsyncThread$sync$slambda_0(this.p1k_1,e,null));return this.p1k_1=n,n},protoOf(Signal).w1k=function(t){var e;if(this.y1k_1.z())e=Unit_instance;else try{this.a1l_1=this.a1l_1+1|0;for(var n=this.y1k_1,i=0,r=0;i<n.n();){r>=0&&r!==i&&n.o(r,n.d1(i));var a=n.d1(i),s=a.b1l_1;a.c1l_1(t),s&&(r=r-1|0),i=i+1|0,r=r+1|0}for(;n.n()>r;)n.f1(n.n()-1|0)}finally{if(this.a1l_1=this.a1l_1-1|0,!this.z1k_1.z()){for(var o=this.z1k_1,l=0,u=0;l<o.n();){u>=0&&u!==l&&o.o(u,o.d1(l));var c=o.d1(l);this.y1k_1.y1c(c),l=l+1|0,u=1+(u=u-1|0)|0}for(;o.n()>u;)o.f1(o.n()-1|0)}}return e},protoOf(runBlockingNoSuspensions$1$context$1).c2=function(){return this.f1l_1},protoOf(runBlockingNoSuspensions$1$context$1).eb=function(t){var e=this.g1l_1._v;return this.g1l_1._v=e+1|0,t},protoOf(runBlockingNoSuspensions$1$context$1).bs=function(t,e){var n=_Result___init__impl__xyqfz8(Unit_instance);return e.hb(n),Unit_instance},protoOf(runBlockingNoSuspensions$1).ab=function(){return this.h1l_1},protoOf(runBlockingNoSuspensions$1).l1l=function(t){var e=Result__exceptionOrNull_impl_p6xea9(t);if(null!=e)this.i1l_1._v=e,this.j1l_1._v=!0,printStackTrace(e);else{throwOnFailure(t);var n,i=_Result___get_value__impl__bjfvqg(t),r=null==i||null!=i?i:THROW_CCE();null==r?(_get_unitInstance__yoa8mq(this),n=null!=Unit_instance?Unit_instance:THROW_CCE()):n=r;var a=n;this.k1l_1._v=a,this.j1l_1._v=!0}},protoOf(runBlockingNoSuspensions$1).hb=function(t){return this.l1l(t)},protoOf(uncompressStream$slambda).b1n=function(t,e){var n=this.c1n(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(uncompressStream$slambda).tb=function(t,e){return this.b1n(null!=t&&isInterface(t,AsyncOutputStream)?t:THROW_CCE(),e)},protoOf(uncompressStream$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=uncompress_0(this.y1m_1,this.z1m_1,this.a1n_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(uncompressStream$slambda).c1n=function(t,e){var n=new uncompressStream$slambda(this.y1m_1,this.z1m_1,e);return n.a1n_1=t,n},protoOf(compress$slambda).p1n=function(t){var e=this.n1k(t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(compress$slambda).o1k=function(t){return this.p1n(t)},protoOf(compress$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=compress_2(this.l1n_1,toAsyncInputStream(this.m1n_1),toAsyncOutputStream(this.n1n_1),this.o1n_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(compress$slambda).n1k=function(t){return new compress$slambda(this.l1n_1,this.m1n_1,this.n1n_1,this.o1n_1,t)},protoOf($uncompressCOROUTINE$11).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=Companion_instance_4.s1n(this.a1m_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.c1m_1=t,this.ta_1=2,(t=this.z1l_1.m1l(this.c1m_1,this.b1m_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($compressCOROUTINE$12).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=Companion_instance_4.s1n(this.m1m_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.p1m_1=t,this.ta_1=2,(t=this.l1m_1.n1l(this.p1m_1,this.n1m_1,this.o1m_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(SlidingWindowWithOutput).a1o=function(){return this.z1n_1.j1d_1>=this.x1n_1},protoOf(SlidingWindowWithOutput).b1o=function(t,e){var n=0;if(n<e)do{n=n+1|0;var i=this.v1n_1.g1o(t);this.z1n_1.h1d(toByte(i))}while(n<e)},protoOf(SlidingWindowWithOutput).h1o=function(t,e,n){this.z1n_1.f1d(t,e,n),this.v1n_1.i1o(t,e,n)},protoOf(SlidingWindowWithOutput).j1o=function(t){this.z1n_1.h1d(t);var e=255&t;this.v1n_1.k1o(e)},protoOf($compressCOROUTINE$13).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=10,this.ta_1=1;continue t;case 1:if(this.ta_1=2,(t=hasAvailable(this.q1p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(!t){this.ta_1=9;continue t}if(this.ta_1=3,(t=getAvailable(this.q1p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:this.t1p_1=t;var e=this.t1p_1,n=new Long(65535,0);if(this.u1p_1=(e.t8(n)<=0?e:n).y8(),this.ta_1=4,(t=write8(this.r1p_1,toLong(this.u1p_1).t8(this.t1p_1)>=0?1:0,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:if(this.ta_1=5,(t=write16LE_0(this.r1p_1,this.u1p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(this.ta_1=6,(t=write16LE_0(this.r1p_1,~this.u1p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 6:if(this.ta_1=7,(t=readBytesExact(this.q1p_1,this.u1p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:if(this.v1p_1=t,this.ta_1=8,(t=writeBytes(this.r1p_1,this.v1p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 8:this.ta_1=1;continue t;case 9:return Unit_instance;case 10:throw this.wa_1}}catch(t){var i=t;if(10===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf($uncompressCOROUTINE$14).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=20,this.h1q_1=new SlidingWindowWithOutput(new SlidingWindow(this.e1q_1.g1p_1),this.g1q_1,this.f1q_1.k1r_1,this.f1q_1.l1r_1),this.i1q_1=!1,this.j1q_1=new HuffmanTree,this.k1q_1=new HuffmanTree,this.l1q_1=new Int32Array(32),this.m1q_1=new Int32Array(512),this.ta_1=1;continue t;case 1:if(this.i1q_1){this.ta_1=17;continue t}if(this.n1q_1=this.h1q_1,this.o1q_1=!1,this.o1q_1||this.n1q_1.a1o()){if(this.p1q_1=this.n1q_1,this.ta_1=2,(t=this.p1q_1.w1n_1.u1h(this.p1q_1.z1n_1.i1d_1,0,this.p1q_1.z1n_1.j1d_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=3;continue t;case 2:this.p1q_1.z1n_1.v(),this.ta_1=3;continue t;case 3:if(this.q1q_1=this.f1q_1,this.q1q_1.t1r()){if(this.ta_1=4,(t=this.q1q_1.s1r(this.q1q_1.k1r_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=5;continue t;case 4:this.ta_1=5;continue t;case 5:this.i1q_1=this.f1q_1.u1r(),this.r1q_1=this.f1q_1.v1r(2);var e=this.r1q_1;if(!(0<=e&&e<=2))throw IllegalStateException_init_$Create$(toString("invalid bit"));if(0===this.r1q_1){if(this.s1q_1=this.f1q_1.z1r(),this.t1q_1=this.f1q_1.z1r(),this.u1q_1=65535&~this.t1q_1,this.s1q_1!==this.u1q_1){var n="Invalid deflate stream: len("+this.s1q_1+") != ~nlen("+this.u1q_1+") :: nlen="+this.t1q_1;throw IllegalStateException_init_$Create$(toString(n))}if(this.ta_1=13,(t=this.f1q_1.a1s(this.s1q_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t}if(1===this.r1q_1)this.v1q_1=Companion_getInstance_5().m1o_1,this.w1q_1=Companion_getInstance_5().n1o_1;else{var i=this.f1q_1.v1r(5)+257|0,r=this.f1q_1.v1r(5)+1|0,a=this.f1q_1.v1r(4)+4|0;fill(this.l1q_1,0);var s=0;if(s<a)do{var o=s;s=s+1|0,this.l1q_1[Companion_getInstance_5().s1o_1[o]]=this.f1q_1.v1r(3)}while(s<a);this.j1q_1.w1r(this.l1q_1);var l=this.j1q_1,u=i+r|0,c=0;for(fill(this.m1q_1,0);c<u;){this.e1q_1;var h,f,_=this.f1q_1,d=l.x1r(_);if(!(0<=d&&d<=18))throw IllegalStateException_init_$Create$(toString("Invalid"));switch(d){case 16:h=this.f1q_1.v1r(2)+3|0;break;case 17:h=this.f1q_1.v1r(3)+3|0;break;case 18:h=this.f1q_1.v1r(7)+11|0;break;default:h=1}switch(d){case 16:f=this.m1q_1[c-1|0];break;case 17:case 18:f=0;break;default:f=d}fill(this.m1q_1,f,c,c+h|0),c=c+h|0}this.j1q_1.y1r(this.m1q_1,0,i),this.k1q_1.y1r(this.m1q_1,i,u),this.v1q_1=this.j1q_1,this.w1q_1=this.k1q_1}this.ta_1=6;continue t;case 6:if(this.x1q_1=this.f1q_1,this.x1q_1.t1r()){if(this.ta_1=7,(t=this.x1q_1.s1r(this.x1q_1.k1r_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=8;continue t;case 7:this.ta_1=8;continue t;case 8:if(this.y1q_1=this.v1q_1.x1r(this.f1q_1),256===this.y1q_1){this.ta_1=12;continue t}this.ta_1=9;continue t;case 9:if(this.y1q_1<256)this.h1q_1.j1o(toByte(this.y1q_1));else{var p=this.y1q_1-257|0,m=this.f1q_1.v1r(Companion_getInstance_5().o1o_1[p]);this.e1q_1;var g=this.f1q_1,v=this.w1q_1.x1r(g),y=this.f1q_1.v1r(Companion_getInstance_5().q1o_1[v]),w=Companion_getInstance_5().r1o_1[v]+y|0,b=Companion_getInstance_5().p1o_1[p]+m|0;this.h1q_1.b1o(w,b)}if(this.z1q_1=this.h1q_1,this.a1r_1=!1,this.a1r_1||this.z1q_1.a1o()){if(this.b1r_1=this.z1q_1,this.ta_1=10,(t=this.b1r_1.w1n_1.u1h(this.b1r_1.z1n_1.i1d_1,0,this.b1r_1.z1n_1.j1d_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=11;continue t;case 10:this.b1r_1.z1n_1.v(),this.ta_1=11;continue t;case 11:this.ta_1=6;continue t;case 12:case 15:this.ta_1=16;continue t;case 13:if(this.c1r_1=t,this.h1q_1.h1o(this.c1r_1,0,this.s1q_1),this.d1r_1=this.h1q_1,this.e1r_1=!1,this.e1r_1||this.d1r_1.a1o()){if(this.f1r_1=this.d1r_1,this.ta_1=14,(t=this.f1r_1.w1n_1.u1h(this.f1r_1.z1n_1.i1d_1,0,this.f1r_1.z1n_1.j1d_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=15;continue t;case 14:this.f1r_1.z1n_1.v(),this.ta_1=15;continue t;case 16:this.ta_1=1;continue t;case 17:if(this.g1r_1=this.h1q_1,this.h1r_1=!0,this.h1r_1||this.g1r_1.a1o()){if(this.i1r_1=this.g1r_1,this.ta_1=18,(t=this.i1r_1.w1n_1.u1h(this.i1r_1.z1n_1.i1d_1,0,this.i1r_1.z1n_1.j1d_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=19;continue t;case 18:this.i1r_1.z1n_1.v(),this.ta_1=19;continue t;case 19:return Unit_instance;case 20:throw this.wa_1}}catch(t){var x=t;if(20===this.ua_1)throw x;this.ta_1=this.ua_1,this.wa_1=x}},protoOf(DeflatePortable).n1l=function(t,e,n,i){var r=new $compressCOROUTINE$13(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(DeflatePortable).m1l=function(t,e,n){var i=new $uncompressCOROUTINE$14(this,t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf($writeCOROUTINE$23).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.j1s_1.n1s_1.u1h(this.k1s_1,this.l1s_1,this.m1s_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return this.j1s_1.o1s_1._v=Adler32_instance.r1s(this.j1s_1.o1s_1._v,this.k1s_1,this.l1s_1,this.m1s_1),Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readCOROUTINE$24).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.a1t_1.f1t_1.w1h(this.b1t_1,this.c1t_1,this.d1t_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=t;return e>0&&(this.a1t_1.g1t_1._v=Adler32_instance.r1s(this.a1t_1.g1t_1._v,this.b1t_1,this.c1t_1,e)),e;case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(ZLib$uncompress$2).x1h=function(t){return this.n1s_1.x1h(t)},protoOf(ZLib$uncompress$2).u1h=function(t,e,n,i){var r=new $writeCOROUTINE$23(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(ZLib$compress$2).x1h=function(t){return this.e1t_1.x1h(t)},protoOf(ZLib$compress$2).i1t=function(t){return this.e1t_1.i1t(t)},protoOf(ZLib$compress$2).j1t=function(t){return this.e1t_1.j1t(t)},protoOf(ZLib$compress$2).k1t=function(t){return this.e1t_1.k1t(t)},protoOf(ZLib$compress$2).w1h=function(t,e,n,i){var r=new $readCOROUTINE$24(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf($uncompressCOROUTINE$21).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=6,this.w1t_1=this.u1t_1,this.x1t_1=this.v1t_1,this.y1t_1=this.w1t_1,this.y1t_1.t1r()){if(this.ta_1=1,(t=this.y1t_1.s1r(this.y1t_1.k1r_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:if(this.z1t_1=this.w1t_1.j1u(),this.a1u_1=this.w1t_1.j1u(),0!=((imul(this.z1t_1,256)+this.a1u_1|0)%31|0))throw IllegalStateException_init_$Create$(toString("bad zlib header"));if(this.b1u_1=extract(this.z1t_1,0,4),8!==this.b1u_1){var e="Invalid zlib stream compressionMethod="+this.b1u_1;throw IllegalStateException_init_$Create$(toString(e))}if(this.c1u_1=extract(this.z1t_1,4,4)+8|0,this.d1u_1=extract(this.a1u_1,0,5),this.e1u_1=!(0==(1&(this.a1u_1>>>5|0))),this.f1u_1=extract(this.a1u_1,6,2),this.g1u_1=0,this.e1u_1){this.g1u_1=this.w1t_1.k1u();var n="Unsupported custom dictionaries (Provided DICTID="+this.g1u_1+")";throw new NotImplementedError("An operation is not implemented: "+n)}if(this.h1u_1={_v:Adler32_instance.q1s_1},this.ta_1=3,(t=this.t1t_1.h1t_1(this.c1u_1).m1l(this.w1t_1,new ZLib$uncompress$2(this.x1t_1,this.h1u_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:if(this.i1u_1=this.w1t_1,this.i1u_1.t1r()){if(this.ta_1=4,(t=this.i1u_1.s1r(this.i1u_1.k1r_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=5;continue t;case 4:this.ta_1=5;continue t;case 5:var i=this.w1t_1.l1u();return this.h1u_1._v!==i&&invalidOp("Adler32 doesn't match "+get_hex(this.h1u_1._v)+" != "+get_hex(i)),Unit_instance;case 6:throw this.wa_1}}catch(t){var r=t;if(6===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf($compressCOROUTINE$22).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.y1u_1=15,this.z1u_1=this.x1u_1.o1l_1<=0?0:this.x1u_1.o1l_1<6?1:this.x1u_1.o1l_1<9?2:3,this.a1v_1=8|(this.y1u_1-8|0)<<4,this.b1v_1=0|this.z1u_1<<6,this.c1v_1=0;var e=0;if(e<32)e:do{var n=e;if(e=e+1|0,0==((imul(this.a1v_1,256)+(this.b1v_1|n)|0)%31|0)){this.c1v_1=n;break e}}while(e<32);if(this.ta_1=1,(t=write8(this.w1u_1,this.a1v_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.ta_1=2,(t=write8(this.w1u_1,this.b1v_1|this.c1v_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(this.d1v_1={_v:Adler32_instance.q1s_1},this.ta_1=3,(t=compress_2(this.u1u_1.h1t_1(this.y1u_1),new ZLib$compress$2(this.v1u_1,this.d1v_1),this.w1u_1,this.x1u_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:if(this.ta_1=4,(t=write32BE_0(this.w1u_1,this.d1v_1._v,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:return Unit_instance;case 5:throw this.wa_1}}catch(t){var i=t;if(5===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(ZLib).m1l=function(t,e,n){var i=new $uncompressCOROUTINE$21(this,t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(ZLib).n1l=function(t,e,n,i){var r=new $compressCOROUTINE$22(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf($forInputCOROUTINE$27).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5;var e=this.n1v_1;if(isInterface(e,AsyncGetLengthStream)){if(this.ta_1=1,(t=this.n1v_1.k1t(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.o1v_1=!1,this.ta_1=2;continue t;case 1:this.o1v_1=t,this.ta_1=2;continue t;case 2:if(this.o1v_1){if(this.p1v_1=32768,this.ta_1=4,(t=this.n1v_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=3;continue t;case 3:return new BitReader(this.n1v_1);case 4:var n=t,i=new Long(8388608,0),r=(n.t8(i)<=0?n:i).y8(),a=Math.max(this.p1v_1,r),s=a/2|0,o=Math.max(s,32768);return new BitReader(this.n1v_1,a,o);case 5:throw this.wa_1}}catch(t){var l=t;if(5===this.ua_1)throw l;this.ta_1=this.ua_1,this.wa_1=l}},protoOf(Companion_3).s1n=function(t,e){var n=new $forInputCOROUTINE$27(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf($prepareBytesUpToCOROUTINE$29).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=6,this.ta_1=1;continue t;case 1:if(!(this.y1v_1.o1r_1.q19_1<this.z1v_1)){this.ta_1=5;continue t}var e=this.z1v_1,n=this.y1v_1.o1r_1.o1c();if(this.a1w_1=Math.min(e,n),this.a1w_1<=0){this.ta_1=5;continue t}this.ta_1=2;continue t;case 2:if(this.ta_1=3,(t=this.y1v_1.j1r_1.w1h(this.y1v_1.o1r_1.i1c(),this.y1v_1.o1r_1.k1c(),this.a1w_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:var i=t;if(i<=0){this.ta_1=5;continue t}this.ta_1=4;continue t;case 4:this.y1v_1.o1r_1.l1c(i);var r=this.y1v_1;r.q1r_1=r.q1r_1+i,this.ta_1=1;continue t;case 5:return Unit_instance;case 6:throw this.wa_1}}catch(t){var a=t;if(6===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf($abytesCOROUTINE$30).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.j1w_1.s1r(this.k1w_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return this.j1w_1.m1w(this.k1w_1,this.l1w_1);case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readCOROUTINE$31).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.v1w_1.s1r(this.y1w_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=this.v1w_1.o1r_1.wk(this.w1w_1,this.x1w_1,this.y1w_1),n=this.v1w_1;return n.p1r_1=n.p1r_1+e,e;case 2:throw this.wa_1}}catch(t){var i=t;if(2===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf($hasLengthCOROUTINE$34).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=this.h1x_1.j1r_1;if(this.i1x_1=isInterface(e,AsyncGetLengthStream)?e:null,null==this.i1x_1){this.j1x_1=null,this.ta_1=2;continue t}if(this.ta_1=1,(t=this.i1x_1.k1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.j1x_1=t,this.ta_1=2;continue t;case 2:var n=this.j1x_1;return null!=n&&n;case 3:throw this.wa_1}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf($getLengthCOROUTINE$35).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=this.s1x_1.j1r_1;if(this.t1x_1=isInterface(e,AsyncGetLengthStream)?e:null,null==this.t1x_1){this.u1x_1=null,this.ta_1=2;continue t}if(this.ta_1=1,(t=this.t1x_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.u1x_1=t,this.ta_1=2;continue t;case 2:var n=this.u1x_1;if(null==n)throw IllegalStateException_init_$Create$(toString("Length not available on Stream"));return n;case 3:throw this.wa_1}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(BitReader).toString=function(){return"BitReader("+this.j1r_1+", bigChunkSize="+this.k1r_1+", readWithSize="+this.l1r_1+")"},protoOf(BitReader).t1r=function(){return this.o1r_1.q19_1<this.l1r_1},protoOf(BitReader).s1r=function(t,e){var n=new $prepareBytesUpToCOROUTINE$29(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(BitReader).v1x=function(t){for(;this.n1r_1<t;){var e=this.m1r_1;this.p1r_1=this.p1r_1+1,this.m1r_1=e|this.o1r_1.ok()<<this.n1r_1,this.n1r_1=this.n1r_1+8|0}},protoOf(BitReader).w1x=function(t){return this.m1r_1&((1<<t)-1|0)},protoOf(BitReader).x1x=function(t){this.m1r_1=this.m1r_1>>>t|0,this.n1r_1=this.n1r_1-t|0},protoOf(BitReader).v1r=function(t){this.v1x(t);var e=this.w1x(t);return this.x1x(t),e},protoOf(BitReader).u1r=function(){return!(0===this.v1r(1))},protoOf(BitReader).y1x=function(t,e){var n=0,i=t;if(this.n1r_1>=8){if(0!=(this.n1r_1%8|0)){var r=this.n1r_1%8|0;this.x1x(r)}for(;this.n1r_1>=8;){var a=toByte(this.v1r(8)),s=n;n=s+1|0,e[s]=a,i=i-1|0}}this.m1r_1=0,this.n1r_1=0;var o=this.o1r_1.wk(e,n,i);o>0&&(this.p1r_1=this.p1r_1+o)},protoOf(BitReader).m1w=function(t,e){return this.y1x(t,e),e},protoOf(BitReader).j1u=function(){return this.m1r_1=0,this.n1r_1=0,this.p1r_1=this.p1r_1+1,this.o1r_1.ok()},protoOf(BitReader).z1r=function(){return this.y1x(2,this.r1r_1),readU16LE(this.r1r_1,0)},protoOf(BitReader).k1u=function(){return this.y1x(4,this.r1r_1),readS32LE(this.r1r_1,0)},protoOf(BitReader).l1u=function(){return this.y1x(4,this.r1r_1),readS32BE(this.r1r_1,0)},protoOf(BitReader).z1x=function(t,e,n){var i=new $abytesCOROUTINE$30(this,t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(BitReader).a1s=function(t,e,n,i){return e=e===VOID?new Int8Array(t):e,i===VOID?this.z1x(t,e,n):i.z1x.call(this,t,e,n)},protoOf(BitReader).w1h=function(t,e,n,i){var r=new $readCOROUTINE$31(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(BitReader).x1h=function(t){return this.j1r_1.x1h(t)},protoOf(BitReader).j1t=function(t){return numberToLong(this.p1r_1)},protoOf(BitReader).k1t=function(t){var e=new $hasLengthCOROUTINE$34(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(BitReader).i1t=function(t){var e=new $getLengthCOROUTINE$35(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(HuffmanTree).x1r=function(t){t.v1x(10);var e=this.x1o_1;if(t.n1r_1>=10){var n=t.w1x(10),i=this.z1o_1[n],r=toShort(i),a=i>>16;if(a>0){if(t.x1x(a),-2!==r)return r;e=this.a1p_1[n]}}do{var s,o;if(t.u1r()){var l=e;s=this.v1o_1[l]}else{var u=e;s=this.u1o_1[u]}if(1023!==(e=s)){var c=e;o=-1===this.t1o_1[c]}else o=!1}while(o);var h=e;return this.t1o_1[h]},protoOf(HuffmanTree).i1y=function(t,e,n){return this.y1r(t,e,n),this},protoOf(HuffmanTree).f1p=function(t,e,n,i){return e=e===VOID?0:e,n=n===VOID?t.length:n,i===VOID?this.i1y(t,e,n):i.i1y.call(this,t,e,n)},protoOf(HuffmanTree).y1r=function(t,e,n){var i=0,r=0,a=n-e|0;resetAlloc(this),fill(this.b1p_1,0);var s=e;if(s<n)do{var o=s;s=s+1|0;var l=t[o];if(!(0<=l&&l<=16))throw IllegalStateException_init_$Create$(toString("Invalid HuffmanTree.codeLengths "+l));var u=this.b1p_1;u[l]=u[l]+1|0}while(s<n);var c=0,h=0;if(h<16)do{var f=h;h=h+1|0;var _=this.b1p_1[f];this.c1p_1[f]=c,this.d1p_1[f]=c,c=c+_|0}while(h<16);var d=e;if(d<n)do{var p=d;d=d+1|0;var m=t[p],g=this.d1p_1,v=g[m];g[m]=v+1|0,this.e1p_1[v]=p-e|0}while(d<n);var y=16;if(1<=y)do{var w=y;y=y+-1|0;var b=this.w1o_1,x=this.c1p_1[w],S=this.b1p_1[w],E=0;if(E<S)do{var M=E;E=E+1|0,allocLeaf(this,this.e1p_1[x+M|0])}while(E<S);var T=step(until(0,r),2),C=T.u8_1,$=T.v8_1,A=T.w8_1;if(A>0&&C<=$||A<0&&$<=C)do{var R=C;C=C+A|0,allocNode(this,i+R|0,1+(i+R|0)|0)}while(R!==$);if(i=b,(r=S+(r/2|0)|0)>=2&&0!=(r%2|0))throw IllegalStateException_init_$Create$(toString("This canonical code does not represent a Huffman code tree: "+r))}while(1<=y);if(2!==r)throw IllegalStateException_init_$Create$(toString("This canonical code does not represent a Huffman code tree"));this.x1o_1=allocNode(this,this.w1o_1-2|0,this.w1o_1-1|0),this.y1o_1=a,computeFastLookup(this)},protoOf(HuffmanTree).w1r=function(t,e,n,i){var r;return e=e===VOID?0:e,n=n===VOID?t.length:n,i===VOID?(this.y1r(t,e,n),r=Unit_instance):r=i.y1r.call(this,t,e,n),r},protoOf(SlidingWindow).d1=function(t){return 255&this.d1o_1[(this.f1o_1-t|0)&this.e1o_1]},protoOf(SlidingWindow).g1o=function(t){return this.k1o(this.d1(t))},protoOf(SlidingWindow).k1o=function(t){return this.d1o_1[this.f1o_1]=toByte(t),this.f1o_1=(this.f1o_1+1|0)&this.e1o_1,t},protoOf(SlidingWindow).i1o=function(t,e,n){var i=0;if(i<n)do{var r=i;i=i+1|0;var a=255&t[e+r|0];this.k1o(a)}while(i<n)},protoOf($invokeCOROUTINE$36).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.v1y_1=new ZipFile(!1,this.s1y_1,this.t1y_1,this.u1y_1),this.w1y_1=this.v1y_1,this.ta_1=1,(t=read_0(this.w1y_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return this.v1y_1;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(Companion_5).y1y=function(t,e,n,i){var r=new $invokeCOROUTINE$36(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf($readCOROUTINE$37).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=18,this.i1z_1=get_EMPTY_BYTE_ARRAY(),this.ta_1=1,(t=this.h1z_1.n21_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.j1z_1=t,this.j1z_1.t8(new Long(8,0))<=0){if(this.ta_1=17,(t=this.h1z_1.n21_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 2:if(this.k1z_1=-1,this.ta_1=3,(t=this.h1z_1.n21_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:this.l1z_1=t,this.m1z_1=listOf([22,256,4096,65536]).s(),this.ta_1=4;continue t;case 4:if(!this.m1z_1.t()){this.ta_1=9;continue t}this.n1z_1=this.m1z_1.u();var e=new Long(0,0),n=this.l1z_1,i=this.n1z_1,r=n.ca(toLong(i));if(this.o1z_1=e.t8(r)>=0?e:r,this.ta_1=5,(t=this.h1z_1.n21_1.y21(this.o1z_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(this.p1z_1=this.n1z_1,this.ta_1=6,(t=this.h1z_1.n21_1.z21(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 6:if(this.q1z_1=t,this.r1z_1=toIntClamp(this.q1z_1),this.s1z_1=Math.max(this.p1z_1,this.r1z_1),this.ta_1=7,(t=readBytesExact(this.h1z_1.n21_1,this.s1z_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:if(this.t1z_1=t,this.i1z_1=this.t1z_1,this.k1z_1=indexOf_0(this.i1z_1,Companion_getInstance_9().x1y_1),this.k1z_1>=0){this.ta_1=9;continue t}this.ta_1=8;continue t;case 8:this.ta_1=4;continue t;case 9:if(this.k1z_1<0){if(this.u1z_1=this.k1z_1,this.v1z_1=get_hex_0(sliceArray(this.i1z_1,until(this.i1z_1.length-32|0,this.i1z_1.length))),this.ta_1=16,(t=this.h1z_1.n21_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=10;continue t;case 10:if(this.w1z_1=openSync(copyOfRange(this.i1z_1,this.k1z_1,this.i1z_1.length)),this.x1z_1=this.w1z_1,this.y1z_1=this.x1z_1,this.z1z_1=readS32BE_1(this.y1z_1),1347093766!==this.z1z_1)throw IllegalStateException_init_$Create$("Not a zip file "+get_hex(this.z1z_1)+" instead of "+get_hex(1347092738));if(this.a20_1=readU16LE_1(this.y1z_1),this.b20_1=readU16LE_1(this.y1z_1),this.c20_1=readU16LE_1(this.y1z_1),this.d20_1=readU16LE_1(this.y1z_1),this.e20_1=readS32LE_1(this.y1z_1),this.f20_1=readS32LE_1(this.y1z_1),this.g20_1=readU16LE_1(this.y1z_1),this.ta_1=11,(t=sliceWithSize(this.h1z_1.n21_1,toLong(this.f20_1),toLong(this.e20_1),VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 11:if(this.h20_1=t,this.ta_1=12,(t=readAvailable(this.h20_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 12:this.i20_1=t,this.j20_1=openSync(this.i20_1),this.k20_1=until(0,this.d20_1).s(),this.ta_1=13;continue t;case 13:if(!this.k20_1.t()){this.ta_1=15;continue t}if(this.l20_1=this.k20_1.u(),this.m20_1=this.j20_1,this.n20_1=this.m20_1,this.o20_1=readS32BE_1(this.n20_1),1347092738!==this.o20_1)throw IllegalStateException_init_$Create$("Not a zip file record "+get_hex(this.o20_1)+" instead of "+get_hex(1347092738));this.p20_1=readU16LE_1(this.n20_1),this.q20_1=readU16LE_1(this.n20_1),this.r20_1=readU16LE_1(this.n20_1),this.s20_1=readU16LE_1(this.n20_1),this.t20_1=readU16LE_1(this.n20_1),this.u20_1=readU16LE_1(this.n20_1),this.v20_1=readS32LE_1(this.n20_1),this.w20_1=readS32LE_1(this.n20_1),this.x20_1=readS32LE_1(this.n20_1),this.y20_1=readU16LE_1(this.n20_1),this.z20_1=readU16LE_1(this.n20_1),this.a21_1=readU16LE_1(this.n20_1),this.b21_1=readU16LE_1(this.n20_1),this.c21_1=readU16LE_1(this.n20_1),this.d21_1=readS32LE_1(this.n20_1),this.e21_1=readU32LE(this.n20_1),this.f21_1=readString_0(this.n20_1,this.y20_1),this.g21_1=readBytes(this.n20_1,this.z20_1),this.h21_1=endsWith(this.f21_1,"/"),this.i21_1=this.h1z_1.a22(this.f21_1),this.j21_1=substringBeforeLast(this.i21_1,_Char___init__impl__6a9atx(47),""),this.k21_1=substringAfterLast(this.i21_1,_Char___init__impl__6a9atx(47));var a,s=this.h1z_1.r21_1,o=this.j21_1,l=s.k2(o);if(null==l){var u=LinkedHashMap_init_$Create$();s.a2(o,u),a=u}else a=l;if(this.l21_1=a,this.ta_1=14,(t=sliceStart(this.h1z_1.n21_1,this.e21_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 14:var c=t,h=new DosFileDateTime(this.t20_1,this.u20_1),f=toLong(this.l20_1),_=this.e21_1.y8(),d=this.w20_1,p=toLong(d).oa(new Long(-1,0)),m=this.x20_1,g=toLong(m).oa(new Long(-1,0)),v=new ZipEntry2(this.f21_1,this.s20_1,this.h21_1,h,_,f,c,p,g),y=plus(listOf_0(""),getPathFullComponents(_PathInfo___init__impl__vpw96a(this.i21_1))),w=1,b=y.n();if(w<b)do{var x=w;w=w+1|0;var S=y.d1(x-1|0),E=y.d1(x),M=this.h1z_1.q21_1;if(!(isInterface(M,Map)?M:THROW_CCE()).h2(E)){var T,C=this.h1z_1.r21_1,$=C.k2(S);if(null==$){var A=LinkedHashMap_init_$Create$();C.a2(S,A),T=A}else T=$;var R=T,O=new DosFileDateTime(0,0),I=openAsync(new Int8Array([])),k=new ZipEntry2(E,0,!0,O,0,new Long(0,0),I,new Long(0,0),new Long(0,0)),U=get_baseName_0(_PathInfo___init__impl__vpw96a(E));R.a2(U,k),this.h1z_1.q21_1.a2(E,k)}}while(w<b);var P=this.l21_1,D=this.k21_1;P.a2(D,v);var N=this.h1z_1.q21_1,L=this.i21_1;N.a2(L,v),this.ta_1=13;continue t;case 15:var z=this.h1z_1.q21_1,F=new DosFileDateTime(0,0),B=openAsync(new Int8Array([])),H=new ZipEntry2("",0,!0,F,0,new Long(0,0),B,new Long(0,0),new Long(0,0));return z.a2("",H),Unit_instance;case 16:var V=t.toString(),q="Not a zip file (pk_endIndex < 0) : pk_endIndex="+this.u1z_1+" : "+this.v1z_1+" : "+V;throw IllegalArgumentException_init_$Create$(q);case 17:var j=t.toString();throw IllegalArgumentException_init_$Create$("Zip file is too small length="+j);case 18:throw this.wa_1}}catch(t){var G=t;if(18===this.ua_1)throw G;this.ta_1=this.ua_1,this.wa_1=G}},protoOf(ZipFile).toString=function(){return"ZipFile("+this.p21_1+")"},protoOf(ZipFile).a22=function(t){return this.o21_1?trim(t,charArrayOf([_Char___init__impl__6a9atx(47)])):trim(t,charArrayOf([_Char___init__impl__6a9atx(47)])).toLowerCase()},protoOf(ZipEntry2).toString=function(){return"ZipEntry2(path="+this.b22_1+", compressionMethod="+this.c22_1+", isDirectory="+this.d22_1+", time="+this.e22_1+", offset="+this.f22_1+", inode="+this.g22_1.toString()+", headerEntry="+this.h22_1+", compressedSize="+this.i22_1.toString()+", uncompressedSize="+this.j22_1.toString()+")"},protoOf(ZipEntry2).hashCode=function(){var t=getStringHashCode(this.b22_1);return t=imul(t,31)+this.c22_1|0,t=imul(t,31)+getBooleanHashCode(this.d22_1)|0,t=imul(t,31)+this.e22_1.hashCode()|0,t=imul(t,31)+this.f22_1|0,t=imul(t,31)+this.g22_1.hashCode()|0,t=imul(t,31)+hashCode(this.h22_1)|0,t=imul(t,31)+this.i22_1.hashCode()|0,imul(t,31)+this.j22_1.hashCode()|0},protoOf(ZipEntry2).equals=function(t){if(this===t)return!0;if(!(t instanceof ZipEntry2))return!1;var e=t instanceof ZipEntry2?t:THROW_CCE();return!!(this.b22_1===e.b22_1&&this.c22_1===e.c22_1&&this.d22_1===e.d22_1&&this.e22_1.equals(e.e22_1)&&this.f22_1===e.f22_1&&this.g22_1.equals(e.g22_1)&&equals(this.h22_1,e.h22_1)&&this.i22_1.equals(e.i22_1)&&this.j22_1.equals(e.j22_1))},protoOf(DosFileDateTime).s22=function(){return imul(2,extract(this.k22_1,0,5))},protoOf(DosFileDateTime).r22=function(){return extract(this.k22_1,5,6)},protoOf(DosFileDateTime).q22=function(){return extract(this.k22_1,11,5)},protoOf(DosFileDateTime).p22=function(){return extract(this.l22_1,0,5)},protoOf(DosFileDateTime).o22=function(){return extract(this.l22_1,5,4)},protoOf(DosFileDateTime).n22=function(){return 1980+extract(this.l22_1,9,7)|0},protoOf(DosFileDateTime).toString=function(){return"DosFileDateTime(dosTime="+this.k22_1+", dosDate="+this.l22_1+")"},protoOf(DosFileDateTime).hashCode=function(){var t=this.k22_1;return imul(t,31)+this.l22_1|0},protoOf(DosFileDateTime).equals=function(t){if(this===t)return!0;if(!(t instanceof DosFileDateTime))return!1;var e=t instanceof DosFileDateTime?t:THROW_CCE();return this.k22_1===e.k22_1&&this.l22_1===e.l22_1},protoOf(KorAtomicRef).u22=function(t){this.t22_1=t},protoOf(KorAtomicRef).d2=function(){return this.t22_1},protoOf(KorAtomicRef).toString=function(){return""+this.d2()},protoOf(VfsNamed).w22=function(){return this.v22_1},protoOf(FileEvent).toString=function(){return null!=this.z22_1?this.x22_1+"("+this.y22_1+", "+this.z22_1+")":this.x22_1+"("+this.y22_1+")"},protoOf(FileEvent).hashCode=function(){var t=this.x22_1.hashCode();return t=imul(t,31)+this.y22_1.hashCode()|0,imul(t,31)+(null==this.z22_1?0:this.z22_1.hashCode())|0},protoOf(FileEvent).equals=function(t){if(this===t)return!0;if(!(t instanceof FileEvent))return!1;var e=t instanceof FileEvent?t:THROW_CCE();return!!this.x22_1.equals(e.x22_1)&&!!this.y22_1.equals(e.y22_1)&&!!equals(this.z22_1,e.z22_1)},protoOf($readRangeCOROUTINE$43).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=6,this.ta_1=1,(t=this.i23_1.r23(this.j23_1,VfsOpenMode_READ_getInstance(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.l23_1=t,this.m23_1=null,this.ua_1=3,this.o23_1=this.l23_1,this.o23_1.t21_1=this.k23_1.n8(),this.ta_1=2;var e=toLong(IntCompanionObject_instance.MAX_VALUE).ca(toLong(1)),n=this.k23_1.o8().ca(this.k23_1.n8());if((t=readBytesUpTo(this.o23_1,(e.t8(n)<=0?e:n).y8()+1|0,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.n23_1=t,this.ua_1=6,this.ta_1=4;continue t;case 3:if(this.ua_1=6,this.wa_1 instanceof Error){this.p23_1=this.wa_1,this.m23_1=this.p23_1,this.n23_1=null,this.ta_1=4;continue t}throw this.wa_1;case 4:if(this.ua_1=6,this.q23_1=this.n23_1,this.ta_1=5,(t=this.l23_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(null!=this.m23_1)throw this.m23_1;var i=this.q23_1;return null==i||null!=i?i:THROW_CCE();case 6:throw this.wa_1}}catch(t){var r=t;if(6===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf($listSimpleCOROUTINE$49).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.a24_1.d24(this.b24_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.c24_1=t,this.ta_1=2,(t=toList(this.c24_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(Vfs).e24=function(){return new VfsFile(this,"")},protoOf(Vfs).x1e=function(t){return this.e24().x1e(t)},protoOf(Vfs).k24=function(t){return this.e24().x1e(t)},protoOf(Vfs).x1h=function(t){return Unit_instance},protoOf(Vfs).r23=function(t,e,n){unsupported()},protoOf(Vfs).l24=function(t,e,n){var i=new $readRangeCOROUTINE$43(this,t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(Vfs).m24=function(t,e){var n=new $listSimpleCOROUTINE$49(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(Vfs).d24=function(t,e){unsupported()},protoOf(Vfs).toString=function(){return get_portableSimpleName(getKClassFromExpression(this))},protoOf($readLinesCOROUTINE$73).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.b25_1.d25(this.c25_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return lineSequence(t);case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readStringCOROUTINE$74).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.m25_1.o25(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return toString_0(t,this.n25_1);case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(VfsFile).x1e=function(t){return new VfsFile(this.g24_1,_PathInfo___get_fullPath__impl__21fx6x(combine(get_pathInfo(this.h24_1),get_pathInfo(t))))},protoOf(VfsFile).p25=function(t,e){return this.g24_1.r23(this.h24_1,t,e)},protoOf(VfsFile).q25=function(t){return this.g24_1.l24(this.h24_1,get_LONG_ZERO_TO_MAX_RANGE(),t)},protoOf(VfsFile).o25=function(t){return this.q25(t)},protoOf(VfsFile).r25=function(t){return this.q25(t)},protoOf(VfsFile).s25=function(t,e){var n=new $readLinesCOROUTINE$73(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(VfsFile).t25=function(t,e,n){return t=t===VOID?get_UTF8():t,n===VOID?this.s25(t,e):n.s25.call(this,t,e)},protoOf(VfsFile).d25=function(t,e){var n=new $readStringCOROUTINE$74(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(VfsFile).u25=function(t,e,n){return t=t===VOID?get_UTF8():t,n===VOID?this.d25(t,e):n.d25.call(this,t,e)},protoOf(VfsFile).v25=function(t){return this.g24_1.m24(this.h24_1,t)},protoOf(VfsFile).toString=function(){return this.g24_1+"["+this.h24_1+"]"},protoOf(VfsFile).hashCode=function(){var t=hashCode(this.g24_1);return imul(t,31)+getStringHashCode(this.h24_1)|0},protoOf(VfsFile).equals=function(t){if(this===t)return!0;if(!(t instanceof VfsFile))return!1;var e=t instanceof VfsFile?t:THROW_CCE();return!!equals(this.g24_1,e.g24_1)&&this.h24_1===e.h24_1},protoOf(Node).s=function(){return this.c26_1.y1().s()},protoOf(Node).h26=function(t){null!=this.z25_1&&(ensureNotNull(this.z25_1).c26_1.e2(this.w25_1),ensureNotNull(this.z25_1).d26_1.e2(this.y25_1)),this.z25_1=t;var e=this.z25_1,n=null==e?null:e.c26_1;if(null==n);else{var i=this.w25_1;n.a2(i,this)}var r=this.z25_1,a=null==r?null:r.d26_1;if(null==a);else{var s=this.y25_1;a.a2(s,this)}},protoOf(Node).e24=function(){var t=this.z25_1,e=null==t?null:t.e24();return null==e?this:e},protoOf(Node).i26=function(t){var e;switch(t){case"":case".":e=this;break;case"..":e=this.z25_1;break;default:var n;if(this.g26_1.j26_1)n=this.c26_1.k2(t);else{var i=t.toLowerCase();n=this.d26_1.k2(i)}e=n}return e},protoOf(Node).l26=function(t,e){return new Node(this.g26_1,t,e,this)},protoOf(Node).x1e=function(t){return this.m26(t,!1)},protoOf(Node).m26=function(t,e){for(var n=startsWith_0(t,_Char___init__impl__6a9atx(47))?this.e24():this,i=parts(get_pathInfo(t)),r=0;r<i.n();){var a=r;r=a+1|0;var s=i.d1(a),o=n.i26(s);null==o&&e&&(o=n.l26(s,!0));var l=o;if(null==l)throw new FileNotFoundException("Can't find '"+s+"' in "+t);n=l}return n},protoOf(Node).n26=function(t,e,n){return e=e!==VOID&&e,n===VOID?this.m26(t,e):n.m26.call(this,t,e)},protoOf(NodeVfs$createStream$1).v26=function(t,e,n,i,r){return this.s26_1.x26(t,e,n,i)},protoOf(NodeVfs$createStream$1).y26=function(t,e,n,i,r){return this.s26_1.z26(t,e,n,i),this.t26_1.p26_1.w1k(new FileEvent(Kind_MODIFIED_getInstance(),this.u26_1)),Unit_instance},protoOf(NodeVfs$createStream$1).i1t=function(t){return this.s26_1.a()},protoOf(NodeVfs$createStream$1).x1h=function(t){return this.s26_1.i15(),Unit_instance},protoOf(NodeVfs$listFlow$slambda).p27=function(t,e){var n=this.q27(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(NodeVfs$listFlow$slambda).tb=function(t,e){return this.p27(null!=t&&isInterface(t,FlowCollector)?t:THROW_CCE(),e)},protoOf(NodeVfs$listFlow$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.l27_1=this.i27_1.r26().x1e(this.j27_1),this.m27_1=this.l27_1.c26_1.z1().s(),this.ta_1=1;continue t;case 1:if(!this.m27_1.t()){this.ta_1=3;continue t}if(this.n27_1=this.m27_1.u(),this.o27_1=this.n27_1.c2(),this.ta_1=2,(t=this.k27_1.c14(this.i27_1.k24(this.j27_1+"/"+this.o27_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.ta_1=1;continue t;case 3:return Unit_instance;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(NodeVfs$listFlow$slambda).q27=function(t,e){var n=new NodeVfs$listFlow$slambda(this.i27_1,this.j27_1,e);return n.k27_1=t,n},protoOf(NodeVfs).r26=function(){return this.q26_1.k26_1},protoOf(NodeVfs).r23=function(t,e,n){var i=_PathInfo___init__impl__vpw96a(t),r=this.r26().n26(get_folder(i)),a=r.i26(get_baseName_0(i)),s=this.x1e(t);null==a&&e.r24_1?(a=r.l26(get_baseName_0(i),!1)).e26_1=createStream(this,MemorySyncStream_0().r27_1,s):e.s24_1&&null!=a&&(a.e26_1=createStream(this,MemorySyncStream_0().r27_1,s));var o=null==a?null:a.e26_1,l=null==o?null:o.z27();if(null==l)throw new FileNotFoundException(t);return l},protoOf(NodeVfs).d24=function(t,e){return flow(NodeVfs$listFlow$slambda_0(this,t,null))},protoOf(NodeVfs).toString=function(){return"NodeVfs"},protoOf(ZipVfs$Impl$listFlow$slambda).p27=function(t,e){var n=this.q27(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(ZipVfs$Impl$listFlow$slambda).tb=function(t,e){return this.p27(null!=t&&isInterface(t,FlowCollector)?t:THROW_CCE(),e)},protoOf(ZipVfs$Impl$listFlow$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4;var e=this.y29_1.r21_1.k2(this.y29_1.a22(this.z29_1));this.c2a_1=(null==e?LinkedHashMap_init_$Create$():e).z1().s(),this.ta_1=1;continue t;case 1:if(!this.c2a_1.t()){this.ta_1=3;continue t}if(this.d2a_1=this.c2a_1.u(),this.e2a_1=this.d2a_1.d2(),this.ta_1=2,(t=this.b2a_1.c14(this.a2a_1.f2a_1.x1e(this.e2a_1.b22_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.ta_1=1;continue t;case 3:return Unit_instance;case 4:throw this.wa_1}}catch(t){var n=t;if(4===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(ZipVfs$Impl$listFlow$slambda).q27=function(t,e){var n=new ZipVfs$Impl$listFlow$slambda(this.y29_1,this.z29_1,this.a2a_1,e);return n.b2a_1=t,n},protoOf($closeCOROUTINE$127).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.s2a_1.g2a_1){if(this.ta_1=1,(t=this.s2a_1.h2a_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($openCOROUTINE$128).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=21;var e,n=this.b2b_1.i2a_1.q21_1.k2(this.b2b_1.i2a_1.a22(this.c2b_1));if(null==n)throw new FileNotFoundException("Path: '"+this.c2b_1+"'");if(e=n,this.e2b_1=e,this.e2b_1.d22_1)throw new IOException("Can't open a zip directory for "+this.d2b_1);if(this.ta_1=1,(t=sliceStart(this.e2b_1.h22_1,VOID,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.f2b_1=t,this.g2b_1=this.f2b_1,this.h2b_1=this.g2b_1,this.ta_1=2,(t=this.h2b_1.z21(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(this.i2b_1=t,this.i2b_1.t8(new Long(16,0))<0)throw IllegalStateException_init_$Create$("Chunk to small to be a ZIP chunk");this.ta_1=3;continue t;case 3:if(this.ta_1=4,(t=readS32BE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:if(this.j2b_1=t,this.k2b_1=1347093252===this.j2b_1,this.k2b_1){this.ta_1=5;continue t}throw IllegalStateException_init_$Create$("Not a zip file (readS32BE() != 0x504B_0304)");case 5:if(this.ta_1=6,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 6:if(this.l2b_1=t,this.ta_1=7,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:if(this.m2b_1=t,this.ta_1=8,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 8:if(this.n2b_1=t,this.ta_1=9,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 9:if(this.o2b_1=t,this.ta_1=10,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 10:if(this.p2b_1=t,this.ta_1=11,(t=readS32LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 11:if(this.q2b_1=t,this.ta_1=12,(t=readS32LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 12:if(this.r2b_1=t,this.ta_1=13,(t=readS32LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 13:if(this.s2b_1=t,this.ta_1=14,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 14:if(this.t2b_1=t,this.ta_1=15,(t=readU16LE_0(this.h2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 15:if(this.u2b_1=t,this.ta_1=16,(t=readString(this.h2b_1,this.t2b_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 16:if(this.v2b_1=t,this.ta_1=17,(t=readBytesExact(this.h2b_1,this.u2b_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 17:if(this.w2b_1=t,this.ta_1=18,(t=readSlice(this.h2b_1,this.e2b_1.i22_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 18:if(this.x2b_1=t,this.y2b_1=this.e2b_1.c22_1,0===this.y2b_1){this.z2b_1=this.x2b_1,this.ta_1=20;continue t}var i;if(8!==this.e2b_1.c22_1){var r="Not implemented zip method "+this.e2b_1.c22_1;throw new NotImplementedError("An operation is not implemented: "+r)}if(i=this.b2b_1.j2a_1?get_Deflate():Companion_getInstance_5(),this.a2c_1=i,this.ta_1=19,(t=uncompressed(this.x2b_1,this.a2c_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 19:var a=withLength(t,this.e2b_1.j22_1);this.z2b_1=toAsyncStream_0(a),this.ta_1=20;continue t;case 20:return this.z2b_1;case 21:throw this.wa_1}}catch(t){var s=t;if(21===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf(ZipVfs$Impl).x1h=function(t){var e=new $closeCOROUTINE$127(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(ZipVfs$Impl).r23=function(t,e,n){var i=new $openCOROUTINE$128(this,t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(ZipVfs$Impl).d24=function(t,e){return flow(ZipVfs$Impl$listFlow$slambda_0(this.i2a_1,t,this,null))},protoOf(ZipVfs$Impl).toString=function(){return"ZipVfs("+this.i2a_1+")"},protoOf($openAsZipCOROUTINE$124).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=11,this.ta_1=1,(t=openAsZip_0(this.i28_1,this.j28_1,this.k28_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.m28_1=t,this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=9,this.ta_1=4,(t=this.l28_1(this.m28_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:this.n28_1=t,this.ua_1=11,this.ta_1=5;continue t;case 5:if(this.o28_1=this.n28_1,this.ta_1=6,(t=this.m28_1.g24_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 6:return this.o28_1;case 7:if(this.ta_1=8,(t=this.m28_1.g24_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 8:return Unit_instance;case 9:if(this.ua_1=11,this.p28_1=this.wa_1,this.ta_1=10,(t=this.m28_1.g24_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 10:throw this.p28_1;case 11:throw this.wa_1}}catch(t){var e=t;if(11===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($openAsZipCOROUTINE$125).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.y28_1.p25(VfsOpenMode_READ_getInstance(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.b29_1=t,this.ta_1=2,(t=ZipVfs(this.b29_1,this.y28_1,this.z28_1,!0,this.a29_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($ZipVfsCOROUTINE$126).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=2,this.ta_1=1;var e,n=Companion_getInstance_9(),i=this.p29_1;if(null==i){var r=this.l29_1;e=null==r?null:get_fullName(r)}else e=i;if((t=n.y1y(this.k29_1,this.m29_1,e,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var a=t;return new ZipVfs$Impl(this.n29_1,this.k29_1,a,this.o29_1).e24();case 2:throw this.wa_1}}catch(t){var s=t;if(2===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf(UTF16Charset).k2c=function(t){return imul(t,2)},protoOf(UTF16Charset).l2c=function(t){return imul(t,2)},protoOf(UTF16Charset).i2c=function(t,e,n,i){var r=0,a=step(until(n,i),2),s=a.u8_1,o=a.v8_1,l=a.w8_1;if(l>0&&s<=o||l<0&&o<=s)do{var u=s;s=s+l|0;var c=numberToChar(readS16(e,u,this.n2c_1));t.h5(c),r=r+2|0}while(u!==o);return r},protoOf(UTF16Charset).h2c=function(t,e,n,i){var r=new Int8Array(2),a=n;if(a<i)do{var s=a;a=a+1|0;var o=charSequenceGet(e,s),l=Char__toInt_impl_vasixd(o);write16(r,0,l,this.n2c_1),t.g1d(r)}while(a<i)},protoOf(Companion_6).o2c=function(t,e){if(55296<=e&&e<=57343||e>65535){var n=e-65536|0,i=extract(n,10,10),r=extract(n,0,10);t.h5(numberToChar(55296|i)),t.h5(numberToChar(56320|r))}else t.h5(numberToChar(e))},protoOf(Charset).k2c=function(t){return imul(t,2)},protoOf(Charset).l2c=function(t){return imul(t,2)},protoOf(SingleByteCharset).h2c=function(t,e,n,i){var r=n;if(r<i)do{var a=r;r=r+1|0;var s=charSequenceGet(e,a),o=Char__toInt_impl_vasixd(s),l=this.g2c_1.ye(o)?toByte(this.g2c_1.d1(o)):63;t.h1d(l)}while(r<i)},protoOf(SingleByteCharset).i2c=function(t,e,n,i){var r=n;if(r<i)do{var a=r;r=r+1|0,t.h5(charSequenceGet(this.f2c_1,255&e[a]))}while(r<i);return i-n|0},protoOf(BaseSingleByteCharset).k2c=function(t){return t},protoOf(BaseSingleByteCharset).l2c=function(t){return t},protoOf(UTC8CharsetBase).k2c=function(t){return imul(t,2)},protoOf(UTC8CharsetBase).l2c=function(t){return imul(t,2)},protoOf(UTC8CharsetBase).h2c=function(t,e,n,i){var r=0,a=n;if(a<i)t:do{var s=a;a=a+1|0;var o,l=Char__toInt_impl_vasixd(charSequenceGet(e,s));if(55296<=l&&l<=57343){var u;switch(extract(l,10,6)){case 54:r=1023&l;continue t;case 55:u=65536+(r<<10|1023&l)|0;break;default:throw IllegalStateException_init_$Create$(toString("Unknown "+l))}o=u}else o=l;var c=o;if(0==(-128&c)){var h=toByte(c);t.h1d(h)}else{if(0==(-2048&c)){var f=toByte(c>>6&31|192);t.h1d(f)}else if(0==(-65536&c)){var _=toByte(c>>12&15|224);t.h1d(_);var d=toByte(createByte(this,c,6));t.h1d(d)}else if(0==(-2097152&c)){var p=toByte(c>>18&7|240);t.h1d(p);var m=toByte(createByte(this,c,12));t.h1d(m);var g=toByte(createByte(this,c,6));t.h1d(g)}var v=toByte(63&c|128);t.h1d(v)}}while(a<i)},protoOf(UTC8CharsetBase).i2c=function(t,e,n,i){if(n<0||n>e.length||i<0||i>e.length)throw IllegalStateException_init_$Create$(toString("Out of bounds"));var r=n;t:for(;r<i;){var a=255&e[r],s=a>>4;if(0<=s&&s<=7)Companion_instance_7.o2c(t,a),r=r+1|0;else if(12<=s&&s<=13){if((r+1|0)>=i)break t;Companion_instance_7.o2c(t,(31&a)<<6|63&e[r+1|0]),r=r+2|0}else if(14===s){if((r+2|0)>=i)break t;Companion_instance_7.o2c(t,(15&a)<<12|(63&e[r+1|0])<<6|63&e[r+2|0]),r=r+3|0}else if(15===s){if((r+3|0)>=i)break t;Companion_instance_7.o2c(t,insert(insert(insert(insert(0,extract(e[r+0|0],0,3),18,3),extract(e[r+1|0],0,6),12,6),extract(e[r+2|0],0,6),6,6),extract(e[r+3|0],0,6),0,6)),r=r+4|0}else t.h5(_Char___init__impl__6a9atx(65533)),r=r+1|0}return r-n|0},protoOf(Companion_7).x1e=function(t){var e=null==customEnvironments?null:customEnvironments.x1e(t);return null==e?EnvironmentInternal_instance.x1e(t):e},protoOf(threadLocal$local$1).w2c=function(){return this.v2c_1.b2c_1()},protoOf(QueryString).x2c=function(t){for(var e=LinkedHashMap_init_$Create$(),n=split_0(t,charArrayOf([_Char___init__impl__6a9atx(38)])),i=0;i<n.n();){var r=i;i=r+1|0;var a,s=n.d1(r),o=split_0(s,charArrayOf([_Char___init__impl__6a9atx(61)]),VOID,2),l=Companion_getInstance_12().a2d(o.d1(0),get_UTF8(),!0),u=Companion_getInstance_12(),c=1<=get_lastIndex_0(o)?o.d1(1):l,h=u.a2d(c,get_UTF8(),!0),f=e.k2(l);if(null==f){var _=ArrayList_init_$Create$();e.a2(l,_),a=_}else a=f;a.p(h)}return e},protoOf(Companion_8).a2d=function(t,e,n){for(var i=ByteArrayBuilder_init_$Create$(),r=t.length,a=0;a<r;){var s=charSequenceGet(t,a);if(s===_Char___init__impl__6a9atx(37)){var o=toByte(toInt(substr(t,a+1|0,2),16));i.h1d(o),a=a+2|0}else if(s===_Char___init__impl__6a9atx(43))n?i.h1d(32):i.h1d(43);else{var l=Char__toByte_impl_7s7yt0(s);i.h1d(l)}a=a+1|0}return toString_0(i.dk(),e)},protoOf(AsyncStream$read$slambda).l2e=function(t){var e=this.n1k(t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(AsyncStream$read$slambda).o1k=function(t){return this.l2e(t)},protoOf(AsyncStream$read$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=readInternal(this.h2e_1,this.i2e_1,this.j2e_1,this.k2e_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return t;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(AsyncStream$read$slambda).n1k=function(t){return new AsyncStream$read$slambda(this.h2e_1,this.i2e_1,this.j2e_1,this.k2e_1,t)},protoOf(AsyncStream$write$slambda).p1n=function(t){var e=this.n1k(t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(AsyncStream$write$slambda).o1k=function(t){return this.p1n(t)},protoOf(AsyncStream$write$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=writeInternal(this.u2e_1,this.v2e_1,this.w2e_1,this.x2e_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(AsyncStream$write$slambda).n1k=function(t){return new AsyncStream$write$slambda(this.u2e_1,this.v2e_1,this.w2e_1,this.x2e_1,t)},protoOf($readCOROUTINE$161).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.g2f_1.u21_1){if(this.ta_1=2,(t=this.g2f_1.w21_1.q1k(AsyncStream$read$slambda_0(this.g2f_1,this.h2f_1,this.i2f_1,this.j2f_1,null),this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.ta_1=1,(t=readInternal(this.g2f_1,this.h2f_1,this.i2f_1,this.j2f_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:case 2:this.k2f_1=t,this.ta_1=3;continue t;case 3:return this.k2f_1;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($writeCOROUTINE$162).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.t2f_1.u21_1){if(this.ta_1=2,(t=this.t2f_1.x21_1.q1k(AsyncStream$write$slambda_0(this.t2f_1,this.u2f_1,this.v2f_1,this.w2f_1,null),this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.ta_1=1,(t=writeInternal(this.t2f_1,this.u2f_1,this.v2f_1,this.w2f_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:case 2:this.ta_1=3;continue t;case 3:return Unit_instance;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readInternalCOROUTINE$163).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.j2d_1.s21_1.v26(this.j2d_1.t21_1,this.k2d_1,this.l2d_1,this.m2d_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=t;if(e>=0){var n=this.j2d_1;n.t21_1=n.t21_1.ba(toLong(e))}return e;case 2:throw this.wa_1}}catch(t){var i=t;if(2===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf($writeInternalCOROUTINE$164).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.v2d_1.s21_1.y26(this.v2d_1.t21_1,this.w2d_1,this.x2d_1,this.y2d_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=this.v2d_1,n=e,i=e.t21_1,r=this.y2d_1;return n.t21_1=i.ba(toLong(r)),Unit_instance;case 2:throw this.wa_1}}catch(t){var a=t;if(2===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf($getAvailableCOROUTINE$165).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.f2g_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.g2g_1=t,this.ta_1=2,(t=this.f2g_1.j1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:var e=t;return this.g2g_1.ca(e);case 3:throw this.wa_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(AsyncStream).toString=function(){return"AsyncStream("+this.s21_1+", position="+this.t21_1.toString()+")"},protoOf(AsyncStream).w1h=function(t,e,n,i){var r=new $readCOROUTINE$161(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(AsyncStream).u1h=function(t,e,n,i){var r=new $writeCOROUTINE$162(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(AsyncStream).y21=function(t,e){return this.t21_1=t,Unit_instance},protoOf(AsyncStream).j1t=function(t){return this.t21_1},protoOf(AsyncStream).i1t=function(t){return this.s21_1.i1t(t)},protoOf(AsyncStream).h2g=function(t){return this.k1t(t)},protoOf(AsyncStream).z21=function(t){var e=new $getAvailableCOROUTINE$165(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(AsyncStream).x1h=function(t){return this.s21_1.x1h(t)},protoOf(AsyncStream).z27=function(){return new AsyncStream(this.s21_1,this.t21_1)},protoOf(AsyncStreamBase).v26=function(t,e,n,i,r){throw UnsupportedOperationException_init_$Create$_0()},protoOf(AsyncStreamBase).y26=function(t,e,n,i,r){throw UnsupportedOperationException_init_$Create$_0()},protoOf(AsyncStreamBase).i1t=function(t){throw UnsupportedOperationException_init_$Create$_0()},protoOf(AsyncStreamBase).x1h=function(t){return Unit_instance},protoOf($writeCOROUTINE$169).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.ta_1=1;continue t;case 1:this.p2h_1=get_smallBytesPool(),this.q2h_1=this.p2h_1.g1c(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=8,this.s2h_1=this.q2h_1,this.s2h_1[0]=toByte(this.n2h_1),this.ta_1=4,(t=this.m2h_1.u1h(this.s2h_1,0,1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:this.r2h_1=t,this.ua_1=9,this.ta_1=5;continue t;case 5:this.p2h_1.h1c(this.q2h_1),this.o2h_1=Unit_instance,this.ta_1=7;continue t;case 6:this.p2h_1.h1c(this.q2h_1),this.ta_1=7;continue t;case 7:return Unit_instance;case 8:this.ua_1=9;var e=this.wa_1;throw this.p2h_1.h1c(this.q2h_1),e;case 9:throw this.wa_1}}catch(t){var n=t;if(9===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($hasLengthCOROUTINE$172).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ua_1=2,this.ta_1=1,(t=this.n2i_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=t;this.o2i_1=e.t8(new Long(0,0))>=0,this.ua_1=3,this.ta_1=4;continue t;case 2:if(this.ua_1=3,this.wa_1 instanceof UnsupportedOperationException){this.wa_1,this.o2i_1=!1,this.ta_1=4;continue t}throw this.wa_1;case 3:throw this.wa_1;case 4:return this.ua_1=3,this.o2i_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(MemoryAsyncStreamBase).i2k=function(){return this.h2k_1.n()},protoOf(MemoryAsyncStreamBase).i1t=function(t){return toLong(this.i2k())},protoOf(MemoryAsyncStreamBase).j2k=function(t){t.t8(new Long(0,0))<0&&invalidOp("Invalid position "+t.toString())},protoOf(MemoryAsyncStreamBase).v26=function(t,e,n,i,r){this.j2k(t);var a=until(0,this.i2k());if(!contains_0(isInterface(a,ClosedRange)?a:THROW_CCE(),t))return 0;var s=toLong(this.i2k()),o=t.ba(toLong(i)),l=(s.t8(o)<=0?s:o).ca(t).y8(),u=Math.max(l,0);return arraycopy(this.h2k_1.b1d_1,t.y8(),e,n,u),u},protoOf(MemoryAsyncStreamBase).y26=function(t,e,n,i,r){this.j2k(t);var a=this.h2k_1,s=this.h2k_1.n(),o=t.ba(toLong(i)).y8(),l=Math.max(s,o);return a.e1d(l),arraycopy(e,n,this.h2k_1.b1d_1,t.y8(),i),Unit_instance},protoOf(MemoryAsyncStreamBase).x1h=function(t){return Unit_instance},protoOf(MemoryAsyncStreamBase).toString=function(){return"MemoryAsyncStreamBase("+this.h2k_1.n()+")"},protoOf($closeCOROUTINE$182).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.x2k_1.n2k_1){if(this.ta_1=1,(t=this.x2k_1.k2k_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(SliceAsyncStreamBase).v26=function(t,e,n,i,r){var a=clampPositionLen(this,t,i),s=a.dd(),o=a.ed();return this.k2k_1.v26(s,e,n,o,r)},protoOf(SliceAsyncStreamBase).y26=function(t,e,n,i,r){var a=clampPositionLen(this,t,i),s=a.dd(),o=a.ed();return this.k2k_1.y26(s,e,n,o,r)},protoOf(SliceAsyncStreamBase).i1t=function(t){return this.o2k_1},protoOf(SliceAsyncStreamBase).x1h=function(t){var e=new $closeCOROUTINE$182(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(SliceAsyncStreamBase).toString=function(){return"SliceAsyncStreamBase("+this.k2k_1+", "+this.l2k_1.toString()+", "+this.m2k_1.toString()+")"},protoOf(SyncAsyncStreamBase).v26=function(t,e,n,i,r){return this.m2o_1.x26(t,e,n,i)},protoOf(SyncAsyncStreamBase).y26=function(t,e,n,i,r){return this.m2o_1.z26(t,e,n,i),Unit_instance},protoOf(SyncAsyncStreamBase).i1t=function(t){return this.m2o_1.a()},protoOf(asyncStreamWriter$1$ensureJob$2$1).u1h=function(t,e,n,i){return this.r2r_1.s2r_1.u1h(t,e,n,i)},protoOf(asyncStreamWriter$1$ensureJob$2$1).v1h=function(t,e){return this.r2r_1.s2r_1.v1h(t,e)},protoOf(asyncStreamWriter$1$ensureJob$2$1).x1h=function(t){return this.r2r_1.s2r_1.x1h(t)},protoOf(asyncStreamWriter$o$ensureJob$slambda).p1n=function(t){var e=this.n1k(t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(asyncStreamWriter$o$ensureJob$slambda).o1k=function(t){return this.p1n(t)},protoOf(asyncStreamWriter$o$ensureJob$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=8,this.ta_1=1;continue t;case 1:if(this.ua_1=4,this.ua_1=3,this.ta_1=2,(t=this.f2s_1(new asyncStreamWriter$1$ensureJob$2$1(this.g2s_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.h2s_1=t,this.ua_1=8,this.ta_1=6;continue t;case 3:if(this.ua_1=4,this.wa_1 instanceof Error){this.i2s_1=this.wa_1,this.g2s_1.t2r_1=this.i2s_1,printStackTrace(this.i2s_1),this.h2s_1=Unit_instance,this.ua_1=8,this.ta_1=6;continue t}throw this.wa_1;case 4:if(this.ua_1=8,this.j2s_1=this.wa_1,this.ta_1=5,(t=this.g2s_1.s2r_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:throw this.j2s_1;case 6:if(this.ta_1=7,(t=this.g2s_1.s2r_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:return Unit_instance;case 8:throw this.wa_1}}catch(t){var e=t;if(8===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(asyncStreamWriter$o$ensureJob$slambda).n1k=function(t){return new asyncStreamWriter$o$ensureJob$slambda(this.f2s_1,this.g2s_1,t)},protoOf($readCOROUTINE$203).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=ensureJob(this.s2s_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(checkException(this.s2s_1),this.ta_1=2,(t=this.s2s_1.s2r_1.w1h(this.t2s_1,this.u2s_1,this.v2s_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(asyncStreamWriter$1).w1h=function(t,e,n,i){var r=new $readCOROUTINE$203(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(asyncStreamWriter$1).x1h=function(t){var e=this.u2r_1;return null==e||e.en(),this.u2r_1=null,Unit_instance},protoOf($getPositionCOROUTINE$205).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=this.e2t_1.h2t_1,n=isInterface(e,SyncPositionStream)?e:null;if(this.f2t_1=null==n?null:n.j2o(),null==this.f2t_1){if(this.ta_1=1,(t=getPosition.call(this.e2t_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.g2t_1=this.f2t_1,this.ta_1=2;continue t;case 1:this.g2t_1=t,this.ta_1=2;continue t;case 2:return this.g2t_1;case 3:throw this.wa_1}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf($getLengthCOROUTINE$206).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=this.q2t_1.h2t_1,n=isInterface(e,SyncLengthStream)?e:null;if(this.r2t_1=null==n?null:n.a(),null==this.r2t_1){if(this.ta_1=1,(t=getLength.call(this.q2t_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.s2t_1=this.r2t_1,this.ta_1=2;continue t;case 1:this.s2t_1=t,this.ta_1=2;continue t;case 2:return this.s2t_1;case 3:throw this.wa_1}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(toAsyncInputStream$1).w1h=function(t,e,n,i){return this.h2t_1.wk(t,e,n)},protoOf(toAsyncInputStream$1).x1h=function(t){var e=this.h2t_1,n=isInterface(e,Closeable)?e:null;return null==n||n.i15(),Unit_instance},protoOf(toAsyncInputStream$1).j1t=function(t){var e=new $getPositionCOROUTINE$205(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(toAsyncInputStream$1).i1t=function(t){var e=new $getLengthCOROUTINE$206(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(toAsyncOutputStream$1).u1h=function(t,e,n,i){return this.t2t_1.q1a(t,e,n),Unit_instance},protoOf(toAsyncOutputStream$1).x1h=function(t){var e=this.t2t_1,n=isInterface(e,Closeable)?e:null;return null==n||n.i15(),Unit_instance},protoOf($readCOROUTINE$207).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,null==this.i2u_1.v2t_1)throw UnsupportedOperationException_init_$Create$_0();if(checkPosition(this.i2u_1,this.j2u_1),this.ta_1=1,(t=this.i2u_1.v2t_1.w1h(this.k2u_1,this.l2u_1,this.m2u_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=t;if(e>0){var n=this.i2u_1;n.u2t_1=n.u2t_1.ba(toLong(e))}return e;case 2:throw this.wa_1}}catch(t){var i=t;if(2===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf($writeCOROUTINE$208).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,null==this.v2u_1.w2t_1)throw UnsupportedOperationException_init_$Create$_0();if(checkPosition(this.v2u_1,this.w2u_1),this.ta_1=1,(t=this.v2u_1.w2t_1.u1h(this.x2u_1,this.y2u_1,this.z2u_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=this.v2u_1,n=e,i=e.u2t_1,r=this.z2u_1;return n.u2t_1=i.ba(toLong(r)),Unit_instance;case 2:throw this.wa_1}}catch(t){var a=t;if(2===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf($getLengthCOROUTINE$210).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.j2v_1=this.i2v_1.y2t_1,null==this.j2v_1){this.k2v_1=null,this.ta_1=2;continue t}if(this.ta_1=1,(t=this.j2v_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.k2v_1=t,this.ta_1=2;continue t;case 2:var e=this.k2v_1;if(null==e)throw UnsupportedOperationException_init_$Create$_0();return e;case 3:throw this.wa_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(toAsyncStream$1).v26=function(t,e,n,i,r){var a=new $readCOROUTINE$207(this,t,e,n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()},protoOf(toAsyncStream$1).y26=function(t,e,n,i,r){var a=new $writeCOROUTINE$208(this,t,e,n,i,r);return a.va_1=Unit_instance,a.wa_1=null,a.gb()},protoOf(toAsyncStream$1).i1t=function(t){var e=new $getLengthCOROUTINE$210(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(toAsyncStream$1).x1h=function(t){return this.z2t_1.x1h(t)},protoOf($readCOROUTINE$211).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.t2v_1.y2v_1.w1h(this.u2v_1,this.v2v_1,this.w2v_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=t;if(e>=0){var n=this.t2v_1.z2v_1._v;this.t2v_1.z2v_1._v=n.ba(toLong(e))}return e;case 2:throw this.wa_1}}catch(t){var i=t;if(2===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(withLength$1).x1h=function(t){return this.x2v_1.x1h(t)},protoOf(withLength$1).w1h=function(t,e,n,i){var r=new $readCOROUTINE$211(this,t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()},protoOf(withLength$1).j1t=function(t){return this.z2v_1._v},protoOf(withLength$1).i1t=function(t){return this.a2w_1},protoOf($readAllCOROUTINE$168).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=18,this.ta_1=1;continue t;case 1:var e;this.ua_1=16;var n=this.q2g_1;if(isInterface(n,AsyncGetPositionStream)){var i=this.q2g_1;e=isInterface(i,AsyncGetLengthStream)}else e=!1;if(e){if(this.ta_1=10,(t=this.q2g_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.q2g_1 instanceof AsyncStream){if(this.ta_1=2,(t=this.q2g_1.h2g(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.t2g_1=!1,this.ta_1=3;continue t;case 2:this.t2g_1=t,this.ta_1=3;continue t;case 3:if(this.t2g_1){if(this.ta_1=8,(t=this.q2g_1.z21(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.u2g_1=ByteArrayBuilder_init_$Create$(),this.v2g_1=new Int8Array(4096),this.ta_1=4;continue t;case 4:if(this.ta_1=5,(t=this.q2g_1.w1h(this.v2g_1,0,this.v2g_1.length,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(this.w2g_1=t,this.w2g_1<=0){this.ta_1=7;continue t}this.ta_1=6;continue t;case 6:this.u2g_1.f1d(this.v2g_1,0,this.w2g_1),this.ta_1=4;continue t;case 7:this.s2g_1=this.u2g_1.dk(),this.ta_1=13;continue t;case 8:if(this.x2g_1=t,this.y2g_1=this.x2g_1.y8(),this.ta_1=9,(t=readBytesExact(this.q2g_1,this.y2g_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 9:case 12:this.s2g_1=t,this.ta_1=13;continue t;case 10:if(this.z2g_1=t,this.ta_1=11,(t=this.q2g_1.j1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 11:if(this.a2h_1=t,this.b2h_1=this.z2g_1.ca(this.a2h_1),this.ta_1=12,(t=readBytesExact(this.q2g_1,this.b2h_1.y8(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 13:this.r2g_1=this.s2g_1,this.ua_1=18,this.ta_1=14;continue t;case 14:if(this.c2h_1=this.r2g_1,this.ta_1=15,(t=this.q2g_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 15:return this.c2h_1;case 16:if(this.ua_1=18,this.d2h_1=this.wa_1,this.ta_1=17,(t=this.q2g_1.x1h(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 17:throw this.d2h_1;case 18:throw this.wa_1}}catch(t){var r=t;if(18===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf($readBytesExactCOROUTINE$171).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.d2i_1=new Int8Array(this.c2i_1),this.e2i_1=this.d2i_1,this.ta_1=1,(t=readExact(this.b2i_1,this.e2i_1,0,this.c2i_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return this.d2i_1;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readS32BECOROUTINE$175).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.y2i_1=this.x2i_1,this.z2i_1=4,this.ta_1=1;continue t;case 1:this.b2j_1=get_smallBytesPool(),this.c2j_1=this.b2j_1.g1c(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=8,this.e2j_1=this.c2j_1,this.ta_1=4,(t=this.y2i_1.w1h(this.e2j_1,0,this.z2i_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:var e=t;if(e!==this.z2i_1){var n="Couldn't read exact size="+this.z2i_1+" but read="+e;throw IllegalStateException_init_$Create$(toString(n))}var i=this.e2j_1;this.d2j_1=readS32BE(i,0),this.ua_1=9,this.ta_1=5;continue t;case 5:var r=this.d2j_1;this.b2j_1.h1c(this.c2j_1),this.a2j_1=r,this.ta_1=7;continue t;case 6:this.b2j_1.h1c(this.c2j_1),this.ta_1=7;continue t;case 7:return this.a2j_1;case 8:this.ua_1=9;var a=this.wa_1;throw this.b2j_1.h1c(this.c2j_1),a;case 9:throw this.wa_1}}catch(t){var s=t;if(9===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf($readExactCOROUTINE$177).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.r2j_1=this.q2j_1,this.s2j_1=this.p2j_1,this.t2j_1=this.n2j_1,this.ta_1=1;continue t;case 1:if(!(this.r2j_1>0)){this.ta_1=4;continue t}if(this.ta_1=2,(t=this.t2j_1.w1h(this.o2j_1,this.s2j_1,this.r2j_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:var e=t;if(e<0){this.ta_1=4;continue t}this.ta_1=3;continue t;case 3:if(0===e)throw new EOFException("Not enough data. Expected="+this.q2j_1+", Read="+(this.q2j_1-this.r2j_1|0)+", Remaining="+this.r2j_1);this.s2j_1=this.s2j_1+e|0,this.r2j_1=this.r2j_1-e|0,this.ta_1=1;continue t;case 4:return Unit_instance;case 5:throw this.wa_1}}catch(t){var n=t;if(5===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($sliceWithBoundsCOROUTINE$178).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.ta_1=1,(t=this.c2k_1.k1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(t){if(this.ta_1=2,(t=this.c2k_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.g2k_1=this.e2k_1,this.ta_1=3;continue t;case 2:this.g2k_1=t,this.ta_1=3;continue t;case 3:var e=this.g2k_1,n=e.t8(new Long(0,0))>=0?e:this.e2k_1,i=clamp_0(this.d2k_1,new Long(0,0),n),r=clamp_0(this.e2k_1,new Long(0,0),n);return toAsyncStream(this.c2k_1.s21_1 instanceof SliceAsyncStreamBase?new SliceAsyncStreamBase(this.c2k_1.s21_1.k2k_1,this.c2k_1.s21_1.l2k_1.ba(i),this.c2k_1.s21_1.l2k_1.ba(r),this.f2k_1):new SliceAsyncStreamBase(this.c2k_1.s21_1,i,r,this.f2k_1));case 4:throw this.wa_1}}catch(t){var a=t;if(4===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf($readBytesUpToCOROUTINE$183).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=10,this.i2l_1=4096,this.h2l_1<=this.i2l_1){if(this.ta_1=9,(t=readBytesUpToCopy(this.g2l_1,new Int8Array(this.h2l_1),this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=1;continue t;case 1:var e=this.g2l_1;if(isInterface(e,AsyncPositionLengthStream)){if(this.j2l_1=this.h2l_1,this.ta_1=7,(t=getAvailable_0(this.g2l_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 2:this.k2l_1=this.h2l_1,this.l2l_1=new Int8Array(this.i2l_1),this.m2l_1=ByteArrayBuilder_init_$Create$(),this.ta_1=3;continue t;case 3:if(!(this.k2l_1>0)){this.ta_1=6;continue t}this.ta_1=4;var n=this.l2l_1.length,i=this.k2l_1;if((t=this.g2l_1.w1h(this.l2l_1,0,Math.min(n,i),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:if(this.n2l_1=t,this.n2l_1<=0){this.ta_1=6;continue t}this.ta_1=5;continue t;case 5:this.m2l_1.f1d(this.l2l_1,0,this.n2l_1),this.k2l_1=this.k2l_1-this.n2l_1|0,this.ta_1=3;continue t;case 6:return this.m2l_1.dk();case 7:if(this.o2l_1=t,this.p2l_1=toIntClamp(this.o2l_1),this.q2l_1=Math.min(this.j2l_1,this.p2l_1),this.r2l_1=new Int8Array(this.q2l_1),this.ta_1=8,(t=readBytesUpToCopy(this.g2l_1,this.r2l_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 8:case 9:return t;case 10:throw this.wa_1}}catch(t){var r=t;if(10===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf($getAvailableCOROUTINE$185).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.a2m_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.b2m_1=t,this.ta_1=2,(t=this.a2m_1.j1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:var e=t;return this.b2m_1.ca(e);case 3:throw this.wa_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($write16LECOROUTINE$186).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.ta_1=1;continue t;case 1:this.n2m_1=get_smallBytesPool(),this.o2m_1=this.n2m_1.g1c(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=8,this.q2m_1=this.o2m_1,write16LE(this.q2m_1,0,this.l2m_1),this.ta_1=4,(t=this.k2m_1.u1h(this.q2m_1,0,2,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:this.p2m_1=t,this.ua_1=9,this.ta_1=5;continue t;case 5:this.n2m_1.h1c(this.o2m_1),this.m2m_1=Unit_instance,this.ta_1=7;continue t;case 6:this.n2m_1.h1c(this.o2m_1),this.ta_1=7;continue t;case 7:return Unit_instance;case 8:this.ua_1=9;var e=this.wa_1;throw this.n2m_1.h1c(this.o2m_1),e;case 9:throw this.wa_1}}catch(t){var n=t;if(9===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($hasAvailableCOROUTINE$187).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=getAvailable(this.z2m_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return t.t8(new Long(0,0))>0;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readBytesUpToCopyCOROUTINE$188).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=readBytesUpTo_0(this.i2n_1,this.j2n_1,0,this.j2n_1.length,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=t;return this.j2n_1.length===e?this.j2n_1:copyOf(this.j2n_1,e);case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($getAvailableCOROUTINE$189).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.s2n_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.t2n_1=t,this.ta_1=2,(t=this.s2n_1.j1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:var e=t;return this.t2n_1.ca(e);case 3:throw this.wa_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($readBytesUpToCOROUTINE$190).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.g2o_1=0,this.h2o_1=this.f2o_1,this.i2o_1=this.e2o_1,this.ta_1=1;continue t;case 1:if(this.ta_1=2,(t=this.c2o_1.w1h(this.d2o_1,this.i2o_1,this.h2o_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:var e=t;if(e<=0){this.ta_1=5;continue t}this.ta_1=3;continue t;case 3:this.i2o_1=this.i2o_1+e|0,this.h2o_1=this.h2o_1-e|0,this.g2o_1=this.g2o_1+e|0,this.ta_1=1;continue t;case 4:throw this.wa_1;case 5:return this.g2o_1}}catch(t){var n=t;if(4===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf($sliceStartCOROUTINE$192).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.v2o_1.i1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.y2o_1=t,this.ta_1=2,(t=sliceWithBounds(this.v2o_1,this.w2o_1,this.y2o_1,this.x2o_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readStringCOROUTINE$194).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=readBytesExact(this.h2p_1,this.i2p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return toString_0(t,this.j2p_1);case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readSliceCOROUTINE$199).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.ta_1=1,(t=this.s2p_1.j1t(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.u2p_1=t,this.ta_1=2,(t=sliceWithSize(this.s2p_1,this.u2p_1,this.t2p_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(this.v2p_1=t,this.ta_1=3,(t=this.s2p_1.y21(this.u2p_1.ba(this.t2p_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:return this.v2p_1;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($readU16LECOROUTINE$200).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.f2q_1=this.e2q_1,this.g2q_1=2,this.ta_1=1;continue t;case 1:this.i2q_1=get_smallBytesPool(),this.j2q_1=this.i2q_1.g1c(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=8,this.l2q_1=this.j2q_1,this.ta_1=4,(t=this.f2q_1.w1h(this.l2q_1,0,this.g2q_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:var e=t;if(e!==this.g2q_1){var n="Couldn't read exact size="+this.g2q_1+" but read="+e;throw IllegalStateException_init_$Create$(toString(n))}var i=this.l2q_1;this.k2q_1=readU16LE(i,0),this.ua_1=9,this.ta_1=5;continue t;case 5:var r=this.k2q_1;this.i2q_1.h1c(this.j2q_1),this.h2q_1=r,this.ta_1=7;continue t;case 6:this.i2q_1.h1c(this.j2q_1),this.ta_1=7;continue t;case 7:return this.h2q_1;case 8:this.ua_1=9;var a=this.wa_1;throw this.i2q_1.h1c(this.j2q_1),a;case 9:throw this.wa_1}}catch(t){var s=t;if(9===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf($readS32LECOROUTINE$201).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.v2q_1=this.u2q_1,this.w2q_1=4,this.ta_1=1;continue t;case 1:this.y2q_1=get_smallBytesPool(),this.z2q_1=this.y2q_1.g1c(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=8,this.b2r_1=this.z2q_1,this.ta_1=4,(t=this.v2q_1.w1h(this.b2r_1,0,this.w2q_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:var e=t;if(e!==this.w2q_1){var n="Couldn't read exact size="+this.w2q_1+" but read="+e;throw IllegalStateException_init_$Create$(toString(n))}var i=this.b2r_1;this.a2r_1=readS32LE(i,0),this.ua_1=9,this.ta_1=5;continue t;case 5:var r=this.a2r_1;this.y2q_1.h1c(this.z2q_1),this.x2q_1=r,this.ta_1=7;continue t;case 6:this.y2q_1.h1c(this.z2q_1),this.ta_1=7;continue t;case 7:return this.x2q_1;case 8:this.ua_1=9;var a=this.wa_1;throw this.y2q_1.h1c(this.z2q_1),a;case 9:throw this.wa_1}}catch(t){var s=t;if(9===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf($write32BECOROUTINE$202).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.ta_1=1;continue t;case 1:this.n2r_1=get_smallBytesPool(),this.o2r_1=this.n2r_1.g1c(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:if(this.ua_1=8,this.q2r_1=this.o2r_1,write32BE(this.q2r_1,0,this.l2r_1),this.ta_1=4,(t=this.k2r_1.u1h(this.q2r_1,0,4,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:this.p2r_1=t,this.ua_1=9,this.ta_1=5;continue t;case 5:this.n2r_1.h1c(this.o2r_1),this.m2r_1=Unit_instance,this.ta_1=7;continue t;case 6:this.n2r_1.h1c(this.o2r_1),this.ta_1=7;continue t;case 7:return Unit_instance;case 8:this.ua_1=9;var e=this.wa_1;throw this.n2r_1.h1c(this.o2r_1),e;case 9:throw this.wa_1}}catch(t){var n=t;if(9===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(SyncStream).c2w=function(t){this.u27_1?this.v27_1=t:this.d2w(t)},protoOf(SyncStream).e2w=function(){return this.u27_1?this.v27_1:this.j2o()},protoOf(SyncStream).f2w=function(t){this.u27_1?this.w27_1=t:this.d2w(t)},protoOf(SyncStream).g2w=function(){return this.u27_1?this.w27_1:this.j2o()},protoOf(SyncStream).d2w=function(t){var e;return this.u27_1?(this.c2w(t),e=Unit_instance):(this.x27_1=t,e=Unit_instance),e},protoOf(SyncStream).j2o=function(){return this.u27_1?this.e2w():this.x27_1},protoOf(SyncStream).wk=function(t,e,n){var i=this.r27_1.x26(this.e2w(),t,e,n),r=this.e2w().ba(toLong(i));return this.c2w(r),i},protoOf(SyncStream).h2w=function(){return this.wk(this.t27_1,0,1)<=0?-1:255&this.t27_1[0]},protoOf(SyncStream).q1a=function(t,e,n){this.r27_1.z26(this.g2w(),t,e,n);var i=this.g2w().ba(toLong(n));this.f2w(i)},protoOf(SyncStream).r1a=function(t){this.t27_1[0]=toByte(t),this.q1a(this.t27_1,0,1)},protoOf(SyncStream).a=function(){return this.r27_1.a()},protoOf(SyncStream).i15=function(){return this.r27_1.i15()},protoOf(SyncStream).toString=function(){return"SyncStream("+this.r27_1+", "+this.j2o().toString()+")"},protoOf(SyncStreamBase).b2w=function(){return!1},protoOf(SyncStreamBase).x26=function(t,e,n,i){unsupported()},protoOf(SyncStreamBase).z26=function(t,e,n,i){unsupported()},protoOf(SyncStreamBase).a=function(){unsupported()},protoOf(SyncStreamBase).i15=function(){return Unit_instance},protoOf(MemorySyncStreamBase).i2k=function(){return this.l2o_1.n()},protoOf(MemorySyncStreamBase).a=function(){return toLong(this.l2o_1.n())},protoOf(MemorySyncStreamBase).j2k=function(t){t.t8(new Long(0,0))<0&&invalidOp("Invalid position "+t.toString())},protoOf(MemorySyncStreamBase).x26=function(t,e,n,i){this.j2k(t);var r=t.y8(),a=until(0,this.i2k());if(!contains_0(isInterface(a,ClosedRange)?a:THROW_CCE(),t))return 0;var s=this.i2k(),o=r+i|0,l=Math.min(s,o)-r|0,u=Math.max(l,0);return arraycopy(this.l2o_1.b1d_1,r,e,n,u),u},protoOf(MemorySyncStreamBase).z26=function(t,e,n,i){this.j2k(t);var r=this.l2o_1,a=this.l2o_1.n(),s=t.ba(toLong(i)).y8(),o=Math.max(a,s);r.e1d(o),arraycopy(e,n,this.l2o_1.b1d_1,t.y8(),i)},protoOf(MemorySyncStreamBase).i15=function(){return Unit_instance},protoOf(MemorySyncStreamBase).toString=function(){return"MemorySyncStreamBase("+this.l2o_1.n()+")"},protoOf(Adler32).r1s=function(t,e,n,i){var r=65535&(t>>>0|0),a=65535&(t>>>16|0),s=n,o=n+i|0;if(s<o)do{var l=s;s=s+1|0,a=(a+(r=(r+(255&e[l])|0)%65521|0)|0)%65521|0}while(s<o);return a<<16|r},protoOf(CRC32).r1s=function(t,e,n,i){var r=~t,a=this.k2w_1,s=n,o=n+i|0;if(s<o)do{var l=s;s=s+1|0,r=a[255&(r^255&e[l])]^(r>>>8|0)}while(s<o);return~r},protoOf(EnvironmentInternal).x1e=function(t){return get_jsRuntime().p2w(t)},protoOf(NativeThreadLocal).qs=function(){return this.d2c_1},protoOf(JS_UTF8$1).i2c=function(t,e,n,i){if(null!=this.r2w_1){var r=e;t.g5(this.r2w_1.decode(new Int8Array(r.buffer,n,i-n|0)))}else protoOf(UTC8CharsetBase).i2c.call(this,t,e,n,i);return i-n|0},protoOf(JS_UTF8$1).h2c=function(t,e,n,i){if(null!=this.s2w_1){var r=toString(charSequenceSubSequence(e,n,i)),a=this.s2w_1.encode(r),s=new Int8Array(a.buffer);t.g1d(s)}else protoOf(UTC8CharsetBase).h2c.call(this,t,e,n,i)},protoOf(JsRuntime).p2w=function(t){var e=_get__envsUC__n5sgyq(this),n=t.toUpperCase();return e.k2(n)},protoOf(JsRuntimeBrowser).c2x=function(){var t=this.a2x_1;return href$factory(),t.d2()},protoOf(JsRuntimeBrowser).u2w=function(){for(var t=QueryString_instance,e=document.location,n=null==e?null:e.search,i=t.x2c(trimStart(null==n?"":n,charArrayOf([_Char___init__impl__6a9atx(63)]))),r=ArrayList_init_$Create$_0(i.n()),a=i.z1().s();a.t();){var s=a.u(),o=s.c2(),l=firstOrNull(s.d2()),u=to(o,null==l?s.c2():l);r.p(u)}return toMap_0(r)},protoOf(JsRuntimeDeno).p2w=function(t){return Deno.env.get(t)},protoOf(JsRuntimeDeno).u2w=function(){return jsObjectToMap(Deno.env.toObject())},protoOf(JsRuntimeNode).p2w=function(t){return process.env[t]},protoOf(JsRuntimeNode).u2w=function(){return jsObjectToMap(process.env)},protoOf(AsyncByteArrayDeque).v1h=write,protoOf(runBlockingNoSuspensions$1$context$1).bb=get,protoOf(runBlockingNoSuspensions$1$context$1).ee=minusKey,protoOf(runBlockingNoSuspensions$1$context$1).cb=releaseInterceptedContinuation,protoOf(ZLib$uncompress$2).v1h=write,protoOf(AsyncStreamBase).k1t=hasLength,protoOf(AsyncStream).k1t=hasLength,protoOf(AsyncStream).v1h=write,protoOf(toAsyncInputStream$1).k1t=hasLength,protoOf(toAsyncOutputStream$1).v1h=write,protoOf(withLength$1).k1t=hasLength,protoOf(Adler32).i2w=update$default,protoOf(CRC32).i2w=update$default,Companion_instance_0=new Companion,Companion_instance_1=new Companion_0,Companion_instance_4=new Companion_3,Companion_instance_5=new Companion_4,resourcesVfsDebug=!1,Companion_instance_7=new Companion_6,customEnvironments=null,Companion_instance_8=new Companion_7,QueryString_instance=new QueryString,MINUS_ZERO_D=-0,Adler32_instance=new Adler32,File_separatorChar=_Char___init__impl__6a9atx(47),EnvironmentInternal_instance=new EnvironmentInternal,_.$_$=_.$_$||{},_.$_$.a=openAsZip,_.$_$.b=_PathInfo___init__impl__vpw96a,_.$_$.c=Companion_getInstance_6,_.$_$.d=CRC32_getInstance,_.$_$.e=CompressionContext,_.$_$.f=compress_0,_.$_$.g=KorAtomicRef_0,_.$_$.h=VfsFileFromData,_.$_$.i=VfsFile,_.$_$.j=get_baseName,_.$_$.k=get_extensionLC,_.$_$.l=invalidOp,_.$_$.m=toByteArray,_.$_$.n=MemorySyncStream,_.$_$.o=write32BE_1,_.$_$.p=write8_0,_.$_$.q=writeBytes_0,_},__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(675),__webpack_require__(988),__webpack_require__(866),__webpack_require__(646),__webpack_require__(350),__webpack_require__(51),__webpack_require__(738)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},756:function(t,e,n){var i,r,a;r=[e,n(350),n(675),n(866)],void 0===(a="function"==typeof(i=function(t,e,n,i){"use strict";var r,a,s,o,l,u,c,h,f,_=Math.imul,d=e.$_$.r,p=e.$_$.s,m=e.$_$.t,g=e.$_$.u,v=e.$_$.v,y=n.$_$.a8,w=n.$_$.z7,b=n.$_$.b8,x=n.$_$.ib,S=n.$_$.x6,E=e.$_$.k,M=e.$_$.m,T=e.$_$.n,C=e.$_$.o,$=e.$_$.q,A=e.$_$.j,R=e.$_$.l,O=e.$_$.p,I=n.$_$.h7,k=n.$_$.b7,U=n.$_$.d,P=n.$_$.t,D=n.$_$.a3,N=n.$_$.k7,L=n.$_$.j7,z=n.$_$.m7,F=(n.$_$.t2,e.$_$.t1),B=n.$_$.xa,H=e.$_$.j1,V=e.$_$.l1,q=n.$_$.d7,j=i.$_$.o,G=i.$_$.n,W=n.$_$.t4;function X(t){var e;switch(t){case 0:e=this.b2y();break;case 1:e=this.d2y();break;case 2:e=this.f2y();break;case 3:e=this.h2y();break;default:e=NaN}return e}function Y(t){var e;switch(t){case 0:e=this.c2y();break;case 1:e=this.e2y();break;case 2:e=this.g2y();break;case 3:e=this.i2y();break;default:e=NaN}return e}function K(t){return d(t)}function J(t){return p(t)}function Z(t){return m(t)}function Q(t){return g(t)}function tt(t){return Q(t)+J(t)|0}function et(t){return K(t)+Z(t)|0}function nt(){r=this,this.o2x_1=v(0,0,0,0)}function it(){return null==r&&new nt,r}function rt(t){return t.hashCode()}function at(t){it(),this.p2x_1=t}function st(t){return E(t)}function ot(t){return M(t)}function lt(t){return T(t)}function ut(t){return C(t)}function ct(t){return st(t)}function ht(t){return ot(t)}function ft(t){return st(t)+lt(t)|0}function _t(t){return ot(t)+ut(t)|0}function dt(t,e){return $(bt(t),xt(t),vt(e),yt(e))}function pt(){}function mt(t){return t.hashCode()}function gt(t){this.s2x_1=t}function vt(t){return A(t)}function yt(t){return R(t)}function wt(t,e){return O(t,e)}function bt(t){return A(t)}function xt(t){return R(t)}function St(t,e){return O(t,e)}function Et(t,e,n,i,r,a,s,o){this.t2x_1=t,this.u2x_1=e,this.v2x_1=n,this.w2x_1=i,this.x2x_1=r,this.y2x_1=a,this.z2x_1=s,this.a2y_1=o}function Mt(t,e,n,i,r){n=n===U?Nt().n2y_1:n,i=i===U?it().o2x_1:i,r=r===U?null:r,this.w2y_1=t,this.x2y_1=e,this.y2y_1=n,this.z2y_1=i,this.a2z_1=r,this.b2z_1=vt(this.w2y_1.x2z()),this.c2z_1=yt(this.w2y_1.x2z()),this.d2z_1=lt(this.x2y_1),this.e2z_1=ut(this.x2y_1),this.f2z_1=Pt(this.y2y_1)?ut(this.x2y_1):lt(this.x2y_1),this.g2z_1=Pt(this.y2y_1)?lt(this.x2y_1):ut(this.x2y_1),this.h2z_1=this.f2z_1+tt(this.z2y_1)|0,this.i2z_1=this.g2z_1+et(this.z2y_1)|0,this.j2z_1=ct(this.x2y_1)/this.b2z_1,this.k2z_1=ft(this.x2y_1)/this.b2z_1,this.l2z_1=ht(this.x2y_1)/this.c2z_1,this.m2z_1=_t(this.x2y_1)/this.c2z_1,this.n2z_1=new Et(this.j2z_1,this.l2z_1,this.k2z_1,this.l2z_1,this.k2z_1,this.m2z_1,this.j2z_1,this.m2z_1),this.o2z_1=function(t,e){var n=(i=e,Nt().l2y_1[7&(i>>>0|0)]);var i;return new Et(t.j2y(n[0]),t.k2y(n[0]),t.j2y(n[1]),t.k2y(n[1]),t.j2y(n[2]),t.k2y(n[2]),t.j2y(n[3]),t.k2y(n[3]))}(this.n2z_1,this.y2y_1),this.p2z_1=this.o2z_1.t2x_1,this.q2z_1=this.o2z_1.u2x_1,this.r2z_1=this.o2z_1.v2x_1,this.s2z_1=this.o2z_1.w2x_1,this.t2z_1=this.o2z_1.x2x_1,this.u2z_1=this.o2z_1.y2x_1,this.v2z_1=this.o2z_1.z2x_1,this.w2z_1=this.o2z_1.a2y_1}function Tt(){}function Ct(){}function $t(){c=this,this.b30_1=[zt(),Ft(),Bt(),Ht()]}function At(){return Rt(),null==c&&new $t,c}function Rt(){if(h)return D;h=!0,s=new Ot("R0",0),o=new Ot("R90",1),l=new Ot("R180",2),u=new Ot("R270",3),At()}function Ot(t,e){B.call(this,t,e),this.e30_1=_(this.n9_1,90)}function It(t){var e=3&(t>>>0|0);return At().d1(e)}function kt(t){return!(0==(1&(t>>>2|0)))}function Ut(t,e){return t=t===U?zt():t,e=e!==U&&e,V(H(0,t.n9_1,0),e,2)}function Pt(t){return!!It(t).equals(Ft())||It(t).equals(Ht())}function Dt(){f=this;for(var t=0,e=q(Array(8),null);t<8;){var n=t,i=new Int32Array([0,1,2,3]),r=n;kt(r)&&(j(i,0,1),j(i,3,2)),G(i,It(r).n9_1),e[n]=i,t=t+1|0}this.l2y_1=e;for(var a=0,s=q(Array(8),null);a<8;){var o=a,l=o,u=P();u.g5(kt(l)?"MIRROR_HORIZONTAL_ROTATE_":"ROTATE_"),u.f5(It(l).e30_1),s[o]=u.toString(),a=a+1|0}this.m2y_1=s;var c=zt();this.n2y_1=Ut(c,!1);var h=Ft();this.o2y_1=Ut(h,!1);var _=Bt();this.p2y_1=Ut(_,!1);var d=Ht();this.q2y_1=Ut(d,!1),this.r2y_1=Ut(U,!0);var p=Ft();this.s2y_1=Ut(p,!0);var m=Bt();this.t2y_1=Ut(m,!0);var g=Ht();this.u2y_1=Ut(g,!0),this.v2y_1=W([new Lt(this.n2y_1),new Lt(this.o2y_1),new Lt(this.p2y_1),new Lt(this.q2y_1),new Lt(this.r2y_1),new Lt(this.s2y_1),new Lt(this.t2y_1),new Lt(this.u2y_1)])}function Nt(){return null==f&&new Dt,f}function Lt(t){Nt(),this.f30_1=t}function zt(){return Rt(),s}function Ft(){return Rt(),o}function Bt(){return Rt(),l}function Ht(){return Rt(),u}return b(nt,"Companion",w),b(at,"MarginInt",S),b(pt,"Companion",w),b(gt,"RectangleInt",S),b(Ct,"SliceCoords",z),b(Et,"RectCoords",S,U,[Ct]),b(Tt,"SliceCoordsWithBaseAndRect",z,U,[Ct]),b(Mt,"RectSlice",S,U,[Tt]),b($t,"Companion",w),b(Ot,"SliceRotation",S,B),b(Dt,"Companion",w),b(Lt,"SliceOrientation",S),y(at).toString=function(){return"MarginInt(top="+K(t=this.p2x_1)+", right="+J(t)+", bottom="+Z(t)+", left="+Q(t)+")";var t},y(at).hashCode=function(){return rt(this.p2x_1)},y(at).equals=function(t){return function(t,e){if(!(e instanceof at))return!1;var n=e instanceof at?e.p2x_1:x();return!!t.equals(n)}(this.p2x_1,t)},y(pt).q2x=function(t,e){return dt(t,(i=t,St(bt(n=e)-bt(i)|0,xt(n)-xt(i)|0)));var n,i},y(pt).r2x=function(t,e,n,i){return this.q2x(St(t,e),St(n,i))},y(gt).toString=function(){return"Rectangle(x="+st(t=this.s2x_1)+", y="+ot(t)+", width="+lt(t)+", height="+ut(t)+")";var t},y(gt).hashCode=function(){return mt(this.s2x_1)},y(gt).equals=function(t){return function(t,e){if(!(e instanceof gt))return!1;var n=e instanceof gt?e.s2x_1:x();return!!t.equals(n)}(this.s2x_1,t)},y(Et).b2y=function(){return this.t2x_1},y(Et).c2y=function(){return this.u2x_1},y(Et).d2y=function(){return this.v2x_1},y(Et).e2y=function(){return this.w2x_1},y(Et).f2y=function(){return this.x2x_1},y(Et).g2y=function(){return this.y2x_1},y(Et).h2y=function(){return this.z2x_1},y(Et).i2y=function(){return this.a2y_1},y(Et).toString=function(){return"RectCoords(tlX="+this.t2x_1+", tlY="+this.u2x_1+", trX="+this.v2x_1+", trY="+this.w2x_1+", brX="+this.x2x_1+", brY="+this.y2x_1+", blX="+this.z2x_1+", blY="+this.a2y_1+")"},y(Et).hashCode=function(){var t=I(this.t2x_1);return t=_(t,31)+I(this.u2x_1)|0,t=_(t,31)+I(this.v2x_1)|0,t=_(t,31)+I(this.w2x_1)|0,t=_(t,31)+I(this.x2x_1)|0,t=_(t,31)+I(this.y2x_1)|0,t=_(t,31)+I(this.z2x_1)|0,_(t,31)+I(this.a2y_1)|0},y(Et).equals=function(t){if(this===t)return!0;if(!(t instanceof Et))return!1;var e=t instanceof Et?t:x();return!!(k(this.t2x_1,e.t2x_1)&&k(this.u2x_1,e.u2x_1)&&k(this.v2x_1,e.v2x_1)&&k(this.w2x_1,e.w2x_1)&&k(this.x2x_1,e.x2x_1)&&k(this.y2x_1,e.y2x_1)&&k(this.z2x_1,e.z2x_1)&&k(this.a2y_1,e.a2y_1))},y(Mt).y2z=function(){return this.w2y_1},y(Mt).z2z=function(){return this.x2y_1},y(Mt).b2y=function(){return this.p2z_1},y(Mt).c2y=function(){return this.q2z_1},y(Mt).d2y=function(){return this.r2z_1},y(Mt).e2y=function(){return this.s2z_1},y(Mt).f2y=function(){return this.t2z_1},y(Mt).g2y=function(){return this.u2z_1},y(Mt).h2y=function(){return this.v2z_1},y(Mt).i2y=function(){return this.w2z_1},y(Mt).toString=function(){var t,e=P();return e.g5("RectSlice("),e.g5(this.a2z_1),e.g5(":"),e.f5(new gt(this.x2y_1)),this.y2y_1!==Nt().n2y_1&&(e.g5(":"),e.f5(new Lt(this.y2y_1))),(0!==K(t=this.z2y_1)||0!==Q(t)||0!==J(t)||!(0===Z(t)))&&(e.g5(":"),e.f5(new at(this.z2y_1))),e.g5(")"),e.toString()},y(Mt).hashCode=function(){var t=N(this.w2y_1);return t=_(t,31)+mt(this.x2y_1)|0,t=_(t,31)+this.y2y_1|0,t=_(t,31)+rt(this.z2y_1)|0,_(t,31)+(null==this.a2z_1?0:L(this.a2z_1))|0},y(Mt).equals=function(t){if(this===t)return!0;if(!(t instanceof Mt))return!1;var e=t instanceof Mt?t:x();return!!k(this.w2y_1,e.w2y_1)&&!!k(this.x2y_1,e.x2y_1)&&this.y2y_1===e.y2y_1&&!!k(this.z2y_1,e.z2y_1)&&this.a2z_1==e.a2z_1},y($t).d1=function(t){return this.b30_1[F(t,4)]},y(Lt).toString=function(){return t=this.f30_1,Nt().m2y_1[7&(t>>>0|0)];var t},y(Lt).hashCode=function(){return this.f30_1},y(Lt).equals=function(t){return function(t,e){return e instanceof Lt&&t===(e instanceof Lt?e.f30_1:x())}(this.f30_1,t)},y(Et).j2y=X,y(Et).k2y=Y,y(Mt).a30=function(){return t=this.z2z(),_(lt(t),ut(t));var t},y(Mt).j2y=X,y(Mt).k2y=Y,a=new pt,t.$_$=t.$_$||{},t.$_$.a=kt,t.$_$.b=Pt,t.$_$.c=It,t.$_$.d=Q,t.$_$.e=tt,t.$_$.f=K,t.$_$.g=et,t.$_$.h=function(t,e,n,i){return dt(St(t,e),wt(n,i))},t.$_$.i=_t,t.$_$.j=ut,t.$_$.k=ct,t.$_$.l=ft,t.$_$.m=ht,t.$_$.n=lt,t.$_$.o=st,t.$_$.p=ot,t.$_$.q=wt,t.$_$.r=Nt,t.$_$.s=it,t.$_$.t=a,t.$_$.u=Mt,t})?i.apply(e,r):i)||(t.exports=a)},738:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n,i,r=Math.imul,a=e.$_$.s,s=e.$_$.u6,o=(e.$_$.a3,e.$_$.y1),l=e.$_$.a8,u=e.$_$.d,c=e.$_$.z7,h=e.$_$.b8,f=e.$_$.v6,_=e.$_$.f2,d=e.$_$.c2;function p(t,e,n){return 255&t[n]}function m(){n=this,this.u1d_1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.v1d_1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",this.w1d_1=g(this.u1d_1),this.x1d_1=g(this.v1d_1)}function g(t){var e=new Int32Array(256),n=0;if(n<=255)do{var i=n;n=n+1|0,e[i]=-1}while(n<=255);var r=0,a=f(t)-1|0;if(r<=a)do{var o=r;r=r+1|0;var l=s(t,o);e[_(l)]=o}while(r<=a);return e}function v(){}return h(m,"Base64",c),h(v,"Hex",c),l(m).z1d=function(t,e,n){for(var i=e?this.v1d_1:this.u1d_1,l=a(4+(r(t.length,4)/3|0)|0),u=0,c=t.length%3|0;u<(t.length-2|0);){var h=p(f=t,0,(_=u)+0|0)<<16|p(f,0,_+1|0)<<8|p(f,0,_+2|0)<<0;u=u+3|0,l.h5(s(i,63&(h>>>18|0))),l.h5(s(i,63&(h>>>12|0))),l.h5(s(i,63&(h>>>6|0))),l.h5(s(i,63&(h>>>0|0)))}var f,_;if(1===c){var d=u;u=d+1|0;var m=p(t,0,d);l.h5(s(i,m>>>2|0)),l.h5(s(i,m<<4&63)),(!e||e&&n)&&(l.h5(o(61)),l.h5(o(61)))}else if(2===c){var g=u,v=u=g+1|0;u=v+1|0;var y=p(t,0,g)<<8|p(t,0,v);l.h5(s(i,y>>>10|0)),l.h5(s(i,63&(y>>>4|0))),l.h5(s(i,y<<2&63)),(!e||e&&n)&&l.h5(o(61))}return l.toString()},l(m).y1d=function(t,e,n,i){return e=e!==u&&e,n=n!==u&&n,i===u?this.z1d(t,e,n):i.z1d.call(this,t,e,n)},l(v).a1e=function(t){return t>=10?d(o(97),t-10|0):d(o(48),t)},l(v).b1e=function(t){return t>=10?d(o(65),t-10|0):d(o(48),t)},l(v).c1e=function(t,e){t.h5(this.a1e(15&(e>>>4|0))),t.h5(this.a1e(15&(e>>>0|0)))},l(v).d1e=function(t){var e=r(t.length,2),n=a(e),s=0,o=t.length-1|0;if(s<=o)do{var l=s;s=s+1|0;var u=255&t[l],c=15&(u>>>4|0),h=i.a1e(c);n.h5(h);var f=15&(u>>>0|0),_=i.a1e(f);n.h5(_)}while(s<=o);return n.toString()},i=new v,t.$_$=t.$_$||{},t.$_$.a=function(t,e){return i.c1e(t,e)},t.$_$.b=function(t){return(null==n&&new m,n).y1d(t)},t.$_$.c=function(t){return i.d1e(t)},t.$_$.d=function(t){return"0x"+function(t){var e=a(8),n=0;if(n<8)do{var s=n;n=n+1|0;var o=15&(t>>>r(7-s|0,4)|0);e.h5(i.b1e(o))}while(n<8);return e.toString()}(t)},t})?i.apply(e,r):i)||(t.exports=a)},675:function(t,e){var n,i,r,a;void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,i=arguments[1]>>0,r=i<0?Math.max(n+i,0):Math.min(i,n),a=arguments[2],s=void 0===a?n:a>>0,o=s<0?Math.max(n+s,0):Math.min(s,n);r<o;)e[r]=t,r++;return e}}),[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array].forEach((function(t){void 0===t.prototype.fill&&Object.defineProperty(t.prototype,"fill",{value:Array.prototype.fill})})),void 0===Math.log2&&(Math.log2=function(t){return Math.log(t)*Math.LOG2E}),void 0===Math.clz32&&(Math.clz32=(r=Math.log,a=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(r(e)/a|0)|0})),void 0===String.prototype.endsWith&&Object.defineProperty(String.prototype,"endsWith",{value:function(t,e){var n=this.toString();(void 0===e||e>n.length)&&(e=n.length),e-=t.length;var i=n.indexOf(t,e);return-1!==i&&i===e}}),void 0===String.prototype.startsWith&&Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),void 0===Math.imul&&(Math.imul=function(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0}),void 0===(i="function"==typeof(n=function(t){"use strict";var e,n,i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$,A,R,O,I,k,U,P,D,N,L,z,F,B,H,V,q,j,G,W,X,Y,K,J,Z,Q,tt,et,nt,it,rt,at,st,ot,lt,ut,ct,ht,ft,_t,dt,pt,mt,gt,vt=Math.clz32,yt=ArrayBuffer.isView,wt=Math.imul;function bt(t){return t===Pl()?this:t.fe(this,Il)}function xt(t){return Jr(this.c2(),t)?Qa(this,Ol)?this:oa():null}function St(t,e){return e(t,this)}function Et(t){return Jr(this.c2(),t)?Pl():this}function Mt(){}function Tt(){}function Ct(){}function $t(){}function At(){this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function Rt(){this.MIN_VALUE=14e-46,this.MAX_VALUE=34028235e31,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=4,this.SIZE_BITS=32}function Ot(){this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}function It(t){return!(t==t)}function kt(t){return 0===t?0:1<<(31-vt(t)|0)}function Ut(t){return function(t){if(t.z())return[];for(var e=t.n(),n=$r(Array(e),null),i=t.s(),r=0;i.t();){var a=r;r=a+1|0,n[a]=i.u()}return n}(t)}function Pt(t){return 0===(e=[t]).length?te():ne(new il(e,!0));var e}function Dt(t){return i=(e=[t]).length,fl(n=ce(i,ra(ia(fe))),e),n;var e,n,i}function Nt(t){return Ii(e=[t],Me(e.length));var e}function Lt(t,e,n,i,r){V.m(i,r,t.length);var a=r-i|0;if(V.m(n,n+a|0,e.length),yt(e)&&yt(t)){var s=t.subarray(i,r);e.set(s,n)}else if(t!==e||n<=i){var o=0;if(o<a)do{var l=o;o=o+1|0,e[n+l|0]=t[i+l|0]}while(o<a)}else{var u=a-1|0;if(0<=u)do{var c=u;u=u+-1|0,e[n+c|0]=t[i+c|0]}while(0<=u)}}function zt(t){return t}function Ft(t){return void 0!==t.toArray?t.toArray():Ut(t)}function Bt(t){return t<0&&function(){throw wo("Index overflow has happened.")}(),t}function Ht(t,n){!function(t,n){if(t.n()<=1)return e;var i=Ft(t);ae(i,n);var r=0,a=i.length;if(r<a)do{var s=r;r=r+1|0,t.o(s,i[s])}while(r<a)}(t,n)}function Vt(){Oo.call(this)}function qt(t){this.c1_1=t,this.a1_1=0,this.b1_1=-1}function jt(t,e){this.j1_1=t,qt.call(this,t),V.k1(e,this.j1_1.n()),this.a1_1=e}function Gt(){Vt.call(this),this.e1_1=0}function Wt(){Vo.call(this),this.t1_1=null,this.u1_1=null}function Xt(){Vt.call(this)}function Yt(t){if(!(t>=0))throw Ns(Zr("capacity must be non-negative."));return $r(Array(t),null)}function Kt(t,e){t[e]=null}function Jt(t,e,n){t.fill(null,e,n)}function Zt(t,e){return function(t,e){if(!(e>=0))throw Ns(Zr("Invalid new array size: "+e+"."));return function(t,e,n){var i=t.slice(0,e);void 0!==t.$type$&&(i.$type$=t.$type$);var r=t.length;if(e>r)for(i.length=e;r<e;){var a=r;r=a+1|0,i[a]=n}return i}(t,e,null)}(t,e)}function Qt(){a=this;var t=ee(0);t.p2_1=!0,this.q2_1=t}function te(){return t=ra(ia(re)),re.call(t,[]),t;var t}function ee(t){return function(t,e){if(re.call(e,[]),!(t>=0))throw Ns(Zr("Negative initial capacity: "+t));return e}(t,ra(ia(re)))}function ne(t){return function(t,e){var n=Ft(t);return re.call(e,n),e}(t,ra(ia(re)))}function ie(t,e){return V.r2(e,t.n()),e}function re(t){null==a&&new Qt,Gt.call(this),this.o2_1=t,this.p2_1=!1}function ae(t,e){if(function(){if(null!=s)return s;s=!1;var t=[],e=0;if(e<600)do{var n=e;e=e+1|0,t.push(n)}while(e<600);var i=oe;t.sort(i);var r=1,a=t.length;if(r<a)do{var o=r;r=r+1|0;var l=t[o-1|0],u=t[o];if((3&l)==(3&u)&&l>=u)return!1}while(r<a);return s=!0,!0}()){var n=(i=e,function(t,e){return i.compare(t,e)});t.sort(n)}else!function(t,e,n,i){var r=t.length,a=se(t,$r(Array(r),null),e,n,i);if(a!==t){var s=e;if(s<=n)do{var o=s;s=s+1|0,t[o]=a[o]}while(o!==n)}}(t,0,zi(t),e);var i}function se(t,e,n,i,r){if(n===i)return t;var a=(n+i|0)/2|0,s=se(t,e,n,a,r),o=se(t,e,a+1|0,i,r),l=s===e?t:e,u=n,c=a+1|0,h=n;if(h<=i)do{var f=h;if(h=h+1|0,u<=a&&c<=i){var _=s[u],d=o[c];r.compare(_,d)<=0?(l[f]=_,u=u+1|0):(l[f]=d,c=c+1|0)}else u<=a?(l[f]=s[u],u=u+1|0):(l[f]=o[c],c=c+1|0)}while(f!==i);return l}function oe(t,e){return(3&t)-(3&e)|0}function le(t,e){return Wt.call(e),fe.call(e),e.y2_1=t,e}function ue(t){return le(Ae(),t),t}function ce(t,e){return function(t,e,n){le(Oe(t,e),n)}(t,1,e),e}function he(t,e){return le(function(t){return function(t,e){return Re(t.n(),e),e.b2(t),e}(t,ra(ia(Ke)))}(t),e),e}function fe(){this.z2_1=null}function _e(t){Xt.call(this),this.b3_1=t}function de(t){Vt.call(this),this.d3_1=t}function pe(t){me.call(this,t)}function me(t){Xt.call(this),this.j3_1=t}function ge(t){this.p3_1=t}function ve(t){Xt.call(this),this.q3_1=t}function ye(t){this.s3_1=t}function we(t){Vt.call(this),this.t3_1=t}function be(t,e){return Xt.call(e),Te.call(e),e.u3_1=t,e}function xe(t){return be(Ae(),t),t}function Se(t,e){be(Re(t.n(),ra(ia(Ke))),e);for(var n=t.s();n.t();){var i=n.u();e.u3_1.a2(i,!0)}return e}function Ee(t,e,n){return be(Oe(t,e),n),n}function Me(t){return function(t,e){return Ee(t,1,e),e}(t,ra(ia(Te)))}function Te(){}function Ce(t,e){return kt(wt(rr(e,1),3))}function $e(t,e){return vt(e)+1|0}function Ae(){return Re(8,t=ra(ia(Ke))),t;var t}function Re(t,e){return Ke.call(e,Yt(t),null,new Int32Array(t),new Int32Array(Ce(0,t)),2,0),e}function Oe(t,e){return function(t,e,n){if(Re(t,n),!(e>0))throw Ns(Zr("Non-positive load factor: "+e));return n}(t,e,ra(ia(Ke)))}function Ie(t){return t.v3_1.length}function ke(t){return t.y3_1.length}function Ue(t){t.c4_1=t.c4_1+1|0}function Pe(t,e){!function(t,e){var n=Ie(t)-t.a4_1|0,i=t.a4_1-t.n()|0;return n<e&&(i+n|0)>=e&&i>=(Ie(t)/4|0)}(t,e)?function(t,e){if(e<0)throw no("too many elements");if(e>Ie(t)){var n=V.f4(Ie(t),e);t.v3_1=Zt(t.v3_1,n);var i=t,r=t.w3_1;i.w3_1=null==r?null:Zt(r,n),t.x3_1=ys(t.x3_1,n);var a=Ce(0,n);a>ke(t)&&Le(t,a)}}(t,t.a4_1+e|0):Le(t,ke(t))}function De(t){var e=t.w3_1;if(null!=e)return e;var n=Yt(Ie(t));return t.w3_1=n,n}function Ne(t,e){return null==e?0:wt(Kr(e),-1640531527)>>>t.b4_1|0}function Le(t,e){Ue(t),t.a4_1>t.d4_1&&function(t){for(var e=0,n=0,i=t.w3_1;e<t.a4_1;)t.x3_1[e]>=0&&(t.v3_1[n]=t.v3_1[e],null!=i&&(i[n]=i[e]),n=n+1|0),e=e+1|0;Jt(t.v3_1,n,t.a4_1),null==i||Jt(i,n,t.a4_1),t.a4_1=n}(t),e!==ke(t)?(t.y3_1=new Int32Array(e),t.b4_1=$e(0,e)):ps(t.y3_1,0,0,ke(t));for(var n=0;n<t.a4_1;){var i=n;if(n=i+1|0,!ze(t,i))throw Gs("This cannot happen with fixed magic multiplier and grow-only hash array. Have object hashCodes changed?")}}function ze(t,e){for(var n=Ne(t,t.v3_1[e]),i=t.z3_1;;){if(0===t.y3_1[n])return t.y3_1[n]=e+1|0,t.x3_1[e]=n,!0;if((i=i-1|0)<0)return!1;var r=n;n=r-1|0,0===r&&(n=ke(t)-1|0)}}function Fe(t,e){for(var n=Ne(t,e),i=t.z3_1;;){var r=t.y3_1[n];if(0===r)return-1;if(r>0&&Jr(t.v3_1[r-1|0],e))return r-1|0;if((i=i-1|0)<0)return-1;var a=n;n=a-1|0,0===a&&(n=ke(t)-1|0)}}function Be(t,e){t.r();t:for(;;)for(var n=Ne(t,e),i=nr(wt(t.z3_1,2),ke(t)/2|0),r=0;;){var a=t.y3_1[n];if(a<=0){if(t.a4_1>=Ie(t)){Pe(t,1);continue t}var s=t.a4_1;t.a4_1=s+1|0;var o=s;return t.v3_1[o]=e,t.x3_1[o]=n,t.y3_1[n]=o+1|0,t.d4_1=t.d4_1+1|0,Ue(t),r>t.z3_1&&(t.z3_1=r),o}if(Jr(t.v3_1[a-1|0],e))return 0|-a;if((r=r+1|0)>i){Le(t,wt(ke(t),2));continue t}var l=n;n=l-1|0,0===l&&(n=ke(t)-1|0)}}function He(t,n){Kt(t.v3_1,n),function(t,n){for(var i=n,r=n,a=0,s=nr(wt(t.z3_1,2),ke(t)/2|0);;){var o=i;if(i=o-1|0,0===o&&(i=ke(t)-1|0),(a=a+1|0)>t.z3_1)return t.y3_1[r]=0,e;var l=t.y3_1[i];if(0===l)return t.y3_1[r]=0,e;if(l<0?(t.y3_1[r]=-1,r=i,a=0):((Ne(t,t.v3_1[l-1|0])-i|0)&(ke(t)-1|0))>=a&&(t.y3_1[r]=l,t.x3_1[l-1|0]=r,r=i,a=0),(s=s-1|0)<0)return t.y3_1[r]=-1,e}}(t,t.x3_1[n]),t.x3_1[n]=-1,t.d4_1=t.d4_1-1|0,Ue(t)}function Ve(t,e){var n=Be(t,e.c2()),i=De(t);if(n>=0)return i[n]=e.d2(),!0;var r=i[(0|-n)-1|0];return!Jr(e.d2(),r)&&(i[(0|-n)-1|0]=e.d2(),!0)}function qe(){this.g4_1=-1640531527,this.h4_1=8,this.i4_1=2,this.j4_1=-1}function je(t){this.k4_1=t,this.l4_1=0,this.m4_1=-1,this.n4_1=this.k4_1.c4_1,this.o4()}function Ge(t){je.call(this,t)}function We(t){je.call(this,t)}function Xe(t){je.call(this,t)}function Ye(t,e){this.i5_1=t,this.j5_1=e}function Ke(t,e,n,i,r,a){this.v3_1=t,this.w3_1=e,this.x3_1=n,this.y3_1=i,this.z3_1=r,this.a4_1=a,this.b4_1=$e(0,ke(this)),this.c4_1=0,this.d4_1=0,this.e4_1=!1}function Je(){}function Ze(){return ue(t=ra(ia(en))),en.call(t),t;var t}function Qe(t){return function(t,e){return ce(t,e),en.call(e),e}(t,ra(ia(en)))}function tn(t){return function(t,e){return he(t,e),en.call(e),e}(t,ra(ia(en)))}function en(){}function nn(){return xe(t=ra(ia(on))),on.call(t),t;var t}function rn(t){return function(t,e){return Se(t,e),on.call(e),e}(t,ra(ia(on)))}function an(t,e){return function(t,e,n){Ee(t,e,n),on.call(n)}(t,1,e),e}function sn(t){return an(t,ra(ia(on)))}function on(){}function ln(){}function un(t){ln.call(this),this.v5_1=t}function cn(){hn.call(this)}function hn(){ln.call(this),this.x5_1=""}function fn(){if(!l){l=!0;var t="undefined"!=typeof process&&process.versions&&!!process.versions.node;o=t?new un(process.stdout):new cn}}function _n(t,e){return js(t,e),pn.call(e),e}function dn(t,e,n){return Ws(t,e,n),pn.call(n),n}function pn(){na(this,pn)}function mn(){return u||(u=!0,Math.pow(2,-26),Math.pow(2,-53)),t=Math.random()*Math.pow(2,32)|0,function(t,e,n){return eu.call(n,t,e,0,0,~t,t<<10^(e>>>4|0)),n}(t,t>>31,ra(ia(eu)));var t}function gn(){}function vn(t){this.d6_1=t}function yn(){c=this,vn.call(this,Object),this.g6_1="Nothing"}function wn(){return null==c&&new yn,c}function bn(){}function xn(t,e,n){vn.call(this,t),this.i6_1=e,this.j6_1=n}function Sn(t){vn.call(this,t);var e=t.$metadata$;this.l6_1=null==e?null:e.simpleName}function En(){}function Mn(){}function Tn(){}function Cn(){}function $n(t,e,n){this.m6_1=t,this.n6_1=e,this.o6_1=n}function An(){return _||(_=!0,h=$r(Array(0),null)),h}function Rn(t){return!(null==t)}function On(t){return ns(t)}function In(t){return null!=t&&"boolean"==typeof t}function kn(t){return null!=t&&"number"==typeof t}function Un(t){return null!=t&&"number"==typeof t}function Pn(t){return null!=t&&"number"==typeof t}function Dn(t){return null!=t&&"number"==typeof t}function Nn(t){return null!=t&&"number"==typeof t}function Ln(t){return null!=t&&es(t)}function zn(t){return null!=t&&"string"==typeof t}function Fn(t){return t instanceof Error}function Bn(t){return null!=t&&rs(t)}function Hn(t){return null!=t&&os(t)}function Vn(t){return null!=t&&as(t)}function qn(t){return null!=t&&ss(t)}function jn(t){return null!=t&&ls(t)}function Gn(t){return null!=t&&cs(t)}function Wn(t){return null!=t&&us(t)}function Xn(t){return null!=t&&hs(t)}function Yn(){f=this;var t=Object;this.anyClass=new xn(t,"Any",Rn);var e=Number;this.numberClass=new xn(e,"Number",On),this.nothingClass=wn();var n=Boolean;this.booleanClass=new xn(n,"Boolean",In);var i=Number;this.byteClass=new xn(i,"Byte",kn);var r=Number;this.shortClass=new xn(r,"Short",Un);var a=Number;this.intClass=new xn(a,"Int",Pn);var s=Number;this.floatClass=new xn(s,"Float",Dn);var o=Number;this.doubleClass=new xn(o,"Double",Nn);var l=Array;this.arrayClass=new xn(l,"Array",Ln);var u=String;this.stringClass=new xn(u,"String",zn);var c=Error;this.throwableClass=new xn(c,"Throwable",Fn);var h=Array;this.booleanArrayClass=new xn(h,"BooleanArray",Bn);var _=Uint16Array;this.charArrayClass=new xn(_,"CharArray",Hn);var d=Int8Array;this.byteArrayClass=new xn(d,"ByteArray",Vn);var p=Int16Array;this.shortArrayClass=new xn(p,"ShortArray",qn);var m=Int32Array;this.intArrayClass=new xn(m,"IntArray",jn);var g=Array;this.longArrayClass=new xn(g,"LongArray",Gn);var v=Float32Array;this.floatArrayClass=new xn(v,"FloatArray",Wn);var y=Float64Array;this.doubleArrayClass=new xn(y,"DoubleArray",Xn)}function Kn(){return null==f&&new Yn,f}function Jn(t){return Array.isArray(t)?function(t){var e;switch(t.length){case 1:e=Zn(t[0]);break;case 0:e=wn();break;default:e=new bn}return e}(t):Zn(t)}function Zn(t){if(t===String)return Kn().stringClass;var e,n=t.$metadata$;if(null!=n){var i;if(null==n.$kClass$){var r=new Sn(t);n.$kClass$=r,i=r}else i=n.$kClass$;e=i}else e=new Sn(t);return e}function Qn(t){Rs(t,this),na(this,Qn)}function ti(t){return ei(e=ra(ia(ii))),e;var e}function ei(t){return ii.call(t,""),t}function ni(){return ei(ra(ia(ii)))}function ii(t){this.e5_1=void 0!==t?t:""}function ri(t){var e=dr(t).toUpperCase();return e.length>1?t:zr(e,0)}function ai(t){return function(t){var e=_r(t);return 9<=e&&e<=13||28<=e&&e<=32||160===e||e>4096&&(5760===e||8192<=e&&e<=8202||8232===e||8233===e||8239===e||8287===e||12288===e)}(t)}function si(t){if(!(2<=t&&t<=36))throw Ns("radix "+t+" was not in valid range 2..36");return t}function oi(t){switch(t.toLowerCase()){case"nan":case"+nan":case"-nan":return!0;default:return!1}}function li(t,e){var n,i,r,a=hr(t,48)>=0&&hr(t,57)<=0?fr(t,48):hr(t,65)>=0&&hr(t,90)<=0?fr(t,65)+10|0:hr(t,97)>=0&&hr(t,122)<=0?fr(t,97)+10|0:hr(t,128)<0?-1:hr(t,65313)>=0&&hr(t,65338)<=0?fr(t,65313)+10|0:hr(t,65345)>=0&&hr(t,65370)<=0?fr(t,65345)+10|0:(n=_r(t),i=function(t,e){for(var n=0,i=t.length-1|0,r=-1,a=0;n<=i;)if(e>(a=t[r=(n+i|0)/2|0]))n=r+1|0;else{if(e===a)return r;i=r-1|0}return r-(e<a?1:0)|0}(xs().ra_1,n),(r=n-xs().ra_1[i]|0)<10?r:-1);return a>=e?-1:a}function ui(){d=this,this.q7_1=new RegExp("[\\\\^$*+?.()|[\\]{}]","g"),this.r7_1=new RegExp("[\\\\$]","g"),this.s7_1=new RegExp("\\$","g")}function ci(){return null==d&&new ui,d}function hi(t,e){ci(),this.v7_1=t,this.w7_1=Wi(e),this.x7_1=new RegExp(t,Hi(e,"","gu",F,F,F,fi)),this.y7_1=null,this.z7_1=null}function fi(t){return t.c8_1}function _i(t){this.d8_1=t}function di(t,e){return pi(),function(t,e,n){if(n=n!==F&&n,pi(),n){var i=t.length,r=e.length,a=Math.min(i,r);if(0===a)return i-r|0;var s=0;if(s<a)do{var o=s;s=s+1|0;var l=zr(t,o),u=zr(e,o);if(l!==u&&(l=ri(l))!==(u=ri(u))&&(l=zr(dr(l).toLowerCase(),0))!==(u=zr(dr(u).toLowerCase(),0)))return hr(l,u)}while(s<a);return i-r|0}return jr(t,e)}(t,e,!0)}function pi(){p||(p=!0,new _i(di))}function mi(t){var e;if(0===Br(t))e=!0;else{var n;t:{var i=function(t){return Wa(0,Br(t)-1|0)}(t);if(Qa(i,yr)&&i.z())n=!0;else{for(var r=i.s();r.t();)if(!ai(zr(t,r.u()))){n=!1;break t}n=!0}}e=n}return e}function gi(t,e,n,i,r,a){return Bu(t,e,n,i,r,a=a!==F&&a)}function vi(t,e,n,i){return(i=i!==F&&i)?gi(t,n,e,0,e.length,i):t.startsWith(e,n)}function yi(){return Mi(),m}function wi(t,e,n,i,r){if(Mi(),!(55296<=e&&e<=56319)||n>=i)return Ei(0,n,r);var a=_r(zr(t,n));return 56320<=a&&a<=57343?65536+((1023&e)<<10)|0|1023&a:Ei(0,n,r)}function bi(t,e,n,i,r){if(Mi(),0==(30&e)||n>=i)return Ei(0,n,r);var a=t[n];return 128!=(192&a)?Ei(0,n,r):e<<6^a^3968}function xi(t,e,n,i,r){if(Mi(),n>=i)return Ei(0,n,r);var a=t[n];if(0==(15&e)){if(160!=(224&a))return Ei(0,n,r)}else if(13==(15&e)){if(128!=(224&a))return Ei(0,n,r)}else if(128!=(192&a))return Ei(0,n,r);if((n+1|0)===i)return Ei(1,n,r);var s=t[n+1|0];return 128!=(192&s)?Ei(1,n,r):e<<12^a<<6^s^-123008}function Si(t,e,n,i,r){Mi(),n>=i&&Ei(0,n,r);var a=t[n];if(0==(15&e)){if((240&a)<=128)return Ei(0,n,r)}else if(4==(15&e)){if(128!=(240&a))return Ei(0,n,r)}else{if((15&e)>4)return Ei(0,n,r);if(128!=(192&a))return Ei(0,n,r)}if((n+1|0)===i)return Ei(1,n,r);var s=t[n+1|0];if(128!=(192&s))return Ei(1,n,r);if((n+2|0)===i)return Ei(2,n,r);var o=t[n+2|0];return 128!=(192&o)?Ei(2,n,r):e<<18^a<<12^s<<6^o^3678080}function Ei(t,e,n){if(Mi(),n)throw new Qn("Malformed sequence starting at "+(e-1|0));return 0|-t}function Mi(){g||(g=!0,m=new Int8Array([-17,-65,-67]))}function Ti(t,n,i,r){if(!Ci(t,n,i,r))return e;for(var a=t.cause;null!=a;){if(!Ci(a,n,i,"Caused by: "))return e;a=a.cause}}function Ci(t,e,n,i){e.f8_1.g5(n).g5(i);var r=t.toString();if(function(t,e){var n;t:{for(var i=t.g8_1,r=0,a=i.length;r<a;){var s=i[r];if(r=r+1|0,s===e){n=!0;break t}}n=!1}return n}(e,t))return e.f8_1.g5("[CIRCULAR REFERENCE, SEE ABOVE: ").g5(r).g5("]\n"),!1;e.g8_1.push(t);var a=t.stack,s=null==a||"string"==typeof a?a:oa();if(null!=s){var o=Nu(s,r),l=o<0?0:o+r.length|0;if(0===l&&e.f8_1.g5(r).g5("\n"),0===Br(e.h8_1)?(e.h8_1=s,e.i8_1=l):s=function(t,e,n){var i=0,r=0,a=0,s=0,o=t.h8_1.length-t.i8_1|0,l=e.length-n|0,u=Math.min(o,l);if(s<u)t:do{var c=s;s=s+1|0;var h=zr(e,Pu(e)-c|0);if(h!==zr(t.h8_1,Pu(t.h8_1)-c|0))break t;10===h&&(i=i+1|0,a=r,r=c)}while(s<u);if(i<=1)return e;for(;a>0&&32===zr(e,Pu(e)-(a-1|0)|0);)a=a-1|0;return function(t,e){if(!(e>=0))throw Ns(Zr("Requested character count "+e+" is less than zero."));return ur(t,rr(t.length-e|0,0))}(e,a)+"... and "+(i-1|0)+" more common stack frames skipped"}(e,s,l),Br(n)>0){var u;if(0===l)u=0;else{for(var c=0,h=0;h<Br(r);){var f=zr(r,h);h=h+1|0,10===f&&(c=c+1|0)}u=1+c|0}for(var _=u,d=0,p=Lu(s).s();p.t();){var m=p.u(),g=d;d=g+1|0,Bt(g)>=_&&e.f8_1.g5(n),e.f8_1.g5(m).g5("\n")}}else e.f8_1.g5(s).g5("\n")}else e.f8_1.g5(r).g5("\n");var v=function(t){var e=t._suppressed,n=null==e?null:e;return null==n?el():n}(t);if(!v.z())for(var y=n+"    ",w=v.s();w.t();)Ti(w.u(),e,y,"Suppressed: ");return!0}function $i(){this.f8_1=ni(),this.g8_1=[],this.h8_1="",this.i8_1=0}function Ai(t){return ne(function(t){return new il(t,!1)}(t))}function Ri(t,e){if(null==e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;if(n=n+1|0,null==t[r])return r}while(n<=i)}else{var a=0,s=t.length-1|0;if(a<=s)do{var o=a;if(a=a+1|0,Jr(e,t[o]))return o}while(a<=s)}return-1}function Oi(t,e,n,i,r,a,s,o){n=n===F?", ":n,i=i===F?"":i,r=r===F?"":r,a=a===F?-1:a,s=s===F?"...":s,o=o===F?null:o,e.j7(i);var l=0,u=0,c=t.length;t:for(;u<c;){var h=t[u];if(u=u+1|0,(l=l+1|0)>1&&e.j7(n),!(a<0||l<=a))break t;yu(e,h,o)}return a>=0&&l>a&&e.j7(s),e.j7(r),e}function Ii(t,e){for(var n=0,i=t.length;n<i;){var r=t[n];n=n+1|0,e.p(r)}return e}function ki(t,e,n,i,r,a,s){return e=e===F?", ":e,n=n===F?"":n,i=i===F?"":i,r=r===F?-1:r,a=a===F?"...":a,s=s===F?null:s,Oi(t,ni(),e,n,i,r,a,s).toString()}function Ui(t,e){return e>=0&&e<=zi(t)?t[e]:null}function Pi(t){switch(t.length){case 0:return el();case 1:return Pt(t[0]);default:return function(t){for(var e=ee(t.length),n=0,i=t.length;n<i;){var r=t[n];n=n+1|0,e.p(r)}return e}(t)}}function Di(t,e,n,i,r,a,s){return e=e===F?", ":e,n=n===F?"":n,i=i===F?"":i,r=r===F?-1:r,a=a===F?"...":a,s=s===F?null:s,function(t,e,n,i,r,a,s,o){n=n===F?", ":n,i=i===F?"":i,r=r===F?"":r,a=a===F?-1:a,s=s===F?"...":s,o=o===F?null:o,e.j7(i);var l=0,u=0,c=t.length;t:for(;u<c;){var h=t[u];if(u=u+1|0,(l=l+1|0)>1&&e.j7(n),!(a<0||l<=a))break t;null!=o?e.j7(o(h)):e.j7(h.toString())}return a>=0&&l>a&&e.j7(s),e.j7(r),e}(t,ni(),e,n,i,r,a,s).toString()}function Ni(t,e,n,i,r,a,s){return e=e===F?", ":e,n=n===F?"":n,i=i===F?"":i,r=r===F?-1:r,a=a===F?"...":a,s=s===F?null:s,function(t,e,n,i,r,a,s,o){n=n===F?", ":n,i=i===F?"":i,r=r===F?"":r,a=a===F?-1:a,s=s===F?"...":s,o=o===F?null:o,e.j7(i);var l=0,u=0,c=t.length;t:for(;u<c;){var h=t[u];if(u=u+1|0,(l=l+1|0)>1&&e.j7(n),!(a<0||l<=a))break t;null!=o?e.j7(o(h)):e.j7(h.toString())}return a>=0&&l>a&&e.j7(s),e.j7(r),e}(t,ni(),e,n,i,r,a,s).toString()}function Li(t,e,n,i,r,a,s){return e=e===F?", ":e,n=n===F?"":n,i=i===F?"":i,r=r===F?-1:r,a=a===F?"...":a,s=s===F?null:s,function(t,e,n,i,r,a,s,o){n=n===F?", ":n,i=i===F?"":i,r=r===F?"":r,a=a===F?-1:a,s=s===F?"...":s,o=o===F?null:o,e.j7(i);var l=0,u=0,c=t.length;t:for(;u<c;){var h=t[u];if(u=u+1|0,(l=l+1|0)>1&&e.j7(n),!(a<0||l<=a))break t;null!=o?e.j7(o(h)):e.j7(h.toString())}return a>=0&&l>a&&e.j7(s),e.j7(r),e}(t,ni(),e,n,i,r,a,s).toString()}function zi(t){return t.length-1|0}function Fi(t,e){return function(t,e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;if(n=n+1|0,e===t[r])return r}while(n<=i);return-1}(t,e)>=0}function Bi(t){var e;switch(t.length){case 0:throw oo("Array is empty.");case 1:e=t[0];break;default:throw Ns("Array has more than one element.")}return e}function Hi(t,e,n,i,r,a,s){return e=e===F?", ":e,n=n===F?"":n,i=i===F?"":i,r=r===F?-1:r,a=a===F?"...":a,s=s===F?null:s,Vi(t,ni(),e,n,i,r,a,s).toString()}function Vi(t,e,n,i,r,a,s,o){n=n===F?", ":n,i=i===F?"":i,r=r===F?"":r,a=a===F?-1:a,s=s===F?"...":s,o=o===F?null:o,e.j7(i);var l=0,u=t.s();t:for(;u.t();){var c=u.u();if((l=l+1|0)>1&&e.j7(n),!(a<0||l<=a))break t;yu(e,c,o)}return a>=0&&l>a&&e.j7(s),e.j7(r),e}function qi(t){if(Qa(t,yr)){var e;switch(t.n()){case 0:e=el();break;case 1:e=Pt(Qa(t,vr)?t.d1(0):t.s().u());break;default:e=Xi(t)}return e}return ol(Ji(t))}function ji(t){if(t.z())throw oo("List is empty.");return t.d1(0)}function Gi(t,e){if(Qa(e,yr)){var n=ee(t.n()+e.n()|0);return n.q(t),n.q(e),n}var i=ne(t);return _l(i,e),i}function Wi(t){if(Qa(t,yr)){var e;switch(t.n()){case 0:e=Ml();break;case 1:e=Nt(Qa(t,vr)?t.d1(0):t.s().u());break;default:e=Zi(t,sn(t.n()))}return e}return function(t){switch(t.n()){case 0:return Ml();case 1:return Nt(t.s().u());default:return t}}(Zi(t,nn()))}function Xi(t){return ne(t)}function Yi(t){if(Qa(t,vr))return ji(t);var e=t.s();if(!e.t())throw oo("Collection is empty.");return e.u()}function Ki(t){return Qa(t,yr)?rn(t):Zi(t,nn())}function Ji(t){return Qa(t,yr)?Xi(t):Zi(t,te())}function Zi(t,e){for(var n=t.s();n.t();){var i=n.u();e.p(i)}return e}function Qi(t){if(Qa(t,vr))return function(t){var e;switch(t.n()){case 0:throw oo("List is empty.");case 1:e=t.d1(0);break;default:throw Ns("List has more than one element.")}return e}(t);var e=t.s();if(!e.t())throw oo("Collection is empty.");var n=e.u();if(e.t())throw Ns("Collection has more than one element.");return n}function tr(t,e){return e<=n.MIN_VALUE?iu().p8_1:Wa(t,e-1|0)}function er(t,e){return at.q8(t,e,-1)}function nr(t,e){return t>e?e:t}function ir(t,e,n){if(e>n)throw Ns("Cannot coerce value to an empty range: maximum "+n+" is less than minimum "+e+".");return t<e?e:t>n?n:t}function rr(t,e){return t<e?e:t}function ar(t,e){var i=function(t){var e=Ga(n.MIN_VALUE);return t.t8(Ga(n.MAX_VALUE))<=0&&e.t8(t)<=0?t.y8():null}(e);return null!=i&&t.x8(i)}function sr(t,e){return new bl(t,e)}function or(t){return new lr(t)}function lr(t){this.z8_1=t}function ur(t,e){if(!(e>=0))throw Ns(Zr("Requested character count "+e+" is less than zero."));var n=nr(e,t.length);return t.substring(0,n)}function cr(t){return t}function hr(t,e){return t-e|0}function fr(t,e){return t-e|0}function _r(t){return t}function dr(t){return String.fromCharCode(t)}function pr(){y=this,this.b9_1=0,this.c9_1=65535,this.d9_1=55296,this.e9_1=56319,this.f9_1=56320,this.g9_1=57343,this.h9_1=55296,this.i9_1=57343,this.j9_1=2,this.k9_1=16}function mr(){return null==y&&new pr,y}function gr(t){mr(),this.a9_1=t}function vr(){}function yr(){}function wr(){}function br(){}function xr(){}function Sr(){}function Er(){}function Mr(t,e){this.m9_1=t,this.n9_1=e}function Tr(t){var e=null==t?null:Zr(t);return null==e?"null":e}function Cr(t){for(var e=1,n=[],i=0,r=t.length;i<r;){var a=t[i];i=i+1|0;var s=e,o=a.prototype.$imask$,l=null==o?a.$imask$:o;null!=l&&(n.push(l),s=l.length);var u=a.$metadata$.iid,c=null==u?null:(f=void 0,_=void 0,d=void 0,f=(h=u)>>5,_=new Int32Array(f+1|0),d=1<<(31&h),_[f]=_[f]|d,_);null!=c&&(n.push(c),s=Math.max(s,c.length)),s>e&&(e=s)}var h,f,_,d;return function(t,e){for(var n=0,i=new Int32Array(t);n<t;){for(var r=n,a=0,s=0,o=e.length;s<o;){var l=e[s];s=s+1|0,r<l.length&&(a|=l[r])}i[r]=a,n=n+1|0}return i}(e,n)}function $r(t,e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0,t[r]=e}while(r!==i);return t}function Ar(t){var e=new Uint16Array(t);return e.$type$="CharArray",e}function Rr(t){this.s9_1=t,this.r9_1=0}function Or(t){this.u9_1=t,dl.call(this),this.t9_1=0}function Ir(){return Lr(),w}function kr(){return Lr(),b}function Ur(){return Lr(),S}function Pr(){return Lr(),E}function Dr(){return Lr(),M}function Nr(t){return Lr(),(0|t)===t?Ha(t):(kr()[0]=t,wt(Ur()[Dr()],31)+Ur()[Pr()]|0)}function Lr(){T||(T=!0,w=new ArrayBuffer(8),b=new Float64Array(Ir()),x=new Float32Array(Ir()),S=new Int32Array(Ir()),kr()[0]=-1,E=0!==Ur()[0]?1:0,M=1-Pr()|0)}function zr(t,e){var n;if(Fr(t)){var i,r=t.charCodeAt(e);if(mr(),r<0?i=!0:(mr(),i=r>65535),i)throw Ns("Invalid Char code: "+r);n=ja(r)}else n=t.b(e);return n}function Fr(t){return"string"==typeof t}function Br(t){return Fr(t)?t.length:t.a()}function Hr(t,e,n){return Fr(t)?t.substring(e,n):t.c(e,n)}function Vr(t){var e=t;if(null==e)return 0;var n=1,i=0,r=e.length;if(i<r)do{var a=i;i=i+1|0,n=wt(n,31)+Kr(e[a])|0}while(i<r);return n}function qr(t){return Zr(t)}function jr(t,e){var n;switch(typeof t){case"number":n="number"==typeof e?Gr(t,e):e instanceof ha?Gr(t,e.w9()):Wr(t,e);break;case"string":case"boolean":n=Wr(t,e);break;default:n=function(t,e){return t.d(e)}(t,e)}return n}function Gr(t,e){var n;if(t<e)n=-1;else if(t>e)n=1;else if(t===e){var i;if(0!==t)i=0;else{var r=1/t;i=r===1/e?0:r<0?-1:1}n=i}else n=t!=t?e!=e?0:1:-1;return n}function Wr(t,e){return t<e?-1:t>e?1:0}function Xr(t){if(!("kotlinHashCodeValue$"in t)){var e=Yr(),n=new Object;n.value=e,n.enumerable=!1,Object.defineProperty(t,"kotlinHashCodeValue$",n)}return t.kotlinHashCodeValue$}function Yr(){return 4294967296*Math.random()|0}function Kr(t){if(null==t)return 0;var e,n=typeof t;switch(n){case"object":e="function"==typeof t.hashCode?t.hashCode():Xr(t);break;case"function":e=Xr(t);break;case"number":e=Nr(t);break;case"boolean":e=Qr(t);break;case"string":e=ta(String(t));break;case"bigint":e=function(t){for(var e=BigInt(32),n=BigInt(4294967295),i=t<0?-t:t,r=0,a=t<0?-1:1;0!=i;){var s=Number(i&n);r=wt(31,r)+s|0,i>>=e}return wt(r,a)}(t);break;case"symbol":e=function(t){var e=(i=t,Symbol.keyFor(i)!=F?(C===F&&(C=new Map),C):($===F&&($=new WeakMap),$)),n=e.get(t);var i;if(n!==F)return n;var r=Yr();return e.set(t,r),r}(t);break;default:e=function(){throw new Error("Unexpected typeof `"+n+"`")}()}return e}function Jr(t,e){return null==t?null==e:null!=e&&("object"==typeof t&&"function"==typeof t.equals?t.equals(e):t!=t?e!=e:"number"==typeof t&&"number"==typeof e?t===e&&(0!==t||1/t==1/e):t===e)}function Zr(t){return null==t?"null":Ja(t)?"[...]":"function"!=typeof t.toString?ea(t):t.toString()}function Qr(t){return t?1231:1237}function ta(t){var e=0,n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0;var a=t.charCodeAt(r);e=wt(e,31)+a|0}while(r!==i);return e}function ea(t){return Object.prototype.toString.call(t)}function na(t,e){null!=Error.captureStackTrace?Error.captureStackTrace(t,e):t.stack=(new Error).stack}function ia(t){return t.prototype}function ra(t){return Object.create(t)}function aa(t,e,n){Error.call(t),function(t,e,n){var i=_s(Object.getPrototypeOf(t));if(0==(1&i)){var r;if(null==e){var a;if(null!==e){var s=null==n?null:n.toString();a=null==s?F:s}else a=F;r=a}else r=e;t.message=r}0==(2&i)&&(t.cause=n),t.name=Object.getPrototypeOf(t).constructor.name}(t,e,n)}function sa(t){var e;return null==t?function(){throw vo()}():e=t,e}function oa(){throw To()}function la(t,e){for(var n=t.length,i=e.length,r=0,a=e;r<n&&r<i;){var s=r,o=r;r=o+1|0,a[s]=t[o]}return e}function ua(){A=this,this.x9_1=new ha(0,-2147483648),this.y9_1=new ha(-1,2147483647),this.z9_1=8,this.aa_1=64}function ca(){return null==A&&new ua,A}function ha(t,e){ca(),Ct.call(this),this.r8_1=t,this.s8_1=e}function fa(){return Pa(),R}function _a(){return Pa(),O}function da(){return Pa(),I}function pa(){return Pa(),U}function ma(){return Pa(),P}function ga(t,e){if(Pa(),Ea(t,e))return 0;var n=Ca(t),i=Ca(e);return n&&!i?-1:!n&&i?1:Ca(ya(t,e))?-1:1}function va(t,e){Pa();var n=t.s8_1>>>16|0,i=65535&t.s8_1,r=t.r8_1>>>16|0,a=65535&t.r8_1,s=e.s8_1>>>16|0,o=65535&e.s8_1,l=e.r8_1>>>16|0,u=0,c=0,h=0,f=0;return u=(u=u+((c=(c=c+((h=(h=h+((f=f+(a+(65535&e.r8_1)|0)|0)>>>16|0)|0)+(r+l|0)|0)>>>16|0)|0)+(i+o|0)|0)>>>16|0)|0)+(n+s|0)|0,new ha((h&=65535)<<16|(f&=65535),(u&=65535)<<16|(c&=65535))}function ya(t,e){return Pa(),va(t,e.ia())}function wa(t,e){if(Pa(),$a(t))return fa();if($a(e))return fa();if(Ea(t,pa()))return Aa(e)?pa():fa();if(Ea(e,pa()))return Aa(t)?pa():fa();if(Ca(t))return Ca(e)?wa(Ra(t),Ra(e)):Ra(wa(Ra(t),e));if(Ca(e))return Ra(wa(t,Ra(e)));if(Oa(t,ma())&&Oa(e,ma()))return Ia(Sa(t)*Sa(e));var n=t.s8_1>>>16|0,i=65535&t.s8_1,r=t.r8_1>>>16|0,a=65535&t.r8_1,s=e.s8_1>>>16|0,o=65535&e.s8_1,l=e.r8_1>>>16|0,u=65535&e.r8_1,c=0,h=0,f=0,_=0;return f=f+((_=_+wt(a,u)|0)>>>16|0)|0,_&=65535,h=(h=h+((f=f+wt(r,u)|0)>>>16|0)|0)+((f=(f&=65535)+wt(a,l)|0)>>>16|0)|0,f&=65535,c=(c=(c=c+((h=h+wt(i,u)|0)>>>16|0)|0)+((h=(h&=65535)+wt(r,l)|0)>>>16|0)|0)+((h=(h&=65535)+wt(a,o)|0)>>>16|0)|0,h&=65535,c=c+(((wt(n,u)+wt(i,l)|0)+wt(r,o)|0)+wt(a,s)|0)|0,new ha(f<<16|_,(c&=65535)<<16|h)}function ba(t,e){Pa();var n=63&e;return 0===n?t:n<32?new ha(t.r8_1<<n,t.s8_1<<n|t.r8_1>>>(32-n|0)|0):new ha(0,t.r8_1<<(n-32|0))}function xa(t,e){Pa();var n=63&e;return 0===n?t:n<32?new ha(t.r8_1>>>n|0|t.s8_1<<(32-n|0),t.s8_1>>n):new ha(t.s8_1>>(n-32|0),t.s8_1>=0?0:-1)}function Sa(t){return Pa(),4294967296*t.s8_1+function(t){return Pa(),t.r8_1>=0?t.r8_1:4294967296+t.r8_1}(t)}function Ea(t,e){return Pa(),t.s8_1===e.s8_1&&t.r8_1===e.r8_1}function Ma(t,e){if(Pa(),e<2||36<e)throw Os("radix out of range: "+e);if($a(t))return"0";if(Ca(t)){if(Ea(t,pa())){var n=Ta(e),i=t.ea(n),r=ya(wa(i,n),t).y8();return Ma(i,e)+r.toString(e)}return"-"+Ma(Ra(t),e)}for(var a=2===e?31:e<=10?9:e<=21?7:e<=35?6:5,s=Ia(Math.pow(e,a)),o=t,l="";;){var u=o.ea(s),c=ya(o,wa(u,s)).y8().toString(e);if($a(o=u))return c+l;for(;c.length<a;)c="0"+c;l=c+l}}function Ta(t){return Pa(),new ha(t,t<0?-1:0)}function Ca(t){return Pa(),t.s8_1<0}function $a(t){return Pa(),0===t.s8_1&&0===t.r8_1}function Aa(t){return Pa(),1==(1&t.r8_1)}function Ra(t){return Pa(),t.ia()}function Oa(t,e){return Pa(),ga(t,e)<0}function Ia(t){if(Pa(),It(t))return fa();if(t<=-0x8000000000000000)return pa();if(t+1>=0x8000000000000000)return Pa(),k;if(t<0)return Ra(Ia(-t));var e=4294967296;return new ha(t%e|0,t/e|0)}function ka(t,e){return Pa(),ga(t,e)>0}function Ua(t,e){return Pa(),ga(t,e)>=0}function Pa(){D||(D=!0,R=Ta(0),O=Ta(1),I=Ta(-1),k=new ha(-1,2147483647),U=new ha(0,-2147483648),P=Ta(16777216))}function Da(t,e,n,i,r){return Na("class",t,e,n,i,r,null)}function Na(t,e,n,i,r,a,s){return{kind:t,simpleName:e,associatedObjectKey:i,associatedObjects:r,suspendArity:a,$kClass$:F,defaultConstructor:n,iid:s}}function La(t,e,n,i,r,a,s,o,l){null!=i&&(t.prototype=Object.create(i.prototype),t.prototype.constructor=t);var u=n(e,a,s,o,null==l?[]:l);t.$metadata$=u,null!=r&&((null!=u.iid?t:t.prototype).$imask$=Cr(r))}function za(t,e,n,i,r){return Na("interface",t,e,n,i,r,(N===F&&(N=0),N=N+1|0))}function Fa(t,e,n,i,r){return Na("object",t,e,n,i,r,null)}function Ba(t){return t<<24>>24}function Ha(t){return t instanceof ha?t.y8():function(t){return t>2147483647?2147483647:t<-2147483648?-2147483648:0|t}(t)}function Va(t){return t<<16>>16}function qa(t){return t instanceof ha?t:Ia(t)}function ja(t){return 65535&Va(Ha(t))}function Ga(t){return Ta(t)}function Wa(t,e){return new ru(t,e)}function Xa(){return Ka(),Da(F,F,F,F,F)}function Ya(t,e,n,i,r){return Ka(),i.get=i,i.set=r,i.callableName=t,a=i,s=function(t,e){return Ka(),(Ka(),L)[t][null==e?0:1]}(e,r),o=function(t,e){Ka();var n=t.$imask$;return null==n?Cr([e]):n}(i,n),Ka(),a.$metadata$=s,a.constructor=a,a.$imask$=o,a;var a,s,o}function Ka(){if(!z){z=!0;var t=[Xa(),Xa()],e=[Xa(),Xa()];L=[t,e,[Xa(),Xa()]]}}function Ja(t){return!!Za(t)||yt(t)}function Za(t){return Array.isArray(t)}function Qa(t,e){return ts(t,e.$metadata$.iid)}function ts(t,e){var n=t.$imask$;return null!=n&&function(t,e){var n=e>>5;if(n>t.length)return!1;var i=1<<(31&e);return!(0==(t[n]&i))}(n,e)}function es(t){return!!Za(t)&&!t.$type$}function ns(t){return"number"==typeof t||t instanceof ha}function is(t){return"string"==typeof t||Qa(t,Mt)}function rs(t){return!!Za(t)&&"BooleanArray"===t.$type$}function as(t){return t instanceof Int8Array}function ss(t){return t instanceof Int16Array}function os(t){return t instanceof Uint16Array&&"CharArray"===t.$type$}function ls(t){return t instanceof Int32Array}function us(t){return t instanceof Float32Array}function cs(t){return!!Za(t)&&"LongArray"===t.$type$}function hs(t){return t instanceof Float64Array}function fs(t,e){if(e===Object)return null!=t;var n=typeof t;if(null==t||null==e||"object"!==n&&"function"!==n)return!1;var i="object"==typeof e?function(t){return Object.getPrototypeOf(t)}(e):e,r=i.$metadata$;if("interface"===(null==r?null:r.kind)){var a=r.iid;return null!=a&&ts(t,a)}return t instanceof i}function _s(t){var e=t.constructor,n=null==e?null:e.$metadata$,i=null==n?null:n.errorInfo;if(null!=i)return i;var r,a=0;if(ds(t,"message")&&(a|=1),ds(t,"cause")&&(a|=2),3!==a){var s=(r=t,Object.getPrototypeOf(r));s!=Error.prototype&&(a|=_s(s))}return null!=n&&(n.errorInfo=a),a}function ds(t,e){return t.hasOwnProperty(e)}function ps(t,e,n,i){n=n===F?0:n,i=i===F?t.length:i,V.m(n,i,t.length),t.fill(e,n,i)}function ms(t,e,n){return V.m(e,n,t.length),t.slice(e,n)}function gs(t,e){if(!(e>=0))throw Ns(Zr("Invalid new array size: "+e+"."));return la(t,new Int8Array(e))}function vs(t){return new re(t)}function ys(t,e){if(!(e>=0))throw Ns(Zr("Invalid new array size: "+e+"."));return la(t,new Int32Array(e))}function ws(t,e,n,i){n=n===F?0:n,i=i===F?t.length:i,V.m(n,i,t.length),t.fill(e,n,i)}function bs(){B=this,this.ra_1=new Int32Array([48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296])}function xs(){return null==B&&new bs,B}function Ss(t){var e=t.za_1;null!=e&&e!==t&&sa(t.ab().bb(K)).cb(e),t.za_1=H}function Es(t){this.sa_1=t,this.ta_1=0,this.ua_1=0,this.va_1=null,this.wa_1=null,this.xa_1=null;var e=this.sa_1;this.ya_1=null==e?null:e.ab(),this.za_1=null}function Ms(){}function Ts(t){var e=t instanceof Es?t:null,n=null==e?null:e.db();return null==n?t:n}function Cs(t,e,n){return new $s(n,t,e,n)}function $s(t,e,n,i){this.qb_1=e,this.rb_1=n,this.sb_1=i,Es.call(this,Qa(t,$l)?t:oa())}function As(t){return aa(t),ks.call(t),t}function Rs(t,e){return aa(e,t),ks.call(e),e}function Os(t){var e=Rs(t,ra(ia(ks)));return na(e,Os),e}function Is(t,e,n){return aa(n,t,e),ks.call(n),n}function ks(){na(this,ks)}function Us(t){return to(t),Ls.call(t),t}function Ps(){var t=Us(ra(ia(Ls)));return na(t,Ps),t}function Ds(t,e){return eo(t,e),Ls.call(e),e}function Ns(t){var e=Ds(t,ra(ia(Ls)));return na(e,Ns),e}function Ls(){na(this,Ls)}function zs(){var t,e=(to(t=ra(ia(Hs))),Hs.call(t),t);return na(e,zs),e}function Fs(t,e){return eo(t,e),Hs.call(e),e}function Bs(t){var e=Fs(t,ra(ia(Hs)));return na(e,Bs),e}function Hs(){na(this,Hs)}function Vs(t){return to(t),Xs.call(t),t}function qs(){var t=Vs(ra(ia(Xs)));return na(t,qs),t}function js(t,e){return eo(t,e),Xs.call(e),e}function Gs(t){var e=js(t,ra(ia(Xs)));return na(e,Gs),e}function Ws(t,e,n){return io(t,e,n),Xs.call(n),n}function Xs(){na(this,Xs)}function Ys(t){return to(t),Qs.call(t),t}function Ks(){var t=Ys(ra(ia(Qs)));return na(t,Ks),t}function Js(t,e){return eo(t,e),Qs.call(e),e}function Zs(t){var e=Js(t,ra(ia(Qs)));return na(e,Zs),e}function Qs(){na(this,Qs)}function to(t){return As(t),ro.call(t),t}function eo(t,e){return Rs(t,e),ro.call(e),e}function no(t){var e=eo(t,ra(ia(ro)));return na(e,no),e}function io(t,e,n){return Is(t,e,n),ro.call(n),n}function ro(){na(this,ro)}function ao(){var t,e=(to(t=ra(ia(lo))),lo.call(t),t);return na(e,ao),e}function so(t,e){return eo(t,e),lo.call(e),e}function oo(t){var e=so(t,ra(ia(lo)));return na(e,oo),e}function lo(){na(this,lo)}function uo(t){return aa(t),fo.call(t),t}function co(t,e){return aa(e,t),fo.call(e),e}function ho(t,e,n){return aa(n,t,e),fo.call(n),n}function fo(){na(this,fo)}function _o(t){var e=function(t,e){return Ds(t,e),po.call(e),e}(t,ra(ia(po)));return na(e,_o),e}function po(){na(this,po)}function mo(){var t,e=(uo(t=ra(ia(go))),go.call(t),t);return na(e,mo),e}function go(){na(this,go)}function vo(){var t,e=(to(t=ra(ia(yo))),yo.call(t),t);return na(e,vo),e}function yo(){na(this,yo)}function wo(t){var e=function(t,e){return eo(t,e),bo.call(e),e}(t,ra(ia(bo)));return na(e,wo),e}function bo(){na(this,bo)}function xo(){var t,e=(to(t=ra(ia(So))),So.call(t),t);return na(e,xo),e}function So(){na(this,So)}function Eo(){var t,e=(to(t=ra(ia(Mo))),Mo.call(t),t);return na(e,Eo),e}function Mo(){na(this,Mo)}function To(){var t,e=(to(t=ra(ia(Co))),Co.call(t),t);return na(e,To),e}function Co(){na(this,Co)}function $o(t){var e=function(t,e){return eo(t,e),Ao.call(e),e}(t,ra(ia(Ao)));return na(e,$o),e}function Ao(){na(this,Ao)}function Ro(t,e){return Ma(t,si(e))}function Oo(){}function Io(t){this.vb_1=t,this.ub_1=0}function ko(t,e){this.yb_1=t,Io.call(this,t),V.k1(e,this.yb_1.n()),this.ub_1=e}function Uo(){this.l_1=2147483639}function Po(){Oo.call(this)}function Do(t){this.zb_1=t}function No(t){this.ac_1=t}function Lo(t,e){return e===t?"(this Map)":Tr(e)}function zo(t,e){var n;t:{for(var i=t.z1().s();i.t();){var r=i.u();if(Jr(r.c2(),e)){n=r;break t}}n=null}return n}function Fo(){}function Bo(t){this.bc_1=t,jo.call(this)}function Ho(t){this.dc_1=t,Oo.call(this)}function Vo(){this.f2_1=null,this.g2_1=null}function qo(){}function jo(){Oo.call(this)}function Go(){return t=ra(ia(Qo)),Gt.call(t),Qo.call(t),t.gc_1=Zo().ic_1,t;var t}function Wo(t,n){if(n<0)throw Gs("Deque is too big.");if(n<=t.gc_1.length)return e;if(t.gc_1===Zo().ic_1){var i=t,r=rr(n,10);return i.gc_1=$r(Array(r),null),e}!function(t,e){var n=$r(Array(e),null);Lt(t.gc_1,n,0,t.fc_1,t.gc_1.length),Lt(t.gc_1,n,t.gc_1.length-t.fc_1|0,0,t.fc_1),t.fc_1=0,t.gc_1=n}(t,V.f4(t.gc_1.length,n))}function Xo(t,e){return e>=t.gc_1.length?e-t.gc_1.length|0:e}function Yo(t,e){return e===zi(t.gc_1)?0:e+1|0}function Ko(t,e){return 0===e?zi(t.gc_1):e-1|0}function Jo(){j=this,this.ic_1=[],this.jc_1=10}function Zo(){return null==j&&new Jo,j}function Qo(){Zo(),this.fc_1=0,this.hc_1=0}function tl(t){return 0===t.length?te():ne(new il(t,!0))}function el(){return al()}function nl(t){return t.n()-1|0}function il(t,e){this.qc_1=t,this.rc_1=e}function rl(){G=this,this.uc_1=new ha(-1478467534,-1720727600)}function al(){return null==G&&new rl,G}function sl(){}function ol(t){switch(t.n()){case 0:return el();case 1:return Pt(t.d1(0));default:return t}}function ll(t,e){return Qa(t,yr)?t.n():e}function ul(){var t=(null==X&&new hl,X);return Qa(t,xr)?t:oa()}function cl(t,e){return function(t,e){for(var n=e.s();n.t();){var i=n.u(),r=i.dd(),a=i.ed();t.a2(r,a)}}(e,t),e}function hl(){X=this,this.yc_1=new ha(-888910638,1920087921)}function fl(t,e){for(var n=0,i=e.length;n<i;){var r=e[n];n=n+1|0;var a=r.dd(),s=r.ed();t.a2(a,s)}}function _l(t,e){if(Qa(e,yr))return t.q(e);for(var n=!1,i=e.s();i.t();){var r=i.u();t.p(r)&&(n=!0)}return n}function dl(){}function pl(){}function ml(){}function gl(){}function vl(t){switch(t.jd_1){case 4:return ao();case 5:return Gs("Iterator has failed.");default:return Gs("Unexpected state of the iterator: "+t.jd_1)}}function yl(){gl.call(this),this.jd_1=0,this.kd_1=null,this.ld_1=null,this.md_1=null}function wl(t){this.pd_1=t,this.od_1=t.qd_1.s()}function bl(t,e){this.qd_1=t,this.rd_1=e}function xl(t){for(;t.sd_1.t();){var n=t.sd_1.u();if(t.vd_1.yd_1(n)===t.vd_1.xd_1)return t.ud_1=n,t.td_1=1,e}t.td_1=0}function Sl(t){this.vd_1=t,this.sd_1=t.wd_1.s(),this.td_1=-1,this.ud_1=null}function El(t,e,n){e=e===F||e,this.wd_1=t,this.xd_1=e,this.yd_1=n}function Ml(){return Cl()}function Tl(){Y=this,this.zd_1=new ha(1993859828,793161749)}function Cl(){return null==Y&&new Tl,Y}function $l(){}function Al(){}function Rl(){}function Ol(){}function Il(t,e){var n,i=t.ee(e.c2());if(i===Pl())n=e;else{var r,a=i.bb(K);if(null==a)r=new zl(i,e);else{var s=i.ee(K);r=s===Pl()?new zl(e,a):new zl(new zl(s,e),a)}n=r}return n}function kl(){}function Ul(){J=this,this.he_1=new ha(0,0)}function Pl(){return null==J&&new Ul,J}function Dl(t){for(var e=t,n=2;;){var i=e.ie_1,r=i instanceof zl?i:null;if(null==r)return n;e=r,n=n+1|0}}function Nl(t,e){return Jr(t.bb(e.c2()),e)}function Ll(t,e){return 0===Br(t)?Zr(e):t+", "+e}function zl(t,e){this.ie_1=t,this.je_1=e}function Fl(t,e){this.ae_1=e;var n;n=t instanceof Fl?t.be_1:t,this.be_1=n}function Bl(t){this.ke_1=t}function Hl(){return function(){if(Q)return e;Q=!0,Z=new Vl("COROUTINE_SUSPENDED",0),new Vl("UNDECIDED",1),new Vl("RESUMED",2)}(),Z}function Vl(t,e){Mr.call(this,t,e)}function ql(t){Po.call(this),this.le_1=t}function jl(t,e,n){var i;if(n>0)i=t>=e?e:e-Gl(e,t,n)|0;else{if(!(n<0))throw Ns("Step is zero.");i=t<=e?e:e+Gl(t,e,0|-n)|0}return i}function Gl(t,e,n){return Xl(Xl(t,n)-Xl(e,n)|0,n)}function Wl(t,e,n){return Yl(Yl(t,n).ca(Yl(e,n)),n)}function Xl(t,e){var n=t%e|0;return n>=0?n:n+e|0}function Yl(t,e){var n=t.fa(e);return n.t8(new ha(0,0))>=0?n:n.ba(e)}function Kl(){tt=this,Zl.call(this),this.oe_1=mn()}function Jl(){return null==tt&&new Kl,tt}function Zl(){Jl()}function Ql(t,e){if(!(e>t))throw Ns(Zr(function(t,e){return"Random range is empty: ["+Zr(t)+", "+Zr(e)+")."}(t,e)))}function tu(){et=this,this.re_1=new ha(0,0)}function eu(t,e,n,i,r,a){if(null==et&&new tu,Zl.call(this),this.se_1=t,this.te_1=e,this.ue_1=n,this.ve_1=i,this.we_1=r,this.xe_1=a,0==(this.se_1|this.te_1|this.ue_1|this.ve_1|this.we_1))throw Ns(Zr("Initial state must have at least one non-zero element."));var s=0;if(s<64)do{s=s+1|0,this.v9()}while(s<64)}function nu(){nt=this,this.p8_1=new ru(1,0)}function iu(){return null==nt&&new nu,nt}function ru(t,e){iu(),_u.call(this,t,e,1)}function au(){it=this,this.ze_1=new su(1,0)}function su(t,e){null==it&&new au,pu.call(this,t,e,1)}function ou(){rt=this,this.jf_1=new lu(new ha(1,0),new ha(0,0))}function lu(t,e){null==rt&&new ou,gu.call(this,t,e,new ha(1,0))}function uu(t,e,n){dl.call(this),this.rf_1=n,this.sf_1=e,this.tf_1=this.rf_1>0?t<=e:t>=e,this.uf_1=this.tf_1?t:this.sf_1}function cu(t,e,n){pl.call(this),this.vf_1=n,this.wf_1=e,this.xf_1=this.vf_1>0?hr(t,e)<=0:hr(t,e)>=0;var i;i=this.xf_1?t:this.wf_1,this.yf_1=i}function hu(t,e,n){ml.call(this),this.zf_1=n,this.ag_1=e,this.bg_1=this.zf_1.t8(new ha(0,0))>0?t.t8(e)<=0:t.t8(e)>=0,this.cg_1=this.bg_1?t:this.ag_1}function fu(){}function _u(t,e,i){if(0===i)throw Ns("Step must be non-zero.");if(i===n.MIN_VALUE)throw Ns("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.u8_1=t,this.v8_1=jl(t,e,i),this.w8_1=i}function du(){}function pu(t,e,i){if(0===i)throw Ns("Step must be non-zero.");if(i===n.MIN_VALUE)throw Ns("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.ef_1=t;var r=t,a=e;this.ff_1=ja(jl(r,a,i)),this.gf_1=i}function mu(){}function gu(t,e,n){if(n.equals(new ha(0,0)))throw Ns("Step must be non-zero.");if(ca(),n.equals(new ha(0,-2147483648)))throw Ns("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");this.nf_1=t,this.of_1=function(t,e,n){var i;if(n.t8(new ha(0,0))>0)i=t.t8(e)>=0?e:e.ca(Wl(e,t,n));else{if(!(n.t8(new ha(0,0))<0))throw Ns("Step is zero.");i=t.t8(e)<=0?e:e.ba(Wl(t,e,n.ia()))}return i}(t,e,n),this.pf_1=n}function vu(){}function yu(t,e,n){null!=n?t.j7(n(e)):null==e||is(e)?t.j7(e):e instanceof gr?t.h5(e.a9_1):t.j7(Tr(e))}function wu(t,e,n){if(t===e)return!0;if(!(n=n!==F&&n))return!1;var i=ri(t),r=ri(e);return i===r||zr(dr(i).toLowerCase(),0)===zr(dr(r).toLowerCase(),0)}function bu(){if(!st){st=!0;for(var t=0,e=new Int32Array(128);t<128;)e[t]=-1,t=t+1|0;for(var n=0,i="0123456789abcdef",r=0;r<Br(i);){var a=zr(i,r);r=r+1|0;var s=n;n=s+1|0,e[a]=s}for(var o=0,l="0123456789ABCDEF",u=0;u<Br(l);){var c=zr(l,u);u=u+1|0;var h=o;o=h+1|0,e[c]=h}}}function xu(){ot=this,this.og_1=new Tu(n.MAX_VALUE,n.MAX_VALUE,"  ","","","")}function Su(){return null==ot&&new xu,ot}function Eu(){lt=this,this.pg_1=new Cu("","",!1)}function Mu(){return null==lt&&new Eu,lt}function Tu(t,e,n,i,r,a){Su(),this.ig_1=t,this.jg_1=e,this.kg_1=n,this.lg_1=i,this.mg_1=r,this.ng_1=a}function Cu(t,e,n){Mu(),this.rg_1=t,this.sg_1=e,this.tg_1=n}function $u(){ut=this,this.dg_1=new Ru(!1,Su().og_1,Mu().pg_1),this.eg_1=new Ru(!0,Su().og_1,Mu().pg_1)}function Au(){return null==ut&&new $u,ut}function Ru(t,e,n){Au(),this.fg_1=t,this.gg_1=e,this.hg_1=n}function Ou(t){return t}function Iu(t){return function(t,e){si(e);var n,i,r,a=t.length;if(0===a)return null;var s=zr(t,0);if(hr(s,48)<0){if(1===a)return null;if(n=1,45===s)i=!0,ca(),r=new ha(0,-2147483648);else{if(43!==s)return null;i=!1,ca(),r=new ha(-1,2147483647).ia()}}else n=0,i=!1,ca(),r=new ha(-1,2147483647).ia();ca();var o=new ha(-1,2147483647).ia().ea(Ga(36)),l=o,u=new ha(0,0),c=n;if(c<a)do{var h=c;c=c+1|0;var f=li(zr(t,h),e);if(f<0)return null;if(u.t8(l)<0){if(!l.equals(o))return null;if(l=r.ea(Ga(e)),u.t8(l)<0)return null}var _=u=u.da(Ga(e)),d=r.ba(Ga(f));if(_.t8(d)<0)return null;u=u.ca(Ga(f))}while(c<a);return i?u:u.ia()}(t,10)}function ku(t,e){si(e);var i,r,a,s=t.length;if(0===s)return null;var o=zr(t,0);if(hr(o,48)<0){if(1===s)return null;if(i=1,45===o)r=!0,a=n.MIN_VALUE;else{if(43!==o)return null;r=!1,a=0|-n.MAX_VALUE}}else i=0,r=!1,a=0|-n.MAX_VALUE;var l=(0|-n.MAX_VALUE)/36|0,u=l,c=0,h=i;if(h<s)do{var f=h;h=h+1|0;var _=li(zr(t,f),e);if(_<0)return null;if(c<u){if(u!==l)return null;if(c<(u=a/e|0))return null}if((c=wt(c,e))<(a+_|0))return null;c=c-_|0}while(h<s);return r?c:0|-c}function Uu(t){throw _o("Invalid number format: '"+t+"'")}function Pu(t){return Br(t)-1|0}function Du(t,e,n,i){var r;if(n=n===F?0:n,(i=i!==F&&i)||"string"!=typeof t)r=ju(t,Ar([e]),n,i);else{var a=dr(e);r=t.indexOf(a,n)}return r}function Nu(t,e,n,i){return n=n===F?0:n,(i=i!==F&&i)||"string"!=typeof t?Gu(t,e,n,Br(t),i):t.indexOf(e,n)}function Lu(t){return function(t,e,n,i){return sr(qu(t,e,F,n=n!==F&&n,i=i===F?0:i),(r=t,function(t){return Vu(r,t)}));var r}(t,["\r\n","\n","\r"])}function zu(t,e,n,i){var r;if(n=n===F?Pu(t):n,(i=i!==F&&i)||"string"!=typeof t)r=function(t,e,n,i){if(n=n===F?Pu(t):n,!(i=i!==F&&i)&&1===e.length&&"string"==typeof t){var r=dr(Bi(e));return t.lastIndexOf(r,n)}var a=nr(n,Pu(t));if(0<=a)do{var s=a;a=a+-1|0;var o,l=zr(t,s);t:{for(var u=0,c=e.length;u<c;){var h=e[u];if(u=u+1|0,wu(h,l,i)){o=!0;break t}}o=!1}if(o)return s}while(0<=a);return-1}(t,Ar([e]),n,i);else{var a=dr(e);r=t.lastIndexOf(a,n)}return r}function Fu(t){return function(t){var e=t.s();if(!e.t())return el();var n=e.u();if(!e.t())return Pt(n);var i=te();for(i.p(n);e.t();)i.p(e.u());return i}(Lu(t))}function Bu(t,e,n,i,r,a){if(i<0||e<0||e>(Br(t)-r|0)||i>(Br(n)-r|0))return!1;var s=0;if(s<r)do{var o=s;if(s=s+1|0,!wu(zr(t,e+o|0),zr(n,i+o|0),a))return!1}while(s<r);return!0}function Hu(t,e,n,i){Wu(i);var r=0,a=Nu(t,e,r,n);if(-1===a||1===i)return Pt(Zr(t));var s=i>0,o=ee(s?nr(i,10):10);t:do{var l=Zr(Hr(t,r,a));if(o.p(l),r=a+e.length|0,s&&o.n()===(i-1|0))break t;a=Nu(t,e,r,n)}while(-1!==a);var u=Zr(Hr(t,r,Br(t)));return o.p(u),o}function Vu(t,e){return Zr(Hr(t,e.n8(),e.o8()+1|0))}function qu(t,e,n,i,r){return n=n===F?0:n,i=i!==F&&i,Wu(r=r===F?0:r),new Ku(t,n,r,(a=vs(e),s=i,function(t,e){var n=function(t,e,n,i,r){if(!i&&1===e.n()){var a=Qi(e),s=r?function(t,e,n,i){return n=n===F?Pu(t):n,(i=i!==F&&i)||"string"!=typeof t?Gu(t,e,n,0,i,!0):t.lastIndexOf(e,n)}(t,a,n):Nu(t,a,n);return s<0?null:cc(s,a)}var o=r?er(nr(n,Pu(t)),0):Wa(rr(n,0),Br(t));if("string"==typeof t){var l=o.u8_1,u=o.v8_1,c=o.w8_1;if(c>0&&l<=u||c<0&&u<=l)do{var h,f=l;l=l+c|0;t:{for(var _=e.s();_.t();){var d=_.u();if(gi(d,0,t,f,d.length,i)){h=d;break t}}h=null}if(null!=h)return cc(f,h)}while(f!==u)}else{var p=o.u8_1,m=o.v8_1,g=o.w8_1;if(g>0&&p<=m||g<0&&m<=p)do{var v,y=p;p=p+g|0;t:{for(var w=e.s();w.t();){var b=w.u();if(Bu(b,0,t,y,b.length,i)){v=b;break t}}v=null}if(null!=v)return cc(y,v)}while(y!==m)}return null}(t,a,e,s,!1);return null==n?null:cc(n.bd_1,n.cd_1.length)}));var a,s}function ju(t,e,n,i){if(n=n===F?0:n,!(i=i!==F&&i)&&1===e.length&&"string"==typeof t){var r=dr(Bi(e));return t.indexOf(r,n)}var a=rr(n,0),s=Pu(t);if(a<=s)do{var o=a;a=a+1|0;var l,u=zr(t,o);t:{for(var c=0,h=e.length;c<h;){var f=e[c];if(c=c+1|0,wu(f,u,i)){l=!0;break t}}l=!1}if(l)return o}while(o!==s);return-1}function Gu(t,e,n,i,r,a){var s=(a=a!==F&&a)?er(nr(n,Pu(t)),rr(i,0)):Wa(rr(n,0),nr(i,Br(t)));if("string"==typeof t&&"string"==typeof e){var o=s.u8_1,l=s.v8_1,u=s.w8_1;if(u>0&&o<=l||u<0&&l<=o)do{var c=o;if(o=o+u|0,gi(e,0,t,c,Br(e),r))return c}while(c!==l)}else{var h=s.u8_1,f=s.v8_1,_=s.w8_1;if(_>0&&h<=f||_<0&&f<=h)do{var d=h;if(h=h+_|0,Bu(e,0,t,d,Br(e),r))return d}while(d!==f)}return-1}function Wu(t){if(!(t>=0))throw Ns(Zr("Limit must be non-negative, but was "+t))}function Xu(t){if(t.wg_1<0)t.ug_1=0,t.xg_1=null;else{var e;if(t.zg_1.ch_1>0?(t.yg_1=t.yg_1+1|0,e=t.yg_1>=t.zg_1.ch_1):e=!1,e||t.wg_1>Br(t.zg_1.ah_1))t.xg_1=Wa(t.vg_1,Pu(t.zg_1.ah_1)),t.wg_1=-1;else{var n=t.zg_1.dh_1(t.zg_1.ah_1,t.wg_1);if(null==n)t.xg_1=Wa(t.vg_1,Pu(t.zg_1.ah_1)),t.wg_1=-1;else{var i=n.dd(),r=n.ed();t.xg_1=tr(t.vg_1,i),t.vg_1=i+r|0,t.wg_1=t.vg_1+(0===r?1:0)|0}}t.ug_1=1}}function Yu(t){this.zg_1=t,this.ug_1=-1,this.vg_1=ir(t.bh_1,0,Br(t.ah_1)),this.wg_1=this.vg_1,this.xg_1=null,this.yg_1=0}function Ku(t,e,n,i){this.ah_1=t,this.bh_1=e,this.ch_1=n,this.dh_1=i}function Ju(t,e){Mr.call(this,t,e)}function Zu(t){this.eh_1=t,this.fh_1=ft}function Qu(){}function tc(t){return t}function ec(t){return t}function nc(t){return t instanceof ac}function ic(t){return t instanceof ac?t.hh_1:null}function rc(){}function ac(t){this.hh_1=t}function sc(t){return new ac(t)}function oc(t){if(t instanceof ac)throw t.hh_1}function lc(t){co(t=t===F?"An operation is not implemented.":t,this),na(this,lc)}function uc(t,e){this.bd_1=t,this.cd_1=e}function cc(t,e){return new uc(t,e)}function hc(t){return t}function fc(t){return t}function _c(){dt=this,this.ih_1=0,this.jh_1=-1,this.kh_1=1,this.lh_1=8}function dc(t,e){return jr(255&t,255&e)}function pc(t){null==dt&&new _c,this.mh_1=t}function mc(t){return t}function gc(){pt=this,this.oh_1=0,this.ph_1=-1,this.qh_1=4,this.rh_1=32}function vc(){return null==pt&&new gc,pt}function yc(t,e){return Oc(t,e)}function wc(t){vc(),this.sh_1=t}function bc(){mt=this,this.uh_1=new ha(0,0),this.vh_1=new ha(-1,-1),this.wh_1=8,this.xh_1=64}function xc(t,e){return function(t,e){ca();var n=t.qa(new ha(0,-2147483648));return ca(),n.t8(e.qa(new ha(0,-2147483648)))}(t,e)}function Sc(t){return function(t,e){if(t.t8(new ha(0,0))>=0)return Ro(t,e);var n=t.na(1).ea(Ga(e)).la(1),i=n.da(Ga(e)),r=t.ca(i);return r.t8(Ga(e))>=0&&(r=r.ca(Ga(e)),n=n.ba(Ga(1))),Ro(n,e)+Ro(r,e)}(t,10)}function Ec(t){null==mt&&new bc,this.yh_1=t}function Mc(t){return t}function Tc(t){return t}function Cc(){gt=this,this.ai_1=0,this.bi_1=-1,this.ci_1=2,this.di_1=16}function $c(){return null==gt&&new Cc,gt}function Ac(t,e){return jr(65535&t,65535&e)}function Rc(t){$c(),this.ei_1=t}function Oc(t,e){return jr(t^n.MIN_VALUE,e^n.MIN_VALUE)}function Ic(t,e){var n=Ga(t).oa(new ha(-1,0)),i=Ga(e).oa(new ha(-1,0));return n.ea(i).y8()}return La(Mt,"CharSequence",za),La(Tt,"Comparable",za),La(Ct,"Number",Da),La($t,"Unit",Fa),La(At,"IntCompanionObject",Fa),La(Rt,"FloatCompanionObject",Fa),La(Ot,"DoubleCompanionObject",Fa),La(yr,"Collection",za),La(Oo,"AbstractCollection",Da,F,[yr]),La(Vt,"AbstractMutableCollection",Da,Oo,[Oo,yr]),La(qt,"IteratorImpl",Da),La(jt,"ListIteratorImpl",Da,qt),La(vr,"List",za,F,[yr]),La(wr,"MutableList",za,F,[vr,yr]),La(Gt,"AbstractMutableList",Da,Vt,[Vt,wr]),La(xr,"Map",za),La(Vo,"AbstractMap",Da,F,[xr]),La(Wt,"AbstractMutableMap",Da,Vo,[Vo,xr]),La(Sr,"Set",za,F,[yr]),La(Xt,"AbstractMutableSet",Da,Vt,[Vt,yr,Sr]),La(Qt,"Companion",Fa),La(re,"ArrayList",Da,Gt,[Gt,wr],te),La(fe,"HashMap",Da,Wt,[Wt,xr],(function(){return ue(ra(ia(fe)))})),La(_e,"HashMapKeys",Da,Xt,[yr,Sr,Xt]),La(de,"HashMapValues",Da,Vt,[yr,Vt]),La(me,"HashMapEntrySetBase",Da,Xt,[yr,Sr,Xt]),La(pe,"HashMapEntrySet",Da,me),La(ge,F,Da),La(ve,"HashMapKeysDefault",Da,Xt),La(ye,F,Da),La(we,"HashMapValuesDefault",Da,Vt),La(Te,"HashSet",Da,Xt,[Xt,yr,Sr],(function(){return xe(ra(ia(Te)))})),La(qe,"Companion",Fa),La(je,"Itr",Da),La(Ge,"KeysItr",Da,je),La(We,"ValuesItr",Da,je),La(Xe,"EntriesItr",Da,je),La(br,"Entry",za),La(Ye,"EntryRef",Da,F,[br]),La(Je,"InternalMap",za),La(Ke,"InternalHashMap",Da,F,[Je],Ae),La(en,"LinkedHashMap",Da,fe,[fe,xr],Ze),La(on,"LinkedHashSet",Da,Te,[Te,yr,Sr],nn),La(ln,"BaseOutput",Da),La(un,"NodeJsOutput",Da,ln),La(hn,"BufferedOutput",Da,ln,F,hn),La(cn,"BufferedOutputToConsoleLog",Da,hn,F,cn),La(ks,"Exception",Da,Error,F,(function t(){var e=As(ra(ia(ks)));return na(e,t),e})),La(ro,"RuntimeException",Da,ks,F,(function t(){var e=to(ra(ia(ro)));return na(e,t),e})),La(Xs,"IllegalStateException",Da,ro,F,qs),La(pn,"CancellationException",Da,Xs,F,(function t(){var e,n=(Vs(e=ra(ia(pn))),pn.call(e),e);return na(n,t),n})),La(gn,"KClass",za),La(vn,"KClassImpl",Da,F,[gn]),La(yn,"NothingKClassImpl",Fa,vn),La(bn,"ErrorKClass",Da,F,[gn],bn),La(xn,"PrimitiveKClassImpl",Da,vn),La(Sn,"SimpleKClassImpl",Da,vn),La(En,"KProperty0",za),La(Mn,"KProperty1",za),La(Tn,"KMutableProperty1",za,F,[Mn]),La(Cn,"KMutableProperty0",za,F,[En]),La($n,"KTypeImpl",Da),La(Yn,"PrimitiveClasses",Fa),La(Qn,"CharacterCodingException",Da,ks,F,(function t(){var e,n=(e=ra(ia(Qn)),Qn.call(e,null),e);return na(n,t),n})),La(ii,"StringBuilder",Da,F,[Mt],ni),La(ui,"Companion",Fa),La(hi,"Regex",Da),La(_i,"sam$kotlin_Comparator$0",Da),La($i,"ExceptionTraceBuilder",Da,F,F,$i),La(lr,F,Da),La(pr,"Companion",Fa),La(gr,"Char",Da,F,[Tt]),La(Er,"Companion",Fa),La(Mr,"Enum",Da,F,[Tt]),La(Rr,F,Da),La(dl,"IntIterator",Da),La(Or,F,Da,dl),La(ua,"Companion",Fa),La(ha,"Long",Da,Ct,[Ct,Tt]),La(bs,"Digit",Fa),La($l,"Continuation",za),La(Es,"CoroutineImpl",Da,F,[$l]),La(Ms,"CompletedContinuation",Fa,F,[$l]),La($s,F,Da,Es),La(Ls,"IllegalArgumentException",Da,ro,F,Ps),La(Hs,"IndexOutOfBoundsException",Da,ro,F,zs),La(Qs,"UnsupportedOperationException",Da,ro,F,Ks),La(lo,"NoSuchElementException",Da,ro,F,ao),La(fo,"Error",Da,Error,F,(function t(){var e=uo(ra(ia(fo)));return na(e,t),e})),La(po,"NumberFormatException",Da,Ls,F,(function t(){var e,n=(Us(e=ra(ia(po))),po.call(e),e);return na(n,t),n})),La(go,"AssertionError",Da,fo,F,mo),La(yo,"NullPointerException",Da,ro,F,vo),La(bo,"ArithmeticException",Da,ro,F,(function t(){var e,n=(to(e=ra(ia(bo))),bo.call(e),e);return na(n,t),n})),La(So,"ConcurrentModificationException",Da,ro,F,xo),La(Mo,"NoWhenBranchMatchedException",Da,ro,F,Eo),La(Co,"ClassCastException",Da,ro,F,To),La(Ao,"UninitializedPropertyAccessException",Da,ro,F,(function t(){var e,n=(to(e=ra(ia(Ao))),Ao.call(e),e);return na(n,t),n})),La(Io,"IteratorImpl",Da),La(ko,"ListIteratorImpl",Da,Io),La(Uo,"Companion",Fa),La(Po,"AbstractList",Da,Oo,[Oo,vr]),La(Do,F,Da),La(No,F,Da),La(Fo,"Companion",Fa),La(jo,"AbstractSet",Da,Oo,[Oo,Sr]),La(Bo,F,Da,jo),La(Ho,F,Da,Oo),La(qo,"Companion",Fa),La(Jo,"Companion",Fa),La(Qo,"ArrayDeque",Da,Gt,F,Go),La(il,"ArrayAsCollection",Da,F,[yr]),La(rl,"EmptyList",Fa,F,[vr]),La(sl,"EmptyIterator",Fa),La(hl,"EmptyMap",Fa,F,[xr]),La(pl,"CharIterator",Da),La(ml,"LongIterator",Da),La(gl,"SequenceScope",Da,F,F,F,F,F,[1]),La(yl,"SequenceBuilderIterator",Da,gl,[gl,$l],yl,F,F,[1]),La(wl,F,Da),La(bl,"TransformingSequence",Da),La(Sl,F,Da),La(El,"FilteringSequence",Da),La(Tl,"EmptySet",Fa,F,[Sr]),La(Al,"Key",Fa),La(kl,"CoroutineContext",za),La(Ol,"Element",za,F,[kl]),La(Rl,"ContinuationInterceptor",za,F,[Ol]),La(Ul,"EmptyCoroutineContext",Fa,F,[kl]),La(zl,"CombinedContext",Da,F,[kl]),La(Fl,"AbstractCoroutineContextKey",Da),La(Bl,"AbstractCoroutineContextElement",Da,F,[Ol]),La(Vl,"CoroutineSingletons",Da,Mr),La(ql,"EnumEntriesList",Da,Po,[vr,Po]),La(Zl,"Random",Da),La(Kl,"Default",Fa,Zl),La(tu,"Companion",Fa),La(eu,"XorWowRandom",Da,Zl),La(nu,"Companion",Fa),La(_u,"IntProgression",Da),La(vu,"ClosedRange",za),La(ru,"IntRange",Da,_u,[_u,vu]),La(au,"Companion",Fa),La(pu,"CharProgression",Da),La(su,"CharRange",Da,pu,[pu,vu]),La(ou,"Companion",Fa),La(gu,"LongProgression",Da),La(lu,"LongRange",Da,gu,[gu,vu]),La(uu,"IntProgressionIterator",Da,dl),La(cu,"CharProgressionIterator",Da,pl),La(hu,"LongProgressionIterator",Da,ml),La(fu,"Companion",Fa),La(du,"Companion",Fa),La(mu,"Companion",Fa),La(xu,"Companion",Fa),La(Eu,"Companion",Fa),La(Tu,"BytesHexFormat",Da),La(Cu,"NumberHexFormat",Da),La($u,"Companion",Fa),La(Ru,"HexFormat",Da),La(Yu,F,Da),La(Ku,"DelimitedRangesSequence",Da),La(Ju,"LazyThreadSafetyMode",Da,Mr),La(Zu,"UnsafeLazyImpl",Da),La(Qu,"UNINITIALIZED_VALUE",Fa),La(rc,"Companion",Fa),La(ac,"Failure",Da),La(lc,"NotImplementedError",Da,fo,F,lc),La(uc,"Pair",Da),La(_c,"Companion",Fa),La(pc,"UByte",Da,F,[Tt]),La(gc,"Companion",Fa),La(wc,"UInt",Da,F,[Tt]),La(bc,"Companion",Fa),La(Ec,"ULong",Da,F,[Tt]),La(Cc,"Companion",Fa),La(Rc,"UShort",Da,F,[Tt]),ia($t).toString=function(){return"kotlin.Unit"},ia(At).e=function(){return this.MIN_VALUE},ia(At).f=function(){return this.MAX_VALUE},ia(At).g=function(){return this.SIZE_BYTES},ia(At).h=function(){return this.SIZE_BITS},ia(Rt).e=function(){return this.MIN_VALUE},ia(Rt).f=function(){return this.MAX_VALUE},ia(Rt).i=function(){return this.POSITIVE_INFINITY},ia(Rt).j=function(){return this.NEGATIVE_INFINITY},ia(Rt).k=function(){return this.NaN},ia(Rt).g=function(){return this.SIZE_BYTES},ia(Rt).h=function(){return this.SIZE_BITS},ia(Ot).e=function(){return this.MIN_VALUE},ia(Ot).f=function(){return this.MAX_VALUE},ia(Ot).i=function(){return this.POSITIVE_INFINITY},ia(Ot).j=function(){return this.NEGATIVE_INFINITY},ia(Ot).k=function(){return this.NaN},ia(Ot).g=function(){return this.SIZE_BYTES},ia(Ot).h=function(){return this.SIZE_BITS},ia(Vt).q=function(t){this.r();for(var e=!1,n=t.s();n.t();){var i=n.u();this.p(i)&&(e=!0)}return e},ia(Vt).v=function(){this.r();for(var t=this.s();t.t();)t.u(),t.w()},ia(Vt).toJSON=function(){return this.toArray()},ia(Vt).r=function(){},ia(qt).t=function(){return this.a1_1<this.c1_1.n()},ia(qt).u=function(){if(!this.t())throw ao();var t=this.a1_1;return this.a1_1=t+1|0,this.b1_1=t,this.c1_1.d1(this.b1_1)},ia(qt).w=function(){if(-1===this.b1_1)throw Gs(Zr("Call next() or previous() before removing element from the iterator."));this.c1_1.f1(this.b1_1),this.a1_1=this.b1_1,this.b1_1=-1},ia(Gt).p=function(t){return this.r(),this.l1(this.n(),t),!0},ia(Gt).v=function(){this.r(),this.m1(0,this.n())},ia(Gt).s=function(){return new qt(this)},ia(Gt).x=function(t){return this.n1(t)>=0},ia(Gt).n1=function(t){var e;t:{for(var n=0,i=this.s();i.t();){if(Jr(i.u(),t)){e=n;break t}n=n+1|0}e=-1}return e},ia(Gt).o1=function(t){return new jt(this,t)},ia(Gt).m1=function(t,e){var n=this.o1(t),i=e-t|0,r=0;if(r<i)do{r=r+1|0,n.u(),n.w()}while(r<i)},ia(Gt).equals=function(t){return t===this||!(null==t||!Qa(t,vr))&&V.p1(this,t)},ia(Gt).hashCode=function(){return V.q1(this)},ia(Wt).v1=function(){return new ve(this)},ia(Wt).w1=function(){return new we(this)},ia(Wt).x1=function(){var t,e=this.t1_1;if(null==e){var n=this.v1();this.t1_1=n,t=n}else t=e;return t},ia(Wt).y1=function(){var t,e=this.u1_1;if(null==e){var n=this.w1();this.u1_1=n,t=n}else t=e;return t},ia(Wt).v=function(){this.z1().v()},ia(Wt).b2=function(t){this.r();for(var e=t.z1().s();e.t();){var n=e.u(),i=n.c2(),r=n.d2();this.a2(i,r)}},ia(Wt).e2=function(t){this.r();for(var e=this.z1().s();e.t();){var n=e.u();if(Jr(t,n.c2())){var i=n.d2();return e.w(),i}}return null},ia(Wt).r=function(){},ia(Xt).equals=function(t){return t===this||!(null==t||!Qa(t,Sr))&&q.l2(this,t)},ia(Xt).hashCode=function(){return q.m2(this)},ia(re).s2=function(t){},ia(re).n=function(){return this.o2_1.length},ia(re).d1=function(t){var e=this.o2_1[ie(this,t)];return null==e||null!=e?e:oa()},ia(re).o=function(t,e){this.r(),ie(this,t);var n=this.o2_1[t];return this.o2_1[t]=e,null==n||null!=n?n:oa()},ia(re).p=function(t){return this.r(),this.o2_1.push(t),this.e1_1=this.e1_1+1|0,!0},ia(re).l1=function(t,e){this.r(),this.o2_1.splice(function(t,e){return V.k1(e,t.n()),e}(this,t),0,e),this.e1_1=this.e1_1+1|0},ia(re).q=function(t){if(this.r(),t.z())return!1;for(var e=(o=this,l=t.n(),u=void 0,u=o.n(),o.o2_1.length=o.n()+l|0,u),n=0,i=t.s();i.t();){var r=i.u(),a=n;n=a+1|0;var s=Bt(a);this.o2_1[e+s|0]=r}var o,l,u;return this.e1_1=this.e1_1+1|0,!0},ia(re).f1=function(t){return this.r(),ie(this,t),this.e1_1=this.e1_1+1|0,t===nl(this)?this.o2_1.pop():this.o2_1.splice(t,1)[0]},ia(re).m1=function(t,e){this.r(),this.e1_1=this.e1_1+1|0,this.o2_1.splice(t,e-t|0)},ia(re).v=function(){this.r(),this.o2_1=[],this.e1_1=this.e1_1+1|0},ia(re).n1=function(t){return Ri(this.o2_1,t)},ia(re).toString=function(){return ki(this.o2_1,", ","[","]",F,F,qr)},ia(re).t2=function(){return[].slice.call(this.o2_1)},ia(re).toArray=function(){return this.t2()},ia(re).r=function(){if(this.p2_1)throw Ks()},ia(fe).v=function(){this.y2_1.v()},ia(fe).h2=function(t){return this.y2_1.a3(t)},ia(fe).i2=function(t){return this.y2_1.i2(t)},ia(fe).v1=function(){return new _e(this.y2_1)},ia(fe).w1=function(){return new de(this.y2_1)},ia(fe).z1=function(){var t,e=this.z2_1;if(null==e){var n=new pe(this.y2_1);this.z2_1=n,t=n}else t=e;return t},ia(fe).k2=function(t){return this.y2_1.k2(t)},ia(fe).a2=function(t,e){return this.y2_1.a2(t,e)},ia(fe).e2=function(t){return this.y2_1.e2(t)},ia(fe).n=function(){return this.y2_1.n()},ia(fe).b2=function(t){return this.y2_1.b2(t)},ia(_e).n=function(){return this.b3_1.n()},ia(_e).z=function(){return 0===this.b3_1.n()},ia(_e).x=function(t){return this.b3_1.a3(t)},ia(_e).v=function(){return this.b3_1.v()},ia(_e).p=function(t){throw Ks()},ia(_e).q=function(t){throw Ks()},ia(_e).s=function(){return this.b3_1.c3()},ia(_e).r=function(){return this.b3_1.r()},ia(de).n=function(){return this.d3_1.n()},ia(de).z=function(){return 0===this.d3_1.n()},ia(de).e3=function(t){return this.d3_1.i2(t)},ia(de).x=function(t){return(null==t||null!=t)&&this.e3(null==t||null!=t?t:oa())},ia(de).f3=function(t){throw Ks()},ia(de).p=function(t){return this.f3(null==t||null!=t?t:oa())},ia(de).g3=function(t){throw Ks()},ia(de).q=function(t){return this.g3(t)},ia(de).s=function(){return this.d3_1.h3()},ia(de).r=function(){return this.d3_1.r()},ia(pe).s=function(){return this.j3_1.k3()},ia(me).n=function(){return this.j3_1.n()},ia(me).z=function(){return 0===this.j3_1.n()},ia(me).l3=function(t){return this.j3_1.n3(t)},ia(me).x=function(t){return!(null==t||!Qa(t,br))&&this.l3(null!=t&&Qa(t,br)?t:oa())},ia(me).v=function(){return this.j3_1.v()},ia(me).m3=function(t){throw Ks()},ia(me).p=function(t){return this.m3(null!=t&&Qa(t,br)?t:oa())},ia(me).q=function(t){throw Ks()},ia(me).y=function(t){return this.j3_1.o3(t)},ia(me).r=function(){return this.j3_1.r()},ia(ge).t=function(){return this.p3_1.t()},ia(ge).u=function(){return this.p3_1.u().c2()},ia(ge).w=function(){return this.p3_1.w()},ia(ve).r3=function(t){throw Zs("Add is not supported on keys")},ia(ve).p=function(t){return this.r3(null==t||null!=t?t:oa())},ia(ve).v=function(){return this.q3_1.v()},ia(ve).a3=function(t){return this.q3_1.h2(t)},ia(ve).x=function(t){return(null==t||null!=t)&&this.a3(null==t||null!=t?t:oa())},ia(ve).s=function(){return new ge(this.q3_1.z1().s())},ia(ve).n=function(){return this.q3_1.n()},ia(ve).r=function(){return this.q3_1.r()},ia(ye).t=function(){return this.s3_1.t()},ia(ye).u=function(){return this.s3_1.u().d2()},ia(ye).w=function(){return this.s3_1.w()},ia(we).f3=function(t){throw Zs("Add is not supported on values")},ia(we).p=function(t){return this.f3(null==t||null!=t?t:oa())},ia(we).e3=function(t){return this.t3_1.i2(t)},ia(we).x=function(t){return(null==t||null!=t)&&this.e3(null==t||null!=t?t:oa())},ia(we).s=function(){return new ye(this.t3_1.z1().s())},ia(we).n=function(){return this.t3_1.n()},ia(we).r=function(){return this.t3_1.r()},ia(Te).p=function(t){return null==this.u3_1.a2(t,!0)},ia(Te).v=function(){this.u3_1.v()},ia(Te).x=function(t){return this.u3_1.a3(t)},ia(Te).z=function(){return 0===this.u3_1.n()},ia(Te).s=function(){return this.u3_1.c3()},ia(Te).n=function(){return this.u3_1.n()},ia(je).o4=function(){for(;this.l4_1<this.k4_1.a4_1&&this.k4_1.x3_1[this.l4_1]<0;)this.l4_1=this.l4_1+1|0},ia(je).t=function(){return this.l4_1<this.k4_1.a4_1},ia(je).w=function(){if(this.p4(),-1===this.m4_1)throw Gs(Zr("Call next() before removing element from the iterator."));this.k4_1.r(),He(this.k4_1,this.m4_1),this.m4_1=-1,this.n4_1=this.k4_1.c4_1},ia(je).p4=function(){if(this.k4_1.c4_1!==this.n4_1)throw xo()},ia(Ge).u=function(){if(this.p4(),this.l4_1>=this.k4_1.a4_1)throw ao();var t=this.l4_1;this.l4_1=t+1|0,this.m4_1=t;var e=this.k4_1.v3_1[this.m4_1];return this.o4(),e},ia(We).u=function(){if(this.p4(),this.l4_1>=this.k4_1.a4_1)throw ao();var t=this.l4_1;this.l4_1=t+1|0,this.m4_1=t;var e=sa(this.k4_1.w3_1)[this.m4_1];return this.o4(),e},ia(Xe).u=function(){if(this.p4(),this.l4_1>=this.k4_1.a4_1)throw ao();var t=this.l4_1;this.l4_1=t+1|0,this.m4_1=t;var e=new Ye(this.k4_1,this.m4_1);return this.o4(),e},ia(Xe).c5=function(){if(this.l4_1>=this.k4_1.a4_1)throw ao();var t=this.l4_1;this.l4_1=t+1|0,this.m4_1=t;var e=this.k4_1.v3_1[this.m4_1],n=null==e?null:Kr(e),i=null==n?0:n,r=sa(this.k4_1.w3_1)[this.m4_1],a=null==r?null:Kr(r),s=i^(null==a?0:a);return this.o4(),s},ia(Xe).d5=function(t){if(this.l4_1>=this.k4_1.a4_1)throw ao();var e=this.l4_1;this.l4_1=e+1|0,this.m4_1=e;var n=this.k4_1.v3_1[this.m4_1];Jr(n,this.k4_1)?t.g5("(this Map)"):t.f5(n),t.h5(61);var i=sa(this.k4_1.w3_1)[this.m4_1];Jr(i,this.k4_1)?t.g5("(this Map)"):t.f5(i),this.o4()},ia(Ye).c2=function(){return this.i5_1.v3_1[this.j5_1]},ia(Ye).d2=function(){return sa(this.i5_1.w3_1)[this.j5_1]},ia(Ye).equals=function(t){return!(null==t||!Qa(t,br)||!Jr(t.c2(),this.c2()))&&Jr(t.d2(),this.d2())},ia(Ye).hashCode=function(){var t=this.c2(),e=null==t?null:Kr(t),n=null==e?0:e,i=this.d2(),r=null==i?null:Kr(i);return n^(null==r?0:r)},ia(Ye).toString=function(){return this.c2()+"="+this.d2()},ia(Ke).n=function(){return this.d4_1},ia(Ke).i2=function(t){return function(t,e){for(var n=t.a4_1;(n=n-1|0)>=0;)if(t.x3_1[n]>=0&&Jr(sa(t.w3_1)[n],e))return n;return-1}(this,t)>=0},ia(Ke).k2=function(t){var e=Fe(this,t);return e<0?null:sa(this.w3_1)[e]},ia(Ke).a3=function(t){return Fe(this,t)>=0},ia(Ke).a2=function(t,e){var n=Be(this,t),i=De(this);if(n<0){var r=i[(0|-n)-1|0];return i[(0|-n)-1|0]=e,r}return i[n]=e,null},ia(Ke).b2=function(t){this.r(),function(t,e){if(e.z())return!1;Pe(t,e.n());for(var n=e.s(),i=!1;n.t();)Ve(t,n.u())&&(i=!0)}(this,t.z1())},ia(Ke).e2=function(t){var e=function(t,e){t.r();var n=Fe(t,e);return n<0?-1:(He(t,n),n)}(this,t);if(e<0)return null;var n=sa(this.w3_1),i=n[e];return Kt(n,e),i},ia(Ke).v=function(){this.r();var t=0,e=this.a4_1-1|0;if(t<=e)do{var n=t;t=t+1|0;var i=this.x3_1[n];i>=0&&(this.y3_1[i]=0,this.x3_1[n]=-1)}while(n!==e);Jt(this.v3_1,0,this.a4_1);var r=this.w3_1;null==r||Jt(r,0,this.a4_1),this.d4_1=0,this.a4_1=0,Ue(this)},ia(Ke).equals=function(t){return t===this||!(null==t||!Qa(t,xr))&&function(t,e){return t.d4_1===e.n()&&t.o3(e.z1())}(this,t)},ia(Ke).hashCode=function(){for(var t=0,e=this.k3();e.t();)t=t+e.c5()|0;return t},ia(Ke).toString=function(){var t=ti(wt(this.d4_1,3));t.g5("{");for(var e=0,n=this.k3();n.t();)e>0&&t.g5(", "),n.d5(t),e=e+1|0;return t.g5("}"),t.toString()},ia(Ke).r=function(){if(this.e4_1)throw Ks()},ia(Ke).n3=function(t){var e=Fe(this,t.c2());return!(e<0)&&Jr(sa(this.w3_1)[e],t.d2())},ia(Ke).k5=function(t){return this.n3(Qa(t,br)?t:oa())},ia(Ke).c3=function(){return new Ge(this)},ia(Ke).h3=function(){return new We(this)},ia(Ke).k3=function(){return new Xe(this)},ia(en).r=function(){return this.y2_1.r()},ia(on).r=function(){return this.u3_1.r()},ia(ln).s5=function(){this.t5("\n")},ia(ln).u5=function(t){this.t5(t),this.s5()},ia(un).t5=function(t){var e=String(t);this.v5_1.write(e)},ia(cn).t5=function(t){var e=String(t),n=e.lastIndexOf("\n",0);if(n>=0){var i=this.x5_1;this.x5_1=i+e.substring(0,n),this.y5();var r=n+1|0;e=e.substring(r)}this.x5_1=this.x5_1+e},ia(cn).y5=function(){console.log(this.x5_1),this.x5_1=""},ia(hn).t5=function(t){var e=this.x5_1;this.x5_1=e+String(t)},ia(vn).e6=function(){return this.d6_1},ia(vn).equals=function(t){return!(t instanceof yn)&&!(t instanceof bn)&&t instanceof vn&&Jr(this.e6(),t.e6())},ia(vn).hashCode=function(){var t=this.b6(),e=null==t?null:ta(t);return null==e?0:e},ia(vn).toString=function(){return"class "+this.b6()},ia(yn).b6=function(){return this.g6_1},ia(yn).c6=function(t){return!1},ia(yn).e6=function(){throw Zs("There's no native JS class for Nothing type")},ia(yn).equals=function(t){return t===this},ia(yn).hashCode=function(){return 0},ia(bn).b6=function(){throw Gs(Zr("Unknown simpleName for ErrorKClass"))},ia(bn).c6=function(t){throw Gs(Zr("Can's check isInstance on ErrorKClass"))},ia(bn).equals=function(t){return t===this},ia(bn).hashCode=function(){return 0},ia(xn).equals=function(t){return t instanceof xn&&!!ia(vn).equals.call(this,t)&&this.i6_1===t.i6_1},ia(xn).b6=function(){return this.i6_1},ia(xn).c6=function(t){return this.j6_1(t)},ia(Sn).b6=function(){return this.l6_1},ia(Sn).c6=function(t){return fs(t,this.e6())},ia($n).equals=function(t){return!!(t instanceof $n&&Jr(this.m6_1,t.m6_1)&&Jr(this.n6_1,t.n6_1))&&this.o6_1===t.o6_1},ia($n).hashCode=function(){return wt(wt(Kr(this.m6_1),31)+Kr(this.n6_1)|0,31)+Qr(this.o6_1)|0},ia($n).toString=function(){var t=this.m6_1,e=Qa(t,gn)?t:null,n=null==e?Zr(this.m6_1):null!=e.b6()?e.b6():"(non-denotable type)",i=this.n6_1.z()?"":Hi(this.n6_1,", ","<",">"),r=this.o6_1?"?":"";return function(t,e){var n=null==t?null:Zr(t),i=null==n?"null":n,r=null==e?null:Zr(e);return i+(null==r?"null":r)}(n,i)+r},ia(Yn).p6=function(){return this.anyClass},ia(Yn).q6=function(){return this.numberClass},ia(Yn).r6=function(){return this.nothingClass},ia(Yn).s6=function(){return this.booleanClass},ia(Yn).t6=function(){return this.byteClass},ia(Yn).u6=function(){return this.shortClass},ia(Yn).v6=function(){return this.intClass},ia(Yn).w6=function(){return this.floatClass},ia(Yn).x6=function(){return this.doubleClass},ia(Yn).y6=function(){return this.arrayClass},ia(Yn).z6=function(){return this.stringClass},ia(Yn).a7=function(){return this.throwableClass},ia(Yn).b7=function(){return this.booleanArrayClass},ia(Yn).c7=function(){return this.charArrayClass},ia(Yn).d7=function(){return this.byteArrayClass},ia(Yn).e7=function(){return this.shortArrayClass},ia(Yn).f7=function(){return this.intArrayClass},ia(Yn).g7=function(){return this.longArrayClass},ia(Yn).h7=function(){return this.floatArrayClass},ia(Yn).i7=function(){return this.doubleArrayClass},ia(Yn).functionClass=function(t){var e,n,i=An()[t];if(null==i){var r=new xn(Function,"Function"+t,(n=t,function(t){return"function"==typeof t&&t.length===n}));An()[t]=r,e=r}else e=i;return e},ia(ii).a=function(){return this.e5_1.length},ia(ii).b=function(t){var e=this.e5_1;if(!(t>=0&&t<=Pu(e)))throw Bs("index: "+t+", length: "+this.a()+"}");return zr(e,t)},ia(ii).c=function(t,e){return this.e5_1.substring(t,e)},ia(ii).h5=function(t){return this.e5_1=this.e5_1+dr(t),this},ia(ii).j7=function(t){return this.e5_1=this.e5_1+Tr(t),this},ia(ii).k7=function(t,e,n){return this.l7(null==t?"null":t,e,n)},ia(ii).f5=function(t){return this.e5_1=this.e5_1+Tr(t),this},ia(ii).m7=function(t){return this.e5_1=this.e5_1+t,this},ia(ii).n7=function(t){return this.g5(t.toString())},ia(ii).g5=function(t){var e=this.e5_1;return this.e5_1=e+(null==t?"null":t),this},ia(ii).toString=function(){return this.e5_1},ia(ii).o7=function(t){V.r2(t,this.a());var e=this.e5_1.substring(0,t),n=this.e5_1,i=t+1|0;return this.e5_1=e+n.substring(i),this},ia(ii).l7=function(t,e,n){var i=Zr(t);V.p7(e,n,i.length);var r=this.e5_1;return this.e5_1=r+i.substring(e,n),this},ia(ui).t7=function(t){var e=this.q7_1;return t.replace(e,"\\$&")},ia(ui).u7=function(t){var e=this.s7_1;return t.replace(e,"$$$$")},ia(hi).toString=function(){return this.x7_1.toString()},ia(_i).e8=function(t,e){return this.d8_1(t,e)},ia(_i).compare=function(t,e){return this.e8(t,e)},ia($i).j8=function(t){return Ti(t,this,"",""),this.f8_1.toString()},ia(lr).s=function(){return this.z8_1.s()},ia(gr).l9=function(t){return hr(this.a9_1,t)},ia(gr).d=function(t){return function(t,e){return hr(t.a9_1,e instanceof gr?e.a9_1:oa())}(this,t)},ia(gr).equals=function(t){return function(t,e){return e instanceof gr&&t===e.a9_1}(this.a9_1,t)},ia(gr).hashCode=function(){return this.a9_1},ia(gr).toString=function(){return dr(this.a9_1)},ia(Mr).o9=function(){return this.m9_1},ia(Mr).p9=function(){return this.n9_1},ia(Mr).q9=function(t){return jr(this.n9_1,t.n9_1)},ia(Mr).d=function(t){return this.q9(t instanceof Mr?t:oa())},ia(Mr).equals=function(t){return this===t},ia(Mr).hashCode=function(){return Xr(this)},ia(Mr).toString=function(){return this.m9_1},ia(Rr).t=function(){return!(this.r9_1===this.s9_1.length)},ia(Rr).u=function(){if(this.r9_1===this.s9_1.length)throw oo(""+this.r9_1);var t=this.r9_1;return this.r9_1=t+1|0,this.s9_1[t]},ia(Or).t=function(){return!(this.t9_1===this.u9_1.length)},ia(Or).v9=function(){if(this.t9_1===this.u9_1.length)throw oo(""+this.t9_1);var t=this.t9_1;return this.t9_1=t+1|0,this.u9_1[t]},ia(ha).t8=function(t){return ga(this,t)},ia(ha).d=function(t){return this.t8(t instanceof ha?t:oa())},ia(ha).ba=function(t){return va(this,t)},ia(ha).ca=function(t){return ya(this,t)},ia(ha).da=function(t){return wa(this,t)},ia(ha).ea=function(t){return function(t,e){if(Pa(),$a(e))throw Os("division by zero");if($a(t))return fa();if(Ea(t,pa())){if(Ea(e,_a())||Ea(e,da()))return pa();if(Ea(e,pa()))return _a();var n=ba(xa(t,1).ea(e),1);return Ea(n,fa())?Ca(e)?_a():da():va(n,ya(t,wa(e,n)).ea(e))}if(Ea(e,pa()))return fa();if(Ca(t))return Ca(e)?Ra(t).ea(Ra(e)):Ra(Ra(t).ea(e));if(Ca(e))return Ra(t.ea(Ra(e)));for(var i=fa(),r=t;Ua(r,e);){for(var a=Sa(r)/Sa(e),s=Math.max(1,Math.floor(a)),o=Math.ceil(Math.log(s)/Math.LN2),l=o<=48?1:Math.pow(2,o-48),u=Ia(s),c=wa(u,e);Ca(c)||ka(c,r);)c=wa(u=Ia(s-=l),e);$a(u)&&(u=_a()),i=va(i,u),r=ya(r,c)}return i}(this,t)},ia(ha).fa=function(t){return function(t,e){return Pa(),ya(t,wa(t.ea(e),e))}(this,t)},ia(ha).ga=function(){return this.ba(new ha(1,0))},ia(ha).ha=function(){return this.ca(new ha(1,0))},ia(ha).ia=function(){return this.ja().ba(new ha(1,0))},ia(ha).ka=function(t){return new lu(this,t)},ia(ha).la=function(t){return ba(this,t)},ia(ha).ma=function(t){return xa(this,t)},ia(ha).na=function(t){return function(t,e){Pa();var n=63&e;return 0===n?t:n<32?new ha(t.r8_1>>>n|0|t.s8_1<<(32-n|0),t.s8_1>>>n|0):new ha(32===n?t.s8_1:t.s8_1>>>(n-32|0)|0,0)}(this,t)},ia(ha).oa=function(t){return new ha(this.r8_1&t.r8_1,this.s8_1&t.s8_1)},ia(ha).pa=function(t){return new ha(this.r8_1|t.r8_1,this.s8_1|t.s8_1)},ia(ha).qa=function(t){return new ha(this.r8_1^t.r8_1,this.s8_1^t.s8_1)},ia(ha).ja=function(){return new ha(~this.r8_1,~this.s8_1)},ia(ha).y8=function(){return this.r8_1},ia(ha).w9=function(){return Sa(this)},ia(ha).valueOf=function(){return this.w9()},ia(ha).equals=function(t){return t instanceof ha&&Ea(this,t)},ia(ha).hashCode=function(){return t=this,Pa(),t.r8_1^t.s8_1;var t},ia(ha).toString=function(){return Ma(this,10)},ia(Es).ab=function(){return sa(this.ya_1)},ia(Es).db=function(){var t,e=this.za_1;if(null==e){var n=this.ab().bb(K),i=null==n?null:n.eb(this),r=null==i?this:i;this.za_1=r,t=r}else t=e;return t},ia(Es).fb=function(t){var n,i=this;if(nc(t))n=null;else{n=null==t||null!=t?t:oa()}for(var r=n,a=ic(t);;){var s=i;null==a?s.va_1=r:(s.ta_1=s.ua_1,s.wa_1=a);try{var o=s.gb();if(o===Hl())return e;r=o,a=null}catch(t){r=null,a=t}Ss(s);var l=sa(s.sa_1);if(!(l instanceof Es)){if(null!=a){var u=sc(sa(a));l.hb(u)}else{var c=r;l.hb(c)}return e}i=l}},ia(Es).hb=function(t){return this.fb(t)},ia(Ms).ab=function(){throw Gs(Zr("This continuation is already complete"))},ia(Ms).fb=function(t){throw Gs(Zr("This continuation is already complete"))},ia(Ms).hb=function(t){return this.fb(t)},ia(Ms).toString=function(){return"This continuation is already complete"},ia($s).gb=function(){if(null!=this.wa_1)throw this.wa_1;var t=this.qb_1;return"function"==typeof t?t(this.rb_1,this.sb_1):this.qb_1.tb(this.rb_1,this.sb_1)},ia(Oo).x=function(t){var e;t:if(Qa(this,yr)&&this.z())e=!1;else{for(var n=this.s();n.t();)if(Jr(n.u(),t)){e=!0;break t}e=!1}return e},ia(Oo).y=function(t){var e;t:if(Qa(t,yr)&&t.z())e=!0;else{for(var n=t.s();n.t();){var i=n.u();if(!this.x(i)){e=!1;break t}}e=!0}return e},ia(Oo).z=function(){return 0===this.n()},ia(Oo).toString=function(){return Hi(this,", ","[","]",F,F,(t=this,function(e){return e===t?"(this Collection)":Tr(e)}));var t},ia(Oo).toArray=function(){return Ut(this)},ia(Io).t=function(){return this.ub_1<this.vb_1.n()},ia(Io).u=function(){if(!this.t())throw ao();var t=this.ub_1;return this.ub_1=t+1|0,this.vb_1.d1(t)},ia(Uo).r2=function(t,e){if(t<0||t>=e)throw Bs("index: "+t+", size: "+e)},ia(Uo).k1=function(t,e){if(t<0||t>e)throw Bs("index: "+t+", size: "+e)},ia(Uo).m=function(t,e,n){if(t<0||e>n)throw Bs("fromIndex: "+t+", toIndex: "+e+", size: "+n);if(t>e)throw Ns("fromIndex: "+t+" > toIndex: "+e)},ia(Uo).p7=function(t,e,n){if(t<0||e>n)throw Bs("startIndex: "+t+", endIndex: "+e+", size: "+n);if(t>e)throw Ns("startIndex: "+t+" > endIndex: "+e)},ia(Uo).f4=function(t,e){var i=t+(t>>1)|0;return(i-e|0)<0&&(i=e),(i-2147483639|0)>0&&(i=e>2147483639?n.MAX_VALUE:2147483639),i},ia(Uo).q1=function(t){for(var e=1,n=t.s();n.t();){var i=n.u(),r=wt(31,e),a=null==i?null:Kr(i);e=r+(null==a?0:a)|0}return e},ia(Uo).p1=function(t,e){if(t.n()!==e.n())return!1;for(var n=e.s(),i=t.s();i.t();)if(!Jr(i.u(),n.u()))return!1;return!0},ia(Po).s=function(){return new Io(this)},ia(Po).n1=function(t){var e;t:{for(var n=0,i=this.s();i.t();){if(Jr(i.u(),t)){e=n;break t}n=n+1|0}e=-1}return e},ia(Po).o1=function(t){return new ko(this,t)},ia(Po).equals=function(t){return t===this||!(null==t||!Qa(t,vr))&&V.p1(this,t)},ia(Po).hashCode=function(){return V.q1(this)},ia(Do).t=function(){return this.zb_1.t()},ia(Do).u=function(){return this.zb_1.u().c2()},ia(No).t=function(){return this.ac_1.t()},ia(No).u=function(){return this.ac_1.u().d2()},ia(Bo).a3=function(t){return this.bc_1.h2(t)},ia(Bo).x=function(t){return(null==t||null!=t)&&this.a3(null==t||null!=t?t:oa())},ia(Bo).s=function(){return new Do(this.bc_1.z1().s())},ia(Bo).n=function(){return this.bc_1.n()},ia(Ho).e3=function(t){return this.dc_1.i2(t)},ia(Ho).x=function(t){return(null==t||null!=t)&&this.e3(null==t||null!=t?t:oa())},ia(Ho).s=function(){return new No(this.dc_1.z1().s())},ia(Ho).n=function(){return this.dc_1.n()},ia(Vo).h2=function(t){return!(null==zo(this,t))},ia(Vo).i2=function(t){var e;t:{var n=this.z1();if(Qa(n,yr)&&n.z())e=!1;else{for(var i=n.s();i.t();)if(Jr(i.u().d2(),t)){e=!0;break t}e=!1}}return e},ia(Vo).j2=function(t){if(null==t||!Qa(t,br))return!1;var e=t.c2(),n=t.d2(),i=(Qa(this,xr)?this:oa()).k2(e);return!(!Jr(n,i)||null==i&&!(Qa(this,xr)?this:oa()).h2(e))},ia(Vo).equals=function(t){if(t===this)return!0;if(null==t||!Qa(t,xr))return!1;if(this.n()!==t.n())return!1;var e;t:{var n=t.z1();if(Qa(n,yr)&&n.z())e=!0;else{for(var i=n.s();i.t();){var r=i.u();if(!this.j2(r)){e=!1;break t}}e=!0}}return e},ia(Vo).k2=function(t){var e=zo(this,t);return null==e?null:e.d2()},ia(Vo).hashCode=function(){return Kr(this.z1())},ia(Vo).z=function(){return 0===this.n()},ia(Vo).n=function(){return this.z1().n()},ia(Vo).x1=function(){return null==this.f2_1&&(this.f2_1=new Bo(this)),sa(this.f2_1)},ia(Vo).toString=function(){return Hi(this.z1(),", ","{","}",F,F,(t=this,function(e){return t.cc(e)}));var t},ia(Vo).cc=function(t){return Lo(this,t.c2())+"="+Lo(this,t.d2())},ia(Vo).y1=function(){return null==this.g2_1&&(this.g2_1=new Ho(this)),sa(this.g2_1)},ia(qo).m2=function(t){for(var e=0,n=t.s();n.t();){var i=n.u(),r=e,a=null==i?null:Kr(i);e=r+(null==a?0:a)|0}return e},ia(qo).l2=function(t,e){return t.n()===e.n()&&t.y(e)},ia(jo).equals=function(t){return t===this||!(null==t||!Qa(t,Sr))&&q.l2(this,t)},ia(jo).hashCode=function(){return q.m2(this)},ia(Qo).n=function(){return this.hc_1},ia(Qo).z=function(){return 0===this.hc_1},ia(Qo).kc=function(t){Wo(this,this.hc_1+1|0),this.fc_1=Ko(this,this.fc_1),this.gc_1[this.fc_1]=t,this.hc_1=this.hc_1+1|0},ia(Qo).lc=function(t){Wo(this,this.hc_1+1|0);var e=this.gc_1,n=this.hc_1;e[Xo(this,this.fc_1+n|0)]=t,this.hc_1=this.hc_1+1|0},ia(Qo).mc=function(){if(this.z())throw oo("ArrayDeque is empty.");var t=this.fc_1,e=this.gc_1[t],n=null==e||null!=e?e:oa();return this.gc_1[this.fc_1]=null,this.fc_1=Yo(this,this.fc_1),this.hc_1=this.hc_1-1|0,n},ia(Qo).nc=function(){return this.z()?null:this.mc()},ia(Qo).oc=function(){if(this.z())throw oo("ArrayDeque is empty.");var t=nl(this),e=Xo(this,this.fc_1+t|0),n=this.gc_1[e],i=null==n||null!=n?n:oa();return this.gc_1[e]=null,this.hc_1=this.hc_1-1|0,i},ia(Qo).p=function(t){return this.lc(t),!0},ia(Qo).l1=function(t,n){if(V.k1(t,this.hc_1),t===this.hc_1)return this.lc(n),e;if(0===t)return this.kc(n),e;Wo(this,this.hc_1+1|0);var i=Xo(this,this.fc_1+t|0);if(t<(this.hc_1+1|0)>>1){var r=Ko(this,i),a=Ko(this,this.fc_1);r>=this.fc_1?(this.gc_1[a]=this.gc_1[this.fc_1],Lt(this.gc_1,this.gc_1,this.fc_1,this.fc_1+1|0,r+1|0)):(Lt(this.gc_1,this.gc_1,this.fc_1-1|0,this.fc_1,this.gc_1.length),this.gc_1[this.gc_1.length-1|0]=this.gc_1[0],Lt(this.gc_1,this.gc_1,0,1,r+1|0)),this.gc_1[r]=n,this.fc_1=a}else{var s=this.hc_1,o=Xo(this,this.fc_1+s|0);i<o?Lt(this.gc_1,this.gc_1,i+1|0,i,o):(Lt(this.gc_1,this.gc_1,1,0,o),this.gc_1[0]=this.gc_1[this.gc_1.length-1|0],Lt(this.gc_1,this.gc_1,i+1|0,i,this.gc_1.length-1|0)),this.gc_1[i]=n}this.hc_1=this.hc_1+1|0},ia(Qo).q=function(t){if(t.z())return!1;Wo(this,this.hc_1+t.n()|0);var e=this.hc_1;return function(t,e,n){var i=n.s(),r=e,a=t.gc_1.length;if(r<a)t:do{var s=r;if(r=r+1|0,!i.t())break t;t.gc_1[s]=i.u()}while(r<a);var o=0,l=t.fc_1;if(o<l)t:do{var u=o;if(o=o+1|0,!i.t())break t;t.gc_1[u]=i.u()}while(o<l);t.hc_1=t.hc_1+n.n()|0}(this,Xo(this,this.fc_1+e|0),t),!0},ia(Qo).d1=function(t){V.r2(t,this.hc_1);var e=Xo(this,this.fc_1+t|0),n=this.gc_1[e];return null==n||null!=n?n:oa()},ia(Qo).o=function(t,e){V.r2(t,this.hc_1);var n=Xo(this,this.fc_1+t|0),i=this.gc_1[n],r=null==i||null!=i?i:oa();return this.gc_1[n]=e,r},ia(Qo).x=function(t){return!(-1===this.n1(t))},ia(Qo).n1=function(t){var e=this.hc_1,n=Xo(this,this.fc_1+e|0);if(this.fc_1<n){var i=this.fc_1;if(i<n)do{var r=i;if(i=i+1|0,Jr(t,this.gc_1[r]))return r-this.fc_1|0}while(i<n)}else if(this.fc_1>=n){var a=this.fc_1,s=this.gc_1.length;if(a<s)do{var o=a;if(a=a+1|0,Jr(t,this.gc_1[o]))return o-this.fc_1|0}while(a<s);var l=0;if(l<n)do{var u=l;if(l=l+1|0,Jr(t,this.gc_1[u]))return(u+this.gc_1.length|0)-this.fc_1|0}while(l<n)}return-1},ia(Qo).f1=function(t){if(V.r2(t,this.hc_1),t===nl(this))return this.oc();if(0===t)return this.mc();var e=Xo(this,this.fc_1+t|0),n=this.gc_1[e],i=null==n||null!=n?n:oa();if(t<this.hc_1>>1)e>=this.fc_1?Lt(this.gc_1,this.gc_1,this.fc_1+1|0,this.fc_1,e):(Lt(this.gc_1,this.gc_1,1,0,e),this.gc_1[0]=this.gc_1[this.gc_1.length-1|0],Lt(this.gc_1,this.gc_1,this.fc_1+1|0,this.fc_1,this.gc_1.length-1|0)),this.gc_1[this.fc_1]=null,this.fc_1=Yo(this,this.fc_1);else{var r=nl(this),a=Xo(this,this.fc_1+r|0);e<=a?Lt(this.gc_1,this.gc_1,e,e+1|0,a+1|0):(Lt(this.gc_1,this.gc_1,e,e+1|0,this.gc_1.length),this.gc_1[this.gc_1.length-1|0]=this.gc_1[0],Lt(this.gc_1,this.gc_1,0,1,a+1|0)),this.gc_1[a]=null}return this.hc_1=this.hc_1-1|0,i},ia(Qo).v=function(){var t=this.hc_1,e=Xo(this,this.fc_1+t|0);this.fc_1<e?ws(this.gc_1,null,this.fc_1,e):this.z()||(ws(this.gc_1,null,this.fc_1,this.gc_1.length),ws(this.gc_1,null,0,e)),this.fc_1=0,this.hc_1=0},ia(Qo).pc=function(t){var e=t.length>=this.hc_1?t:function(t,e){return $r(Array(e),null)}(0,this.hc_1),n=es(e)?e:oa(),i=this.hc_1,r=Xo(this,this.fc_1+i|0);this.fc_1<r?Lt(this.gc_1,n,0,this.fc_1,r):this.z()||(Lt(this.gc_1,n,0,this.fc_1,this.gc_1.length),Lt(this.gc_1,n,this.gc_1.length-this.fc_1|0,0,r));var a=function(t,e){return e}(this.hc_1,n);return es(a)?a:oa()},ia(Qo).t2=function(){var t=this.hc_1,e=$r(Array(t),null);return this.pc(e)},ia(Qo).toArray=function(){return this.t2()},ia(il).n=function(){return this.qc_1.length},ia(il).z=function(){return 0===this.qc_1.length},ia(il).sc=function(t){return function(t,e){return Ri(t,e)>=0}(this.qc_1,t)},ia(il).tc=function(t){var e;t:if(Qa(t,yr)&&t.z())e=!0;else{for(var n=t.s();n.t();){var i=n.u();if(!this.sc(i)){e=!1;break t}}e=!0}return e},ia(il).y=function(t){return this.tc(t)},ia(il).s=function(){return new Rr(this.qc_1)},ia(rl).equals=function(t){return!(null==t||!Qa(t,vr))&&t.z()},ia(rl).hashCode=function(){return 1},ia(rl).toString=function(){return"[]"},ia(rl).n=function(){return 0},ia(rl).z=function(){return!0},ia(rl).vc=function(t){return!1},ia(rl).x=function(t){return!1},ia(rl).wc=function(t){return t.z()},ia(rl).y=function(t){return this.wc(t)},ia(rl).d1=function(t){throw Bs("Empty list doesn't contain element at index "+t+".")},ia(rl).xc=function(t){return-1},ia(rl).n1=function(t){return-1},ia(rl).s=function(){return W},ia(rl).o1=function(t){if(0!==t)throw Bs("Index: "+t);return W},ia(sl).t=function(){return!1},ia(sl).u=function(){throw ao()},ia(hl).equals=function(t){return!(null==t||!Qa(t,xr))&&t.z()},ia(hl).hashCode=function(){return 0},ia(hl).toString=function(){return"{}"},ia(hl).n=function(){return 0},ia(hl).z=function(){return!0},ia(hl).zc=function(t){return!1},ia(hl).h2=function(t){return(null==t||null!=t)&&this.zc(null==t||null!=t?t:oa())},ia(hl).ad=function(t){return null},ia(hl).k2=function(t){return null!=t&&null==t?null:this.ad(null==t||null!=t?t:oa())},ia(hl).z1=function(){return Cl()},ia(hl).x1=function(){return Cl()},ia(hl).y1=function(){return al()},ia(dl).u=function(){return this.v9()},ia(pl).fd=function(){return this.gd()},ia(pl).u=function(){return new gr(this.fd())},ia(ml).u=function(){return this.hd()},ia(yl).t=function(){for(;;){switch(this.jd_1){case 0:break;case 1:if(sa(this.ld_1).t())return this.jd_1=2,!0;this.ld_1=null;break;case 4:return!1;case 3:case 2:return!0;default:throw vl(this)}this.jd_1=5;var t=sa(this.md_1);this.md_1=null;var n=e;t.hb(n)}},ia(yl).u=function(){switch(this.jd_1){case 0:case 1:return function(t){if(t.t())return t.u();throw ao()}(this);case 2:return this.jd_1=1,sa(this.ld_1).u();case 3:this.jd_1=0;var t=this.kd_1,e=null==t||null!=t?t:oa();return this.kd_1=null,e;default:throw vl(this)}},ia(yl).id=function(t,e){return this.kd_1=t,this.jd_1=3,this.md_1=e,Hl()},ia(yl).nd=function(t){oc(t);null==t||null!=t||oa(),this.jd_1=4},ia(yl).hb=function(t){return this.nd(t)},ia(yl).ab=function(){return Pl()},ia(wl).u=function(){return this.pd_1.rd_1(this.od_1.u())},ia(wl).t=function(){return this.od_1.t()},ia(bl).s=function(){return new wl(this)},ia(Sl).u=function(){if(-1===this.td_1&&xl(this),0===this.td_1)throw ao();var t=this.ud_1;return this.ud_1=null,this.td_1=-1,null==t||null!=t?t:oa()},ia(Sl).t=function(){return-1===this.td_1&&xl(this),1===this.td_1},ia(El).s=function(){return new Sl(this)},ia(Tl).equals=function(t){return!(null==t||!Qa(t,Sr))&&t.z()},ia(Tl).hashCode=function(){return 0},ia(Tl).toString=function(){return"[]"},ia(Tl).n=function(){return 0},ia(Tl).z=function(){return!0},ia(Tl).vc=function(t){return!1},ia(Tl).x=function(t){return!1},ia(Tl).wc=function(t){return t.z()},ia(Tl).y=function(t){return this.wc(t)},ia(Tl).s=function(){return W},ia(Ul).bb=function(t){return null},ia(Ul).fe=function(t,e){return t},ia(Ul).ge=function(t){return t},ia(Ul).ee=function(t){return this},ia(Ul).hashCode=function(){return 0},ia(Ul).toString=function(){return"EmptyCoroutineContext"},ia(zl).bb=function(t){for(var e=this;;){var n=e.je_1.bb(t);if(null!=n)return n;var i=e.ie_1;if(!(i instanceof zl))return i.bb(t);e=i}},ia(zl).fe=function(t,e){return e(this.ie_1.fe(t,e),this.je_1)},ia(zl).ee=function(t){if(null!=this.je_1.bb(t))return this.ie_1;var e=this.ie_1.ee(t);return e===this.ie_1?this:e===Pl()?this.je_1:new zl(e,this.je_1)},ia(zl).equals=function(t){return this===t||!!(t instanceof zl&&Dl(t)===Dl(this))&&function(t,e){for(var n=e;;){if(!Nl(t,n.je_1))return!1;var i=n.ie_1;if(!(i instanceof zl))return Nl(t,Qa(i,Ol)?i:oa());n=i}}(t,this)},ia(zl).hashCode=function(){return Kr(this.ie_1)+Kr(this.je_1)|0},ia(zl).toString=function(){return"["+this.fe("",Ll)+"]"},ia(Fl).ce=function(t){return this.ae_1(t)},ia(Fl).de=function(t){return t===this||this.be_1===t},ia(Bl).c2=function(){return this.ke_1},ia(ql).n=function(){return this.le_1.length},ia(ql).d1=function(t){return V.r2(t,this.le_1.length),this.le_1[t]},ia(ql).me=function(t){return null!==t&&Ui(this.le_1,t.n9_1)===t},ia(ql).x=function(t){return t instanceof Mr&&this.me(t instanceof Mr?t:oa())},ia(ql).ne=function(t){if(null===t)return-1;var e=t.n9_1;return Ui(this.le_1,e)===t?e:-1},ia(ql).n1=function(t){return t instanceof Mr?this.ne(t instanceof Mr?t:oa()):-1},ia(Kl).pe=function(t){return this.oe_1.pe(t)},ia(Kl).v9=function(){return this.oe_1.v9()},ia(Kl).qe=function(t,e){return this.oe_1.qe(t,e)},ia(Zl).v9=function(){return this.pe(32)},ia(Zl).qe=function(t,e){Ql(t,e);var i=e-t|0;if(i>0||i===n.MIN_VALUE){var r;if((i&(0|-i))===i){var a=31-vt(i)|0;r=this.pe(a)}else{var s;do{var o=this.v9()>>>1|0;s=o%i|0}while(((o-s|0)+(i-1|0)|0)<0);r=s}return t+r|0}for(;;){var l=this.v9();if(t<=l&&l<e)return l}},ia(eu).v9=function(){var t=this.se_1;t^=t>>>2|0,this.se_1=this.te_1,this.te_1=this.ue_1,this.ue_1=this.ve_1;var e=this.we_1;return this.ve_1=e,t=t^t<<1^e^e<<4,this.we_1=t,this.xe_1=this.xe_1+362437|0,t+this.xe_1|0},ia(eu).pe=function(t){return function(t,e){return(t>>>(32-e|0)|0)&(0|-e)>>31}(this.v9(),t)},ia(ru).n8=function(){return this.u8_1},ia(ru).o8=function(){return this.v8_1},ia(ru).ye=function(t){return this.u8_1<=t&&t<=this.v8_1},ia(ru).x8=function(t){return this.ye("number"==typeof t?t:oa())},ia(ru).z=function(){return this.u8_1>this.v8_1},ia(ru).equals=function(t){return t instanceof ru&&(!(!this.z()||!t.z())||this.u8_1===t.u8_1&&this.v8_1===t.v8_1)},ia(ru).hashCode=function(){return this.z()?-1:wt(31,this.u8_1)+this.v8_1|0},ia(ru).toString=function(){return this.u8_1+".."+this.v8_1},ia(su).df=function(){return this.ef_1},ia(su).n8=function(){return new gr(this.df())},ia(su).hf=function(){return this.ff_1},ia(su).o8=function(){return new gr(this.hf())},ia(su).if=function(t){return hr(this.ef_1,t)<=0&&hr(t,this.ff_1)<=0},ia(su).x8=function(t){return this.if(t instanceof gr?t.a9_1:oa())},ia(su).z=function(){return hr(this.ef_1,this.ff_1)>0},ia(su).equals=function(t){return t instanceof su&&(!(!this.z()||!t.z())||this.ef_1===t.ef_1&&this.ff_1===t.ff_1)},ia(su).hashCode=function(){var t;if(this.z())t=-1;else{var e=this.ef_1;t=wt(31,e)+this.ff_1|0}return t},ia(su).toString=function(){return dr(this.ef_1)+".."+dr(this.ff_1)},ia(lu).n8=function(){return this.nf_1},ia(lu).o8=function(){return this.of_1},ia(lu).qf=function(t){return this.nf_1.t8(t)<=0&&t.t8(this.of_1)<=0},ia(lu).x8=function(t){return this.qf(t instanceof ha?t:oa())},ia(lu).z=function(){return this.nf_1.t8(this.of_1)>0},ia(lu).equals=function(t){return t instanceof lu&&(!(!this.z()||!t.z())||!!this.nf_1.equals(t.nf_1)&&this.of_1.equals(t.of_1))},ia(lu).hashCode=function(){return this.z()?-1:qa(31).da(this.nf_1.qa(this.nf_1.na(32))).ba(this.of_1.qa(this.of_1.na(32))).y8()},ia(lu).toString=function(){return this.nf_1.toString()+".."+this.of_1.toString()},ia(uu).t=function(){return this.tf_1},ia(uu).v9=function(){var t=this.uf_1;if(t===this.sf_1){if(!this.tf_1)throw ao();this.tf_1=!1}else this.uf_1=this.uf_1+this.rf_1|0;return t},ia(cu).t=function(){return this.xf_1},ia(cu).gd=function(){var t=this.yf_1;if(t===this.wf_1){if(!this.xf_1)throw ao();this.xf_1=!1}else this.yf_1=this.yf_1+this.vf_1|0;return ja(t)},ia(hu).t=function(){return this.bg_1},ia(hu).hd=function(){var t=this.cg_1;if(t.equals(this.ag_1)){if(!this.bg_1)throw ao();this.bg_1=!1}else this.cg_1=this.cg_1.ba(this.zf_1);return t},ia(fu).q8=function(t,e,n){return new _u(t,e,n)},ia(_u).s=function(){return new uu(this.u8_1,this.v8_1,this.w8_1)},ia(_u).z=function(){return this.w8_1>0?this.u8_1>this.v8_1:this.u8_1<this.v8_1},ia(_u).equals=function(t){return t instanceof _u&&(!(!this.z()||!t.z())||this.u8_1===t.u8_1&&this.v8_1===t.v8_1&&this.w8_1===t.w8_1)},ia(_u).hashCode=function(){return this.z()?-1:wt(31,wt(31,this.u8_1)+this.v8_1|0)+this.w8_1|0},ia(_u).toString=function(){return this.w8_1>0?this.u8_1+".."+this.v8_1+" step "+this.w8_1:this.u8_1+" downTo "+this.v8_1+" step "+(0|-this.w8_1)},ia(pu).s=function(){return new cu(this.ef_1,this.ff_1,this.gf_1)},ia(pu).z=function(){return this.gf_1>0?hr(this.ef_1,this.ff_1)>0:hr(this.ef_1,this.ff_1)<0},ia(pu).equals=function(t){return t instanceof pu&&(!(!this.z()||!t.z())||this.ef_1===t.ef_1&&this.ff_1===t.ff_1&&this.gf_1===t.gf_1)},ia(pu).hashCode=function(){var t;if(this.z())t=-1;else{var e=this.ef_1,n=wt(31,e),i=this.ff_1;t=wt(31,n+i|0)+this.gf_1|0}return t},ia(pu).toString=function(){return this.gf_1>0?dr(this.ef_1)+".."+dr(this.ff_1)+" step "+this.gf_1:dr(this.ef_1)+" downTo "+dr(this.ff_1)+" step "+(0|-this.gf_1)},ia(gu).s=function(){return new hu(this.nf_1,this.of_1,this.pf_1)},ia(gu).z=function(){return this.pf_1.t8(new ha(0,0))>0?this.nf_1.t8(this.of_1)>0:this.nf_1.t8(this.of_1)<0},ia(gu).equals=function(t){return t instanceof gu&&(!(!this.z()||!t.z())||!(!this.nf_1.equals(t.nf_1)||!this.of_1.equals(t.of_1))&&this.pf_1.equals(t.pf_1))},ia(gu).hashCode=function(){return this.z()?-1:qa(31).da(qa(31).da(this.nf_1.qa(this.nf_1.na(32))).ba(this.of_1.qa(this.of_1.na(32)))).ba(this.pf_1.qa(this.pf_1.na(32))).y8()},ia(gu).toString=function(){return this.pf_1.t8(new ha(0,0))>0?this.nf_1.toString()+".."+this.of_1.toString()+" step "+this.pf_1.toString():this.nf_1.toString()+" downTo "+this.of_1.toString()+" step "+this.pf_1.ia().toString()},ia(Tu).toString=function(){var t=ni();return t.g5("BytesHexFormat(").h5(10),this.qg(t,"    ").h5(10),t.g5(")"),t.toString()},ia(Tu).qg=function(t,e){return t.g5(e).g5("bytesPerLine = ").n7(this.ig_1).g5(",").h5(10),t.g5(e).g5("bytesPerGroup = ").n7(this.jg_1).g5(",").h5(10),t.g5(e).g5('groupSeparator = "').g5(this.kg_1).g5('",').h5(10),t.g5(e).g5('byteSeparator = "').g5(this.lg_1).g5('",').h5(10),t.g5(e).g5('bytePrefix = "').g5(this.mg_1).g5('",').h5(10),t.g5(e).g5('byteSuffix = "').g5(this.ng_1).g5('"'),t},ia(Cu).toString=function(){var t=ni();return t.g5("NumberHexFormat(").h5(10),this.qg(t,"    ").h5(10),t.g5(")"),t.toString()},ia(Cu).qg=function(t,e){return t.g5(e).g5('prefix = "').g5(this.rg_1).g5('",').h5(10),t.g5(e).g5('suffix = "').g5(this.sg_1).g5('",').h5(10),t.g5(e).g5("removeLeadingZeros = ").m7(this.tg_1),t},ia(Ru).toString=function(){var t=ni();return t.g5("HexFormat(").h5(10),t.g5("    upperCase = ").m7(this.fg_1).g5(",").h5(10),t.g5("    bytes = BytesHexFormat(").h5(10),this.gg_1.qg(t,"        ").h5(10),t.g5("    ),").h5(10),t.g5("    number = NumberHexFormat(").h5(10),this.hg_1.qg(t,"        ").h5(10),t.g5("    )").h5(10),t.g5(")"),t.toString()},ia(Yu).u=function(){if(-1===this.ug_1&&Xu(this),0===this.ug_1)throw ao();var t=this.xg_1,e=t instanceof ru?t:oa();return this.xg_1=null,this.ug_1=-1,e},ia(Yu).t=function(){return-1===this.ug_1&&Xu(this),1===this.ug_1},ia(Ku).s=function(){return new Yu(this)},ia(Zu).d2=function(){this.fh_1===ft&&(this.fh_1=sa(this.eh_1)(),this.eh_1=null);var t=this.fh_1;return null==t||null!=t?t:oa()},ia(Zu).gh=function(){return!(this.fh_1===ft)},ia(Zu).toString=function(){return this.gh()?Tr(this.d2()):"Lazy value not initialized yet."},ia(ac).equals=function(t){return t instanceof ac&&Jr(this.hh_1,t.hh_1)},ia(ac).hashCode=function(){return Kr(this.hh_1)},ia(ac).toString=function(){return"Failure("+this.hh_1+")"},ia(uc).toString=function(){return"("+this.bd_1+", "+this.cd_1+")"},ia(uc).dd=function(){return this.bd_1},ia(uc).ed=function(){return this.cd_1},ia(uc).hashCode=function(){var t=null==this.bd_1?0:Kr(this.bd_1);return wt(t,31)+(null==this.cd_1?0:Kr(this.cd_1))|0},ia(uc).equals=function(t){if(this===t)return!0;if(!(t instanceof uc))return!1;var e=t instanceof uc?t:oa();return!!Jr(this.bd_1,e.bd_1)&&!!Jr(this.cd_1,e.cd_1)},ia(pc).nh=function(t){return dc(this.mh_1,t)},ia(pc).d=function(t){return function(t,e){return dc(t.mh_1,e instanceof pc?e.mh_1:oa())}(this,t)},ia(pc).toString=function(){return(255&this.mh_1).toString()},ia(pc).hashCode=function(){return this.mh_1},ia(pc).equals=function(t){return function(t,e){return e instanceof pc&&t===(e instanceof pc?e.mh_1:oa())}(this.mh_1,t)},ia(wc).th=function(t){return yc(this.sh_1,t)},ia(wc).d=function(t){return function(t,e){return yc(t.sh_1,e instanceof wc?e.sh_1:oa())}(this,t)},ia(wc).toString=function(){return Ga(this.sh_1).oa(new ha(-1,0)).toString()},ia(wc).hashCode=function(){return this.sh_1},ia(wc).equals=function(t){return function(t,e){return e instanceof wc&&t===(e instanceof wc?e.sh_1:oa())}(this.sh_1,t)},ia(Ec).zh=function(t){return xc(this.yh_1,t)},ia(Ec).d=function(t){return function(t,e){return xc(t.yh_1,e instanceof Ec?e.yh_1:oa())}(this,t)},ia(Ec).toString=function(){return Sc(this.yh_1)},ia(Ec).hashCode=function(){return this.yh_1.hashCode()},ia(Ec).equals=function(t){return function(t,e){if(!(e instanceof Ec))return!1;var n=e instanceof Ec?e.yh_1:oa();return!!t.equals(n)}(this.yh_1,t)},ia(Rc).fi=function(t){return Ac(this.ei_1,t)},ia(Rc).d=function(t){return function(t,e){return Ac(t.ei_1,e instanceof Rc?e.ei_1:oa())}(this,t)},ia(Rc).toString=function(){return(65535&this.ei_1).toString()},ia(Rc).hashCode=function(){return this.ei_1},ia(Rc).equals=function(t){return function(t,e){return e instanceof Rc&&t===(e instanceof Rc?e.ei_1:oa())}(this.ei_1,t)},ia(Ke).o3=function(t){var e;t:if(Qa(t,yr)&&t.z())e=!0;else{for(var n=t.s();n.t();){var i=n.u();if(null==i||!Qa(i,br)||!this.k5(i)){e=!1;break t}}e=!0}return e},ia(zl).ge=bt,ia(Bl).bb=xt,ia(Bl).fe=St,ia(Bl).ee=Et,ia(Bl).ge=bt,e=new $t,n=new At,i=new Rt,r=new Ot,s=null,new qe,v=3.141592653589793,new Er,H=new Ms,V=new Uo,new Fo,q=new qo,W=new sl,K=new Al,at=new fu,new du,new mu,ft=new Qu,_t=new rc,t.$_$=t.$_$||{},t.$_$.a=function(t,e,n){return new $n(t,vs(e),n)},t.$_$.b=function(t){var e;switch(typeof t){case"string":e=Kn().stringClass;break;case"number":e=(0|t)===t?Kn().intClass:Kn().doubleClass;break;case"boolean":e=Kn().booleanClass;break;case"function":e=Kn().functionClass(t.length);break;default:var n;if(rs(t))n=Kn().booleanArrayClass;else if(os(t))n=Kn().charArrayClass;else if(as(t))n=Kn().byteArrayClass;else if(ss(t))n=Kn().shortArrayClass;else if(ls(t))n=Kn().intArrayClass;else if(cs(t))n=Kn().longArrayClass;else if(us(t))n=Kn().floatArrayClass;else if(hs(t))n=Kn().doubleArrayClass;else if(Qa(t,gn))n=Jn(gn);else if(es(t))n=Kn().arrayClass;else{var i=Object.getPrototypeOf(t).constructor;n=i===Object?Kn().anyClass:i===Error?Kn().throwableClass:Zn(i)}e=n}return e},t.$_$.c=Jn,t.$_$.d=F,t.$_$.e=function(){return function(){if(ht)return e;ht=!0,new Ju("SYNCHRONIZED",0),new Ju("PUBLICATION",1),ct=new Ju("NONE",2)}(),ct},t.$_$.f=Go,t.$_$.g=ee,t.$_$.h=te,t.$_$.i=function(t){return he(t,ra(ia(fe)))},t.$_$.j=Me,t.$_$.k=Qe,t.$_$.l=Ze,t.$_$.m=nn,t.$_$.n=_n,t.$_$.o=function t(e){var n=_n(e,ra(ia(pn)));return na(n,t),n},t.$_$.p=dn,t.$_$.q=function t(e,n){var i=dn(e,n,ra(ia(pn)));return na(i,t),i},t.$_$.r=function(t){return function(t,e){return hi.call(e,t,Ml()),e}(t,ra(ia(hi)))},t.$_$.s=ti,t.$_$.t=ni,t.$_$.u=mo,t.$_$.v=function t(e){var n=function(t,e){return co(t,e),go.call(e),e}(e,ra(ia(go)));return na(n,t),n},t.$_$.w=function t(e){var n=co(e,ra(ia(fo)));return na(n,t),n},t.$_$.x=ho,t.$_$.y=function t(e,n){var i=ho(e,n,ra(ia(fo)));return na(i,t),i},t.$_$.z=Rs,t.$_$.a1=Os,t.$_$.b1=Is,t.$_$.c1=Ps,t.$_$.d1=Ds,t.$_$.e1=Ns,t.$_$.f1=Vs,t.$_$.g1=qs,t.$_$.h1=js,t.$_$.i1=Gs,t.$_$.j1=Ws,t.$_$.k1=function t(e,n){var i=Ws(e,n,ra(ia(Xs)));return na(i,t),i},t.$_$.l1=zs,t.$_$.m1=Fs,t.$_$.n1=Bs,t.$_$.o1=ao,t.$_$.p1=so,t.$_$.q1=eo,t.$_$.r1=no,t.$_$.s1=io,t.$_$.t1=function t(e,n){var i=io(e,n,ra(ia(ro)));return na(i,t),i},t.$_$.u1=Ys,t.$_$.v1=Ks,t.$_$.w1=Js,t.$_$.x1=Zs,t.$_$.y1=cr,t.$_$.z1=hr,t.$_$.a2=fr,t.$_$.b2=function(t,e){return ja(t-e|0)},t.$_$.c2=function(t,e){return ja(t+e|0)},t.$_$.d2=function(t,e){return new su(t,e)},t.$_$.e2=function(t){return Ba(t)},t.$_$.f2=_r,t.$_$.g2=dr,t.$_$.h2=tc,t.$_$.i2=ic,t.$_$.j2=nc,t.$_$.k2=ec,t.$_$.l2=hc,t.$_$.m2=fc,t.$_$.n2=mc,t.$_$.o2=Mc,t.$_$.p2=Tc,t.$_$.q2=K,t.$_$.r2=Pl,t.$_$.s2=r,t.$_$.t2=i,t.$_$.u2=n,t.$_$.v2=Jl,t.$_$.w2=Kn,t.$_$.x2=ca,t.$_$.y2=_t,t.$_$.z2=$c,t.$_$.a3=e,t.$_$.b3=Gt,t.$_$.c3=re,t.$_$.d3=yr,t.$_$.e3=vr,t.$_$.f3=br,t.$_$.g3=xr,t.$_$.h3=wr,t.$_$.i3=Sr,t.$_$.j3=function(t,e){return t.q(vs(e))},t.$_$.k3=_l,t.$_$.l3=Lt,t.$_$.m3=vs,t.$_$.n3=ll,t.$_$.o3=function(t,e){return function(t,e){var n=t,i=e;if(n===i)return!0;if(null==n||null==i||!Ja(i)||n.length!=i.length)return!1;var r=0,a=n.length;if(r<a)do{var s=r;if(r=r+1|0,!Jr(n[s],i[s]))return!1}while(r<a);return!0}(t,e)},t.$_$.p3=function(t){return Vr(t)},t.$_$.q3=function(t){return Vr(t)},t.$_$.r3=function(t){var e=null==t?null:Di(t,", ","[","]");return null==e?"null":e},t.$_$.s3=function(t){var e=null==t?null:Li(t,", ","[","]");return null==e?"null":e},t.$_$.t3=function(t){var e=null==t?null:Ni(t,", ","[","]");return null==e?"null":e},t.$_$.u3=ms,t.$_$.v3=gs,t.$_$.w3=ys,t.$_$.x3=Ft,t.$_$.y3=function(t){return qi(Ki(t))},t.$_$.z3=function(t,e){if(!(e>=0))throw Ns(Zr("Requested element count "+e+" is less than zero."));return function(t,e){if(!(e>=0))throw Ns(Zr("Requested element count "+e+" is less than zero."));if(0===e)return el();if(Qa(t,yr)){if(e>=t.n())return qi(t);if(1===e)return Pt(Yi(t))}var n=0,i=ee(e),r=t.s();t:for(;r.t();){var a=r.u();if(i.p(a),(n=n+1|0)===e)break t}return ol(i)}(t,rr(t.n()-e|0,0))},t.$_$.a4=el,t.$_$.b4=ul,t.$_$.c4=Ml,t.$_$.d4=ps,t.$_$.e4=function(t,e,n,i){n=n===F?0:n,i=i===F?t.length:i,V.m(n,i,t.length),t.fill(e,n,i)},t.$_$.f4=function(t){return t.z()?null:t.d1(0)},t.$_$.g4=function(t){if(Qa(t,vr))return t.z()?null:t.d1(0);var e=t.s();return e.t()?e.u():null},t.$_$.h4=ji,t.$_$.i4=Yi,t.$_$.j4=function(t){for(var e=te(),n=t.s();n.t();)_l(e,n.u());return e},t.$_$.k4=function(t){return new ru(0,function(t){return t.length-1|0}(t))},t.$_$.l4=Hi,t.$_$.m4=ki,t.$_$.n4=Oi,t.$_$.o4=Vi,t.$_$.p4=nl,t.$_$.q4=zi,t.$_$.r4=function(t){if(t.z())throw oo("List is empty.");return t.d1(nl(t))},t.$_$.s4=Pt,t.$_$.t4=function(t){return t.length>0?vs(t):el()},t.$_$.u4=zt,t.$_$.v4=Dt,t.$_$.w4=function(t){return t.length>0?(e=t,fl(n=Qe(t.length),e),n):ul();var e,n},t.$_$.x4=function(t,e){for(var n=sn(t.n()),i=!1,r=t.s();r.t();){var a,s=r.u();!i&&Jr(s,e)?(i=!0,a=!1):a=!0,a&&n.p(s)}return n},t.$_$.y4=tl,t.$_$.z4=function(t,e){var n=function(t){return Qa(t,yr)?t.n():null}(e),i=null==n?null:t.n()+n|0,r=sn(null==i?wt(t.n(),2):i);return r.q(t),_l(r,e),r},t.$_$.a5=function(t,e){if(Qa(t,yr))return Gi(t,e);var n=te();return _l(n,t),_l(n,e),n},t.$_$.b5=Gi,t.$_$.c5=function(t,e){var n=ee(t.n()+1|0);return n.q(t),n.p(e),n},t.$_$.d5=function(t){return t.z()?null:t.f1(0)},t.$_$.e5=function(t){if(Qa(t,yr)&&t.n()<=1)return qi(t);var n=Ji(t);return function(t){var n=(t.n()/2|0)-1|0;if(n<0)return e;var i=nl(t),r=0;if(r<=n)do{var a=r;r=r+1|0;var s=t.d1(a);t.o(a,t.d1(i)),t.o(i,s),i=i-1|0}while(a!==n)}(n),n},t.$_$.f5=function(t,n,i){V.m(n,i,t.length);var r=(n+i|0)/2|0;if(n===r)return e;var a=i-1|0,s=n;if(s<r)do{var o=s;s=s+1|0;var l=t[o];t[o]=t[a],t[a]=l,a=a-1|0}while(s<r)},t.$_$.g5=Nt,t.$_$.h5=function(t){return t.length>0?function(t){switch(t.length){case 0:return Ml();case 1:return Nt(t[0]);default:return Ii(t,sn(t.length))}}(t):Ml()},t.$_$.i5=function(t){var e;switch(t.length){case 0:throw oo("Array is empty.");case 1:e=t[0];break;default:throw Ns("Array has more than one element.")}return e},t.$_$.j5=function(t,e){return e.z()?new Int8Array(0):ms(t,e.n8(),e.o8()+1|0)},t.$_$.k5=function(t,e){if(Qa(t,yr)){if(t.n()<=1)return qi(t);var n=Ft(t),i=es(n)?n:oa();return function(t,e){t.length>1&&ae(t,e)}(i,e),vs(i)}var r=Ji(t);return Ht(r,e),r},t.$_$.l5=function(t,e){if(!(e>=0))throw Ns(Zr("Requested element count "+e+" is less than zero."));if(0===e)return el();if(e>=t.length)return Pi(t);if(1===e)return Pt(t[0]);var n=0,i=ee(e),r=0,a=t.length;t:for(;r<a;){var s=t[r];if(r=r+1|0,i.p(s),(n=n+1|0)===e)break t}return i},t.$_$.m5=function(t){if(0===t.n())return el();var e=t.z1().s();if(!e.t())return el();var n=e.u();if(!e.t())return Pt(new uc(n.c2(),n.d2()));var i=ee(t.n()),r=new uc(n.c2(),n.d2());i.p(r);do{var a=e.u(),s=new uc(a.c2(),a.d2());i.p(s)}while(e.t());return i},t.$_$.n5=qi,t.$_$.o5=function(t){switch(t.length){case 0:return el();case 1:return Pt(t[0]);default:return Ai(t)}},t.$_$.p5=function(t){return 0===t.n()?ul():function(t){return tn(t)}(t)},t.$_$.q5=function(t){if(Qa(t,yr)){var e;switch(t.n()){case 0:e=ul();break;case 1:e=Dt(Qa(t,vr)?t.d1(0):t.s().u());break;default:e=cl(t,Qe(t.n()))}return e}return function(t){return 0===t.n()?ul():t}(cl(t,Ze()))},t.$_$.r5=Xi,t.$_$.s5=Ki,t.$_$.t5=Wi,t.$_$.u5=function(t){return[].slice.call(t)},t.$_$.v5=function(t,e){return t===e?0:null==t?-1:null==e?1:jr(null!=t&&("string"===(i=typeof(n=t))||"boolean"===i||ns(n)||Qa(n,Tt))?t:oa(),e);var n,i},t.$_$.w5=pn,t.$_$.x5=Hl,t.$_$.y5=Cs,t.$_$.z5=Ts,t.$_$.a6=Bl,t.$_$.b6=Fl,t.$_$.c6=function(t){if(t instanceof Fl){var e;if(t.de(this.c2())){var n=t.ce(this);e=null!=n&&Qa(n,Ol)?n:null}else e=null;return e}return K===t?Qa(this,Ol)?this:oa():null},t.$_$.d6=function(t){return t instanceof Fl?t.de(this.c2())&&null!=t.ce(this)?Pl():this:K===t?Pl():this},t.$_$.e6=function(t){},t.$_$.f6=Rl,t.$_$.g6=$l,t.$_$.h6=St,t.$_$.i6=xt,t.$_$.j6=Et,t.$_$.k6=Ol,t.$_$.l6=bt,t.$_$.m6=Es,t.$_$.n6=function(t,n,i){var r=Ts(Cs(t,n,i)),a=e;r.hb(a)},t.$_$.o6=function(t){return new ql(t)},t.$_$.p6=function(t){fn(),(fn(),o).u5(t)},t.$_$.q6=ea,t.$_$.r6=na,t.$_$.s6=Ar,t.$_$.t6=function(t){var e=new Uint16Array(t);return e.$type$="CharArray",e},t.$_$.u6=zr,t.$_$.v6=Br,t.$_$.w6=Hr,t.$_$.x6=Da,t.$_$.y6=jr,t.$_$.z6=function(t,e,n,i){return Object.defineProperty(t,e,{configurable:!0,get:n,set:i})},t.$_$.a7=function(t){return Lr(),Ur()[Pr()]=t.r8_1,Ur()[Dr()]=t.s8_1,kr()[0]},t.$_$.b7=Jr,t.$_$.c7=aa,t.$_$.d7=$r,t.$_$.e7=function(t){return Lr(),Ur()[0]=t,(Lr(),x)[0]},t.$_$.f7=Qr,t.$_$.g7=function(t,e,n,i){return Ka(),Ya(t,0,e,i,n?i:null)},t.$_$.h7=Nr,t.$_$.i7=Ya,t.$_$.j7=ta,t.$_$.k7=Kr,t.$_$.l7=function(t){return new Or(t)},t.$_$.m7=za,t.$_$.n7=es,t.$_$.o7=as,t.$_$.p7=is,t.$_$.q7=ls,t.$_$.r7=Qa,t.$_$.s7=ns,t.$_$.t7=function(t,e){if("function"==typeof t)return t.$arity===e;var n=null==t?null:t.constructor,i=null==n?null:n.$metadata$,r=null==i?null:i.suspendArity;if(null==r)return!1;var a=r,s=!1,o=0,l=a.length;t:for(;o<l;){var u=a[o];if(o=o+1|0,e===u){s=!0;break t}}return s},t.$_$.u7=function(t){var e=$r(Array(t),new ha(0,0));return e.$type$="LongArray",e},t.$_$.v7=ja,t.$_$.w7=Ha,t.$_$.x7=qa,t.$_$.y7=ra,t.$_$.z7=Fa,t.$_$.a8=ia,t.$_$.b8=La,t.$_$.c8=Ba,t.$_$.d8=Ga,t.$_$.e8=Va,t.$_$.f8=Zr,t.$_$.g8=function(){return v},t.$_$.h8=function(t){if(It(t))throw Ns("Cannot round NaN value.");return t>n.MAX_VALUE?n.MAX_VALUE:t<n.MIN_VALUE?n.MIN_VALUE:Ha(Math.round(t))},t.$_$.i8=function(t){if(t%.5!=0)return Math.round(t);var e=Math.floor(t);return e%2==0?e:Math.ceil(t)},t.$_$.j8=vu,t.$_$.k8=rr,t.$_$.l8=function(t,e){return t.t8(e)>0?e:t},t.$_$.m8=nr,t.$_$.n8=ir,t.$_$.o8=function(t,e,n){if(e.t8(n)>0)throw Ns("Cannot coerce value to an empty range: maximum "+n.toString()+" is less than minimum "+e.toString()+".");return t.t8(e)<0?e:t.t8(n)>0?n:t},t.$_$.p8=ar,t.$_$.q8=er,t.$_$.r8=function(t,e){return function(t,e){if(!t)throw Ns("Step must be positive, was: "+Zr(e)+".")}(e>0,e),at.q8(t.u8_1,t.v8_1,t.w8_1>0?e:0|-e)},t.$_$.s8=tr,t.$_$.t8=Cn,t.$_$.u8=Tn,t.$_$.v8=En,t.$_$.w8=Mn,t.$_$.x8=gl,t.$_$.y8=function(t,e){return new El(t,!0,e)},t.$_$.z8=function(t){var e=new yl;return e.md_1=Cs(t,e,e),e},t.$_$.a9=sr,t.$_$.b9=function(t){pi();for(var e="",n=0,i=t.length;n<i;){var r=t[n];n=n+1|0,e+=dr(r)}return e},t.$_$.c9=function(t,e,n){e=e===F?0:e,n=n===F?t.length:n,pi(),V.p7(e,n,t.length);var i="",r=e;if(r<n)do{var a=r;r=r+1|0,i+=dr(t[a])}while(r<n);return i},t.$_$.d9=function(t,e,n){return Du(t,e,F,n=n!==F&&n)>=0},t.$_$.e9=function(t){return pi(),function(t,e,n,i){if(Mi(),!(e>=0&&n<=t.length&&e<=n))throw Ns(Zr("Failed requirement."));for(var r=e,a=ni();r<n;){var s=r;r=s+1|0;var o=t[s];if(o>=0)a.h5(ja(o));else if(o>>5==-2){var l=bi(t,o,r,n,i);l<=0?(a.h5(65533),r=r+(0|-l)|0):(a.h5(ja(l)),r=r+1|0)}else if(o>>4==-2){var u=xi(t,o,r,n,i);u<=0?(a.h5(65533),r=r+(0|-u)|0):(a.h5(ja(u)),r=r+2|0)}else if(o>>3==-2){var c=Si(t,o,r,n,i);if(c<=0)a.h5(65533),r=r+(0|-c)|0;else{var h=(c-65536|0)>>10|55296,f=1023&c|56320;a.h5(ja(h)),a.h5(ja(f)),r=r+3|0}}else Ei(0,r,i),a.h5(65533)}return a.toString()}(t,0,t.length,!1)},t.$_$.f9=function(t,e){if(!(e>=0))throw Ns(Zr("Requested character count "+e+" is less than zero."));var n=nr(e,t.length);return t.substring(n)},t.$_$.g9=function(t){return pi(),function(t,e,n,i){if(Mi(),!(e>=0&&n<=t.length&&e<=n))throw Ns(Zr("Failed requirement."));for(var r=new Int8Array(wt(n-e|0,3)),a=0,s=e;s<n;){var o=s;s=o+1|0;var l=_r(zr(t,o));if(l<128){var u=a;a=u+1|0,r[u]=Ba(l)}else if(l<2048){var c=a;a=c+1|0,r[c]=Ba(l>>6|192);var h=a;a=h+1|0,r[h]=Ba(63&l|128)}else if(l<55296||l>=57344){var f=a;a=f+1|0,r[f]=Ba(l>>12|224);var _=a;a=_+1|0,r[_]=Ba(l>>6&63|128);var d=a;a=d+1|0,r[d]=Ba(63&l|128)}else{var p=wi(t,l,s,n,i);if(p<=0){var m=a;a=m+1|0,r[m]=yi()[0];var g=a;a=g+1|0,r[g]=yi()[1];var v=a;a=v+1|0,r[v]=yi()[2]}else{var y=a;a=y+1|0,r[y]=Ba(p>>18|240);var w=a;a=w+1|0,r[w]=Ba(p>>12&63|128);var b=a;a=b+1|0,r[b]=Ba(p>>6&63|128);var x=a;a=x+1|0,r[x]=Ba(63&p|128),s=s+1|0}}}return r.length===a?r:gs(r,a)}(t,0,t.length,!1)},t.$_$.h9=function(t,e,n){return(n=n!==F&&n)?gi(t,t.length-e.length|0,e,0,e.length,n):t.endsWith(e)},t.$_$.i9=function(t,e,n){if(null==t)return null==e;if(null==e)return!1;if(!(n=n!==F&&n))return t==e;if(t.length!==e.length)return!1;var i=0,r=t.length;if(i<r)do{var a=i;if(i=i+1|0,!wu(zr(t,a),zr(e,a),n))return!1}while(i<r);return!0},t.$_$.j9=function(t){if(0===Br(t))throw oo("Char sequence is empty.");return zr(t,0)},t.$_$.k9=ju,t.$_$.l9=Nu,t.$_$.m9=Du,t.$_$.n9=mi,t.$_$.o9=function(t){return mr(),mr(),t<=56319&&55296<=t},t.$_$.p9=function(t){return mr(),mr(),t<=57343&&56320<=t},t.$_$.q9=function(t){return mr(),mr(),t<=57343&&55296<=t},t.$_$.r9=ai,t.$_$.s9=Pu,t.$_$.t9=zu,t.$_$.u9=function(t){if(0===Br(t))throw oo("Char sequence is empty.");return zr(t,Pu(t))},t.$_$.v9=Lu,t.$_$.w9=Fu,t.$_$.x9=function(t,e,n,i){i=i!==F&&i;var r=new RegExp(ci().t7(e),i?"gui":"gu"),a=ci().u7(n);return t.replace(r,a)},t.$_$.y9=function(t,e,n,i){i=i!==F&&i;var r=new RegExp(ci().t7(dr(e)),i?"gui":"gu"),a=dr(n);return t.replace(r,a)},t.$_$.z9=function(t,e,n,i){if(n=n!==F&&n,i=i===F?0:i,1===e.length)return Hu(t,dr(e[0]),n,i);for(var r=or(function(t,e,n,i,r){return n=n===F?0:n,i=i!==F&&i,Wu(r=r===F?0:r),new Ku(t,n,r,(a=e,s=i,function(t,e){var n=ju(t,a,e,s);return n<0?null:cc(n,1)}));var a,s}(t,e,F,n,i)),a=ee(ll(r,10)),s=r.s();s.t();){var o=Vu(t,s.u());a.p(o)}return a},t.$_$.aa=function(t,e,n,i){if(n=n!==F&&n,i=i===F?0:i,1===e.length){var r=e[0];if(0!==Br(r))return Hu(t,r,n,i)}for(var a=or(qu(t,e,F,n,i)),s=ee(ll(a,10)),o=a.s();o.t();){var l=Vu(t,o.u());s.p(l)}return s},t.$_$.ba=function(t,e,n){return(n=n!==F&&n)?gi(t,0,e,0,e.length,n):t.startsWith(e,0)},t.$_$.ca=function(t,e,n){return n=n!==F&&n,Br(t)>0&&wu(zr(t,0),e,n)},t.$_$.da=function(t,e,n){n=n===F?t:n;var i,r=zu(t,e);if(-1===r)i=n;else{var a=r+1|0,s=t.length;i=t.substring(a,s)}return i},t.$_$.ea=function(t,e,n){n=n===F?t:n;var i,r=Nu(t,e);if(-1===r)i=n;else{var a=r+e.length|0,s=t.length;i=t.substring(a,s)}return i},t.$_$.fa=function(t,e,n){n=n===F?t:n;var i=zu(t,e);return-1===i?n:t.substring(0,i)},t.$_$.ga=function(t,e,n){n=n===F?t:n;var i=Nu(t,e);return-1===i?n:t.substring(0,i)},t.$_$.ha=function(t,e,n){n=n===F?t:n;var i=Du(t,e);return-1===i?n:t.substring(0,i)},t.$_$.ia=ur,t.$_$.ja=function(t){var e=+t;return It(e)&&!oi(t)||0===e&&mi(t)?null:e},t.$_$.ka=function(t){var e=+t;return(It(e)&&!oi(t)||0===e&&mi(t))&&Uu(t),e},t.$_$.la=function(t,e){return e=e===F?Au().dg_1:e,bu(),function(t,e,i,r){if(e=e===F?0:e,i=i===F?t.length:i,r=r===F?Au().dg_1:r,bu(),V.p7(e,i,t.length),e===i)return"";var a=r.fg_1?"0123456789ABCDEF":"0123456789abcdef",s=r.gg_1,o=s.ig_1,l=s.jg_1,u=s.mg_1,c=s.ng_1,h=s.lg_1,f=s.kg_1,_=function(t,e,i,r,a,s,o){if(bu(),!(t>0))throw Ns(Zr("Failed requirement."));var l=(t-1|0)/e|0,u=t%e|0,c=((0===u?e:u)-1|0)/i|0,h=wt(l,(e-1|0)/i|0)+c|0,f=((t-1|0)-l|0)-h|0,_=Ga(l).ba(Ga(h).da(Ga(r))).ba(Ga(f).da(Ga(a))).ba(Ga(t).da(Ga(s).ba(new ha(2,0)).ba(Ga(o)))),d=Wa(0,n.MAX_VALUE);if(!ar(Qa(d,vu)?d:oa(),_))throw Ns("The resulting string length is too big: "+new Ec(_));return _.y8()}(i-e|0,o,l,f.length,h.length,u.length,c.length),d=0,p=0,m=ti(),g=e;if(g<i)do{var v=g;g=g+1|0;var y=255&t[v];d===o?(m.h5(10),d=0,p=0):p===l&&(m.g5(f),p=0),0!==p&&m.g5(h),m.g5(u),m.h5(zr(a,y>>4)),m.h5(zr(a,15&y)),m.g5(c),p=p+1|0,d=d+1|0}while(g<i);if(_!==m.a())throw Gs(Zr("Check failed."));return m.toString()}(t,0,t.length,e)},t.$_$.ma=function(t){var e,n=function(t){return ku(t,10)}(t);return null==n?Uu(t):e=n,e},t.$_$.na=function(t,e){var n,i=ku(t,e);return null==i?Uu(t):n=i,n},t.$_$.oa=Iu,t.$_$.pa=function(t){var e,n=Iu(t);return null==n?Uu(t):e=n,e},t.$_$.qa=function(t,e){var n,i=function(t,e){si(e);var n=t.length;if(0===n)return null;vc();var i,r=-1,a=zr(t,0);if(hr(a,48)<0){if(1===n||43!==a)return null;i=1}else i=0;var s=119304647,o=s,l=e,u=0,c=i;if(c<n)do{var h=c;c=c+1|0;var f=li(zr(t,h),e);if(f<0)return null;if(Oc(u,o)>0){if(o!==s)return null;if(Oc(u,o=Ic(r,l))>0)return null}var _=u=wt(u,l);if(Oc(u=u+f|0,_)<0)return null}while(c<n);return u}(t,e);return null==(null==i?null:new wc(i))?Uu(t):n=i,n},t.$_$.ra=function(t,e){return function(t,e,n){if(e=e===F?"":e,mi(n=n===F?"|":n))throw Ns(Zr("marginPrefix must be non-blank string."));for(var i=Fu(t),r=(t.length,wt(e.length,i.n()),function(t){return 0===Br(t)?Ou:(e=t,function(t){return e+t});var e}(e)),a=nl(i),s=te(),o=0,l=i.s();l.t();){var u=l.u(),c=o;o=c+1|0;var h,f=Bt(c);if(0!==f&&f!==a||!mi(u)){var _;t:{var d=0,p=Br(u)-1|0;if(d<=p)do{var m=d;if(d=d+1|0,!ai(zr(u,m))){_=m;break t}}while(d<=p);_=-1}var g,v,y=_;if(-1===y)g=null;else if(vi(u,n,y)){var w=y+n.length|0;g=u.substring(w)}else g=null;h=null==(v=null==g?null:r(g))?u:v}else h=null;var b=h;null==b||s.p(b)}return Vi(s,ti(),"\n").toString()}(t,"",e=e===F?"|":e)},t.$_$.sa=function(t,e){var n;t:{var i=is(t)?t:oa(),r=0,a=Br(i)-1|0;if(r<=a)do{var s=r;if(r=r+1|0,!Fi(e,zr(i,s))){n=Hr(i,s,Br(i));break t}}while(r<=a);n=""}return Zr(n)},t.$_$.ta=function(t,e){var n=is(t)?t:oa(),i=0,r=Br(n)-1|0,a=!1;t:for(;i<=r;){var s=Fi(e,zr(n,a?r:i));if(a){if(!s)break t;r=r-1|0}else s?i=i+1|0:a=!0}return Zr(Hr(n,i,r+1|0))},t.$_$.ua=function(t){var e=0,n=Br(t)-1|0,i=!1;t:for(;e<=n;){var r=ai(zr(t,i?n:e));if(i){if(!r)break t;n=n-1|0}else r?e=e+1|0:i=!0}return Hr(t,e,n+1|0)},t.$_$.va=gr,t.$_$.wa=Tt,t.$_$.xa=Mr,t.$_$.ya=fo,t.$_$.za=ks,t.$_$.ab=Ls,t.$_$.bb=Xs,t.$_$.cb=Hs,t.$_$.db=ha,t.$_$.eb=lo,t.$_$.fb=lc,t.$_$.gb=uc,t.$_$.hb=ro,t.$_$.ib=oa,t.$_$.jb=function(){throw qs()},t.$_$.kb=pc,t.$_$.lb=Rc,t.$_$.mb=$t,t.$_$.nb=Qs,t.$_$.ob=function(t,e){if(t!==e){var n=t._suppressed;null==n?t._suppressed=tl([e]):n.p(e)}},t.$_$.pb=function(t){return t},t.$_$.qb=function(t){return 32-vt(~(0|t|-t))|0},t.$_$.rb=sc,t.$_$.sb=sa,t.$_$.tb=It,t.$_$.ub=function(t,e){return new Zu(e)},t.$_$.vb=function(t){return new Zu(t)},t.$_$.wb=function(){throw Eo()},t.$_$.xb=function(t){console.error(function(t){return(new $i).j8(t)}(t))},t.$_$.yb=kt,t.$_$.zb=oc,t.$_$.ac=function(t){throw $o("lateinit property "+t+" has not been initialized")},t.$_$.bc=Tr,t.$_$.cc=cc,t})?n.apply(e,[e]):n)||(t.exports=i)},735:function(t,e,n){var i,r,a;r=[e,n(204),n(675)],void 0===(a="function"==typeof(i=function(t,e,n){"use strict";var i=e.useEffect,r=n.$_$.a3;function a(t){return e=t,function(){var t=[];return e(t),function(t){if(0!==t.length)return e=t,function(){for(var t=e,n=0,i=t.length;n<i;){var a=t[n];n=n+1|0,a()}return r};var e}(t)};var e}return t.$_$=t.$_$||{},t.$_$.a=function(t){var e=a(t);i(e,[])},t})?i.apply(e,r):i)||(t.exports=a)},107:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";e.$_$.a8;var n,i=e.$_$.z7;function r(){}return(0,e.$_$.b8)(r,"ReactHTML",i),n=new r,t.$_$=t.$_$||{},t.$_$.a=n,t})?i.apply(e,r):i)||(t.exports=a)},368:function(t,e,n){var i,r,a;r=[e,n(204),n(675)],void 0===(a="function"==typeof(i=function(t,e,n){"use strict";var i,r,a=e.createElement,s=e.isValidElement,o=e.Fragment,l=n.$_$.a8,u=n.$_$.m7,c=n.$_$.b8,h=n.$_$.x6,f=n.$_$.d,_=n.$_$.a3,d=n.$_$.i5;function p(){return y(),i}function m(){}function g(){return y(),new v}function v(){}function y(){r||(r=!0,i=Symbol("@@children"))}function w(t,e){var n=g();e(n);var i=n,r=n[p()],s=null==r?[]:r;return a.apply(null,[t,i].concat([].slice.call(s.slice())))}return c(m,"ChildrenBuilder",u),c(v,"ChildrenBuilderImpl",h,f,[m],v),l(v).w59=function(t){this.v59(t)},l(v).x59=function(t){this.w59(t)},l(v).v59=function(t){if(null!=this[p()])this[p()].push(t);else{var e=[t];this[p()]=e}},l(v).y59=function(t,e){this.w59(w(t,e))},t.$_$=t.$_$||{},t.$_$.a=function(t){return e=t,function(t){return function(t){var e=g();t(e);var n=e[p()];if(null==n)return null;var i=n;if(0===i.length)return null;if(1===i.length){var r=d(i);if(null==r)return null;var l=r;if(s(l))return l}return a.apply(null,[o,f].concat([].slice.call(i.slice())))}(function(t,e){return function(n){return t(n,e),_}}(e,t))};var e},t.$_$.b=w,t})?i.apply(e,r):i)||(t.exports=a)},646:function(t,e,n){var i,r,a;r=[e,n(675),n(868)],void 0===(a="function"==typeof(i=function(t,e,n){"use strict";var i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$,A,R,O,I,k,U,P,D,N,L,z,F,B,H,V,q,j,G,W,X,Y,K,J,Z,Q,tt,et,nt,it,rt,at,st,ot,lt,ut,ct,ht,ft,_t,dt,pt,mt,gt,vt,yt,wt,bt,xt,St,Et,Mt,Tt,Ct=Math.imul,$t=e.$_$.a3,At=e.$_$.a8,Rt=e.$_$.ib,Ot=e.$_$.g6,It=e.$_$.x6,kt=e.$_$.b8,Ut=e.$_$.d,Pt=e.$_$.r2,Dt=e.$_$.y5,Nt=e.$_$.m6,Lt=e.$_$.x5,zt=e.$_$.m7,Ft=e.$_$.r7,Bt=e.$_$.f8,Ht=e.$_$.i1,Vt=e.$_$.bc,qt=n.$_$.e,jt=n.$_$.d,Gt=e.$_$.z7,Wt=e.$_$.k7,Xt=e.$_$.b7,Yt=n.$_$.b,Kt=e.$_$.o,Jt=e.$_$.i2,Zt=e.$_$.k2,Qt=e.$_$.b6,te=e.$_$.q2,ee=e.$_$.a6,ne=e.$_$.c6,ie=e.$_$.d6,re=e.$_$.f6,ae=e.$_$.t1,se=e.$_$.j7,oe=e.$_$.q,le=e.$_$.xa,ue=e.$_$.n6,ce=e.$_$.wb,he=e.$_$.db,fe=e.$_$.z5,_e=e.$_$.x2,de=e.$_$.f,pe=e.$_$.hb,me=e.$_$.s1,ge=e.$_$.r6,ve=e.$_$.ya,ye=e.$_$.x,we=e.$_$.k6,be=e.$_$.t,xe=e.$_$.ac,Se=e.$_$.g,Ee=e.$_$.w5,Me=e.$_$.c3,Te=e.$_$.k1,Ce=e.$_$.l6,$e=e.$_$.i6,Ae=e.$_$.h6,Re=e.$_$.j6,Oe=e.$_$.q6,Ie=(e.$_$.y2,e.$_$.h2),ke=e.$_$.rb,Ue=e.$_$.nb,Pe=e.$_$.x1,De=n.$_$.a,Ne=e.$_$.sb,Le=e.$_$.d8,ze=e.$_$.ob,Fe=e.$_$.e1,Be=n.$_$.c,He=e.$_$.t4,Ve=e.$_$.h,qe=e.$_$.o1,je=e.$_$.y6,Ge=e.$_$.u9,We=e.$_$.y1,Xe=e.$_$.bb,Ye=e.$_$.h1,Ke=e.$_$.eb,Je=e.$_$.p1,Ze=e.$_$.c,Qe=e.$_$.u2,tn=e.$_$.za,en=e.$_$.oa,nn=e.$_$.c5,rn=e.$_$.e3,an=e.$_$.s4,sn=e.$_$.b,on=e.$_$.p,ln=e.$_$.d5,un=e.$_$.h3,cn=e.$_$.o8,hn=e.$_$.j,fn=e.$_$.q1,_n=e.$_$.m,dn=e.$_$.v1;function pn(t,e){var n;return t=t===Ut?null:t,e===Ut?(this.dn(t),n=$t):n=e.dn.call(this,t),n}function mn(t,e,n,i){return t=t!==Ut&&t,e=e===Ut||e,i===Ut?this.zm(t,e,n):i.zm.call(this,t,e,n)}function gn(t,e,n){lr.call(this,n),e&&this.sl(t.bb(p)),this.vl_1=t.ge(this)}function vn(t,e){gn.call(this,t,!0,e)}function yn(t,e){vn.call(this,t,!1),this.yn_1=Dt(e,this,this)}function wn(t,e){Nt.call(this,e),this.ho_1=t}function bn(t,e){gn.call(this,t,!0,e)}function xn(t,e){bn.call(this,t,!1),this.po_1=Dt(e,this,this)}function Sn(){}function En(t,e){var n=new Mn(e);return t.to(n)}function Mn(t){Hn.call(this),this.vo_1=t}function Tn(t){if(!(t instanceof zs))return new Fn(t,Hs());var e=t.ep(),n=null==e?null:e.lp()?e:null;return null==n?new Fn(t,ot):n}function Cn(){return Wn(),i}function $n(t){return t.kp_1.kotlinx$atomicfu$value}function An(t){var e;if(2===t.np_1){var n=t.gp_1;e=(n instanceof zs?n:Rt()).mp()}else e=!1;return e}function Rn(t,e,n){var i=536870911&t.ip_1.kotlinx$atomicfu$value;if(536870911===i)throw Ht(Bt("The index for Segment.onCancellation(..) is broken"));try{e.tp(i,n,t.ab())}catch(e){if(!(e instanceof Error))throw e;var r=e;ai(t.ab(),new xi("Exception in invokeOnCancellation handler for "+t,r))}}function On(t){var e=t.ab().bb(p);if(null==e)return null;var n=e,i=new yr(t),r=n.an(!0,Ut,i);return t.kp_1.atomicfu$compareAndSet(null,r),r}function In(t,e){for(var n=t.jp_1;;){var i=n.kotlinx$atomicfu$value;if(i instanceof Vn){if(t.jp_1.atomicfu$compareAndSet(i,e))return $t}else if(i instanceof Hn||i instanceof Ms)kn(0,e,i);else{if(i instanceof Jn){if(i.cq()||kn(0,e,i),i instanceof Zn){var r=i instanceof Jn?i:null,a=null==r?null:r.cm_1;e instanceof Hn?t.zp(e,a):Rn(t,e instanceof Ms?e:Rt(),a)}return $t}if(i instanceof qn){if(null!=i.vp_1&&kn(0,e,i),e instanceof Ms)return $t;if(e instanceof Hn||Rt(),i.aq())return t.zp(e,i.yp_1),$t;var s=i.bq(Ut,e);if(t.jp_1.atomicfu$compareAndSet(i,s))return $t}else{if(e instanceof Ms)return $t;e instanceof Hn||Rt();var o=new qn(i,e);if(t.jp_1.atomicfu$compareAndSet(i,o))return $t}}}}function kn(t,e,n){var i="It's prohibited to register multiple handlers, tried to register "+Bt(e)+", already has "+Vt(n);throw Ht(Bt(i))}function Un(t,e){if(function(t){for(var e=t.ip_1;;){var n=e.kotlinx$atomicfu$value;switch(n>>Gn()){case 0:var i=536870911&n,r=(2<<Gn())+i|0;if(t.ip_1.atomicfu$compareAndSet(n,r))return!0;break;case 1:return!1;default:throw Ht(Bt("Already resumed"))}}}(t))return $t;!function(t,e){var n=t.jq(),i=4===e;if(!i&&n instanceof zs&&qs(e)===qs(t.np_1)){var r=n.zo_1,a=n.ab();r.vr(a)?r.wr(a,t):function(t){var e=bi().os();if(e.is())e.hs(t);else{e.ks(!0);try{for(js(t,t.jq(),!0);e.gs(););}catch(e){if(!(e instanceof Error))throw e;var n=e;t.zq(n,null)}finally{e.ls(!0)}}}(t)}else js(t,n,i)}(t,e)}function Pn(t,e,n,i,r,a){return n instanceof Jn?n:(qs(i)||null!=a)&&(null!=r||e instanceof Hn||null!=a)?new qn(n,e instanceof Hn?e:null,r,a):n}function Dn(t,e,n,i){for(var r=t.jp_1;;)t:{var a=r.kotlinx$atomicfu$value;if(null!=a&&Ft(a,Bn)){var s=Pn(0,a,e,n,i,null);if(!t.jp_1.atomicfu$compareAndSet(a,s))break t;return zn(t),Un(t,n),$t}if(a instanceof Zn&&a.hq())return null==i||t.dq(i,a.cm_1),$t;Ln(0,e)}}function Nn(t,e,n,i,r){return Dn(t,e,n,i=i===Ut?null:i)}function Ln(t,e){var n="Already resumed, but proposed with update "+Vt(e);throw Ht(Bt(n))}function zn(t){An(t)||t.iq()}function Fn(t,e){Vs.call(this,e),this.gp_1=t,this.hp_1=this.gp_1.ab();var n=536870911+(0<<Gn())|0;this.ip_1=qt(n),this.jp_1=jt(r),this.kp_1=jt(null)}function Bn(){}function Hn(){wo.call(this)}function Vn(){}function qn(t,e,n,i,r){e=e===Ut?null:e,n=n===Ut?null:n,i=i===Ut?null:i,r=r===Ut?null:r,this.up_1=t,this.vp_1=e,this.wp_1=n,this.xp_1=i,this.yp_1=r}function jn(t){Hn.call(this),this.br_1=t}function Gn(){return Wn(),29}function Wn(){a||(a=!0,i=new eo("RESUME_TOKEN"))}function Xn(t,e){Nt.call(this,e),this.kr_1=t}function Yn(t){lr.call(this,!0),this.sl(t)}function Kn(){}function Jn(t,e){e=e!==Ut&&e,this.cm_1=t,this.dm_1=Yt(e)}function Zn(t,e,n){Jn.call(this,null==e?Kt("Continuation "+t+" was cancelled normally"):e,n),this.gq_1=Yt(!1)}function Qn(t,e){e=e===Ut?null:e;var n,i=Jt(t);if(null==i){var r=Zt(t),a=null==r||null!=r?r:Rt();n=null!=e?new ti(a,e):a}else n=new Jn(i);return n}function ti(t,e){this.sr_1=t,this.tr_1=e}function ei(t){return t instanceof ri?t:null}function ni(){s=this;var t=te;Qt.call(this,t,ei)}function ii(){return null==s&&new ni,s}function ri(){ii(),ee.call(this,te)}function ai(t,e){try{var n=t.bb(o);if(null!=n)return n.yr(t,e),$t}catch(n){if(n instanceof Error)return Ps(t,oi(e,n)),$t;throw n}Ps(t,e)}function si(){}function oi(t,e){return t===e?t:ae("Exception while trying to handle coroutine exception",e)}function li(){}function ui(t){ee.call(this,l),this.as_1=t}function ci(){}function hi(t,e){e=e===Ut?null:e;var n=t.wl().bb(p);if(null==n)throw Ht(Bt("Scope cannot be cancelled because it does not have a job: "+t));n.dn(e)}function fi(){}function _i(){if(_)return $t;_=!0,c=new di("DEFAULT",0),h=new di("LAZY",1),new di("ATOMIC",2),f=new di("UNDISPATCHED",3)}function di(t,e){le.call(this,t,e)}function pi(){return _i(),c}function mi(){}function gi(t){var e=t.bb(te),n=null!=e&&Ft(e,mi)?e:null;return null==n?function(){var t=$o().cw_1;return Ft(t,mi)?t:Rt()}():n}function vi(t,e){return e?new he(0,1):new he(1,0)}function yi(){ri.call(this),this.ds_1=new he(0,0),this.es_1=!1,this.fs_1=null}function wi(){d=this,this.ns_1=(new eo("ThreadLocalEventLoop"),new Qo)}function bi(){return null==d&&new wi,d}function xi(t,e){me(t,e,this),ge(this,xi)}function Si(t,e){ye(t,e,this),ge(this,Si)}function Ei(){}function Mi(){}function Ti(){}function Ci(){}function $i(){}function Ai(t){var e=t.bb(p);null==e||function(t){if(!t.xl())throw t.vm()}(e)}function Ri(t){return new wr(t=t===Ut?null:t)}function Oi(){return br(),g}function Ii(){return br(),v}function ki(){return br(),y}function Ui(){return br(),w}function Pi(){return br(),b}function Di(){return br(),S}function Ni(t){this.ss_1=t}function Li(){}function zi(){Ko.call(this)}function Fi(){vo.call(this)}function Bi(t,e){t.qt_1.kotlinx$atomicfu$value=e}function Hi(t){return t.qt_1.kotlinx$atomicfu$value}function Vi(t){return Se(4)}function qi(t,e,n){var i,r=n instanceof Jn?n:null,a=null==r?null:r.cm_1;i=e.rt();var s=e.st(a),o=function(t,e,n){if(n.z())return e.rt()?new Oo(t.am(),null,t):null;var i;t:{for(var r=n.s();r.t();){var a=r.u();if(!(a instanceof Ee)){i=a;break t}}i=null}if(null!=i)return i;var s=n.d1(0);if(s instanceof Er){var o;t:{for(var l=n.s();l.t();){var u=l.u();if(u!==s&&u instanceof Er){o=u;break t}}o=null}if(null!=o)return o}return s}(t,e,s);null!=o&&function(t,e,n){if(n.n()<=1)return $t;for(var i=(o=n.n(),hn(o)),r=e,a=n.s();a.t();){var s=a.u();!(s===e||s===r||s instanceof Ee)&&i.p(s)}var o}(0,o,s);var l=o,u=null==l||l===a?n:new Jn(l);return null!=l&&(Wi(t,l)||t.on(l))&&(u instanceof Jn?u:Rt()).cq(),i||t.ln(l),t.bm(u),t.ql_1.atomicfu$compareAndSet(e,ur(u)),ji(t,e,u),u}function ji(t,e,n){var i=t.pm();null==i||(i.xo(),t.om(m));var r=n instanceof Jn?n:null,a=null==r?null:r.cm_1;if(e instanceof Fi)try{e.invoke(a)}catch(n){if(!(n instanceof Error))throw n;var s=n;t.im(new xi("Exception in completion handler "+e+" for "+t,s))}else{var o=e.ts();null==o||function(t,e,n){for(var i=null,r=t.ys_1;!Xt(r,t);){if(r instanceof Fi){var a=r;try{a.invoke(n)}catch(t){if(!(t instanceof Error))throw t;null==(null==i?null:i)&&(i=new xi("Exception in completion handler "+a+" for "+e,t))}}r=r.ys_1}var s=i;null==s||e.im(s)}(o,t,a)}}function Gi(t,e,n){t.ln(n);for(var i=null,r=e.ys_1;!Xt(r,e);){if(r instanceof cr){var a=r;try{a.invoke(n)}catch(e){if(!(e instanceof Error))throw e;null==(null==i?null:i)&&(i=new xi("Exception in completion handler "+a+" for "+t,e))}}r=r.ys_1}var s=i;null==s||t.im(s),Wi(t,n)}function Wi(t,e){if(t.mn())return!0;var n=e instanceof Ee,i=t.pm();return null===i||i===m?n:!!i.hn(e)||n}function Xi(t,e){return e instanceof Ni?e.ss_1?0:t.ql_1.atomicfu$compareAndSet(e,Di())?(t.um(),1):-1:e instanceof hr?t.ql_1.atomicfu$compareAndSet(e,e.tt_1)?(t.um(),1):-1:0}function Yi(t,e,n,i){var r;return t.rm()===e?(n.ft(i),r=!0):r=!1,r}function Ki(t,e){var n=new zi,i=e.ss_1?n:new hr(n);t.ql_1.atomicfu$compareAndSet(e,i)}function Ji(t,e){e.mt(new zi);var n=e.ys_1;t.ql_1.atomicfu$compareAndSet(e,n)}function Zi(t,e){return null==e||e instanceof Error?null==e?new Oo(t.am(),null,t):e:(null!=e&&Ft(e,Ti)?e:Rt()).jn()}function Qi(t,e){var n,i=e.ts();if(null==i){var r;if(e instanceof Ni)r=new zi;else{if(!(e instanceof Fi))throw Ht(Bt("State should have list: "+e));Ji(t,e),r=null}n=r}else n=i;return n}function tr(t,e,n){var i=Qi(t,e);if(null==i)return!1;var r=i,a=new ar(r,!1,n);return!!t.ql_1.atomicfu$compareAndSet(e,a)&&(Gi(t,r,n),!0)}function er(t,e,n){return null!=e&&Ft(e,Li)?!(e instanceof Ni||e instanceof Fi)||e instanceof fr||n instanceof Jn?function(t,e,n){var i=Qi(t,e);if(null==i)return ki();var r=i,a=e instanceof ar?e:null,s=null==a?new ar(r,!1,null):a,o=null;if(s.ut())return Oi();if(s.yt(!0),s!==e&&!t.ql_1.atomicfu$compareAndSet(e,s))return ki();var l=s.rt(),u=n instanceof Jn?n:null;null==u||s.wt(u.cm_1);var c=s.xt();null==(o=l?null:c)||Gi(t,r,o);var h=function(t,e){var n,i=e instanceof fr?e:null;if(null==i){var r=e.ts();n=null==r?null:ir(r)}else n=i;return n}(0,e);return null!=h&&nr(t,s,h,n)?Ii():qi(t,s,n)}(t,e,n):function(t,e,n){return!!t.ql_1.atomicfu$compareAndSet(e,ur(n))&&(t.ln(null),t.bm(n),ji(t,e,n),!0)}(t,e,n)?n:ki():Oi()}function nr(t,e,n,i){for(var r=t,a=e,s=n,o=i;;){var l=s.du_1,u=new sr(r,a,s,o);if(l.an(Ut,!1,u)!==m)return!0;var c=ir(s);if(null==c)return!1;s=c}}function ir(t,e){for(var n=t;n.at_1;)n=n.zs_1;for(;;)if(!(n=n.ys_1).at_1){if(n instanceof fr)return n;if(n instanceof zi)return null}}function rr(t,e){return e instanceof ar?e.rt()?"Cancelling":e.ut()?"Completing":"Active":null!=e&&Ft(e,Li)?e.xl()?"Active":"New":e instanceof Jn?"Cancelled":"Completed"}function ar(t,e,n){this.nt_1=t,this.ot_1=Yt(e),this.pt_1=jt(n),this.qt_1=jt(null)}function sr(t,e,n,i){Fi.call(this),this.ju_1=t,this.ku_1=e,this.lu_1=n,this.mu_1=i}function or(t,e){Fn.call(this,t,Hs()),this.tu_1=e}function lr(t){this.ql_1=jt(t?Di():(br(),x)),this.rl_1=jt(null)}function ur(t){return br(),null!=t&&Ft(t,Li)?new vr(t):t}function cr(){Fi.call(this)}function hr(t){this.tt_1=t}function fr(t){cr.call(this),this.du_1=t}function _r(t){cr.call(this),this.zu_1=t,this.av_1=qt(0)}function dr(t){Fi.call(this),this.fv_1=t}function pr(t){Fi.call(this),this.kv_1=t}function mr(t){br();var e=t instanceof vr?t:null,n=null==e?null:e.lv_1;return null==n?t:n}function gr(t){Fi.call(this),this.qv_1=t}function vr(t){this.lv_1=t}function yr(t){cr.call(this),this.vv_1=t}function wr(t){lr.call(this,!0),this.sl(t),this.yv_1=function(t){var e=t.pm(),n=e instanceof fr?e:null,i=null==n?null:n.lt();if(null==i)return!1;for(var r=i;;){if(r.nn())return!0;var a=r.pm(),s=a instanceof fr?a:null,o=null==s?null:s.lt();if(null==o)return!1;r=o}}(this)}function br(){E||(E=!0,g=new eo("COMPLETING_ALREADY"),v=new eo("COMPLETING_WAITING_CHILDREN"),y=new eo("COMPLETING_RETRY"),w=new eo("TOO_LATE_TO_CANCEL"),b=new eo("SEALED"),x=new Ni(!1),S=new Ni(!0))}function xr(){ri.call(this)}function Sr(t){wr.call(this,t)}function Er(){}function Mr(){M=this,ri.call(this)}function Tr(){}function Cr(){}function $r(){if(R)return $t;R=!0,C=new Ar("SUSPEND",0),$=new Ar("DROP_OLDEST",1),A=new Ar("DROP_LATEST",2)}function Ar(t,e){le.call(this,t,e)}function Rr(){return $r(),C}function Or(){return $r(),$}function Ir(){return Za(),O}function kr(){return Za(),I}function Ur(){return Za(),U}function Pr(){return Za(),P}function Dr(){return Za(),D}function Nr(){return Za(),N}function Lr(){return Za(),L}function zr(){return Za(),z}function Fr(){return Za(),F}function Br(){return Za(),B}function Hr(){return Za(),H}function Vr(){return Za(),G}function qr(){return Za(),Y}function jr(t,e,n){t.sw_1.atomicfu$get(Ct(e,2)).kotlinx$atomicfu$value=n}function Gr(t,e,n,i){Ms.call(this,t,e,i),this.rw_1=n,this.sw_1=De(Ct(kr(),2))}function Wr(t){t.dy_1=Hr();var e=t.fy_1.gy();if(null==e)return!1;throw e}function Xr(t,e,n,i,r){var a=Tn(fe(r));try{t.ey_1=a;var s=t.fy_1,o=ha(s,e,n,i,t);if(o===Ka())ua(t,s,e,n);else if(o===Ja()){i.t8(s.hy())<0&&e.by();t:{var l=s.kx_1.kotlinx$atomicfu$value;e:for(;;){if(s.iy()){Yr(t);break t}var u=s.gx_1.atomicfu$getAndIncrement$long(),c=kr(),h=u.ea(Le(c)),f=kr(),_=u.fa(Le(f)).y8();if(!l.rp_1.equals(h)){var d=Aa(s,h,l);if(null==d)continue e;l=d}var p=ha(s,l,_,u,t);if(p===Ka()){var m=null!=t&&Ft(t,Cr)?t:null;null==m||ua(m,s,l,_)}else{if(p===Ja()){u.t8(s.hy())<0&&l.by();continue e}if(p===Ya())throw Ht(Bt("unexpected"));l.by();var g=null==p||null!=p?p:Rt();t.dy_1=g,t.ey_1=null;var v=t.fy_1.ex_1;a.vq(!0,null==v?null:Zs(v,g,a.ab()))}break t}}}else{e.by();var y=null==o||null!=o?o:Rt();t.dy_1=y,t.ey_1=null;var w=t.fy_1.ex_1;a.vq(!0,null==w?null:Zs(w,y,a.ab()))}}catch(t){if(t instanceof Error){var b=t;throw a.sq(),b}throw t}return a.rq()}function Yr(t){var e=Ne(t.ey_1);t.ey_1=null,t.dy_1=Hr();var n=t.fy_1.gy();if(null==n){var i=Ie(!1);e.hb(i)}else{var r=Zo(n),a=Ie(ke(r));e.hb(a)}}function Kr(t,e){Nt.call(this,e),this.ry_1=t}function Jr(t){return t.hx_1.kotlinx$atomicfu$value}function Zr(t){var e=Jr(t);return!!e.equals(new he(0,0))||e.equals(new he(-1,2147483647))}function Qr(t,e,n){var i=new Fn(fe(n),Hs());i.kq();var r=t.ex_1,a=null==r?null:Js(r,e);if(null==a){var s=Zo(t.gz()),o=Ie(ke(s));i.hb(o)}else{ze(a,t.gz());var l=Zo(a),u=Ie(ke(l));i.hb(u)}return i.rq()}function ta(t,e,n,i,r,a){var s=Tn(fe(a));try{var o=ra(t,e,n,i,r,s,!1);if(o===qa()){e.by();var l=Ie($t);s.hb(l)}else if(o===ja()){var u=Ie($t);s.hb(u)}else if(o===Ga())ea(s,0,e,n);else if(o===Wa())r.t8(t.hz())<0&&e.by(),na(t,i,s);else{if(o!==Xa())throw Ht(Bt("unexpected"));e.by();t:{var c=t.jx_1.kotlinx$atomicfu$value;e:for(;;){var h=t.fx_1.atomicfu$getAndIncrement$long(),f=h.oa(new he(-1,268435455)),_=Ma(h,t),d=kr(),p=f.ea(Le(d)),m=kr(),g=f.fa(Le(m)).y8();if(!c.rp_1.equals(p)){var v=$a(t,p,c);if(null==v){if(_){na(t,i,s);break t}continue e}c=v}var y=ra(t,c,g,i,f,s,_);if(y===qa()){c.by();var w=Ie($t);s.hb(w);break t}if(y===ja()){var b=Ie($t);s.hb(b);break t}if(y===Ga()){if(_){c.rx(),na(t,i,s);break t}var x=null!=s&&Ft(s,Cr)?s:null;null==x||ea(x,0,c,g);break t}if(y===Wa()){f.t8(t.hz())<0&&c.by(),na(t,i,s);break t}if(y!==Xa()){if(y===Va())throw Ht(Bt("unexpected"))}else c.by()}}}}catch(t){if(t instanceof Error){var S=t;throw s.sq(),S}throw t}return s.rq()}function ea(t,e,n,i){t.wq(n,i+kr()|0)}function na(t,e,n){var i=t.ex_1;null==i||Ys(i,e,n.ab());var r=Zo(t.gz()),a=Ie(ke(r));n.hb(a)}function ia(){}function ra(t,e,n,i,r,a,s){if(e.vw(n,i),s)return aa(t,e,n,i,r,a,s);var o,l=e.zw(n);if(null===l)if(sa(t,r)){if(e.bx(n,null,Ur()))return ja()}else{if(null==a)return Va();if(e.bx(n,null,a))return Ga()}else if(null!=l&&Ft(l,Cr))return e.yw(n),oa(l,t,i)?(e.ax(n,zr()),t.iz(),o=qa()):(e.cx(n,Br())!==Br()&&e.px(n,!0),o=Xa()),o;return aa(t,e,n,i,r,a,s)}function aa(t,e,n,i,r,a,s){for(;;){var o=e.zw(n);if(null===o)if(sa(t,r)&&!s){if(e.bx(n,null,Ur()))return ja()}else if(s){if(e.bx(n,null,Fr()))return e.px(n,!1),Wa()}else{if(null==a)return Va();if(e.bx(n,null,a))return Ga()}else{var l;if(o!==Pr())return o===Br()||o===Lr()?(e.yw(n),Xa()):o===Hr()?(e.yw(n),ya(t),Wa()):(e.yw(n),oa(o instanceof Da?o.jz_1:o,t,i)?(e.ax(n,zr()),t.iz(),l=qa()):(e.cx(n,Br())!==Br()&&e.px(n,!0),l=Xa()),l);if(e.bx(n,o,Ur()))return ja()}}}function sa(t,e){var n;if(e.t8(Jr(t))<0)n=!0;else{var i=t.hz(),r=t.dx_1,a=i.ba(Le(r));n=e.t8(a)<0}return n}function oa(t,e,n){var i;if(Ft(t,ao))i=t.oz(e,n);else if(t instanceof Na){t instanceof Na||Rt();var r=as().mz(n),a=e.ex_1;i=La(t.nz_1,new ss(r),null==a?null:Zs(a,n,t.nz_1.ab()))}else if(t instanceof ga)t instanceof ga||Rt(),i=t.kz(n);else{if(!Ft(t,Sn)){var s="Unexpected receiver type: "+Bt(t);throw Ht(Bt(s))}Ft(t,Sn)||Rt();var o=e.ex_1;i=La(t,n,null==o?null:Zs(o,n,t.ab()))}return i}function la(t,e,n,i,r){var a=Tn(fe(r));try{var s=ha(t,e,n,i,a);if(s===Ka())ua(a,t,e,n);else if(s===Ja()){i.t8(t.hy())<0&&e.by();t:{var o=t.kx_1.kotlinx$atomicfu$value;e:for(;;){if(t.iy()){ca(t,a);break t}var l=t.gx_1.atomicfu$getAndIncrement$long(),u=kr(),c=l.ea(Le(u)),h=kr(),f=l.fa(Le(h)).y8();if(!o.rp_1.equals(c)){var _=Aa(t,c,o);if(null==_)continue e;o=_}var d=ha(t,o,f,l,a);if(d===Ka()){var p=null!=a&&Ft(a,Cr)?a:null;null==p||ua(p,t,o,f)}else{if(d===Ja()){l.t8(t.hy())<0&&o.by();continue e}if(d===Ya())throw Ht(Bt("unexpected"));o.by();var m=null==d||null!=d?d:Rt(),g=t.ex_1,v=null==g?null:Zs(g,m,a.ab());a.vq(m,v)}break t}}}else{e.by();var y=null==s||null!=s?s:Rt(),w=t.ex_1,b=null==w?null:Zs(w,y,a.ab());a.vq(y,b)}}catch(t){if(t instanceof Error){var x=t;throw a.sq(),x}throw t}return a.rq()}function ua(t,e,n,i){e.pz(),t.wq(n,i)}function ca(t,e){var n=va(t),i=Ie(ke(n));e.hb(i)}function ha(t,e,n,i,r){var a=e.zw(n);if(null===a){var s=t.fx_1.kotlinx$atomicfu$value.oa(new he(-1,268435455));if(i.t8(s)>=0){if(null===r)return Ya();if(e.bx(n,a,r))return _a(t),Ka()}}else if(a===Ur()&&e.bx(n,a,zr()))return _a(t),e.xw(n);return function(t,e,n,i,r){t:for(;;){var a=e.zw(n);if(null===a||a===Pr()){var s=t.fx_1.kotlinx$atomicfu$value.oa(new he(-1,268435455));if(i.t8(s)<0){if(e.bx(n,a,Lr()))return _a(t),Ja()}else{if(null===r)return Ya();if(e.bx(n,a,r))return _a(t),Ka()}}else if(a===Ur()){if(e.bx(n,a,zr()))return _a(t),e.xw(n)}else{if(a===Fr())return Ja();if(a===Lr())return Ja();if(a===Hr())return _a(t),Ja();if(a===Nr())continue t;if(e.bx(n,a,Dr())){var o,l=a instanceof Da;return fa(a instanceof Da?a.jz_1:a,t,e,n)?(e.ax(n,zr()),_a(t),o=e.xw(n)):(e.ax(n,Fr()),e.px(n,!1),l&&_a(t),o=Ja()),o}}}}(t,e,n,i,r)}function fa(t,e,n,i){var r;if(Ft(t,Sn))Ft(t,Sn)||Rt(),r=La(t,$t);else if(Ft(t,ao)){t instanceof lo||Rt();var a=t.uz(e,$t);a===po()&&n.yw(i),r=a===_o()}else{if(!(t instanceof ia)){var s="Unexpected waiter: "+Bt(t);throw Ht(Bt(s))}r=La(t.qz_1,!0)}return r}function _a(t){if(Zr(t))return $t;var e=t.lx_1.kotlinx$atomicfu$value;t:for(;;){var n=t.hx_1.atomicfu$getAndIncrement$long(),i=kr(),r=n.ea(Le(i));if(t.hy().t8(n)<=0)return e.rp_1.t8(r)<0&&null!=e.xx()&&Oa(t,r,e),ma(t),$t;if(!e.rp_1.equals(r)){var a=Ra(t,r,e,n);if(null==a)continue t;e=a}var s=kr();if(da(t,e,n.fa(Le(s)).y8(),n))return ma(t),$t;ma(t)}}function da(t,e,n,i){var r,a=e.zw(n);return null!=a&&Ft(a,Cr)&&i.t8(t.gx_1.kotlinx$atomicfu$value)>=0&&e.bx(n,a,Nr())?(fa(a,t,e,n)?(e.ax(n,Ur()),r=!0):(e.ax(n,Fr()),e.px(n,!1),r=!1),r):function(t,e,n,i){t:for(;;){var r=e.zw(n);if(null!=r&&Ft(r,Cr)){var a;if(i.t8(t.gx_1.kotlinx$atomicfu$value)<0){if(e.bx(n,r,new Da(r)))return!0}else if(e.bx(n,r,Nr()))return fa(r,t,e,n)?(e.ax(n,Ur()),a=!0):(e.ax(n,Fr()),e.px(n,!1),a=!1),a}else{if(r===Fr())return!1;if(null!==r){if(r===Ur())return!0;if(r===Lr()||r===zr()||r===Br())return!0;if(r===Hr())return!0;if(r===Dr())continue t;var s="Unexpected cell state: "+Vt(r);throw Ht(Bt(s))}if(e.bx(n,r,Pr()))return!0}}}(t,e,n,i)}function pa(t,e){if(!t.ix_1.atomicfu$addAndGet$long(e).oa(new he(0,1073741824)).equals(new he(0,0)))for(;!t.ix_1.kotlinx$atomicfu$value.oa(new he(0,1073741824)).equals(new he(0,0)););}function ma(t,e,n){return pa(t,e=e===Ut?new he(1,0):e)}function ga(t){this.fy_1=t,this.dy_1=Vr(),this.ey_1=null}function va(t){var e=t.gy();return null==e?new ls(hs()):e}function ya(t){t.xz()}function wa(t,e){var n=function(t){var e=t.lx_1.kotlinx$atomicfu$value,n=t.jx_1.kotlinx$atomicfu$value;n.rp_1.t8(e.rp_1)>0&&(e=n);var i=t.kx_1.kotlinx$atomicfu$value;return i.rp_1.t8(e.rp_1)>0&&(e=i),function(t){Us();for(var e=t;;){var n=As(e);if(n===Es())return e;var i=null==n||n instanceof Is?n:Rt();if(null===i){if(e.cy())return e}else e=i}}(e)}(t);if(t.zz()){var i=function(t,e){for(var n=e;;){var i=kr()-1|0;if(0<=i)do{var r=i;i=i+-1|0;var a=n.rp_1,s=kr(),o=a.da(Le(s)).ba(Le(r));if(o.t8(t.hz())<0)return new he(-1,-1);t:for(;;){var l=n.zw(r);if(null!==l&&l!==Pr()){if(l===Ur())return o;break t}if(n.bx(r,l,Hr())){n.rx();break t}}}while(0<=i);var u=n.ay();if(null==u)return new he(-1,-1);n=u}}(t,n);i.equals(new he(-1,-1))||t.yz(i)}return function(t,e,n){var i=Ws(),r=e;t:for(;null!=r;){var a=kr()-1|0;if(0<=a)do{var s=a;a=a+-1|0;var o=r.rp_1,l=kr();if(o.da(Le(l)).ba(Le(s)).t8(n)<0)break t;e:for(;;){var u=r.zw(s);if(null===u||u===Pr()){if(r.bx(s,u,Hr())){r.rx();break e}}else if(u instanceof Da){if(r.bx(s,u,Hr())){i=Xs(i,u.jz_1),r.px(s,!0);break e}}else{if(null==u||!Ft(u,Cr))break e;if(r.bx(s,u,Hr())){i=Xs(i,u),r.px(s,!0);break e}}}}while(0<=a);r=r.ay()}var c=i,h=c;if(null!=h)if(h instanceof Me){var f=c instanceof Me?c:Rt(),_=f.n()-1|0;if(0<=_)do{var d=_;_=_+-1|0,xa(f.d1(d),t)}while(0<=_)}else{xa(null==c||null!=c?c:Rt(),t)}}(t,n,e),n}function ba(t,e){!function(t,e){var n=t.ex_1,i=null,r=Ws(),a=e;t:for(;;){var s=kr()-1|0;if(0<=s)do{var o=s;s=s+-1|0;var l=a.rp_1,u=kr(),c=l.da(Le(u)).ba(Le(o));e:for(;;){var h=a.zw(o);if(h===zr())break t;if(h===Ur()){if(c.t8(t.hz())<0)break t;if(a.bx(o,h,Hr())){null!=n&&(i=Js(n,a.ww(o),i)),a.yw(o),a.rx();break e}}else if(h===Pr()||null===h){if(a.bx(o,h,Hr())){a.rx();break e}}else{if(!(null!=h&&Ft(h,Cr)||h instanceof Da)){if(h===Nr()||h===Dr())break t;if(h===Nr())continue e;break e}if(c.t8(t.hz())<0)break t;var f=h instanceof Da?h.jz_1:null!=h&&Ft(h,Cr)?h:Rt();if(a.bx(o,h,Hr())){null!=n&&(i=Js(n,a.ww(o),i)),r=Xs(r,f),a.yw(o),a.rx();break e}}}}while(0<=s);var _=a.ay();if(null==_)break t;a=_}var d=r,p=d;if(null!=p)if(p instanceof Me){var m=d instanceof Me?d:Rt(),g=m.n()-1|0;if(0<=g)do{var v=g;g=g+-1|0,Sa(m.d1(v),t)}while(0<=g)}else{Sa(null==d||null!=d?d:Rt(),t)}if(null!=i)throw i}(t,wa(t,e))}function xa(t,e){return Ea(t,e,!0)}function Sa(t,e){return Ea(t,e,!1)}function Ea(t,e,n){if(t instanceof ia){var i=t.qz_1,r=Ie(!1);i.hb(r)}else if(Ft(t,Sn)){var a=n?va(e):e.gz(),s=Ie(ke(a));t.hb(s)}else if(t instanceof Na){var o=t.nz_1,l=new ss(as().a10(e.gy())),u=Ie(l);o.hb(u)}else if(t instanceof ga)t.wz();else{if(!Ft(t,ao))throw Ht(Bt("Unexpected waiter: "+t));t.oz(e,Hr())}}function Ma(t,e){return Ta(e,t,!1)}function Ta(t,e,n){var i;switch(e.ma(60).y8()){case 0:case 1:i=!1;break;case 2:wa(t,e.oa(new he(-1,268435455))),i=!n||!t.b10();break;case 3:ba(t,e.oa(new he(-1,268435455))),i=!0;break;default:var r="unexpected close status: "+e.ma(60).y8();throw Ht(Bt(r))}return i}function Ca(t,e,n,i){for(;;){var r=e.zw(n);if(null!==r&&r!==Pr())return r===Ur()||r!==Fr()&&r!==Hr()&&r!==zr()&&r!==Lr()&&(r===Nr()||r!==Dr()&&i.equals(t.hz()));if(e.bx(n,r,Lr()))return _a(t),!1}}function $a(t,e,n){var i;t:for(var r=t.jx_1,a=Ba();;){var s,o=ks(n,e,a);if(Ts(o))s=!0;else{var l;e:{for(var u=Cs(o);;){var c=r.kotlinx$atomicfu$value;if(c.rp_1.t8(u.rp_1)>=0){l=!0;break e}if(!u.tx()){l=!1;break e}if(r.atomicfu$compareAndSet(c,u)){c.ux()&&c.w(),l=!0;break e}u.ux()&&u.w()}l=$t}s=l}if(s){i=o;break t}}var h,f=i;if(Ts(f)){ya(t);var _=n.rp_1,d=kr();_.da(Le(d)).t8(t.hz())<0&&n.by(),h=null}else{var p,m=Cs(f);if(m.rp_1.t8(e)>0){var g=m.rp_1,v=kr();!function(t,e){for(var n=t.fx_1;;){var i=n.kotlinx$atomicfu$value,r=i.oa(new he(-1,268435455));if(r.t8(e)>=0)return $t;var a=Fa(r,i.ma(60).y8());if(t.fx_1.atomicfu$compareAndSet(i,a))return $t}}(t,g.da(Le(v)));var y=m.rp_1,w=kr();y.da(Le(w)).t8(t.hz())<0&&m.by(),p=null}else p=m;h=p}return h}function Aa(t,e,n){var i;t:for(var r=t.kx_1,a=Ba();;){var s,o=ks(n,e,a);if(Ts(o))s=!0;else{var l;e:{for(var u=Cs(o);;){var c=r.kotlinx$atomicfu$value;if(c.rp_1.t8(u.rp_1)>=0){l=!0;break e}if(!u.tx()){l=!1;break e}if(r.atomicfu$compareAndSet(c,u)){c.ux()&&c.w(),l=!0;break e}u.ux()&&u.w()}l=$t}s=l}if(s){i=o;break t}}var h,f=i;if(Ts(f)){ya(t);var _=n.rp_1,d=kr();_.da(Le(d)).t8(t.hy())<0&&n.by(),h=null}else{var p,m,g=Cs(f);if(Zr(t))p=!1;else{var v=Jr(t),y=kr(),w=v.ea(Le(y));p=e.t8(w)<=0}if(p)t:for(var b=t.lx_1;;){var x=b.kotlinx$atomicfu$value;if(x.rp_1.t8(g.rp_1)>=0)break t;if(!g.tx())break t;if(b.atomicfu$compareAndSet(x,g)){x.ux()&&x.w();break t}g.ux()&&g.w()}if(g.rp_1.t8(e)>0){var S=g.rp_1,E=kr();!function(t,e){for(var n=t.gx_1;;){var i=n.kotlinx$atomicfu$value;if(i.t8(e)>=0)return $t;if(t.gx_1.atomicfu$compareAndSet(i,e))return $t}}(t,S.da(Le(E)));var M=g.rp_1,T=kr();M.da(Le(T)).t8(t.hy())<0&&g.by(),m=null}else m=g;h=m}return h}function Ra(t,e,n,i){var r;t:for(var a=t.lx_1,s=Ba();;){var o,l=ks(n,e,s);if(Ts(l))o=!0;else{var u;e:{for(var c=Cs(l);;){var h=a.kotlinx$atomicfu$value;if(h.rp_1.t8(c.rp_1)>=0){u=!0;break e}if(!c.tx()){u=!1;break e}if(a.atomicfu$compareAndSet(h,c)){h.ux()&&h.w(),u=!0;break e}c.ux()&&c.w()}u=$t}o=u}if(o){r=l;break t}}var f,_=r;if(Ts(_))ya(t),Oa(t,e,n),ma(t),f=null;else{var d,p=Cs(_);if(p.rp_1.t8(e)>0){var m=i.ba(Le(1)),g=p.rp_1,v=kr(),y=g.da(Le(v));if(t.hx_1.atomicfu$compareAndSet(m,y)){var w=p.rp_1,b=kr();pa(t,w.da(Le(b)).ca(i))}else ma(t);d=null}else d=p;f=d}return f}function Oa(t,e,n){var i=n;t:for(;i.rp_1.t8(e)<0;){var r=i.xx();if(null==r)break t;i=r}for(;;){t:for(;i.sx();){var a=i.xx();if(null==a)break t;i=a}var s;t:{for(var o=t.lx_1,l=i;;){var u=o.kotlinx$atomicfu$value;if(u.rp_1.t8(l.rp_1)>=0){s=!0;break t}if(!l.tx()){s=!1;break t}if(o.atomicfu$compareAndSet(u,l)){u.ux()&&u.w(),s=!0;break t}l.ux()&&l.w()}s=$t}if(s)return $t}}function Ia(t){return function(e,n,i){return function(t,e,n){return function(i){return t!==Hr()&&Ys(e.ex_1,null==t||null!=t?t:Rt(),n.ab()),$t}}(i,t,e)}}function ka(t,e,n){Nt.call(this,n),this.l10_1=t,this.m10_1=e}function Ua(t,e){Nt.call(this,e),this.m11_1=t}function Pa(t,e){if(e=e===Ut?null:e,this.dx_1=t,this.ex_1=e,!(this.dx_1>=0)){var n="Invalid channel capacity: "+this.dx_1+", should be >=0";throw Fe(Bt(n))}this.fx_1=Be(new he(0,0)),this.gx_1=Be(new he(0,0)),this.hx_1=Be(function(t){var e;return Za(),ts(),0===t?e=new he(0,0):(ts(),e=2147483647===t?new he(-1,2147483647):Le(t)),e}(this.dx_1)),this.ix_1=Be(Jr(this));var i=new Gr(new he(0,0),null,this,3);this.jx_1=jt(i),this.kx_1=jt(i);var r;if(Zr(this)){var a=Ir();r=a instanceof Gr?a:Rt()}else r=i;this.lx_1=jt(r);var s;s=null==this.ex_1?null:Ia(this),this.mx_1=s,this.nx_1=jt(qr()),this.ox_1=jt(null)}function Da(t){this.jz_1=t}function Na(){}function La(t,e,n){n=n===Ut?null:n,Za();var i,r=t.ro(e,null,n);return null!=r?(t.so(r),i=!0):i=!1,i}function za(t,e){return Za(),new he(0,e?1073741824:0).ba(t)}function Fa(t,e){return Za(),Le(e).la(60).ba(t)}function Ba(){return Za(),(t=function(t,e){return n=t,i=e,Za(),new Gr(n,i,i.tw(),0);var n,i}).callableName="createSegment",t;var t}function Ha(){return K}function Va(){return Za(),3}function qa(){return Za(),0}function ja(){return Za(),1}function Ga(){return Za(),2}function Wa(){return Za(),4}function Xa(){return Za(),5}function Ya(){return Za(),Za(),q}function Ka(){return Za(),Za(),V}function Ja(){return Za(),Za(),j}function Za(){J||(J=!0,O=new Gr(new he(-1,-1),null,null,0),I=no("kotlinx.coroutines.bufferedChannel.segmentSize",32),k=no("kotlinx.coroutines.bufferedChannel.expandBufferCompletionWaitIterations",1e4),U=new eo("BUFFERED"),P=new eo("SHOULD_BUFFER"),D=new eo("S_RESUMING_BY_RCV"),N=new eo("RESUMING_BY_EB"),L=new eo("POISONED"),z=new eo("DONE_RCV"),F=new eo("INTERRUPTED_SEND"),B=new eo("INTERRUPTED_RCV"),H=new eo("CHANNEL_CLOSED"),V=new eo("SUSPEND"),q=new eo("SUSPEND_NO_WAITER"),j=new eo("FAILED"),G=new eo("NO_RECEIVE_RESULT"),W=new eo("CLOSE_HANDLER_CLOSED"),X=new eo("CLOSE_HANDLER_INVOKED"),Y=new eo("NO_CLOSE_CAUSE"))}function Qa(){Z=this,this.l12_1=2147483647,this.m12_1=0,this.n12_1=-1,this.o12_1=-2,this.p12_1=-3,this.q12_1="kotlinx.coroutines.channels.defaultBuffer",this.r12_1=no("kotlinx.coroutines.channels.defaultBuffer",64,1,2147483646)}function ts(){return null==Z&&new Qa,Z}function es(t){return!(t instanceof ns)}function ns(){}function is(t){ns.call(this),this.s12_1=t}function rs(){Q=this,this.lz_1=new ns}function as(){return null==Q&&new rs,Q}function ss(t){as(),this.t12_1=t}function os(t){Ye(t,this),ge(this,os)}function ls(t){Je(t,this),ge(this,ls)}function us(){}function cs(){}function hs(){return tt}function fs(t,e,n){return t.h13_1===($r(),A)?function(t,e,n){var i=At(Pa).c12.call(t,e);if(es(i)||function(t){return t instanceof is}(i))return i;if(n){var r=t.ex_1,a=null==r?null:Js(r,e);if(null!=a)throw a}return as().mz($t)}(t,e,n):function(t,e){var n,i=Ur(),r=t.jx_1.kotlinx$atomicfu$value;t:for(;;){var a=t.fx_1.atomicfu$getAndIncrement$long(),s=a.oa(Ha()),o=Ma(a,t),l=kr(),u=s.ea(Le(l)),c=kr(),h=s.fa(Le(c)).y8();if(!r.rp_1.equals(u)){var f=$a(t,u,r);if(null==f){if(o)return as().a10(t.gz());continue t}r=f}var _=ra(t,r,h,e,s,i,o);if(_===qa())return r.by(),as().mz($t);if(_===ja())return as().mz($t);if(_===Ga()){if(o)return r.rx(),as().a10(t.gz());var d=null!=i&&Ft(i,Cr)?i:null;null==d||ea(d,0,r,h);var p=r.rp_1,m=kr(),g=p.da(Le(m)).ba(Le(h));return t.yz(g),as().mz($t)}if(_===Wa())return s.t8(t.hz())<0&&r.by(),as().a10(t.gz());if(_!==Xa()){if(_===Va())throw Ht(Bt("unexpected"))}else r.by()}return n}(t,e)}function _s(t,e,n){if(n=n===Ut?null:n,Pa.call(this,t,n),this.g13_1=t,this.h13_1=e,this.h13_1===Rr()){var i="This implementation does not support suspension for senders, use "+Ze(Pa).b6()+" instead";throw Fe(Bt(i))}if(!(this.g13_1>=1)){var r="Buffered channel capacity must be at least 1, but "+this.g13_1+" was specified";throw Fe(Bt(r))}}function ds(t){ms.call(this),this.i13_1=t}function ps(t,e,n){Nt.call(this,n),this.t13_1=t,this.u13_1=e}function ms(){}function gs(){}function vs(t,e){if(e.fe(0,(i=t,function(t,e){var n=e.c2(),r=i.y13_1.bb(n);if(n!==p)return e!==r?Qe.MIN_VALUE:t+1|0;var a=null==r||Ft(r,Mi)?r:Rt(),s=function(t,e){for(var n=t,i=e;;){if(null===n)return null;if(n===i)return n;if(!(n instanceof to))return n;n=n.qm()}}(Ft(e,Mi)?e:Rt(),a);if(s!==a)throw Ht(Bt("Flow invariant is violated:\n\t\tEmission from another coroutine is detected.\n\t\tChild of "+s+", expected child of "+a+".\n\t\tFlowCollector is not thread-safe and concurrent emissions are prohibited.\n\t\tTo mitigate this restriction please use 'channelFlow' builder instead of 'flow'"));return null==a?t:t+1|0}))!==t.z13_1){var n="Flow invariant is violated:\n\t\tFlow was collected in "+t.y13_1+",\n\t\tbut emission happened in "+e+".\n\t\tPlease refer to 'flow' documentation or use 'flowOn' instead";throw Ht(Bt(n))}var i}function ys(t){this.n14_1=t}function ws(t,e){this.w14_1=t,Nt.call(this,e)}function bs(t,e){var n=new ws(t,e),i=function(t,e){return n.y14(t,e)};return i.$arity=1,i}function xs(t,e,n){Nt.call(this,n),this.l14_1=t,this.m14_1=e}function Ss(){}function Es(){return Us(),et}function Ms(t,e,n){Is.call(this,e),this.rp_1=t,this.sp_1=qt(n<<16)}function Ts(t){return t===Es()}function Cs(t){if(t===Es())throw Ht(Bt("Does not contain segment"));return t instanceof Ms?t:Rt()}function $s(t){this.c10_1=t}function As(t){return t.vx_1.kotlinx$atomicfu$value}function Rs(t){for(var e=t.ay();null!==e&&e.sx();)e=e.wx_1.kotlinx$atomicfu$value;return e}function Os(t){for(var e=Ne(t.xx());e.sx();){var n=e.xx();if(null==n)return e;e=n}return e}function Is(t){this.vx_1=jt(null),this.wx_1=jt(t)}function ks(t,e,n){Us();for(var i=t;i.rp_1.t8(e)<0||i.sx();){var r=As(i);if(r===Es())return Es();var a=null==r||r instanceof Is?r:Rt();if(null==a){var s=n(i.rp_1.ba(Le(1)),i);i.yx(s)&&(i.sx()&&i.w(),i=s)}else i=a}return i}function Us(){nt||(nt=!0,et=new eo("CLOSED"))}function Ps(t,e){for(var n=(Yo(),Yo(),Mt).s();n.t();){var i=n.u();try{i.yr(t,e)}catch(t){if(t instanceof Ds)return $t;if(!(t instanceof Error))throw t;Wo(oi(e,t))}}try{ze(e,new Xo(t))}catch(t){if(!(t instanceof Error))throw t}Wo(e)}function Ds(){}function Ns(){return Bs(),it}function Ls(){return Bs(),rt}function zs(t,e){Vs.call(this,lt),this.zo_1=t,this.ap_1=e,this.bp_1=Ns(),this.cp_1=(this.ab(),0),this.dp_1=jt(null)}function Fs(t,e,n){var i;if(n=n===Ut?null:n,Bs(),t instanceof zs){var r,a=Qn(e,n);if(t.zo_1.vr(t.ab()))t.bp_1=a,t.np_1=Hs(),t.zo_1.wr(t.ab(),t),r=$t;else{var s=Hs(),o=bi().os();if(o.is())t.bp_1=a,t.np_1=s,o.hs(t);else{o.ks(!0);try{var l,u=t.ab().bb(p);if(null==u||u.xl())l=!1;else{var c=u.vm();t.mq(a,c);var h=Ie(ke(c));t.hb(h),l=!0}for(l||(t.ap_1,t.cp_1,t.ap_1.hb(e));o.gs(););}catch(e){if(!(e instanceof Error))throw e;var f=e;t.zq(f,null)}finally{o.ls(!0)}}r=$t}i=r}else t.hb(e),i=$t;return i}function Bs(){at||(at=!0,it=new eo("UNDEFINED"),rt=new eo("REUSABLE_CLAIMED"))}function Hs(){return st}function Vs(t){qo.call(this),this.np_1=t}function qs(t){return 1===t||2===t}function js(t,e,n){var i,r=t.lq(),a=t.xq(r);if(null!=a)i=Ie(ke(a));else{var s=t.tq(r);i=Ie(s)}var o=i;if(n){var l=e instanceof zs?e:Rt();l.ap_1,l.cp_1,l.ap_1.hb(o)}else e.hb(o)}function Gs(){return ct}function Ws(t){return t===Ut?null:t}function Xs(t,e){var n,i=t;if(null==i)n=Ws(e);else if(i instanceof Me){(t instanceof Me?t:Rt()).p(e),n=Ws(t)}else{var r=Se(4),a=t;r.p(null==a||null!=a?a:Rt()),r.p(e),n=Ws(r)}return n}function Ys(t,e,n){var i=Js(t,e,null);null==i||ai(n,i)}function Ks(t,e){me(t,e,this),ge(this,Ks)}function Js(t,e,n){n=n===Ut?null:n;try{t(e)}catch(t){if(!(t instanceof Error))throw t;var i=t;if(null==n||n.cause===i)return new Ks("Exception in undelivered element handler for "+e,i)}return n}function Zs(t,e,n){return i=t,r=e,a=n,function(t){return Ys(i,r,a),$t};var i,r,a}function Qs(t){this.b15_1=t}function to(){}function eo(t){this.c15_1=t}function no(t,e,n,i){return n=n===Ut?1:n,i=i===Ut?Qe.MAX_VALUE:i,function(t,e,n,i){var r;n=n===Ut?new he(1,0):n,i===Ut?(_e(),r=new he(-1,2147483647)):r=i,i=r;var a=null;if(null==a)return e;var s=a,o=en(s);if(null==o)throw Ht(Bt("System property '"+t+"' has unrecognized value '"+s+"'"));var l=o;if(!(n.t8(l)<=0&&l.t8(i)<=0)){var u="System property '"+t+"' should be in range "+n.toString()+".."+i.toString()+", but is '"+l.toString()+"'";throw Ht(Bt(u))}return l}(t,Le(e),Le(n),Le(i)).y8()}function io(t,e){var n;try{Fs(fe(t),Ie($t)),n=$t}catch(t){if(!(t instanceof Error))throw t;ro(e,t),n=$t}return n}function ro(t,e){return function(t,e){var n=Ie(ke(e));throw t.hb(n),e}(t,e)}function ao(){}function so(t,e){var n,i=t.sz_1;if(null==i)return null;t:{for(var r=i.s();r.t();){var a=r.u();if(a.d15_1===e){n=a;break t}}n=null}var s=n;if(null==s){var o="Clause with object "+Bt(e)+" is not found";throw Ht(Bt(o))}return s}function oo(){}function lo(){}function uo(){if(vt)return $t;vt=!0,dt=new co("SUCCESSFUL",0),pt=new co("REREGISTER",1),mt=new co("CANCELLED",2),gt=new co("ALREADY_SELECTED",3)}function co(t,e){le.call(this,t,e)}function ho(t){var e;switch(mo(),t){case 0:e=_o();break;case 1:e=po();break;case 2:uo(),e=mt;break;case 3:uo(),e=gt;break;default:throw Ht(Bt("Unexpected internal result: "+t))}return e}function fo(t,e){mo();var n=t.ro($t,null,e);if(null==n)return!1;var i=n;return t.so(i),!0}function _o(){return uo(),dt}function po(){return uo(),pt}function mo(){yt||(yt=!0,ht=new eo("STATE_REG"),ft=new eo("STATE_COMPLETED"),_t=new eo("STATE_CANCELLED"),new eo("NO_RESULT"),new eo("PARAM_CLAUSE_0"))}function go(){}function vo(){Jo.call(this)}function yo(t,e){"function"==typeof t?t(e):t.invoke(e)}function wo(){}function bo(t){return Bt(t)}function xo(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&void 0!==navigator.userAgent&&void 0!==navigator.userAgent.match&&navigator.userAgent.match("\\bjsdom\\b")?ko():"undefined"!=typeof window&&null!=window&&void 0!==window.addEventListener?function(t){var e,n=t.coroutineDispatcher;if(null==n){var i=new Bo(t);t.coroutineDispatcher=i,e=i}else e=n;return e}(window):"undefined"==typeof process||void 0===process.nextTick?(null==Et&&new Uo,Et):ko()}function So(t,e){var n=t.wl().ge(e);return n!==$o().cw_1&&null==n.bb(te)?n.ge($o().cw_1):n}function Eo(){return bt}function Mo(t){var e=sn(t).b6();return null==e?"Unknown":e}function To(t){var e=t.__debug_counter;return"number"!=typeof e&&(e=wt=wt+1|0,t.__debug_counter=e),(null!=e&&"number"==typeof e?e:Rt()).toString()}function Co(){xt=this,this.cw_1=xo(),this.dw_1=(null==M&&new Mr,M),this.ew_1=new Ao(this.cw_1,!1),this.fw_1=null}function $o(){return null==xt&&new Co,xt}function Ao(t,e){xr.call(this),this.k15_1=t,this.l15_1=e,this.m15_1=this.l15_1?this:new Ao(this.k15_1,!0)}function Ro(){yi.call(this)}function Oo(t,e,n){on(t,e,this),ge(this,Oo),this.r15_1=n}function Io(){St=this,Do.call(this)}function ko(){return null==St&&new Io,St}function Uo(){Et=this,Do.call(this)}function Po(t){var e;this.z15_1=t,No.call(this),this.y15_1=(e=this,function(){return e.h16(),$t})}function Do(){ri.call(this),this.b16_1=new Po(this)}function No(){this.e16_1=de(),this.f16_1=16,this.g16_1=!1}function Lo(t){return cn(t,new he(0,0),new he(2147483647,0)).y8()}function zo(t){Hn.call(this),this.s16_1=t}function Fo(t,e){this.u16_1=t,zo.call(this,e)}function Bo(t){ri.call(this),this.w16_1=t,this.x16_1=new Ho(this.w16_1)}function Ho(t){var e;No.call(this),this.b17_1=t,this.c17_1="dispatchCoroutine",this.b17_1.addEventListener("message",(e=this,function(t){return t.source==e.b17_1&&t.data==e.c17_1&&(t.stopPropagation(),e.h16()),$t}),!0)}function Vo(){}function qo(){}function jo(t,e){return t+1|0}function Go(t,e){this.x13_1=t,this.y13_1=e,this.z13_1=this.y13_1.fe(0,jo),this.a14_1=null}function Wo(t){Yo(),console.error(t)}function Xo(t){fn(Bt(t),this),ge(this,Xo)}function Yo(){Tt||(Tt=!0,Mt=_n())}function Ko(){Jo.call(this)}function Jo(){this.ys_1=this,this.zs_1=this,this.at_1=!1}function Zo(t,e){return t}function Qo(){this.ps_1=null}return kt(Mi,"Job",zt,Ut,[we],Ut,Ut,Ut,[0]),kt(Ti,"ParentJob",zt,Ut,[Mi],Ut,Ut,Ut,[0]),kt(lr,"JobSupport",It,Ut,[Mi,Ti],Ut,Ut,Ut,[0]),kt(ci,"CoroutineScope",zt),kt(gn,"AbstractCoroutine",It,lr,[lr,Mi,Ot,ci],Ut,Ut,Ut,[0]),kt(vn,"StandaloneCoroutine",It,gn,Ut,Ut,Ut,Ut,[0]),kt(yn,"LazyStandaloneCoroutine",It,vn,Ut,Ut,Ut,Ut,[0]),kt(wn,"$awaitCOROUTINE$0",It,Nt),kt(bn,"DeferredCoroutine",It,gn,[gn,Mi],Ut,Ut,Ut,[0]),kt(xn,"LazyDeferredCoroutine",It,bn,Ut,Ut,Ut,Ut,[0]),kt(Sn,"CancellableContinuation",zt,Ut,[Ot]),kt(wo,"CancelHandlerBase",It),kt(Bn,"NotCompleted",zt),kt(Hn,"CancelHandler",It,wo,[wo,Bn]),kt(Mn,"DisposeOnCancel",It,Hn),kt(Vo,"Runnable",zt),kt(qo,"SchedulerTask",It,Ut,[Vo]),kt(Vs,"DispatchedTask",It,qo),kt(Cr,"Waiter",zt),kt(Fn,"CancellableContinuationImpl",It,Vs,[Vs,Sn,Cr]),kt(Vn,"Active",Gt,Ut,[Bn]),kt(qn,"CompletedContinuation",It),kt(jn,"InvokeOnCancel",It,Hn),kt(Xn,"$awaitCOROUTINE$1",It,Nt),kt(Yn,"CompletableDeferredImpl",It,lr,[lr,Mi],Ut,Ut,Ut,[0]),kt(Kn,"CompletableJob",zt,Ut,[Mi],Ut,Ut,Ut,[0]),kt(Jn,"CompletedExceptionally",It),kt(Zn,"CancelledContinuation",It,Jn),kt(ti,"CompletedWithCancellation",It),kt(ni,"Key",Gt,Qt),kt(ri,"CoroutineDispatcher",It,ee,[ee,re]),kt(si,"Key",Gt),kt(li,"Key",Gt),kt(ui,"CoroutineName",It,ee),kt(fi,"GlobalScope",Gt,Ut,[ci]),kt(di,"CoroutineStart",It,le),kt(mi,"Delay",zt,Ut,Ut,Ut,Ut,Ut,[1]),kt(yi,"EventLoop",It,ri),kt(wi,"ThreadLocalEventLoop",Gt),kt(xi,"CompletionHandlerException",It,pe),kt(Si,"CoroutinesInternalError",It,ve),kt(Ei,"Key",Gt),kt(Ci,"ChildHandle",zt),kt($i,"NonDisposableHandle",Gt,Ut,[Ci]),kt(Li,"Incomplete",zt),kt(Ni,"Empty",It,Ut,[Li]),kt(Jo,"LinkedListNode",It,Ut,Ut,Jo),kt(Ko,"LinkedListHead",It,Jo,Ut,Ko),kt(zi,"NodeList",It,Ko,[Ko,Li],zi),kt(vo,"CompletionHandlerBase",It,Jo),kt(Fi,"JobNode",It,vo,[vo,Li]),kt(ar,"Finishing",It,Ut,[Li]),kt(sr,"ChildCompletion",It,Fi),kt(or,"AwaitContinuation",It,Fn),kt(cr,"JobCancellingNode",It,Fi),kt(hr,"InactiveNodeList",It,Ut,[Li]),kt(fr,"ChildHandleNode",It,cr,[cr,Ci]),kt(_r,"InvokeOnCancelling",It,cr),kt(dr,"InvokeOnCompletion",It,Fi),kt(pr,"ResumeOnCompletion",It,Fi),kt(gr,"ResumeAwaitOnCompletion",It,Fi),kt(vr,"IncompleteStateBox",It),kt(yr,"ChildContinuation",It,cr),kt(wr,"JobImpl",It,lr,[lr,Kn],Ut,Ut,Ut,[0]),kt(xr,"MainCoroutineDispatcher",It,ri),kt(Sr,"SupervisorJobImpl",It,wr,Ut,Ut,Ut,Ut,[0]),kt(Er,"TimeoutCancellationException",It,Ee),kt(Mr,"Unconfined",Gt,ri),kt(Tr,"Key",Gt),kt(Ar,"BufferOverflow",It,le),kt(Is,"ConcurrentLinkedListNode",It),kt(Ms,"Segment",It,Is,[Is,Bn]),kt(Gr,"ChannelSegment",It,Ms),kt(Kr,"$hasNextCOROUTINE$5",It,Nt),kt(ia,"SendBroadcast",It,Ut,[Cr]),kt(ga,"BufferedChannelIterator",It,Ut,[Cr],Ut,Ut,Ut,[0,3]),kt(ka,"$sendCOROUTINE$2",It,Nt),kt(Ua,"$receiveCOROUTINE$3",It,Nt),kt(cs,"ReceiveChannel",zt,Ut,Ut,Ut,Ut,Ut,[0]),kt(us,"SendChannel",zt,Ut,Ut,Ut,Ut,Ut,[1]),kt(Pa,"BufferedChannel",It,Ut,[cs,us],Ut,Ut,Ut,[1,4,0,3]),kt(Da,"WaiterEB",It),kt(Na,"ReceiveCatching",It,Ut,[Cr]),kt(Qa,"Factory",Gt),kt(ns,"Failed",It,Ut,Ut,ns),kt(is,"Closed",It,ns),kt(rs,"Companion",Gt),kt(ss,"ChannelResult",It),kt(os,"ClosedSendChannelException",It,Xe),kt(ls,"ClosedReceiveChannelException",It,Ke),kt(_s,"ConflatedBufferedChannel",It,Pa,Ut,Ut,Ut,Ut,[1,0]),kt(ms,"AbstractFlow",It,Ut,Ut,Ut,Ut,Ut,[1]),kt(ds,"SafeFlow",It,ms,Ut,Ut,Ut,Ut,[1]),kt(ps,"$collectCOROUTINE$10",It,Nt),kt(gs,"FlowCollector",zt,Ut,Ut,Ut,Ut,Ut,[1]),kt(ys,"sam$kotlinx_coroutines_flow_FlowCollector$0",It,Ut,[gs],Ut,Ut,Ut,[1]),kt(ws,"toCollection$slambda",It,Nt,Ut,Ut,Ut,Ut,[1]),kt(xs,"$toCollectionCOROUTINE$11",It,Nt),kt(Ss,"OpDescriptor",It),kt($s,"SegmentOrClosed",It),kt(Ds,"ExceptionSuccessfullyProcessed",Gt,tn),kt(zs,"DispatchedContinuation",It,Vs,[Vs,Ot]),kt(Ks,"UndeliveredElementException",It,pe),kt(Qs,"ContextScope",It,Ut,[ci]),kt(to,"ScopeCoroutine",It,gn,Ut,Ut,Ut,Ut,[0]),kt(eo,"Symbol",It),kt(ao,"SelectInstance",zt),kt(oo,"ClauseData",It,Ut,Ut,Ut,Ut,Ut,[1]),kt(lo,"SelectImplementation",It,Hn,[Hn,Cr,ao],Ut,Ut,Ut,[0,2]),kt(co,"TrySelectDetailedResult",It,le),kt(go,"CloseableCoroutineDispatcher",It,ri),kt(Co,"Dispatchers",Gt),kt(Ao,"JsMainDispatcher",It,xr),kt(Ro,"UnconfinedEventLoop",It,yi,Ut,Ro),kt(Oo,"JobCancellationException",It,Ee),kt(Do,"SetTimeoutBasedDispatcher",It,ri,[ri,mi],Ut,Ut,Ut,[1]),kt(Io,"NodeDispatcher",Gt,Do,Ut,Ut,Ut,Ut,[1]),kt(Uo,"SetTimeoutDispatcher",Gt,Do,Ut,Ut,Ut,Ut,[1]),kt(No,"MessageQueue",It,Ut,[un]),kt(Po,"ScheduledMessageQueue",It,No),kt(zo,"ClearTimeout",It,Hn),kt(Fo,"WindowClearTimeout",It,zo),kt(Bo,"WindowDispatcher",It,ri,[ri,mi],Ut,Ut,Ut,[1]),kt(Ho,"WindowMessageQueue",It,No),kt(Go,"SafeCollector",It,Ut,[gs],Ut,Ut,Ut,[1]),kt(Xo,"DiagnosticCoroutineContextException",It,pe),kt(Qo,"CommonThreadLocal",It,Ut,Ut,Qo),At(gn).ab=function(){return this.vl_1},At(gn).wl=function(){return this.vl_1},At(gn).xl=function(){return At(lr).xl.call(this)},At(gn).yl=function(t){},At(gn).zl=function(t,e){},At(gn).am=function(){return Mo(this)+" was cancelled"},At(gn).bm=function(t){t instanceof Jn?this.zl(t.cm_1,t.em()):this.yl(null==t||null!=t?t:Rt())},At(gn).hb=function(t){var e=this.fm(Qn(t));if(e===Ii())return $t;this.gm(e)},At(gn).gm=function(t){return this.hm(t)},At(gn).im=function(t){ai(this.vl_1,t)},At(gn).jm=function(){var t=(this.vl_1,null);return null==t?At(lr).jm.call(this):'"'+t+'":'+At(lr).jm.call(this)},At(gn).km=function(t,e,n){t.nm(n,e,this)},At(vn).on=function(t){return ai(this.vl_1,t),!0},At(yn).um=function(){io(this.yn_1,this)},At(wn).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.ho_1.qn(this))===Lt())return t;continue t;case 1:return null==t||null!=t?t:Rt();case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},At(bn).lo=function(t){var e=new wn(this,t);return e.va_1=$t,e.wa_1=null,e.gb()},At(xn).um=function(){io(this.po_1,this)},At(Mn).wo=function(t){return this.vo_1.xo()},At(Mn).invoke=function(t){return this.wo(t)},At(Mn).toString=function(){return"DisposeOnCancel["+this.vo_1+"]"},At(Fn).jq=function(){return this.gp_1},At(Fn).ab=function(){return this.hp_1},At(Fn).rm=function(){return this.jp_1.kotlinx$atomicfu$value},At(Fn).sm=function(){var t=this.rm();return!(null!=t&&Ft(t,Bn))},At(Fn).qo=function(){return this.rm()instanceof Zn},At(Fn).kq=function(){var t=On(this);if(null==t)return $t;var e=t;this.sm()&&(e.xo(),this.kp_1.kotlinx$atomicfu$value=m)},At(Fn).lp=function(){var t=this.jp_1.kotlinx$atomicfu$value;return t instanceof qn&&null!=t.xp_1?(this.iq(),!1):(this.ip_1.kotlinx$atomicfu$value=536870911+(0<<Gn())|0,this.jp_1.kotlinx$atomicfu$value=r,!0)},At(Fn).lq=function(){return this.rm()},At(Fn).mq=function(t,e){for(var n=this.jp_1;;){var i=n.kotlinx$atomicfu$value;if(null!=i&&Ft(i,Bn))throw Ht(Bt("Not completed"));if(i instanceof Jn)return $t;if(i instanceof qn){if(i.aq())throw Ht(Bt("Must be called at most once"));var r=i.bq(Ut,Ut,Ut,Ut,e);if(this.jp_1.atomicfu$compareAndSet(i,r))return i.nq(this,e),$t}else if(this.jp_1.atomicfu$compareAndSet(i,new qn(i,Ut,Ut,Ut,e)))return $t}return $t},At(Fn).oq=function(t){for(var e=this.jp_1;;){var n=e.kotlinx$atomicfu$value;if(null==n||!Ft(n,Bn))return!1;var i=new Zn(this,t,n instanceof Hn||n instanceof Ms);if(this.jp_1.atomicfu$compareAndSet(n,i))return n instanceof Hn?this.zp(n,t):n instanceof Ms&&Rn(this,n,t),zn(this),Un(this,this.np_1),!0}},At(Fn).pq=function(t){if(function(t,e){if(!An(t))return!1;var n=t.gp_1;return(n instanceof zs?n:Rt()).op(e)}(this,t))return $t;this.oq(t),zn(this)},At(Fn).zp=function(t,e){var n;try{t.invoke(e),n=$t}catch(t){if(!(t instanceof Error))throw t;var i=t;ai(this.ab(),new xi("Exception in invokeOnCancellation handler for "+this,i)),n=$t}return n},At(Fn).dq=function(t,e){try{t(e)}catch(t){if(!(t instanceof Error))throw t;var n=t;ai(this.ab(),new xi("Exception in resume onCancellation handler for "+this,n))}},At(Fn).qq=function(t){return t.vm()},At(Fn).rq=function(){var t=An(this);if(function(t){for(var e=t.ip_1;;){var n=e.kotlinx$atomicfu$value;switch(n>>Gn()){case 0:var i=536870911&n,r=(1<<Gn())+i|0;if(t.ip_1.atomicfu$compareAndSet(n,r))return!0;break;case 2:return!1;default:throw Ht(Bt("Already suspended"))}}}(this))return null==$n(this)&&On(this),t&&this.sq(),Lt();t&&this.sq();var e=this.rm();if(e instanceof Jn)throw Zo(e.cm_1);if(qs(this.np_1)){var n=this.ab().bb(p);if(null!=n&&!n.xl()){var i=n.vm();throw this.mq(e,i),Zo(i)}}return this.tq(e)},At(Fn).sq=function(){var t=this.gp_1,e=t instanceof zs?t:null,n=null==e?null:e.uq(this);if(null==n)return $t;var i=n;this.iq(),this.oq(i)},At(Fn).hb=function(t){return Nn(this,function(t,e){var n,i=Jt(t);if(null==i){var r=Zt(t);n=null==r||null!=r?r:Rt()}else n=new Jn(Zo(i));return n}(t),this.np_1)},At(Fn).vq=function(t,e){return Dn(this,t,this.np_1,e)},At(Fn).wq=function(t,e){t:for(var n=this.ip_1;;){var i=n.kotlinx$atomicfu$value;if(536870911!=(536870911&i))throw Ht(Bt("invokeOnCancellation should be called at most once"));var r=(i>>Gn()<<Gn())+e|0;if(n.atomicfu$compareAndSet(i,r))break t}In(this,t)},At(Fn).to=function(t){In(this,function(t,e){return e instanceof Hn?e:new jn(e)}(0,t))},At(Fn).iq=function(){var t=$n(this);if(null==t)return $t;t.xo(),this.kp_1.kotlinx$atomicfu$value=m},At(Fn).ro=function(t,e,n){return function(t,e,n,i){for(var r=t.jp_1;;)t:{var a=r.kotlinx$atomicfu$value;if(null!=a&&Ft(a,Bn)){var s=Pn(0,a,e,t.np_1,i,n);if(!t.jp_1.atomicfu$compareAndSet(a,s))break t;return zn(t),Cn()}return a instanceof qn&&null!=n&&a.xp_1===n?Cn():null}}(this,t,e,n)},At(Fn).so=function(t){Un(this,this.np_1)},At(Fn).uo=function(t,e){var n=this.gp_1,i=n instanceof zs?n:null;Nn(this,e,(null==i?null:i.zo_1)===t?ut:this.np_1)},At(Fn).tq=function(t){var e;if(t instanceof qn){var n=t.up_1;e=null==n||null!=n?n:Rt()}else e=null==t||null!=t?t:Rt();return e},At(Fn).xq=function(t){var e=At(Vs).xq.call(this,t);return null==e?null:Zo(e,this.gp_1)},At(Fn).toString=function(){return this.jm()+"("+bo(this.gp_1)+"){"+((null!=(t=this.rm())&&Ft(t,Bn)?"Active":t instanceof Zn?"Cancelled":"Completed")+"}@")+To(this);var t},At(Fn).jm=function(){return"CancellableContinuation"},At(Vn).toString=function(){return"Active"},At(qn).aq=function(){return!(null==this.yp_1)},At(qn).nq=function(t,e){var n=this.vp_1;null==n||t.zp(n,e);var i=this.wp_1;null==i||t.dq(i,e)},At(qn).ar=function(t,e,n,i,r){return new qn(t,e,n,i,r)},At(qn).bq=function(t,e,n,i,r,a){return t=t===Ut?this.up_1:t,e=e===Ut?this.vp_1:e,n=n===Ut?this.wp_1:n,i=i===Ut?this.xp_1:i,r=r===Ut?this.yp_1:r,a===Ut?this.ar(t,e,n,i,r):a.ar.call(this,t,e,n,i,r)},At(qn).toString=function(){return"CompletedContinuation(result="+Vt(this.up_1)+", cancelHandler="+this.vp_1+", onCancellation="+this.wp_1+", idempotentResume="+Vt(this.xp_1)+", cancelCause="+this.yp_1+")"},At(qn).hashCode=function(){var t=null==this.up_1?0:Wt(this.up_1);return t=Ct(t,31)+(null==this.vp_1?0:Wt(this.vp_1))|0,t=Ct(t,31)+(null==this.wp_1?0:Wt(this.wp_1))|0,t=Ct(t,31)+(null==this.xp_1?0:Wt(this.xp_1))|0,Ct(t,31)+(null==this.yp_1?0:Wt(this.yp_1))|0},At(qn).equals=function(t){if(this===t)return!0;if(!(t instanceof qn))return!1;var e=t instanceof qn?t:Rt();return!!(Xt(this.up_1,e.up_1)&&Xt(this.vp_1,e.vp_1)&&Xt(this.wp_1,e.wp_1)&&Xt(this.xp_1,e.xp_1)&&Xt(this.yp_1,e.yp_1))},At(jn).wo=function(t){this.br_1(t)},At(jn).invoke=function(t){return this.wo(t)},At(jn).toString=function(){return"InvokeOnCancel["+Mo(this.br_1)+"@"+To(this)+"]"},At(Xn).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.kr_1.qn(this))===Lt())return t;continue t;case 1:return null==t||null!=t?t:Rt();case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},At(Yn).cn=function(){return!0},At(Yn).lo=function(t){var e=new Xn(this,t);return e.va_1=$t,e.wa_1=null,e.gb()},At(Yn).nr=function(t){return this.or(t)},At(Yn).pr=function(t){return this.or(new Jn(t))},At(Jn).em=function(){return this.dm_1.kotlinx$atomicfu$value},At(Jn).cq=function(){return this.dm_1.atomicfu$compareAndSet(!1,!0)},At(Jn).toString=function(){return Mo(this)+"["+this.cm_1+"]"},At(Zn).hq=function(){return this.gq_1.atomicfu$compareAndSet(!1,!0)},At(ti).toString=function(){return"CompletedWithCancellation(result="+Vt(this.sr_1)+", onCancellation="+this.tr_1+")"},At(ti).hashCode=function(){var t=null==this.sr_1?0:Wt(this.sr_1);return Ct(t,31)+Wt(this.tr_1)|0},At(ti).equals=function(t){if(this===t)return!0;if(!(t instanceof ti))return!1;var e=t instanceof ti?t:Rt();return!!Xt(this.sr_1,e.sr_1)&&!!Xt(this.tr_1,e.tr_1)},At(ri).vr=function(t){return!0},At(ri).eb=function(t){return new zs(this,t)},At(ri).cb=function(t){(t instanceof zs?t:Rt()).xr()},At(ri).toString=function(){return Mo(this)+"@"+To(this)},At(ui).toString=function(){return"CoroutineName("+this.as_1+")"},At(ui).hashCode=function(){return se(this.as_1)},At(ui).equals=function(t){if(this===t)return!0;if(!(t instanceof ui))return!1;var e=t instanceof ui?t:Rt();return this.as_1===e.as_1},At(fi).wl=function(){return Pt()},At(di).nm=function(t,e,n){var i;switch(this.n9_1){case 0:(function(t,e,n,i){var r;i=i===Ut?null:i;try{Fs(fe(Dt(t,e,n)),Ie($t),i),r=$t}catch(t){if(!(t instanceof Error))throw t;ro(n,t),r=$t}})(t,e,n),i=$t;break;case 2:ue(t,e,n),i=$t;break;case 3:(function(t,e,n){t:{var i,r=n;try{n.ab(),i="function"==typeof t?t(e,r):t.tb(e,r)}catch(t){if(t instanceof Error){var a=Ie(ke(t));r.hb(a);break t}throw t}var s=i;if(s!==Lt()){var o=null==s||null!=s?s:Rt(),l=Ie(o);r.hb(l)}}})(t,e,n),i=$t;break;case 1:i=$t;break;default:ce()}return i},At(di).rn=function(){return this===(_i(),h)},At(yi).gs=function(){var t=this.fs_1;if(null==t)return!1;var e=t.nc();return null!=e&&(e.yq(),!0)},At(yi).hs=function(t){var e,n=this.fs_1;if(null==n){var i=de();this.fs_1=i,e=i}else e=n;e.lc(t)},At(yi).is=function(){return this.ds_1.t8(vi(0,!0))>=0},At(yi).js=function(){var t=this.fs_1,e=null==t?null:t.z();return null==e||e},At(yi).ks=function(t){this.ds_1=this.ds_1.ba(vi(0,t)),t||(this.es_1=!0)},At(yi).ls=function(t){if(this.ds_1=this.ds_1.ca(vi(0,t)),this.ds_1.t8(new he(0,0))>0)return $t;this.es_1&&this.ms()},At(yi).ms=function(){},At(wi).os=function(){var t,e=this.ns_1.qs();if(null==e){var n=new Ro;bi().ns_1.rs(n),t=n}else t=e;return t},At($i).qm=function(){return null},At($i).xo=function(){},At($i).hn=function(t){return!1},At($i).toString=function(){return"NonDisposableHandle"},At(Ni).xl=function(){return this.ss_1},At(Ni).ts=function(){return null},At(Ni).toString=function(){return"Empty{"+(this.ss_1?"Active":"New")+"}"},At(zi).xl=function(){return!0},At(zi).ts=function(){return this},At(zi).xs=function(t){var e=be();e.g5("List{"),e.g5(t),e.g5("}[");for(var n=!0,i=this.ys_1;!Xt(i,this);){if(i instanceof Fi){var r=i;n?n=!1:e.g5(", "),e.f5(r)}i=i.ys_1}return e.g5("]"),e.toString()},At(zi).toString=function(){return Eo()?this.xs("Active"):At(Ko).toString.call(this)},At(Fi).lt=function(){var t=this.kt_1;if(null!=t)return t;xe("job")},At(Fi).xl=function(){return!0},At(Fi).ts=function(){return null},At(Fi).xo=function(){return this.lt().bn(this)},At(Fi).toString=function(){return Mo(this)+"@"+To(this)+"[job@"+To(this.lt())+"]"},At(ar).ts=function(){return this.nt_1},At(ar).yt=function(t){this.ot_1.kotlinx$atomicfu$value=t},At(ar).ut=function(){return this.ot_1.kotlinx$atomicfu$value},At(ar).eu=function(t){this.pt_1.kotlinx$atomicfu$value=t},At(ar).xt=function(){return this.pt_1.kotlinx$atomicfu$value},At(ar).vt=function(){return Hi(this)===Pi()},At(ar).rt=function(){return!(null==this.xt())},At(ar).xl=function(){return null==this.xt()},At(ar).st=function(t){var e,n=Hi(this);if(null==n)e=Vi();else if(n instanceof Error){var i=Vi();i.p(n),e=i}else{if(!(n instanceof Me)){var r="State is "+Vt(n);throw Ht(Bt(r))}e=n instanceof Me?n:Rt()}var a=e,s=this.xt();return null==s||a.l1(0,s),null==t||Xt(t,s)||a.p(t),Bi(this,Pi()),a},At(ar).wt=function(t){var e=this.xt();if(null==e)return this.eu(t),$t;if(t===e)return $t;var n=Hi(this);if(null==n)Bi(this,t);else if(n instanceof Error){if(t===n)return $t;var i=Vi();i.p(n),i.p(t),Bi(this,i)}else{if(!(n instanceof Me)){var r="State is "+Vt(n);throw Ht(Bt(r))}(n instanceof Me?n:Rt()).p(t)}},At(ar).toString=function(){return"Finishing[cancelling="+this.rt()+", completing="+this.ut()+", rootCause="+this.xt()+", exceptions="+Vt(Hi(this))+", list="+this.nt_1+"]"},At(sr).wo=function(t){!function(t,e,n,i){var r=ir(n);if(null!=r&&nr(t,e,r,i))return $t;var a=qi(t,e,i);t.hm(a)}(this.ju_1,this.ku_1,this.lu_1,this.mu_1)},At(sr).invoke=function(t){return this.wo(t)},At(or).qq=function(t){var e=this.tu_1.rm();if(e instanceof ar){var n=e.xt();if(null!=n)return n}return e instanceof Jn?e.cm_1:t.vm()},At(or).jm=function(){return"AwaitContinuation"},At(lr).c2=function(){return p},At(lr).om=function(t){this.rl_1.kotlinx$atomicfu$value=t},At(lr).pm=function(){return this.rl_1.kotlinx$atomicfu$value},At(lr).qm=function(){var t=this.pm();return null==t?null:t.qm()},At(lr).sl=function(t){if(null==t)return this.om(m),$t;t.tm();var e=t.kn(this);this.om(e),this.sm()&&(e.xo(),this.om(m))},At(lr).rm=function(){for(var t=this.ql_1;;){var e=t.kotlinx$atomicfu$value;if(!(e instanceof Ss))return e;e.uu(this)}},At(lr).xl=function(){var t=this.rm();return!(null==t||!Ft(t,Li))&&t.xl()},At(lr).sm=function(){var t=this.rm();return!(null!=t&&Ft(t,Li))},At(lr).tm=function(){for(;;){var t=Xi(this,this.rm());if(0===t)return!1;if(1===t)return!0}},At(lr).um=function(){},At(lr).vm=function(){var t,e=this.rm();if(e instanceof ar){var n=e.xt(),i=null==n?null:this.wm(n,Mo(this)+" is cancelling");if(null==i)throw Ht(Bt("Job is still new or active: "+this));t=i}else{if(null!=e&&Ft(e,Li))throw Ht(Bt("Job is still new or active: "+this));t=e instanceof Jn?this.xm(e.cm_1):new Oo(Mo(this)+" has completed normally",null,this)}return t},At(lr).wm=function(t,e){var n=t instanceof Ee?t:null;return null==n?new Oo(null==e?this.am():e,t,this):n},At(lr).xm=function(t,e,n){return e=e===Ut?null:e,n===Ut?this.wm(t,e):n.wm.call(this,t,e)},At(lr).ym=function(t){return this.zm(!1,!0,t)},At(lr).zm=function(t,e,n){for(var i=function(t,e,n){var i;if(n){var r=e instanceof cr?e:null;i=null==r?new _r(e):r}else{var a=e instanceof Fi?e:null,s=null==a?null:a;i=null==s?new dr(e):s}var o=i;return o.kt_1=t,o}(this,n,t);;)t:{var r=this.rm();if(r instanceof Ni)if(r.ss_1){if(this.ql_1.atomicfu$compareAndSet(r,i))return i}else Ki(this,r);else{if(null==r||!Ft(r,Li)){if(e){var a=r instanceof Jn?r:null;yo(n,null==a?null:a.cm_1)}return m}var s=r.ts();if(null==s)Ji(this,r instanceof Fi?r:Rt());else{var o=null,l=m;if(t&&r instanceof ar&&(null==(o=r.xt())||n instanceof fr&&!r.ut())){if(!Yi(this,r,s,i))break t;if(null==o)return i;l=i}if(null!=o)return e&&yo(n,o),l;if(Yi(this,r,s,i))return i}}}},At(lr).rr=function(t){return function(t){for(;;){var e=t.rm();if(null==e||!Ft(e,Li))return!1;if(Xi(t,e)>=0)return!0}}(this)?function(t,e){var n=new Fn(fe(e),Hs());n.kq();var i=new pr(n);return En(n,t.ym(i)),n.rq()}(this,t):(Ai(t.ab()),$t)},At(lr).bn=function(t){for(;;){var e=this.rm();if(!(e instanceof Fi))return null!=e&&Ft(e,Li)?(null!=e.ts()&&t.et(),$t):$t;if(e!==t)return $t;if(this.ql_1.atomicfu$compareAndSet(e,Di()))return $t}},At(lr).cn=function(){return!1},At(lr).dn=function(t){var e;e=null==t?new Oo(this.am(),null,this):t,this.fn(e)},At(lr).am=function(){return"Job was cancelled"},At(lr).fn=function(t){this.in(t)},At(lr).gn=function(t){this.in(t)},At(lr).hn=function(t){return t instanceof Ee||!!this.in(t)&&this.nn()},At(lr).in=function(t){var e,n=Oi();return!(!this.cn()||(n=function(t,e){for(;;){var n=t.rm();if(null==n||!Ft(n,Li)||n instanceof ar&&n.ut())return Oi();var i=er(t,n,new Jn(Zi(t,e)));if(i!==ki())return i}}(this,t))!==Ii())||(n===Oi()&&(n=function(t,e){for(var n=null;;)t:{var i=t.rm();if(i instanceof ar){if(i.vt())return Ui();var r=i.rt();if(null!=e||!r){var a,s=n;if(null==s){var o=Zi(t,e);n=o,a=o}else a=s;var l=a;i.wt(l)}var u=i.xt(),c=r?null:u;return null==c||Gi(t,i.nt_1,c),Oi()}if(null==i||!Ft(i,Li))return Ui();var h,f=n;if(null==f){var _=Zi(t,e);n=_,h=_}else h=f;var d=h;if(!i.xl()){var p=er(t,i,new Jn(d));if(p===Oi()){var m="Cannot happen in "+Vt(i);throw Ht(Bt(m))}if(p===ki())break t;return p}if(tr(t,i,d))return Oi()}}(this,t)),n===Oi()||n===Ii()?e=!0:n===Ui()?e=!1:(this.hm(n),e=!0),e)},At(lr).jn=function(){var t,e=this.rm();if(e instanceof ar)t=e.xt();else if(e instanceof Jn)t=e.cm_1;else{if(null!=e&&Ft(e,Li)){var n="Cannot be cancelling child in this state: "+Vt(e);throw Ht(Bt(n))}t=null}var i=t,r=i instanceof Ee?i:null;return null==r?new Oo("Parent job is "+rr(0,e),i,this):r},At(lr).or=function(t){for(;;){var e=er(this,this.rm(),t);if(e===Oi())return!1;if(e===Ii())return!0;if(e!==ki())return this.hm(e),!0}},At(lr).fm=function(t){for(;;){var e=er(this,this.rm(),t);if(e===Oi())throw Te("Job "+this+" is already complete or completing, but is being completed with "+Vt(t),(i=void 0,null==(i=(n=t)instanceof Jn?n:null)?null:i.cm_1));if(e!==ki())return e}var n,i},At(lr).kn=function(t){var e=new fr(t),n=this.an(!0,Ut,e);return Ft(n,Ci)?n:Rt()},At(lr).im=function(t){throw t},At(lr).ln=function(t){},At(lr).mn=function(){return!1},At(lr).nn=function(){return!0},At(lr).on=function(t){return!1},At(lr).bm=function(t){},At(lr).hm=function(t){},At(lr).toString=function(){return this.pn()+"@"+To(this)},At(lr).pn=function(){return this.jm()+"{"+rr(0,this.rm())+"}"},At(lr).jm=function(){return Mo(this)},At(lr).qn=function(t){t:for(;;){var e=this.rm();if(null==e||!Ft(e,Li)){if(e instanceof Jn)throw e.cm_1;return mr(e)}if(Xi(this,e)>=0)break t}return function(t,e){var n=new or(fe(e),t);n.kq();var i=new gr(n);return En(n,t.ym(i)),n.rq()}(this,t)},At(hr).ts=function(){return this.tt_1},At(hr).xl=function(){return!1},At(hr).toString=function(){return Eo()?this.tt_1.xs("New"):Oe(this)},At(fr).qm=function(){return this.lt()},At(fr).wo=function(t){return this.du_1.gn(this.lt())},At(fr).invoke=function(t){return this.wo(t)},At(fr).hn=function(t){return this.lt().hn(t)},At(_r).wo=function(t){this.av_1.atomicfu$compareAndSet(0,1)&&this.zu_1(t)},At(_r).invoke=function(t){return this.wo(t)},At(dr).wo=function(t){return this.fv_1(t)},At(dr).invoke=function(t){return this.wo(t)},At(pr).wo=function(t){var e=this.kv_1,n=Ie($t);return e.hb(n),$t},At(pr).invoke=function(t){return this.wo(t)},At(gr).wo=function(t){var e=this.lt().rm();if(e instanceof Jn){var n=this.qv_1,i=e.cm_1,r=Ie(ke(i));n.hb(r)}else{var a=this.qv_1,s=mr(e),o=null==s||null!=s?s:Rt(),l=Ie(o);a.hb(l)}},At(gr).invoke=function(t){return this.wo(t)},At(yr).wo=function(t){this.vv_1.pq(this.vv_1.qq(this.lt()))},At(yr).invoke=function(t){return this.wo(t)},At(wr).cn=function(){return!0},At(wr).nn=function(){return this.yv_1},At(wr).qr=function(){return this.or($t)},At(wr).pr=function(t){return this.or(new Jn(t))},At(xr).toString=function(){var t=this.bw();return null==t?Mo(this)+"@"+To(this):t},At(xr).bw=function(){var t,e=$o().gw();if(this===e)return"Dispatchers.Main";try{t=e.aw()}catch(e){if(!(e instanceof Ue))throw e;t=null}return this===t?"Dispatchers.Main.immediate":null},At(Sr).hn=function(t){return!1},At(Mr).vr=function(t){return!1},At(Mr).wr=function(t,e){var n=t.bb(T);if(null!=n)return n.mw_1=!0,$t;throw Pe("Dispatchers.Unconfined.dispatch function can only be used by the yield function. If you wrap Unconfined dispatcher in your code, make sure you properly delegate isDispatchNeeded and dispatch calls.")},At(Mr).toString=function(){return"Dispatchers.Unconfined"},At(Gr).tw=function(){return Ne(this.rw_1)},At(Gr).uw=function(){return kr()},At(Gr).vw=function(t,e){jr(this,t,e)},At(Gr).ww=function(t){var e=this.sw_1.atomicfu$get(Ct(t,2)).kotlinx$atomicfu$value;return null==e||null!=e?e:Rt()},At(Gr).xw=function(t){var e=this.ww(t);return this.yw(t),e},At(Gr).yw=function(t){jr(this,t,null)},At(Gr).zw=function(t){return this.sw_1.atomicfu$get(Ct(t,2)+1|0).kotlinx$atomicfu$value},At(Gr).ax=function(t,e){this.sw_1.atomicfu$get(Ct(t,2)+1|0).kotlinx$atomicfu$value=e},At(Gr).bx=function(t,e,n){return this.sw_1.atomicfu$get(Ct(t,2)+1|0).atomicfu$compareAndSet(e,n)},At(Gr).cx=function(t,e){return this.sw_1.atomicfu$get(Ct(t,2)+1|0).atomicfu$getAndSet(e)},At(Gr).tp=function(t,e,n){var i=t>=kr(),r=i?t-kr()|0:t,a=this.ww(r);t:for(;;){var s=this.zw(r);if(!(null!=s&&Ft(s,Cr)||s instanceof Da)){if(s===Fr()||s===Br()){if(this.yw(r),i){var o=this.tw().ex_1;null==o||Ys(o,a,n)}return $t}if(s===Nr()||s===Dr())continue t;if(s===zr()||s===Ur())return $t;if(s===Hr())return $t;var l="unexpected state: "+Vt(s);throw Ht(Bt(l))}var u=i?Fr():Br();if(this.bx(r,s,u)){if(this.yw(r),this.px(r,!i),i){var c=this.tw().ex_1;null==c||Ys(c,a,n)}return $t}}},At(Gr).px=function(t,e){if(e){var n=this.tw(),i=this.rp_1,r=kr(),a=i.da(Le(r)).ba(Le(t));n.qx(a)}this.rx()},At(Kr).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=8,this.ta_1=1;continue t;case 1:this.ty_1=this.ry_1.fy_1,this.uy_1=null,this.vy_1=this.ty_1.kx_1.kotlinx$atomicfu$value,this.ta_1=2;continue t;case 2:if(this.ty_1.iy()){this.sy_1=Wr(this.ry_1),this.ta_1=10;continue t}this.ta_1=3;continue t;case 3:this.wy_1=this.ty_1.gx_1.atomicfu$getAndIncrement$long();var e=this.wy_1,n=kr();this.xy_1=e.ea(Le(n));var i=this.wy_1,r=kr();if(this.yy_1=i.fa(Le(r)).y8(),this.vy_1.rp_1.equals(this.xy_1)){this.ta_1=5;continue t}if(this.zy_1=Aa(this.ty_1,this.xy_1,this.vy_1),null==this.zy_1){this.ta_1=2;continue t}this.az_1=this.zy_1,this.ta_1=4;continue t;case 4:this.vy_1=this.az_1,this.ta_1=5;continue t;case 5:if(this.bz_1=ha(this.ty_1,this.vy_1,this.yy_1,this.wy_1,this.uy_1),this.bz_1===Ka()){var a=this.uy_1,s=null!=a&&Ft(a,Cr)?a:null;throw null==s||ua(s,this.ty_1,this.vy_1,this.yy_1),this.vy_1,this.yy_1,this.wy_1,Ht(Bt("unreachable"))}if(this.bz_1===Ja()){this.wy_1.t8(this.ty_1.hy())<0&&this.vy_1.by(),this.ta_1=2;continue t}if(this.bz_1===Ya()){if(this.dz_1=this.vy_1,this.ez_1=this.yy_1,this.fz_1=this.wy_1,this.ta_1=6,(t=Xr(this.ry_1,this.dz_1,this.ez_1,this.fz_1,this))===Lt())return t;continue t}this.vy_1.by();var o=this.bz_1,l=null==o||null!=o?o:Rt();this.ry_1.dy_1=l,this.cz_1=!0,this.ta_1=7;continue t;case 6:return t;case 7:this.sy_1=this.cz_1,this.ta_1=10;continue t;case 8:throw this.wa_1;case 9:this.ta_1=10;continue t;case 10:return this.sy_1}}catch(t){var u=t;if(8===this.ua_1)throw u;this.ta_1=this.ua_1,this.wa_1=u}},At(ga).vz=function(t){var e=new Kr(this,t);return e.va_1=$t,e.wa_1=null,e.gb()},At(ga).wq=function(t,e){var n=this.ey_1;null==n||n.wq(t,e)},At(ga).u=function(){var t=this.dy_1;if(t===Vr())throw Ht(Bt("`hasNext()` has not been invoked"));if(this.dy_1=Vr(),t===Hr())throw va(this.fy_1);return null==t||null!=t?t:Rt()},At(ga).kz=function(t){var e=Ne(this.ey_1);this.ey_1=null,this.dy_1=t;var n=this.fy_1.ex_1;return La(e,!0,null==n?null:Zs(n,t,e.ab()))},At(ga).wz=function(){var t=Ne(this.ey_1);this.ey_1=null,this.dy_1=Hr();var e=this.fy_1.gy();if(null==e){var n=Ie(!1);t.hb(n)}else{var i=Zo(e),r=Ie(ke(i));t.hb(r)}},At(ka).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=11,this.ta_1=1;continue t;case 1:this.o10_1=this.l10_1,this.p10_1=this.m10_1,this.q10_1=null,this.r10_1=this.o10_1.jx_1.kotlinx$atomicfu$value,this.ta_1=2;continue t;case 2:this.s10_1=this.o10_1.fx_1.atomicfu$getAndIncrement$long(),this.t10_1=this.s10_1.oa(new he(-1,268435455)),this.u10_1=Ma(this.s10_1,this.o10_1);var e=this.t10_1,n=kr();this.v10_1=e.ea(Le(n));var i=this.t10_1,r=kr();if(this.w10_1=i.fa(Le(r)).y8(),this.r10_1.rp_1.equals(this.v10_1)){this.ta_1=4;continue t}if(this.x10_1=$a(this.o10_1,this.v10_1,this.r10_1),null==this.x10_1){if(this.u10_1){if(this.ta_1=10,(t=Qr(this.l10_1,this.m10_1,this))===Lt())return t;continue t}this.ta_1=2;continue t}this.y10_1=this.x10_1,this.ta_1=3;continue t;case 3:this.r10_1=this.y10_1,this.ta_1=4;continue t;case 4:if(this.z10_1=ra(this.o10_1,this.r10_1,this.w10_1,this.p10_1,this.t10_1,this.q10_1,this.u10_1),this.z10_1===qa()){this.r10_1.by(),this.n10_1=$t,this.ta_1=13;continue t}if(this.z10_1===ja()){this.n10_1=$t,this.ta_1=13;continue t}if(this.z10_1===Ga()){if(this.u10_1){if(this.r10_1.rx(),this.ta_1=9,(t=Qr(this.l10_1,this.m10_1,this))===Lt())return t;continue t}this.ta_1=8;continue t}if(this.z10_1===Wa()){if(this.t10_1.t8(this.o10_1.hz())<0&&this.r10_1.by(),this.ta_1=7,(t=Qr(this.l10_1,this.m10_1,this))===Lt())return t;continue t}if(this.z10_1===Xa()){this.r10_1.by(),this.ta_1=2;continue t}if(this.z10_1===Va()){if(this.a11_1=this.r10_1,this.b11_1=this.w10_1,this.c11_1=this.p10_1,this.d11_1=this.t10_1,this.ta_1=6,(t=ta(this.l10_1,this.a11_1,this.b11_1,this.c11_1,this.d11_1,this))===Lt())return t;continue t}this.ta_1=5;continue t;case 5:this.ta_1=2;continue t;case 6:case 7:case 9:case 10:this.n10_1=t,this.ta_1=13;continue t;case 8:var a=this.q10_1,s=null!=a&&Ft(a,Cr)?a:null;null==s||ea(s,this.o10_1,this.r10_1,this.w10_1);this.r10_1,this.w10_1,this.n10_1=$t,this.ta_1=13;continue t;case 11:throw this.wa_1;case 12:this.ta_1=13;continue t;case 13:return $t}}catch(t){var o=t;if(11===this.ua_1)throw o;this.ta_1=this.ua_1,this.wa_1=o}},At(Ua).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=8,this.ta_1=1;continue t;case 1:this.o11_1=this.m11_1,this.p11_1=null,this.q11_1=this.o11_1.kx_1.kotlinx$atomicfu$value,this.ta_1=2;continue t;case 2:if(this.o11_1.iy())throw va(this.m11_1);this.ta_1=3;continue t;case 3:this.r11_1=this.o11_1.gx_1.atomicfu$getAndIncrement$long();var e=this.r11_1,n=kr();this.s11_1=e.ea(Le(n));var i=this.r11_1,r=kr();if(this.t11_1=i.fa(Le(r)).y8(),this.q11_1.rp_1.equals(this.s11_1)){this.ta_1=5;continue t}if(this.u11_1=Aa(this.o11_1,this.s11_1,this.q11_1),null==this.u11_1){this.ta_1=2;continue t}this.v11_1=this.u11_1,this.ta_1=4;continue t;case 4:this.q11_1=this.v11_1,this.ta_1=5;continue t;case 5:if(this.w11_1=ha(this.o11_1,this.q11_1,this.t11_1,this.r11_1,this.p11_1),this.w11_1===Ka()){var a=this.p11_1,s=null!=a&&Ft(a,Cr)?a:null;throw null==s||ua(s,this.o11_1,this.q11_1,this.t11_1),this.q11_1,this.t11_1,this.r11_1,Ht(Bt("unexpected"))}if(this.w11_1===Ja()){this.r11_1.t8(this.o11_1.hy())<0&&this.q11_1.by(),this.ta_1=2;continue t}if(this.w11_1===Ya()){if(this.y11_1=this.q11_1,this.z11_1=this.t11_1,this.a12_1=this.r11_1,this.ta_1=6,(t=la(this.m11_1,this.y11_1,this.z11_1,this.a12_1,this))===Lt())return t;continue t}this.q11_1.by();var o=this.w11_1;return null==o||null!=o?o:Rt();case 6:this.x11_1=t,this.ta_1=7;continue t;case 7:this.n11_1=this.x11_1,this.ta_1=10;continue t;case 8:throw this.wa_1;case 9:this.ta_1=10;continue t;case 10:return this.n11_1}}catch(t){var l=t;if(8===this.ua_1)throw l;this.ta_1=this.ua_1,this.wa_1=l}},At(Pa).hy=function(){return this.fx_1.kotlinx$atomicfu$value.oa(new he(-1,268435455))},At(Pa).hz=function(){return this.gx_1.kotlinx$atomicfu$value},At(Pa).b12=function(t,e){var n=new ka(this,t,e);return n.va_1=$t,n.wa_1=null,n.gb()},At(Pa).c12=function(t){if(e=this,!Ma(n=this.fx_1.kotlinx$atomicfu$value,e)&&!sa(e,n.oa(new he(-1,268435455))))return as().d12();var e,n,i;t:{var r=Fr(),a=this.jx_1.kotlinx$atomicfu$value;e:for(;;){var s=this.fx_1.atomicfu$getAndIncrement$long(),o=s.oa(new he(-1,268435455)),l=Ma(s,this),u=kr(),c=o.ea(Le(u)),h=kr(),f=o.fa(Le(h)).y8();if(!a.rp_1.equals(c)){var _=$a(this,c,a);if(null==_){if(l){i=as().a10(this.gz());break t}continue e}a=_}var d=ra(this,a,f,t,o,r,l);if(d===qa()){a.by(),i=as().mz($t);break t}if(d===ja()){i=as().mz($t);break t}if(d===Ga()){if(l){a.rx(),i=as().a10(this.gz());break t}var p=null!=r&&Ft(r,Cr)?r:null;null==p||ea(p,0,a,f),a.rx(),i=as().d12();break t}if(d===Wa()){o.t8(this.hz())<0&&a.by(),i=as().a10(this.gz());break t}if(d!==Xa()){if(d===Va())throw Ht(Bt("unexpected"))}else a.by()}}return i},At(Pa).pz=function(){},At(Pa).iz=function(){},At(Pa).e12=function(t){var e=new Ua(this,t);return e.va_1=$t,e.wa_1=null,e.gb()},At(Pa).yz=function(t){var e=this.kx_1.kotlinx$atomicfu$value;t:for(;;){var n=this.gx_1.kotlinx$atomicfu$value,i=this.dx_1,r=n.ba(Le(i)),a=Jr(this),s=r.t8(a)>=0?r:a;if(t.t8(s)<0)return $t;var o=n.ba(Le(1));if(this.gx_1.atomicfu$compareAndSet(n,o)){var l=kr(),u=n.ea(Le(l)),c=kr(),h=n.fa(Le(c)).y8();if(!e.rp_1.equals(u)){var f=Aa(this,u,e);if(null==f)continue t;e=f}var _=ha(this,e,h,n,null);if(_===Ja())n.t8(this.hy())<0&&e.by();else{e.by();var d,p=this.ex_1;if(null!=(d=null==p?null:Js(p,null==_||null!=_?_:Rt())))throw d}}}},At(Pa).qx=function(t){if(Zr(this))return $t;for(;Jr(this).t8(t)<=0;);var e=(Za(),k),n=0;if(n<e)do{n=n+1|0;var i=Jr(this),r=this.ix_1.kotlinx$atomicfu$value.oa(new he(-1,1073741823));if(i.equals(r)&&i.equals(Jr(this)))return $t}while(n<e);t:for(var a=this.ix_1;;){var s=a.kotlinx$atomicfu$value,o=za(s.oa(new he(-1,1073741823)),!0);if(a.atomicfu$compareAndSet(s,o))break t}for(;;){var l=Jr(this),u=this.ix_1.kotlinx$atomicfu$value,c=u.oa(new he(-1,1073741823)),h=!u.oa(new he(0,1073741824)).equals(new he(0,0));if(l.equals(c)&&l.equals(Jr(this))){t:for(var f=this.ix_1;;){var _=f.kotlinx$atomicfu$value,d=za(_.oa(new he(-1,1073741823)),!1);if(f.atomicfu$compareAndSet(_,d))break t}return $t}h||this.ix_1.atomicfu$compareAndSet(u,za(c,!0))}},At(Pa).s=function(){return new ga(this)},At(Pa).gy=function(){var t=this.nx_1.kotlinx$atomicfu$value;return null==t||t instanceof Error?t:Rt()},At(Pa).gz=function(){var t=this.gy();return null==t?new os(hs()):t},At(Pa).f12=function(){},At(Pa).g12=function(t){return this.h12(t,!1)},At(Pa).dn=function(t){this.j12(t)},At(Pa).j12=function(t){return this.h12(null==t?Kt("Channel was cancelled"):t,!0)},At(Pa).h12=function(t,e){e&&function(t){var e;t:for(var n=t.fx_1;;){var i=n.kotlinx$atomicfu$value;if(0!==i.ma(60).y8())return $t;var r=Fa(i.oa(new he(-1,268435455)),1);if(n.atomicfu$compareAndSet(i,r)){e=$t;break t}}}(this);var n=this.nx_1.atomicfu$compareAndSet(qr(),t);return e?function(t){var e;t:for(var n=t.fx_1;;){var i=n.kotlinx$atomicfu$value,r=Fa(i.oa(new he(-1,268435455)),3);if(n.atomicfu$compareAndSet(i,r)){e=$t;break t}}}(this):function(t){var e;t:for(var n=t.fx_1;;){var i,r=n.kotlinx$atomicfu$value;switch(r.ma(60).y8()){case 0:i=Fa(r.oa(new he(-1,268435455)),2);break;case 1:i=Fa(r.oa(new he(-1,268435455)),3);break;default:return $t}var a=i;if(n.atomicfu$compareAndSet(r,a)){e=$t;break t}}}(this),ya(this),this.f12(),n&&function(t){var e;t:for(var n=t.ox_1;;){var i=n.kotlinx$atomicfu$value,r=null===i?(Za(),W):(Za(),X);if(n.atomicfu$compareAndSet(i,r)){e=i;break t}}if(null==e)return $t;var a=e;"function"!=typeof a&&Rt(),a(t.gy())}(this),n},At(Pa).zz=function(){return!1},At(Pa).xz=function(){return Ma(this.fx_1.kotlinx$atomicfu$value,this)},At(Pa).iy=function(){return t=this.fx_1.kotlinx$atomicfu$value,Ta(this,t,!0);var t},At(Pa).b10=function(){t:for(;;){var t=this.kx_1.kotlinx$atomicfu$value,e=this.hz();if(this.hy().t8(e)<=0)return!1;var n=kr(),i=e.ea(Le(n));if(!t.rp_1.equals(i)){var r=Aa(this,i,t);if(null==r){if(this.kx_1.kotlinx$atomicfu$value.rp_1.t8(i)<0)return!1;continue t}t=r}t.by();var a=kr();if(Ca(this,t,e.fa(Le(a)).y8(),e))return!0;var s=e.ba(Le(1));this.gx_1.atomicfu$compareAndSet(e,s)}},At(Pa).toString=function(){var t,e=be(),n=this.fx_1.kotlinx$atomicfu$value.ma(60).y8();2===n?e.g5("closed,"):3===n&&e.g5("cancelled,"),e.g5("capacity="+this.dx_1+","),e.g5("data=[");for(var i=He([this.kx_1.kotlinx$atomicfu$value,this.jx_1.kotlinx$atomicfu$value,this.lx_1.kotlinx$atomicfu$value]),r=Ve(),a=i.s();a.t();){var s=a.u();s!==Ir()&&r.p(s)}var o=r.s();if(!o.t())throw qe();var l=o.u();if(o.t()){var u=l.rp_1;do{var c=o.u(),h=c.rp_1;je(u,h)>0&&(l=c,u=h)}while(o.t());t=l}else t=l;var f=t,_=this.hz(),d=this.hy(),p=f;t:for(;;){var m=0,g=kr();if(m<g)e:do{var v=m;m=m+1|0;var y=p.rp_1,w=kr(),b=y.da(Le(w)).ba(Le(v));if(b.t8(d)>=0&&b.t8(_)>=0)break t;var x,S=p.zw(v),E=p.ww(v);if(null!=S&&Ft(S,Sn))x=b.t8(_)<0&&b.t8(d)>=0?"receive":b.t8(d)<0&&b.t8(_)>=0?"send":"cont";else if(null!=S&&Ft(S,ao))x=b.t8(_)<0&&b.t8(d)>=0?"onReceive":b.t8(d)<0&&b.t8(_)>=0?"onSend":"select";else if(S instanceof Na)x="receiveCatching";else if(S instanceof ia)x="sendBroadcast";else if(S instanceof Da)x="EB("+Vt(S)+")";else if(Xt(S,Dr())||Xt(S,Nr()))x="resuming_sender";else{if(null==S||Xt(S,Pr())||Xt(S,zr())||Xt(S,Lr())||Xt(S,Br())||Xt(S,Fr())||Xt(S,Hr()))continue e;x=Bt(S)}var M=x;null!=E?e.g5("("+M+","+E+"),"):e.g5(M+",")}while(m<g);var T=p.xx();if(null==T)break t;p=T}return Ge(e)===We(44)&&e.o7(e.a()-1|0),e.g5("]"),e.toString()},At(Da).toString=function(){return"WaiterEB("+this.jz_1+")"},At(ns).toString=function(){return"Failed"},At(is).equals=function(t){return t instanceof is&&Xt(this.s12_1,t.s12_1)},At(is).hashCode=function(){var t=this.s12_1,e=null==t?null:Wt(t);return null==e?0:e},At(is).toString=function(){return"Closed("+this.s12_1+")"},At(rs).mz=function(t){return t},At(rs).d12=function(){return this.lz_1},At(rs).a10=function(t){return new is(t)},At(ss).toString=function(){return(t=this.t12_1)instanceof is?Bt(t):"Value("+Vt(t)+")";var t},At(ss).hashCode=function(){return null==(t=this.t12_1)?0:Wt(t);var t},At(ss).equals=function(t){return function(t,e){if(!(e instanceof ss))return!1;var n=e instanceof ss?e.t12_1:Rt();return!!Xt(t,n)}(this.t12_1,t)},At(_s).zz=function(){return this.h13_1.equals(Or())},At(_s).b12=function(t,e){var n=fs(this,t,!0);if(n instanceof is){!function(t){var e=t instanceof is?t:null;null==e||e.s12_1}(n);var i=this.ex_1,r=null==i?null:Js(i,t);if(null!=r)throw ze(r,this.gz()),r;throw this.gz()}return $t},At(_s).c12=function(t){return fs(this,t,!1)},At(ds).j13=function(t,e){return this.i13_1(t,e)},At(ps).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.v13_1=new Go(this.u13_1,this.ab()),this.ta_1=1;continue t;case 1:if(this.ua_1=4,this.ta_1=2,(t=this.t13_1.j13(this.v13_1,this))===Lt())return t;continue t;case 2:this.w13_1=t,this.ua_1=5,this.ta_1=3;continue t;case 3:return this.v13_1.b14(),$t;case 4:this.ua_1=5;var e=this.wa_1;throw this.v13_1.b14(),e;case 5:throw this.wa_1}}catch(t){var n=t;if(5===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},At(ms).k13=function(t,e){var n=new ps(this,t,e);return n.va_1=$t,n.wa_1=null,n.gb()},At(ys).c14=function(t,e){return this.n14_1(t,e)},At(ws).y14=function(t,e){var n=this.z14(t,e);return n.va_1=$t,n.wa_1=null,n.gb()},At(ws).tb=function(t,e){return this.y14(null==t||null!=t?t:Rt(),e)},At(ws).gb=function(){for(this.va_1;;)try{var t=this.ta_1;if(0===t)return this.ua_1=1,this.w14_1.p(this.x14_1),$t;if(1===t)throw this.wa_1}catch(t){throw t}},At(ws).z14=function(t,e){var n=new ws(this.w14_1,e);return n.x14_1=t,n},At(xs).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=2,this.ta_1=1;var e=bs(this.m14_1,null);if((t=this.l14_1.k13(new ys(e),this))===Lt())return t;continue t;case 1:return this.m14_1;case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},At(Ms).sx=function(){return this.sp_1.kotlinx$atomicfu$value===this.uw()&&!this.zx()},At(Ms).tx=function(){var t;t:for(var e=this.sp_1;;){var n=e.kotlinx$atomicfu$value;if(n===this.uw()&&!this.zx()){t=!1;break t}if(e.atomicfu$compareAndSet(n,n+65536|0)){t=!0;break t}}return t},At(Ms).ux=function(){return this.sp_1.atomicfu$addAndGet(-65536)===this.uw()&&!this.zx()},At(Ms).rx=function(){this.sp_1.atomicfu$incrementAndGet()===this.uw()&&this.w()},At($s).toString=function(){return t=this.c10_1,"SegmentOrClosed(value="+Vt(t)+")";var t},At($s).hashCode=function(){return null==(t=this.c10_1)?0:Wt(t);var t},At($s).equals=function(t){return function(t,e){if(!(e instanceof $s))return!1;var n=e instanceof $s?e.c10_1:Rt();return!!Xt(t,n)}(this.c10_1,t)},At(Is).xx=function(){var t=As(this);return t===Es()?null:null==t||t instanceof Is?t:Rt()},At(Is).yx=function(t){return this.vx_1.atomicfu$compareAndSet(null,t)},At(Is).zx=function(){return null==this.xx()},At(Is).ay=function(){return this.wx_1.kotlinx$atomicfu$value},At(Is).by=function(){this.wx_1.kotlinx$atomicfu$value=null},At(Is).cy=function(){return this.vx_1.atomicfu$compareAndSet(null,Es())},At(Is).w=function(){if(this.zx())return $t;for(;;){var t=Rs(this),e=Os(this);t:for(var n=e.wx_1;;){var i=n.kotlinx$atomicfu$value,r=null===i?null:t;if(n.atomicfu$compareAndSet(i,r))break t}if(null!==t&&(t.vx_1.kotlinx$atomicfu$value=e),(!e.sx()||e.zx())&&(null===t||!t.sx()))return $t}},At(zs).ab=function(){return this.ap_1.ab()},At(zs).mp=function(){return!(null==this.dp_1.kotlinx$atomicfu$value)},At(zs).a15=function(){for(var t=this.dp_1;;)if(t.kotlinx$atomicfu$value!==Ls())return $t},At(zs).xr=function(){this.a15();var t,e=(t=this.dp_1.kotlinx$atomicfu$value)instanceof Fn?t:null;null==e||e.iq()},At(zs).ep=function(){for(var t=this.dp_1;;){var e=t.kotlinx$atomicfu$value;if(null===e)return this.dp_1.kotlinx$atomicfu$value=Ls(),null;if(e instanceof Fn){if(this.dp_1.atomicfu$compareAndSet(e,Ls()))return e instanceof Fn?e:Rt()}else if(e!==Ls()&&!(e instanceof Error)){var n="Inconsistent state "+Vt(e);throw Ht(Bt(n))}}},At(zs).uq=function(t){for(var e=this.dp_1;;){var n=e.kotlinx$atomicfu$value;if(n!==Ls()){if(n instanceof Error){if(!this.dp_1.atomicfu$compareAndSet(n,null))throw Fe(Bt("Failed requirement."));return n}var i="Inconsistent state "+Vt(n);throw Ht(Bt(i))}if(this.dp_1.atomicfu$compareAndSet(Ls(),t))return null}},At(zs).op=function(t){for(var e=this.dp_1;;){var n=e.kotlinx$atomicfu$value;if(Xt(n,Ls())){if(this.dp_1.atomicfu$compareAndSet(Ls(),t))return!0}else{if(n instanceof Error)return!0;if(this.dp_1.atomicfu$compareAndSet(n,null))return!1}}},At(zs).lq=function(){var t=this.bp_1;return this.bp_1=Ns(),t},At(zs).jq=function(){return this},At(zs).hb=function(t){var e=this.ap_1.ab(),n=Qn(t);if(this.zo_1.vr(e))this.bp_1=n,this.np_1=Gs(),this.zo_1.wr(e,this);else{var i=Gs(),r=bi().os();if(r.is())this.bp_1=n,this.np_1=i,r.hs(this);else{r.ks(!0);try{for(this.ab(),this.cp_1,this.ap_1.hb(t);r.gs(););}catch(t){if(!(t instanceof Error))throw t;var a=t;this.zq(a,null)}finally{r.ls(!0)}}}},At(zs).mq=function(t,e){t instanceof ti&&t.tr_1(e)},At(zs).toString=function(){return"DispatchedContinuation["+this.zo_1+", "+bo(this.ap_1)+"]"},At(Vs).mq=function(t,e){},At(Vs).tq=function(t){return null==t||null!=t?t:Rt()},At(Vs).xq=function(t){var e=t instanceof Jn?t:null;return null==e?null:e.cm_1},At(Vs).yq=function(){var t=null;try{var e=this.jq(),n=e instanceof zs?e:Rt(),i=n.ap_1;n.cp_1;var r=i.ab(),a=this.lq(),s=this.xq(a),o=null==s&&qs(this.np_1)?r.bb(p):null;if(null==o||o.xl())if(null!=s){var l=Ie(ke(s));i.hb(l)}else{var u=this.tq(a),c=Ie(u);i.hb(c)}else{var h=o.vm();this.mq(a,h);var f=Zo(h),_=Ie(ke(f));i.hb(_)}}catch(e){if(!(e instanceof Error))throw e;t=e}finally{var d;try{d=Ie($t)}catch(t){if(!(t instanceof Error))throw t;d=Ie(ke(t))}var m=d;this.zq(t,Jt(m))}},At(Vs).zq=function(t,e){if(null===t&&null===e)return $t;var n=new Si("Fatal exception in coroutines machinery for "+this+". Please read KDoc to 'handleFatalException' method and report this incident to maintainers",Ne(null==t?e:t));ai(this.jq().ab(),n)},At(Qs).wl=function(){return this.b15_1},At(Qs).toString=function(){return"CoroutineScope(coroutineContext="+this.b15_1+")"},At(eo).toString=function(){return"<"+this.c15_1+">"},At(oo).g15=function(t,e){var n=this.f15_1;return null==n?null:n(t,this.e15_1,e)},At(lo).uz=function(t,e){return ho(function(t,e,n){t:for(;;){var i=t.rz_1.kotlinx$atomicfu$value;if(Ft(i,Sn)){var r=so(t,e);if(null==r)continue t;var a=r,s=a.g15(t,n);if(t.rz_1.atomicfu$compareAndSet(i,a)){var o=Ft(i,Sn)?i:Rt();return t.tz_1=n,fo(o,s)?0:(t.tz_1=null,2)}}else{if(Xt(i,(mo(),ft))||i instanceof oo)return 3;if(Xt(i,(mo(),_t)))return 2;if(Xt(i,(mo(),ht))){if(t.rz_1.atomicfu$compareAndSet(i,an(e)))return 1}else{if(!Ft(i,rn)){var l="Unexpected state: "+Bt(i);throw Ht(Bt(l))}if(t.rz_1.atomicfu$compareAndSet(i,nn(i,e)))return 1}}}}(this,t,e))},At(Co).gw=function(){var t=this.fw_1;return null==t?this.ew_1:t},At(Ao).aw=function(){return this.m15_1},At(Ao).vr=function(t){return!this.l15_1},At(Ao).wr=function(t,e){return this.k15_1.wr(t,e)},At(Ao).toString=function(){var t=this.bw();return null==t?this.k15_1.toString():t},At(Ro).wr=function(t,e){!function(){throw Pe("runBlocking event loop is not supported")}()},At(Oo).toString=function(){return At(Ee).toString.call(this)+"; job="+this.r15_1},At(Oo).equals=function(t){return t===this||!!(t instanceof Oo&&t.message==this.message&&Xt(t.r15_1,this.r15_1))&&Xt(t.cause,this.cause)},At(Oo).hashCode=function(){var t=Ct(Ct(se(Ne(this.message)),31)+Wt(this.r15_1)|0,31),e=this.cause,n=null==e?null:Wt(e);return t+(null==n?0:n)|0},At(Io).u15=function(){process.nextTick(this.b16_1.y15_1)},At(Uo).u15=function(){setTimeout(this.b16_1.y15_1,0)},At(Po).i16=function(){this.z15_1.u15()},At(Po).j16=function(){setTimeout(this.y15_1,0)},At(Do).wr=function(t,e){this.b16_1.r16(e)},At(Do).bs=function(t,e){var n,i,r=new zo(setTimeout((n=e,i=this,function(){return n.uo(i,$t),$t}),Lo(t)));e.to(r)},At(No).n=function(){return this.e16_1.hc_1},At(No).k16=function(t,e){this.e16_1.l1(t,e)},At(No).l1=function(t,e){return this.k16(t,null!=e&&Ft(e,Vo)?e:Rt())},At(No).l16=function(t){return this.e16_1.p(t)},At(No).p=function(t){return this.l16(null!=t&&Ft(t,Vo)?t:Rt())},At(No).m16=function(t){return this.e16_1.q(t)},At(No).q=function(t){return this.m16(t)},At(No).v=function(){this.e16_1.v()},At(No).n16=function(t){return this.e16_1.x(t)},At(No).x=function(t){return!(null==t||!Ft(t,Vo))&&this.n16(null!=t&&Ft(t,Vo)?t:Rt())},At(No).o16=function(t){return this.e16_1.y(t)},At(No).y=function(t){return this.o16(t)},At(No).d1=function(t){return this.e16_1.d1(t)},At(No).p16=function(t){return this.e16_1.n1(t)},At(No).n1=function(t){return null!=t&&Ft(t,Vo)?this.p16(null!=t&&Ft(t,Vo)?t:Rt()):-1},At(No).z=function(){return this.e16_1.z()},At(No).s=function(){return this.e16_1.s()},At(No).o1=function(t){return this.e16_1.o1(t)},At(No).f1=function(t){return this.e16_1.f1(t)},At(No).q16=function(t,e){return this.e16_1.o(t,e)},At(No).o=function(t,e){return this.q16(t,null!=e&&Ft(e,Vo)?e:Rt())},At(No).r16=function(t){this.l16(t),this.g16_1||(this.g16_1=!0,this.i16())},At(No).h16=function(){try{var t=this.f16_1,e=0;if(e<t)do{e=e+1|0;var n=ln(this);if(null==n)return $t;n.yq()}while(e<t)}finally{this.z()?this.g16_1=!1:this.j16()}},At(zo).xo=function(){clearTimeout(this.s16_1)},At(zo).wo=function(t){this.xo()},At(zo).invoke=function(t){return this.wo(t)},At(zo).toString=function(){return"ClearTimeout["+this.s16_1+"]"},At(Fo).xo=function(){this.u16_1.w16_1.clearTimeout(this.s16_1)},At(Bo).wr=function(t,e){return this.x16_1.r16(e)},At(Bo).bs=function(t,e){var n,i,r=new Fo(this,this.w16_1.setTimeout((n=e,i=this,function(){return n.uo(i,$t),$t}),Lo(t)));e.to(r)},At(Ho).i16=function(){var t;Promise.resolve($t).then((t=this,function(e){return t.h16(),$t}))},At(Ho).j16=function(){this.b17_1.postMessage(this.c17_1,"*")},At(Go).c14=function(t,e){var n=e.ab();return Ai(n),this.a14_1!==n&&(vs(this,n),this.a14_1=n),this.x13_1.c14(t,e)},At(Go).b14=function(){},At(Ko).et=function(){throw dn()},At(Jo).ft=function(t){var e=this.zs_1;t.ys_1=this,t.zs_1=e,e.ys_1=t,this.zs_1=t},At(Jo).et=function(){return this.gt()},At(Jo).xo=function(){this.et()},At(Jo).gt=function(){if(this.at_1)return!1;var t=this.zs_1,e=this.ys_1;return t.ys_1=e,e.zs_1=t,this.at_1=!0,!0},At(Jo).mt=function(t){return this.ys_1===this&&(this.ft(t),!0)},At(Qo).qs=function(){var t=this.ps_1;return null==t||null!=t?t:Rt()},At(Qo).rs=function(t){this.ps_1=t},At(lr).an=mn,At(lr).en=pn,At(lr).ge=Ce,At(lr).bb=$e,At(lr).fe=Ae,At(lr).ee=Re,At(ri).bb=ne,At(ri).ee=ie,At(Pa).i12=function(t,e){return t=t===Ut?null:t,e===Ut?this.g12(t):e.g12.call(this,t)},At(Pa).k12=function(t,e){var n;return t=t===Ut?null:t,e===Ut?(this.dn(t),n=$t):n=e.dn.call(this,t),n},r=new Vn,o=new si,l=new li,u=new fi,p=new Ei,m=new $i,T=new Tr,K=new he(-1,268435455),tt="Channel was closed",st=1,ot=2,lt=-1,ut=4,ct=0,wt=0,bt=!1,t.$_$=t.$_$||{},t.$_$.a=function(){return _i(),f},t.$_$.b=function(t,e,n){return function(t,e,n){var i=new xs(t,e,n);return i.va_1=$t,i.wa_1=null,i.gb()}(t,e=e===Ut?Ve():e,n)},t.$_$.c=function(t,e){if(t.t8(new he(0,0))<=0)return $t;var n=new Fn(fe(e),Hs());return n.kq(),_e(),t.t8(new he(-1,2147483647))<0&&gi(n.ab()).bs(t,n),n.rq()},t.$_$.d=pn,t.$_$.e=mn,t.$_$.f=es,t.$_$.g=ts,t.$_$.h=ii,t.$_$.i=o,t.$_$.j=$o,t.$_$.k=u,t.$_$.l=p,t.$_$.m=function(t,e,n){var i;switch(t=t===Ut?0:t,e=e===Ut?Rr():e,n=n===Ut?null:n,t){case 0:i=e.equals(Rr())?new Pa(0,n):new _s(1,e,n);break;case-1:if(!e.equals(Rr()))throw Fe(Bt("CONFLATED capacity cannot be used with non-default onBufferOverflow"));i=new _s(1,Or(),n);break;case 2147483647:i=new Pa(2147483647,n);break;case-2:i=e.equals(Rr())?new Pa(ts().r12_1,n):new _s(1,e,n);break;default:i=e===Rr()?new Pa(t,n):new _s(t,e,n)}return i},t.$_$.n=function(t,e){var n;if(null==e)n=null;else{var i=e instanceof Ee?e:null;n=null==i?oe("Channel was consumed, consumer had failed",e):i}t.dn(n)},t.$_$.o=gs,t.$_$.p=function(t){return new ds(t)},t.$_$.q=Jo,t.$_$.r=Zo,t.$_$.s=Fn,t.$_$.t=go,t.$_$.u=function(t){return new Yn(t=t===Ut?null:t)},t.$_$.v=Kn,t.$_$.w=ui,t.$_$.x=function(t){return new Qs(null!=t.bb(p)?t:t.ge(Ri()))},t.$_$.y=ci,t.$_$.z=mi,t.$_$.a1=Ri,t.$_$.b1=Mi,t.$_$.c1=Hs,t.$_$.d1=function(t){return new Sr(t=t===Ut?null:t)},t.$_$.e1=function(t,e,n,i){e=e===Ut?Pt():e,n=n===Ut?pi():n;var r=So(t,e),a=n.rn()?new xn(r,i):new bn(r,!0);return a.km(n,a,i),a},t.$_$.f1=hi,t.$_$.g1=function(t,e){e=e===Ut?null:e;var n=t.bb(p);null==n||n.dn(e)},t.$_$.h1=function(t,e,n){return hi(t,oe(e,n=n===Ut?null:n))},t.$_$.i1=function(t,e,n){return n=n===Ut?null:n,t.dn(oe(e,n))},t.$_$.j1=function(t){var e=t.bb(p);if(null==e)throw Ht(Bt("Current context doesn't contain Job in it: "+t));return e},t.$_$.k1=function(t,e,n,i){e=e===Ut?Pt():e,n=n===Ut?pi():n;var r=So(t,e),a=n.rn()?new yn(r,i):new vn(r,!0);return a.km(n,a,i),a},t})?i.apply(e,r):i)||(t.exports=a)},787:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,factory;factory=function(_,kotlin_kotlin,kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core,kotlin_io_ktor_ktor_utils,kotlin_org_jetbrains_kotlinx_atomicfu,kotlin_io_ktor_ktor_events,kotlin_io_ktor_ktor_io,kotlin_io_ktor_ktor_http,kotlin_io_ktor_ktor_websockets){"use strict";var imul=Math.imul,protoOf=kotlin_kotlin.$_$.a8,objectCreate=kotlin_kotlin.$_$.y7,cancel=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.f1,Unit_instance=kotlin_kotlin.$_$.a3,CoroutineImpl=kotlin_kotlin.$_$.m6,THROW_CCE=kotlin_kotlin.$_$.ib,PipelineContext=kotlin_io_ktor_ktor_utils.$_$.g,toString=kotlin_kotlin.$_$.f8,getKClassFromExpression=kotlin_kotlin.$_$.b,IllegalStateException_init_$Create$=kotlin_kotlin.$_$.i1,get_COROUTINE_SUSPENDED=kotlin_kotlin.$_$.x5,classMeta=kotlin_kotlin.$_$.x6,setMetadataFor=kotlin_kotlin.$_$.b8,VOID=kotlin_kotlin.$_$.d,atomic$boolean$1=kotlin_org_jetbrains_kotlinx_atomicfu.$_$.b,Key_instance=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.l,Job=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.a1,AttributesJsFn=kotlin_io_ktor_ktor_utils.$_$.m,Events=kotlin_io_ktor_ktor_events.$_$.b,AttributeKey=kotlin_io_ktor_ktor_utils.$_$.l,Closeable=kotlin_io_ktor_ktor_io.$_$.r,isInterface=kotlin_kotlin.$_$.r7,CoroutineScope=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.y,ensureNotNull=kotlin_kotlin.$_$.sb,LinkedHashMap_init_$Create$=kotlin_kotlin.$_$.l,PlatformUtils_getInstance=kotlin_io_ktor_ktor_utils.$_$.c,ByteReadChannel=kotlin_io_ktor_ktor_io.$_$.d1,objectMeta=kotlin_kotlin.$_$.z7,instanceOf=kotlin_io_ktor_ktor_utils.$_$.j,NullBody_instance=kotlin_io_ktor_ktor_http.$_$.a,equals=kotlin_kotlin.$_$.b7,cancel_0=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.h1,throwUninitializedPropertyAccessException=kotlin_kotlin.$_$.ac,IllegalStateException=kotlin_kotlin.$_$.bb,IllegalStateException_init_$Init$=kotlin_kotlin.$_$.f1,captureStack=kotlin_kotlin.$_$.r6,defineProp=kotlin_kotlin.$_$.z6,UnsupportedOperationException=kotlin_kotlin.$_$.nb,UnsupportedOperationException_init_$Init$=kotlin_kotlin.$_$.u1,flattenEntries=kotlin_io_ktor_ktor_utils.$_$.u,joinToString=kotlin_kotlin.$_$.l4,trimMargin=kotlin_kotlin.$_$.ra,ByteReadChannel_0=kotlin_io_ktor_ktor_io.$_$.c1,readBytes=kotlin_io_ktor_ktor_io.$_$.u,IllegalStateException_init_$Init$_0=kotlin_kotlin.$_$.h1,WriterScope=kotlin_io_ktor_ktor_io.$_$.e1,ReadChannelContent=kotlin_io_ktor_ktor_http.$_$.l,noWhenBranchMatchedException=kotlin_kotlin.$_$.wb,GlobalScope_instance=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.k,writer=kotlin_io_ktor_ktor_io.$_$.g1,WriteChannelContent=kotlin_io_ktor_ktor_http.$_$.m,Companion_getInstance=kotlin_io_ktor_ktor_io.$_$.g,NoContent=kotlin_io_ktor_ktor_http.$_$.j,ProtocolUpgrade=kotlin_io_ktor_ktor_http.$_$.k,ByteArrayContent=kotlin_io_ktor_ktor_http.$_$.i,IllegalArgumentException_init_$Create$=kotlin_kotlin.$_$.e1,JsType_instance=kotlin_io_ktor_ktor_utils.$_$.b,PrimitiveClasses_getInstance=kotlin_kotlin.$_$.w2,arrayOf=kotlin_kotlin.$_$.pb,createKType=kotlin_kotlin.$_$.a,typeInfoImpl=kotlin_io_ktor_ktor_utils.$_$.k,OutgoingContent=kotlin_io_ktor_ktor_http.$_$.n,get_job=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.j1,async=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.e1,emptySet=kotlin_kotlin.$_$.c4,interfaceMeta=kotlin_kotlin.$_$.m7,ArrayList_init_$Create$=kotlin_kotlin.$_$.h,HttpHeaders_getInstance=kotlin_io_ktor_ktor_http.$_$.e,UnsafeHeaderException=kotlin_io_ktor_ktor_http.$_$.s,CancellationException_init_$Create$=kotlin_kotlin.$_$.o,CoroutineName=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.w,SilentSupervisor=kotlin_io_ktor_ktor_utils.$_$.n,lazy=kotlin_kotlin.$_$.vb,CompletableJob=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.v,CloseableCoroutineDispatcher=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.t,KProperty1=kotlin_kotlin.$_$.w8,getPropertyCallableRef=kotlin_kotlin.$_$.i7,setOf=kotlin_kotlin.$_$.g5,get=kotlin_kotlin.$_$.i6,fold=kotlin_kotlin.$_$.h6,minusKey=kotlin_kotlin.$_$.j6,plus=kotlin_kotlin.$_$.l6,Element=kotlin_kotlin.$_$.k6,setOf_0=kotlin_kotlin.$_$.h5,PipelinePhase=kotlin_io_ktor_ktor_utils.$_$.h,contentLength=kotlin_io_ktor_ktor_http.$_$.x,MalformedInputException=kotlin_io_ktor_ktor_io.$_$.h,KtorSimpleLogger=kotlin_io_ktor_ktor_utils.$_$.f,Application_getInstance=kotlin_io_ktor_ktor_http.$_$.b,toLong=kotlin_kotlin.$_$.d8,toLong_0=kotlin_kotlin.$_$.pa,contentType=kotlin_io_ktor_ktor_http.$_$.y,isByteArray=kotlin_kotlin.$_$.o7,Text_getInstance=kotlin_io_ktor_ktor_http.$_$.c,TextContent=kotlin_io_ktor_ktor_http.$_$.o,Companion_getInstance_0=kotlin_kotlin.$_$.x2,Long=kotlin_kotlin.$_$.db,copyTo=kotlin_io_ktor_ktor_io.$_$.a,CancellationException=kotlin_kotlin.$_$.w5,cancel_1=kotlin_io_ktor_ktor_io.$_$.f1,HttpStatusCode=kotlin_io_ktor_ktor_http.$_$.q,getKClass=kotlin_kotlin.$_$.c,toByteArray=kotlin_io_ktor_ktor_utils.$_$.a,Input=kotlin_io_ktor_ktor_io.$_$.s,ByteReadPacket=kotlin_io_ktor_ktor_io.$_$.q,Unit=kotlin_kotlin.$_$.mb,Companion_getInstance_1=kotlin_io_ktor_ktor_http.$_$.f,toString_0=kotlin_kotlin.$_$.bc,toInt=kotlin_kotlin.$_$.ma,reversed=kotlin_kotlin.$_$.e5,LinkedHashSet_init_$Create$=kotlin_kotlin.$_$.m,Charsets_getInstance=kotlin_io_ktor_ktor_io.$_$.f,charset=kotlin_io_ktor_ktor_http.$_$.w,withCharset=kotlin_io_ktor_ktor_http.$_$.d1,compareValues=kotlin_kotlin.$_$.v5,get_name=kotlin_io_ktor_ktor_io.$_$.l,toList=kotlin_kotlin.$_$.m5,sortedWith=kotlin_kotlin.$_$.k5,StringBuilder_init_$Create$=kotlin_kotlin.$_$.t,charSequenceLength=kotlin_kotlin.$_$.v6,roundToInt=kotlin_kotlin.$_$.h8,firstOrNull=kotlin_kotlin.$_$.f4,charset_0=kotlin_io_ktor_ktor_http.$_$.v,readText=kotlin_io_ktor_ktor_io.$_$.w,get_authority=kotlin_io_ktor_ktor_http.$_$.u,takeFrom=kotlin_io_ktor_ktor_http.$_$.c1,isSecure=kotlin_io_ktor_ktor_http.$_$.z,get_authority_0=kotlin_io_ktor_ktor_http.$_$.t,EventDefinition=kotlin_io_ktor_ktor_events.$_$.a,Companion_getInstance_2=kotlin_io_ktor_ktor_http.$_$.h,SupervisorJob=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.d1,cancel_2=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.i1,get_lastIndex=kotlin_kotlin.$_$.p4,downTo=kotlin_kotlin.$_$.q8,delay=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.c,isWebsocket=kotlin_io_ktor_ktor_http.$_$.a1,launch=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.k1,IOException=kotlin_io_ktor_ktor_io.$_$.a1,IOException_init_$Init$=kotlin_io_ktor_ktor_io.$_$.d,IllegalStateException_init_$Init$_1=kotlin_kotlin.$_$.j1,URLBuilder=kotlin_io_ktor_ktor_http.$_$.r,HeadersBuilder=kotlin_io_ktor_ktor_http.$_$.p,takeFrom_0=kotlin_io_ktor_ktor_http.$_$.b1,appendAll=kotlin_io_ktor_ktor_utils.$_$.t,putAll=kotlin_io_ktor_ktor_utils.$_$.x,GMTDate=kotlin_io_ktor_ktor_utils.$_$.e,Pipeline=kotlin_io_ktor_ktor_utils.$_$.i,decode=kotlin_io_ktor_ktor_io.$_$.i,hashCode=kotlin_kotlin.$_$.k7,get_ByteArrayPool=kotlin_io_ktor_ktor_io.$_$.b1,readAvailable=kotlin_io_ktor_ktor_io.$_$.b,get_platform=kotlin_io_ktor_ktor_utils.$_$.w,Companion_getInstance_3=kotlin_io_ktor_ktor_http.$_$.g,CoroutineScope_0=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.x,CancellationException_init_$Create$_0=kotlin_kotlin.$_$.q,cancel_3=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.g1,Companion_getInstance_4=kotlin_io_ktor_ktor_http.$_$.d,Dispatchers_getInstance=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.j,intercepted=kotlin_kotlin.$_$.z5,get_MODE_CANCELLABLE=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.c1,CancellableContinuationImpl=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.s,extendThrowable=kotlin_kotlin.$_$.c7,Companion_instance=kotlin_kotlin.$_$.y2,createFailure=kotlin_kotlin.$_$.rb,_Result___init__impl__xyqfz8=kotlin_kotlin.$_$.h2,toTypedArray=kotlin_kotlin.$_$.u5,writeFully=kotlin_io_ktor_ktor_io.$_$.c,Error_init_$Create$=kotlin_kotlin.$_$.w,Error_init_$Create$_0=kotlin_kotlin.$_$.y,_ChannelResult___get_isSuccess__impl__odq1z9=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.f,Channel=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.m,Companion_getInstance_5=kotlin_io_ktor_ktor_websockets.$_$.f,Codes_CLOSED_ABNORMALLY_getInstance=kotlin_io_ktor_ktor_websockets.$_$.a,Text_init_$Create$=kotlin_io_ktor_ktor_websockets.$_$.e,Binary_init_$Create$=kotlin_io_ktor_ktor_websockets.$_$.c,CloseReason=kotlin_io_ktor_ktor_websockets.$_$.g,Close_init_$Create$=kotlin_io_ktor_ktor_websockets.$_$.d,String_0=kotlin_io_ktor_ktor_io.$_$.t,BytePacketBuilder=kotlin_io_ktor_ktor_io.$_$.p,writeFully_0=kotlin_io_ktor_ktor_io.$_$.x,readShort=kotlin_io_ktor_ktor_io.$_$.v,cancelConsumed=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.n,Codes_NORMAL_getInstance=kotlin_io_ktor_ktor_websockets.$_$.b,CompletableDeferred=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.u,Factory_getInstance=kotlin_org_jetbrains_kotlinx_kotlinx_coroutines_core.$_$.g,Companion_instance_0,CALL_COROUTINE,CLIENT_CONFIG,properties_initialized_HttpClientEngine_kt_5uiebb,ENGINE_CAPABILITIES_KEY,DEFAULT_CAPABILITIES,properties_initialized_HttpClientEngineCapability_kt_qarzcf,KTOR_DEFAULT_USER_AGENT,DATE_HEADERS,Companion_instance_1,properties_initialized_Utils_kt_xvi83j,UploadProgressListenerAttributeKey,DownloadProgressListenerAttributeKey,Plugin_instance,properties_initialized_BodyProgress_kt_pmfrhr,ValidateMark,LOGGER,properties_initialized_DefaultResponseValidation_kt_akvzqt,LOGGER_0,properties_initialized_DefaultTransform_kt_ossax9,LOGGER_1,ExpectSuccessAttributeKey,Companion_instance_2,properties_initialized_HttpCallValidator_kt_xrx49w,PLUGIN_INSTALLED_LIST,properties_initialized_HttpClientPlugin_kt_p98320,LOGGER_2,Plugin_instance_0,properties_initialized_HttpPlainText_kt_2nx4ox,ALLOWED_FOR_REDIRECT,LOGGER_3,Plugin_instance_1,properties_initialized_HttpRedirect_kt_klj746,LOGGER_4,Plugin_instance_2,properties_initialized_HttpRequestLifecycle_kt_3hmcrf,Plugin_instance_3,LOGGER_5,Companion_instance_3,Plugin_instance_4,properties_initialized_HttpTimeout_kt_9oyjbd,WebSocketCapability_instance,Companion_instance_4,Phases_instance,Phases_instance_0,BodyTypeAttributeKey,properties_initialized_RequestBody_kt_agyv1b,Phases_instance_1,Phases_instance_2,HttpRequestCreated,HttpRequestIsReadyForSending,HttpResponseReceived,HttpResponseReceiveFailed,HttpResponseCancelled,properties_initialized_ClientEvents_kt_rdee4m,EmptyContent_instance,Js_instance;function get_coroutineContext(){return this.l4h().wl()}function get_supportedCapabilities(){return emptySet()}function install(t){var e=Phases_getInstance_0().v4e_1;t.d4c_1.r3y(e,HttpClientEngine$install$slambda_0(t,this,null))}function HttpClient_init_$Init$(t,e,n,i){return HttpClient.call(i,t,e),i.x4b_1=n,i}function HttpClient_init_$Create$(t,e,n){return HttpClient_init_$Init$(t,e,n,objectCreate(protoOf(HttpClient)))}function HttpClient$lambda(t){return function(e){return null!=e&&cancel(t.v4b_1),Unit_instance}}function HttpClient$slambda(t,e){this.r4c_1=t,CoroutineImpl.call(this,e)}function HttpClient$slambda_0(t,e){var n=new HttpClient$slambda(t,e),i=function(t,e,i){return n.v4c(t,e,i)};return i.$arity=2,i}function HttpClient$lambda_0(t){return defaultTransformers(t),Unit_instance}function HttpClient$slambda_1(t,e){this.n4d_1=t,CoroutineImpl.call(this,e)}function HttpClient$slambda_2(t,e){var n=new HttpClient$slambda_1(t,e),i=function(t,e,i){return n.q4d(t,e,i)};return i.$arity=2,i}function $executeCOROUTINE$0(t,e,n){CoroutineImpl.call(this,n),this.a4e_1=t,this.b4e_1=e}function HttpClient(t,e){e=e===VOID?new HttpClientConfig:e,this.v4b_1=t,this.w4b_1=e,this.x4b_1=!1,this.y4b_1=atomic$boolean$1(!1),this.z4b_1=Job(this.v4b_1.wl().bb(Key_instance)),this.a4c_1=this.v4b_1.wl().ge(this.z4b_1),this.b4c_1=new HttpRequestPipeline(this.w4b_1.p4e_1),this.c4c_1=new HttpResponsePipeline(this.w4b_1.p4e_1),this.d4c_1=new HttpSendPipeline(this.w4b_1.p4e_1),this.e4c_1=new HttpReceivePipeline(this.w4b_1.p4e_1),this.f4c_1=AttributesJsFn(!0),this.g4c_1=this.v4b_1.q4e(),this.h4c_1=new Events,this.i4c_1=new HttpClientConfig,this.x4b_1&&this.z4b_1.ym(HttpClient$lambda(this)),this.v4b_1.r4e(this);var n=Phases_getInstance_0().w4e_1;this.d4c_1.r3y(n,HttpClient$slambda_0(this,null));var i=this.w4b_1;this.i4c_1.x4e(Plugin_getInstance_2()),this.i4c_1.x4e(Plugin_getInstance()),i.n4e_1&&this.i4c_1.y4e("DefaultTransformers",HttpClient$lambda_0),this.i4c_1.x4e(Plugin_getInstance_3()),this.i4c_1.x4e(Companion_getInstance_8()),i.m4e_1&&this.i4c_1.x4e(Plugin_getInstance_1()),this.i4c_1.z4e(i),i.n4e_1&&this.i4c_1.x4e(Plugin_getInstance_0()),addDefaultResponseValidation(this.i4c_1),this.i4c_1.r4e(this);var r=Phases_getInstance_1().a4f_1;this.c4c_1.r3y(r,HttpClient$slambda_2(this,null))}function HttpClient_0(t,e){e=e===VOID?HttpClient$lambda_1:e;var n=new HttpClientConfig;e(n);var i=n,r=t.g4f(i.l4e_1),a=HttpClient_init_$Create$(r,i,!0);return ensureNotNull(a.a4c_1.bb(Key_instance)).ym(HttpClient$lambda_2(r)),a}function HttpClient$lambda_1(t){return Unit_instance}function HttpClient$lambda_2(t){return function(e){return t.i15(),Unit_instance}}function HttpClientConfig$engineConfig$lambda(t){return Unit_instance}function HttpClientConfig$install$lambda(t){return Unit_instance}function HttpClientConfig$install$lambda_0(t,e){return function(n){return null==t||t(n),e(null!=n?n:THROW_CCE()),Unit_instance}}function HttpClientConfig$install$lambda$lambda(){return AttributesJsFn(!0)}function HttpClientConfig$install$lambda_1(t){return function(e){var n=get_PLUGIN_INSTALLED_LIST(),i=e.f4c_1.c3u(n,HttpClientConfig$install$lambda$lambda),r=ensureNotNull(e.i4c_1.j4e_1.k2(t.c2())),a=t.h4f(r);return t.i4f(a,e),i.a3u(t.c2(),a),Unit_instance}}function HttpClientConfig(){this.i4e_1=LinkedHashMap_init_$Create$(),this.j4e_1=LinkedHashMap_init_$Create$(),this.k4e_1=LinkedHashMap_init_$Create$(),this.l4e_1=HttpClientConfig$engineConfig$lambda,this.m4e_1=!0,this.n4e_1=!0,this.o4e_1=!1,this.p4e_1=PlatformUtils_getInstance().n3v_1}function HttpClientCall_init_$Init$(t,e,n,i){HttpClientCall.call(i,t),i.a4d_1=new DefaultHttpRequest(i,e),i.b4d_1=new DefaultHttpResponse(i,n);var r=n.o4f_1;return isInterface(r,ByteReadChannel)||i.r4f().a3u(Companion_getInstance_6().s4f_1,n.o4f_1),i}function HttpClientCall_init_$Create$(t,e,n){return HttpClientCall_init_$Init$(t,e,n,objectCreate(protoOf(HttpClientCall)))}function Companion(){Companion_instance_0=this,this.s4f_1=new AttributeKey("CustomResponse")}function Companion_getInstance_6(){return null==Companion_instance_0&&new Companion,Companion_instance_0}function $bodyNullableCOROUTINE$1(t,e,n){CoroutineImpl.call(this,n),this.b4g_1=t,this.c4g_1=e}function HttpClientCall(t){Companion_getInstance_6(),this.y4c_1=t,this.z4c_1=atomic$boolean$1(!1),this.c4d_1=!1}function DoubleReceiveException(t){IllegalStateException_init_$Init$(this),captureStack(this,DoubleReceiveException),this.r4g_1="Response already received: "+t}function NoTransformationFoundException$message$lambda(t){return t.dd()+": "+t.ed()+"\n"}function NoTransformationFoundException(t,e,n){UnsupportedOperationException_init_$Init$(this),captureStack(this,NoTransformationFoundException);var i=get_request(t).p4g(),r=t.q4g(),a=flattenEntries(t.h45());this.s4g_1=trimMargin("No transformation found: "+e+" -> "+n+"\n        |with response from "+i+":\n        |status: "+r+"\n        |response headers: \n        |"+joinToString(a,VOID,VOID,VOID,VOID,VOID,NoTransformationFoundException$message$lambda)+"\n    ")}function save(t,e){var n=new $saveCOROUTINE$3(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()}function SavedHttpCall(t,e,n,i){HttpClientCall.call(this,t),this.h4h_1=i,this.a4d_1=new SavedHttpRequest(this,e),this.b4d_1=new SavedHttpResponse(this,this.h4h_1,n),this.i4h_1=!0}function SavedHttpRequest(t,e){this.j4h_1=t,this.k4h_1=e}function SavedHttpResponse(t,e,n){HttpResponse.call(this),this.n4h_1=t,this.o4h_1=Job(),this.p4h_1=n.q4g(),this.q4h_1=n.w4h(),this.r4h_1=n.x4h(),this.s4h_1=n.y4h(),this.t4h_1=n.h45(),this.u4h_1=n.wl().ge(this.o4h_1),this.v4h_1=ByteReadChannel_0(e)}function $saveCOROUTINE$3(t,e){CoroutineImpl.call(this,e),this.b4h_1=t}function UnsupportedContentTypeException(t){IllegalStateException_init_$Init$_0("Failed to write body: "+getKClassFromExpression(t),this),captureStack(this,UnsupportedContentTypeException)}function ObservableContent$content$slambda(t,e){this.h4i_1=t,CoroutineImpl.call(this,e)}function ObservableContent$content$slambda_0(t,e){var n=new ObservableContent$content$slambda(t,e),i=function(t,e){return n.j4i(t,e)};return i.$arity=1,i}function ObservableContent(t,e,n){var i;if(ReadChannelContent.call(this),this.m4i_1=e,this.n4i_1=n,t instanceof ByteArrayContent)i=ByteReadChannel_0(t.m4a());else{if(t instanceof ProtocolUpgrade)throw new UnsupportedContentTypeException(t);t instanceof NoContent?i=Companion_getInstance().v3m():t instanceof ReadChannelContent?i=t.i4a():t instanceof WriteChannelContent?i=writer(GlobalScope_instance,this.m4i_1,!0,ObservableContent$content$slambda_0(t,null)).tw():noWhenBranchMatchedException()}this.o4i_1=i,this.p4i_1=t}function get_CALL_COROUTINE(){return _init_properties_HttpClientEngine_kt__h91z5h(),CALL_COROUTINE}function get_CLIENT_CONFIG(){return _init_properties_HttpClientEngine_kt__h91z5h(),CLIENT_CONFIG}function HttpClientEngine$install$slambda$lambda(t,e){return function(n){return null!=n&&t.h4c_1.t4a(get_HttpResponseCancelled(),e),Unit_instance}}function _get_closed__iwkfs1(t){var e=t.wl().bb(Key_instance),n=null==e?null:e.xl();return!(null!=n&&n)}function executeWithinCallContext(t,e,n){var i=new $executeWithinCallContextCOROUTINE$4(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function checkExtensions(t,e){for(var n=e.i4j_1.s();n.t();){var i=n.u();if(!t.j4j().x(i))throw IllegalArgumentException_init_$Create$(toString("Engine doesn't support "+i))}}function HttpClientEngine$install$slambda(t,e,n){this.s4j_1=t,this.t4j_1=e,CoroutineImpl.call(this,n)}function HttpClientEngine$install$slambda_0(t,e,n){var i=new HttpClientEngine$install$slambda(t,e,n),r=function(t,e,n){return i.v4c(t,e,n)};return r.$arity=2,r}function HttpClientEngine$executeWithinCallContext$slambda(t,e,n){this.l4k_1=t,this.m4k_1=e,CoroutineImpl.call(this,n)}function HttpClientEngine$executeWithinCallContext$slambda_0(t,e,n){var i=new HttpClientEngine$executeWithinCallContext$slambda(t,e,n),r=function(t,e){return i.o4k(t,e)};return r.$arity=1,r}function $executeWithinCallContextCOROUTINE$4(t,e,n){CoroutineImpl.call(this,n),this.y4i_1=t,this.z4i_1=e}function HttpClientEngine(){}function validateHeaders(t){_init_properties_HttpClientEngine_kt__h91z5h();for(var e=t.e4j_1.r3v(),n=ArrayList_init_$Create$(),i=e.s();i.t();){var r=i.u();HttpHeaders_getInstance().a45_1.x(r)&&n.p(r)}var a=n;if(!a.z())throw new UnsafeHeaderException(toString(a))}function createCallContext(t,e,n){var i=Job(e),r=t.wl().ge(i).ge(get_CALL_COROUTINE()),a=n.ab().bb(Key_instance);if(null!=a){var s=a.an(!0,VOID,createCallContext$lambda(i));i.ym(createCallContext$lambda_0(s))}return r}function createCallContext$lambda(t){return function(e){return null==e||t.dn(CancellationException_init_$Create$(e.message)),Unit_instance}}function createCallContext$lambda_0(t){return function(e){return t.xo(),Unit_instance}}function _init_properties_HttpClientEngine_kt__h91z5h(){properties_initialized_HttpClientEngine_kt_5uiebb||(properties_initialized_HttpClientEngine_kt_5uiebb=!0,CALL_COROUTINE=new CoroutineName("call-context"),CLIENT_CONFIG=new AttributeKey("client-config"))}function ClientEngineClosedException(t){t=t===VOID?null:t,IllegalStateException_init_$Init$_0("Client already closed",this),captureStack(this,ClientEngineClosedException),this.r4k_1=t}function HttpClientEngineBase$coroutineContext$delegate$lambda(t){return function(){return SilentSupervisor().ge(t.q4k()).ge(new CoroutineName(t.s4k_1+"-context"))}}function HttpClientEngineBase$close$lambda(t){return function(e){return close(t.q4k()),Unit_instance}}function HttpClientEngineBase(t){this.s4k_1=t,this.t4k_1=atomic$boolean$1(!1),this.u4k_1=lazy(HttpClientEngineBase$coroutineContext$delegate$lambda(this))}function close(t){try{(t instanceof CloseableCoroutineDispatcher||isInterface(t,Closeable))&&t.i15()}catch(t){if(!(t instanceof Error))throw t}}function coroutineContext$factory(){return getPropertyCallableRef("coroutineContext",1,KProperty1,(function(t){return t.wl()}),null)}function get_ENGINE_CAPABILITIES_KEY(){return _init_properties_HttpClientEngineCapability_kt__ifvyst(),ENGINE_CAPABILITIES_KEY}function _init_properties_HttpClientEngineCapability_kt__ifvyst(){properties_initialized_HttpClientEngineCapability_kt_qarzcf||(properties_initialized_HttpClientEngineCapability_kt_qarzcf=!0,ENGINE_CAPABILITIES_KEY=new AttributeKey("EngineCapabilities"),DEFAULT_CAPABILITIES=setOf(Plugin_getInstance_4()))}function HttpClientEngineConfig(){this.v4k_1=4,this.w4k_1=!1,this.x4k_1=null}function get_KTOR_DEFAULT_USER_AGENT(){return _init_properties_Utils_kt__jo07cx(),KTOR_DEFAULT_USER_AGENT}function get_DATE_HEADERS(){return _init_properties_Utils_kt__jo07cx(),DATE_HEADERS}function Companion_0(){}function Companion_getInstance_7(){return Companion_instance_1}function KtorCallContextElement(t){this.y4k_1=t}function callContext(t){var e=t.ab();return ensureNotNull(e.bb(Companion_instance_1)).y4k_1}function mergeHeaders(t,e,n){_init_properties_Utils_kt__jo07cx(),buildHeaders(mergeHeaders$lambda(t,e)).t3v(mergeHeaders$lambda_0(n)),null==t.x1e(HttpHeaders_getInstance().d44_1)&&null==e.h45().x1e(HttpHeaders_getInstance().d44_1)&&needUserAgent()&&n(HttpHeaders_getInstance().d44_1,get_KTOR_DEFAULT_USER_AGENT());var i=e.f4a(),r=null==i?null:i.toString(),a=null==r?e.h45().x1e(HttpHeaders_getInstance().x41_1):r,s=null==a?t.x1e(HttpHeaders_getInstance().x41_1):a,o=e.g4a(),l=null==o?null:o.toString(),u=null==l?e.h45().x1e(HttpHeaders_getInstance().u41_1):l,c=null==u?t.x1e(HttpHeaders_getInstance().u41_1):u;null==s||n(HttpHeaders_getInstance().x41_1,s),null==c||n(HttpHeaders_getInstance().u41_1,c)}function needUserAgent(){return _init_properties_Utils_kt__jo07cx(),!PlatformUtils_getInstance().j3v_1}function mergeHeaders$lambda(t,e){return function(n){return n.b3w(t),n.b3w(e.h45()),Unit_instance}}function mergeHeaders$lambda_0(t){return function(e,n){if(HttpHeaders_getInstance().u41_1===e)return Unit_instance;if(HttpHeaders_getInstance().x41_1===e)return Unit_instance;if(get_DATE_HEADERS().x(e))for(var i=n.s();i.t();){var r=i.u();t(e,r)}else t(e,joinToString(n,","));return Unit_instance}}function _init_properties_Utils_kt__jo07cx(){properties_initialized_Utils_kt_xvi83j||(properties_initialized_Utils_kt_xvi83j=!0,KTOR_DEFAULT_USER_AGENT="Ktor client",DATE_HEADERS=setOf_0([HttpHeaders_getInstance().a42_1,HttpHeaders_getInstance().g42_1,HttpHeaders_getInstance().s42_1,HttpHeaders_getInstance().n42_1,HttpHeaders_getInstance().r42_1]))}function get_UploadProgressListenerAttributeKey(){return _init_properties_BodyProgress_kt__s0v569(),UploadProgressListenerAttributeKey}function get_DownloadProgressListenerAttributeKey(){return _init_properties_BodyProgress_kt__s0v569(),DownloadProgressListenerAttributeKey}function handle(t,e){var n=new PipelinePhase("ObservableContent");e.b4c_1.o3y(Phases_getInstance().c4l_1,n),e.b4c_1.r3y(n,BodyProgress$handle$slambda_0(null));var i=Phases_getInstance_2().g4l_1;e.e4c_1.r3y(i,BodyProgress$handle$slambda_2(null))}function Plugin(){Plugin_instance=this,this.h4l_1=new AttributeKey("BodyProgress")}function Plugin_getInstance(){return null==Plugin_instance&&new Plugin,Plugin_instance}function BodyProgress$handle$slambda(t){CoroutineImpl.call(this,t)}function BodyProgress$handle$slambda_0(t){var e=new BodyProgress$handle$slambda(t),n=function(t,n,i){return e.v4c(t,n,i)};return n.$arity=2,n}function BodyProgress$handle$slambda_1(t){CoroutineImpl.call(this,t)}function BodyProgress$handle$slambda_2(t){var e=new BodyProgress$handle$slambda_1(t),n=function(t,n,i){return e.i4m(t,n,i)};return n.$arity=2,n}function BodyProgress(){Plugin_getInstance()}function withObservableDownload(t,e){_init_properties_BodyProgress_kt__s0v569();var n=observable(t.n4g(),t.wl(),contentLength(t),e);return wrapWithContent(t.l4h(),n).d4d()}function _init_properties_BodyProgress_kt__s0v569(){properties_initialized_BodyProgress_kt_pmfrhr||(properties_initialized_BodyProgress_kt_pmfrhr=!0,UploadProgressListenerAttributeKey=new AttributeKey("UploadProgressListenerAttributeKey"),DownloadProgressListenerAttributeKey=new AttributeKey("DownloadProgressListenerAttributeKey"))}function get_ValidateMark(){return _init_properties_DefaultResponseValidation_kt__wcn8vr(),ValidateMark}function get_LOGGER(){return _init_properties_DefaultResponseValidation_kt__wcn8vr(),LOGGER}function addDefaultResponseValidation(t){_init_properties_DefaultResponseValidation_kt__wcn8vr(),HttpResponseValidator(t,addDefaultResponseValidation$lambda(t))}function ResponseException(t,e){IllegalStateException_init_$Init$_0("Bad response: "+t+'. Text: "'+e+'"',this),captureStack(this,ResponseException),this.k4m_1=t}function RedirectResponseException(t,e){ResponseException.call(this,t,e),captureStack(this,RedirectResponseException),this.m4m_1="Unhandled redirect: "+t.l4h().m4g().m4h().q45_1+" "+t.l4h().m4g().p4g()+". Status: "+t.q4g()+'. Text: "'+e+'"'}function ClientRequestException(t,e){ResponseException.call(this,t,e),captureStack(this,ClientRequestException),this.o4m_1="Client request("+t.l4h().m4g().m4h().q45_1+" "+t.l4h().m4g().p4g()+") invalid: "+t.q4g()+'. Text: "'+e+'"'}function ServerResponseException(t,e){ResponseException.call(this,t,e),captureStack(this,ServerResponseException),this.q4m_1="Server error("+t.l4h().m4g().m4h().q45_1+" "+t.l4h().m4g().p4g()+": "+t.q4g()+'. Text: "'+e+'"'}function addDefaultResponseValidation$lambda$slambda(t){CoroutineImpl.call(this,t)}function addDefaultResponseValidation$lambda$slambda_0(t){var e=new addDefaultResponseValidation$lambda$slambda(t),n=function(t,n){return e.h4n(t,n)};return n.$arity=1,n}function addDefaultResponseValidation$lambda(t){return function(e){return e.l4n_1=t.o4e_1,e.m4n(addDefaultResponseValidation$lambda$slambda_0(null)),Unit_instance}}function _init_properties_DefaultResponseValidation_kt__wcn8vr(){properties_initialized_DefaultResponseValidation_kt_akvzqt||(properties_initialized_DefaultResponseValidation_kt_akvzqt=!0,ValidateMark=new AttributeKey("ValidateMark"),LOGGER=KtorSimpleLogger("io.ktor.client.plugins.DefaultResponseValidation"))}function get_LOGGER_0(){return _init_properties_DefaultTransform_kt__20knxx(),LOGGER_0}function defaultTransformers(t){_init_properties_DefaultTransform_kt__20knxx();var e=Phases_getInstance().c4l_1;t.b4c_1.r3y(e,defaultTransformers$slambda_0(null));var n=Phases_getInstance_1().b4f_1;t.c4c_1.r3y(n,defaultTransformers$slambda_2(null)),platformResponseDefaultTransformers(t)}function defaultTransformers$1$content$1(t,e){this.q4n_1=e,ByteArrayContent.call(this),this.o4n_1=null==t?Application_getInstance().y3z_1:t,this.p4n_1=toLong(e.length)}function defaultTransformers$1$content$2(t,e,n){this.u4n_1=n,ReadChannelContent.call(this);var i=t.n3y_1.e4e_1.x1e(HttpHeaders_getInstance().u41_1);this.s4n_1=null==i?null:toLong_0(i),this.t4n_1=null==e?Application_getInstance().y3z_1:e}function defaultTransformers$slambda(t){CoroutineImpl.call(this,t)}function defaultTransformers$slambda_0(t){var e=new defaultTransformers$slambda(t),n=function(t,n,i){return e.v4c(t,n,i)};return n.$arity=2,n}function defaultTransformers$slambda$slambda(t,e,n){this.p4o_1=t,this.q4o_1=e,CoroutineImpl.call(this,n)}function defaultTransformers$slambda$slambda_0(t,e,n){var i=new defaultTransformers$slambda$slambda(t,e,n),r=function(t,e){return i.j4i(t,e)};return r.$arity=1,r}function defaultTransformers$slambda$lambda(t){return function(e){return t.qr(),Unit_instance}}function defaultTransformers$slambda_1(t){CoroutineImpl.call(this,t)}function defaultTransformers$slambda_2(t){var e=new defaultTransformers$slambda_1(t),n=function(t,n,i){return e.q4d(t,n,i)};return n.$arity=2,n}function _init_properties_DefaultTransform_kt__20knxx(){properties_initialized_DefaultTransform_kt_ossax9||(properties_initialized_DefaultTransform_kt_ossax9=!0,LOGGER_0=KtorSimpleLogger("io.ktor.client.plugins.defaultTransformers"))}function get_LOGGER_1(){return _init_properties_HttpCallValidator_kt__r6yh2y(),LOGGER_1}function get_ExpectSuccessAttributeKey(){return _init_properties_HttpCallValidator_kt__r6yh2y(),ExpectSuccessAttributeKey}function HttpCallValidator$Companion$install$slambda$lambda(t){return function(){return t.w4p_1}}function HttpCallValidator$Companion$install$slambda(t,e){this.f4q_1=t,CoroutineImpl.call(this,e)}function HttpCallValidator$Companion$install$slambda_0(t,e){var n=new HttpCallValidator$Companion$install$slambda(t,e),i=function(t,e,i){return n.v4c(t,e,i)};return i.$arity=2,i}function HttpCallValidator$Companion$install$slambda_1(t,e){this.s4q_1=t,CoroutineImpl.call(this,e)}function HttpCallValidator$Companion$install$slambda_2(t,e){var n=new HttpCallValidator$Companion$install$slambda_1(t,e),i=function(t,e,i){return n.q4d(t,e,i)};return i.$arity=2,i}function HttpCallValidator$Companion$install$slambda_3(t,e){this.f4r_1=t,CoroutineImpl.call(this,e)}function HttpCallValidator$Companion$install$slambda_4(t,e){var n=new HttpCallValidator$Companion$install$slambda_3(t,e),i=function(t,e,i){return n.j4r(t,e,i)};return i.$arity=2,i}function validateResponse(t,e,n){var i=new $validateResponseCOROUTINE$5(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function processException(t,e,n,i){var r=new $processExceptionCOROUTINE$6(t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function Config(){this.j4n_1=ArrayList_init_$Create$(),this.k4n_1=ArrayList_init_$Create$(),this.l4n_1=!0}function Companion_1(){Companion_instance_2=this,this.o4s_1=new AttributeKey("HttpResponseValidator")}function Companion_getInstance_8(){return null==Companion_instance_2&&new Companion_1,Companion_instance_2}function $validateResponseCOROUTINE$5(t,e,n){CoroutineImpl.call(this,n),this.t4r_1=t,this.u4r_1=e}function $processExceptionCOROUTINE$6(t,e,n,i){CoroutineImpl.call(this,i),this.g4s_1=t,this.h4s_1=e,this.i4s_1=n}function HttpCallValidator(t,e,n){Companion_getInstance_8(),this.u4p_1=t,this.v4p_1=e,this.w4p_1=n}function ExceptionHandlerWrapper(){}function RequestExceptionHandlerWrapper(){}function HttpRequest(t){return _init_properties_HttpCallValidator_kt__r6yh2y(),new HttpRequest$1(t)}function HttpResponseValidator(t,e){_init_properties_HttpCallValidator_kt__r6yh2y(),t.j4f(Companion_getInstance_8(),e)}function HttpRequest$1(t){this.a4t_1=t,this.w4s_1=t.d4e_1,this.x4s_1=t.c4e_1.n3j(),this.y4s_1=t.h4e_1,this.z4s_1=t.e4e_1.n3j()}function _init_properties_HttpCallValidator_kt__r6yh2y(){properties_initialized_HttpCallValidator_kt_xrx49w||(properties_initialized_HttpCallValidator_kt_xrx49w=!0,LOGGER_1=KtorSimpleLogger("io.ktor.client.plugins.HttpCallValidator"),ExpectSuccessAttributeKey=new AttributeKey("ExpectSuccessAttributeKey"))}function get_PLUGIN_INSTALLED_LIST(){return _init_properties_HttpClientPlugin_kt__cypu1m(),PLUGIN_INSTALLED_LIST}function plugin(t,e){_init_properties_HttpClientPlugin_kt__cypu1m();var n=pluginOrNull(t,e);if(null==n)throw IllegalStateException_init_$Create$("Plugin "+e+" is not installed. Consider using `install("+e.c2()+")` in client config first.");return n}function HttpClientPlugin(){}function pluginOrNull(t,e){_init_properties_HttpClientPlugin_kt__cypu1m();var n=t.f4c_1.y3t(get_PLUGIN_INSTALLED_LIST());return null==n?null:n.y3t(e.c2())}function _init_properties_HttpClientPlugin_kt__cypu1m(){properties_initialized_HttpClientPlugin_kt_p98320||(properties_initialized_HttpClientPlugin_kt_p98320=!0,PLUGIN_INSTALLED_LIST=new AttributeKey("ApplicationPluginRegistry"))}function get_LOGGER_2(){return _init_properties_HttpPlainText_kt__iy89z1(),LOGGER_2}function HttpPlainText$Plugin$install$slambda(t,e){this.j4t_1=t,CoroutineImpl.call(this,e)}function HttpPlainText$Plugin$install$slambda_0(t,e){var n=new HttpPlainText$Plugin$install$slambda(t,e),i=function(t,e,i){return n.v4c(t,e,i)};return i.$arity=2,i}function HttpPlainText$Plugin$install$slambda_1(t,e){this.z4t_1=t,CoroutineImpl.call(this,e)}function HttpPlainText$Plugin$install$slambda_2(t,e){var n=new HttpPlainText$Plugin$install$slambda_1(t,e),i=function(t,e,i){return n.q4d(t,e,i)};return i.$arity=2,i}function Config_0(){this.h4u_1=LinkedHashSet_init_$Create$(),this.i4u_1=LinkedHashMap_init_$Create$(),this.j4u_1=null,this.k4u_1=Charsets_getInstance().f3q_1}function Plugin_0(){Plugin_instance_0=this,this.l4u_1=new AttributeKey("HttpPlainText")}function Plugin_getInstance_0(){return null==Plugin_instance_0&&new Plugin_0,Plugin_instance_0}function wrapContent(t,e,n,i){var r=null==i?Text_getInstance().o40_1:i,a=null==i?null:charset(i),s=null==a?t.o4t_1:a;return get_LOGGER_2().h3z("Sending request body to "+e.c4e_1+" as text/plain with charset "+s),new TextContent(n,withCharset(r,s))}function sam$kotlin_Comparator$0(t){this.o4u_1=t}function HttpPlainText$lambda(t,e){var n=e.cd_1,i=t.cd_1;return compareValues(n,i)}function HttpPlainText$lambda_0(t,e){var n=get_name(t),i=get_name(e);return compareValues(n,i)}function HttpPlainText(t,e,n,i){Plugin_getInstance_0(),this.n4t_1=i;for(var r=toList(e),a=new sam$kotlin_Comparator$0(HttpPlainText$lambda),s=sortedWith(r,a),o=ArrayList_init_$Create$(),l=t.s();l.t();){var u=l.u();e.h2(u)||o.p(u)}for(var c=new sam$kotlin_Comparator$0(HttpPlainText$lambda_0),h=sortedWith(o,c),f=StringBuilder_init_$Create$(),_=h.s();_.t();){var d=_.u();charSequenceLength(f)>0&&f.g5(","),f.g5(get_name(d))}for(var p=s.s();p.t();){var m=p.u(),g=m.dd(),v=m.ed();if(charSequenceLength(f)>0&&f.g5(","),!(0<=v&&v<=1))throw IllegalStateException_init_$Create$(toString("Check failed."));var y=roundToInt(100*v)/100;f.g5(get_name(g)+";q="+y)}0===charSequenceLength(f)&&f.g5(get_name(this.n4t_1)),this.p4t_1=f.toString();var w,b=null==n?firstOrNull(h):n;if(null==b){var x=firstOrNull(s);w=null==x?null:x.bd_1}else w=b;var S=w;this.o4t_1=null==S?Charsets_getInstance().f3q_1:S}function _init_properties_HttpPlainText_kt__iy89z1(){properties_initialized_HttpPlainText_kt_2nx4ox||(properties_initialized_HttpPlainText_kt_2nx4ox=!0,LOGGER_2=KtorSimpleLogger("io.ktor.client.plugins.HttpPlainText"))}function get_ALLOWED_FOR_REDIRECT(){return _init_properties_HttpRedirect_kt__ure7fo(),ALLOWED_FOR_REDIRECT}function get_LOGGER_3(){return _init_properties_HttpRedirect_kt__ure7fo(),LOGGER_3}function handleCall(t,e,n,i,r,a,s){var o=new $handleCallCOROUTINE$7(e,t,n,i,r,a,s);return o.va_1=Unit_instance,o.wa_1=null,o.gb()}function HttpRedirect$Plugin$install$slambda(t,e,n){this.q4v_1=t,this.r4v_1=e,CoroutineImpl.call(this,n)}function HttpRedirect$Plugin$install$slambda_0(t,e,n){var i=new HttpRedirect$Plugin$install$slambda(t,e,n),r=function(t,e,n){return i.j4r(t,e,n)};return r.$arity=2,r}function $handleCallCOROUTINE$7(t,e,n,i,r,a,s){CoroutineImpl.call(this,s),this.x4u_1=t,this.y4u_1=e,this.z4u_1=n,this.a4v_1=i,this.b4v_1=r,this.c4v_1=a}function Config_1(){this.z4v_1=!0,this.a4w_1=!1}function Plugin_1(){Plugin_instance_1=this,this.x4v_1=new AttributeKey("HttpRedirect"),this.y4v_1=new EventDefinition}function Plugin_getInstance_1(){return null==Plugin_instance_1&&new Plugin_1,Plugin_instance_1}function HttpRedirect(t,e){Plugin_getInstance_1(),this.v4v_1=t,this.w4v_1=e}function isRedirect(t){_init_properties_HttpRedirect_kt__ure7fo();var e=t.c48_1;return e===Companion_getInstance_2().l46_1.c48_1||e===Companion_getInstance_2().m46_1.c48_1||e===Companion_getInstance_2().r46_1.c48_1||e===Companion_getInstance_2().s46_1.c48_1||e===Companion_getInstance_2().n46_1.c48_1}function _init_properties_HttpRedirect_kt__ure7fo(){properties_initialized_HttpRedirect_kt_klj746||(properties_initialized_HttpRedirect_kt_klj746=!0,ALLOWED_FOR_REDIRECT=setOf_0([Companion_getInstance_1().i45_1,Companion_getInstance_1().n45_1]),LOGGER_3=KtorSimpleLogger("io.ktor.client.plugins.HttpRedirect"))}function get_LOGGER_4(){return _init_properties_HttpRequestLifecycle_kt__jgkmfx(),LOGGER_4}function HttpRequestLifecycle$Plugin$install$slambda(t,e){this.l4w_1=t,CoroutineImpl.call(this,e)}function HttpRequestLifecycle$Plugin$install$slambda_0(t,e){var n=new HttpRequestLifecycle$Plugin$install$slambda(t,e),i=function(t,e,i){return n.v4c(t,e,i)};return i.$arity=2,i}function Plugin_2(){Plugin_instance_2=this,this.q4w_1=new AttributeKey("RequestLifecycle")}function Plugin_getInstance_2(){return null==Plugin_instance_2&&new Plugin_2,Plugin_instance_2}function HttpRequestLifecycle(){Plugin_getInstance_2()}function attachToClientEngineJob(t,e){_init_properties_HttpRequestLifecycle_kt__jgkmfx();var n=e.ym(attachToClientEngineJob$lambda(t));t.ym(attachToClientEngineJob$lambda_0(n))}function attachToClientEngineJob$lambda(t){return function(e){return null!=e?(get_LOGGER_4().h3z("Cancelling request because engine Job failed with error: "+e),cancel_2(t,"Engine failed",e)):(get_LOGGER_4().h3z("Cancelling request because engine Job completed"),t.qr()),Unit_instance}}function attachToClientEngineJob$lambda_0(t){return function(e){return t.xo(),Unit_instance}}function _init_properties_HttpRequestLifecycle_kt__jgkmfx(){properties_initialized_HttpRequestLifecycle_kt_3hmcrf||(properties_initialized_HttpRequestLifecycle_kt_3hmcrf=!0,LOGGER_4=KtorSimpleLogger("io.ktor.client.plugins.HttpRequestLifecycle"))}function HttpSend$Plugin$install$slambda(t,e,n){this.a4x_1=t,this.b4x_1=e,CoroutineImpl.call(this,n)}function HttpSend$Plugin$install$slambda_0(t,e,n){var i=new HttpSend$Plugin$install$slambda(t,e,n),r=function(t,e,n){return i.v4c(t,e,n)};return r.$arity=2,r}function $executeCOROUTINE$8(t,e,n){CoroutineImpl.call(this,n),this.p4x_1=t,this.q4x_1=e}function Config_2(){this.v4x_1=20}function Plugin_3(){Plugin_instance_3=this,this.w4x_1=new AttributeKey("HttpSend")}function Plugin_getInstance_3(){return null==Plugin_instance_3&&new Plugin_3,Plugin_instance_3}function InterceptedSender(t,e){this.z4x_1=t,this.a4y_1=e}function DefaultSender(t,e){this.r4x_1=t,this.s4x_1=e,this.t4x_1=0,this.u4x_1=null}function HttpSend(t){Plugin_getInstance_3(),t=t===VOID?20:t,this.r4s_1=t,this.s4s_1=ArrayList_init_$Create$()}function Sender(){}function SendCountExceedException(t){IllegalStateException_init_$Init$_0(t,this),captureStack(this,SendCountExceedException)}function get_LOGGER_5(){return _init_properties_HttpTimeout_kt__pucqrr(),LOGGER_5}function HttpTimeoutCapabilityConfiguration_init_$Init$(t,e,n,i){return t=t===VOID?null:t,e=e===VOID?null:e,n=n===VOID?null:n,HttpTimeoutCapabilityConfiguration.call(i),i.e4y(t),i.f4y(e),i.g4y(n),i}function HttpTimeoutCapabilityConfiguration_init_$Create$(t,e,n){return HttpTimeoutCapabilityConfiguration_init_$Init$(t,e,n,objectCreate(protoOf(HttpTimeoutCapabilityConfiguration)))}function checkTimeoutValue(t,e){if(!(null==e||e.t8(new Long(0,0))>0))throw IllegalArgumentException_init_$Create$(toString("Only positive timeout values are allowed, for infinite timeout use HttpTimeout.INFINITE_TIMEOUT_MS"));return e}function Companion_2(){Companion_instance_3=this,this.h4y_1=new AttributeKey("TimeoutConfiguration")}function Companion_getInstance_9(){return null==Companion_instance_3&&new Companion_2,Companion_instance_3}function HttpTimeout$Plugin$install$slambda$slambda(t,e,n,i){this.q4y_1=t,this.r4y_1=e,this.s4y_1=n,CoroutineImpl.call(this,i)}function HttpTimeout$Plugin$install$slambda$slambda_0(t,e,n,i){var r=new HttpTimeout$Plugin$install$slambda$slambda(t,e,n,i),a=function(t,e){return r.m1j(t,e)};return a.$arity=1,a}function HttpTimeout$Plugin$install$slambda$lambda(t){return function(e){return t.en(),Unit_instance}}function HttpTimeout$Plugin$install$slambda(t,e,n){this.c4z_1=t,this.d4z_1=e,CoroutineImpl.call(this,n)}function HttpTimeout$Plugin$install$slambda_0(t,e,n){var i=new HttpTimeout$Plugin$install$slambda(t,e,n),r=function(t,e,n){return i.j4r(t,e,n)};return r.$arity=2,r}function HttpTimeoutCapabilityConfiguration(){Companion_getInstance_9(),this.b4y_1=new Long(0,0),this.c4y_1=new Long(0,0),this.d4y_1=new Long(0,0)}function hasNotNullTimeouts(t){return null!=t.l4z_1||null!=t.m4z_1||!(null==t.n4z_1)}function Plugin_4(){Plugin_instance_4=this,this.q4z_1=new AttributeKey("TimeoutPlugin"),this.r4z_1=new Long(-1,2147483647)}function Plugin_getInstance_4(){return null==Plugin_instance_4&&new Plugin_4,Plugin_instance_4}function HttpTimeout(t,e,n){Plugin_getInstance_4(),this.l4z_1=t,this.m4z_1=e,this.n4z_1=n}function HttpRequestTimeoutException_init_$Init$(t,e){var n=t.c4e_1.x49(),i=t.i4z(Plugin_getInstance_4());return HttpRequestTimeoutException.call(e,n,null==i?null:i.p4z()),e}function HttpRequestTimeoutException_init_$Create$(t){var e=HttpRequestTimeoutException_init_$Init$(t,objectCreate(protoOf(HttpRequestTimeoutException)));return captureStack(e,HttpRequestTimeoutException_init_$Create$),e}function HttpRequestTimeoutException(t,e){IOException_init_$Init$("Request timeout has expired [url="+t+", request_timeout="+toString(null==e?"unknown":e)+" ms]",this),captureStack(this,HttpRequestTimeoutException)}function _init_properties_HttpTimeout_kt__pucqrr(){properties_initialized_HttpTimeout_kt_9oyjbd||(properties_initialized_HttpTimeout_kt_9oyjbd=!0,LOGGER_5=KtorSimpleLogger("io.ktor.client.plugins.HttpTimeout"))}function wrapWithContent(t,e){return new DelegatedCall(t.y4c_1,e,t)}function DelegatedCall(t,e,n){HttpClientCall.call(this,t),this.a4d_1=new DelegatedRequest(this,n.m4g()),this.b4d_1=new DelegatedResponse(this,e,n.d4d())}function DelegatedRequest(t,e){this.u4z_1=t,this.v4z_1=e}function DelegatedResponse(t,e,n){HttpResponse.call(this),this.w4z_1=t,this.x4z_1=e,this.y4z_1=n,this.z4z_1=this.y4z_1.wl()}function WebSocketCapability(){}function WebSocketCapability_getInstance(){return WebSocketCapability_instance}function WebSocketException_init_$Init$(t,e){return WebSocketException.call(e,t,null),e}function WebSocketException_init_$Create$(t){var e=WebSocketException_init_$Init$(t,objectCreate(protoOf(WebSocketException)));return captureStack(e,WebSocketException_init_$Create$),e}function WebSocketException(t,e){IllegalStateException_init_$Init$_1(t,e,this),captureStack(this,WebSocketException)}function ClientUpgradeContent(){}function DefaultHttpRequest(t,e){this.a50_1=t,this.b50_1=e.d4j_1,this.c50_1=e.c4j_1,this.d50_1=e.f4j_1,this.e50_1=e.e4j_1,this.f50_1=e.h4j_1}function HttpRequest_0(){}function Companion_3(){}function Companion_getInstance_10(){return Companion_instance_4}function HttpRequestBuilder$setCapability$lambda(){return LinkedHashMap_init_$Create$()}function HttpRequestBuilder(){this.c4e_1=new URLBuilder,this.d4e_1=Companion_getInstance_1().i45_1,this.e4e_1=new HeadersBuilder,this.f4e_1=EmptyContent_getInstance(),this.g4e_1=SupervisorJob(),this.h4e_1=AttributesJsFn(!0)}function HttpRequestData(t,e,n,i,r,a){this.c4j_1=t,this.d4j_1=e,this.e4j_1=n,this.f4j_1=i,this.g4j_1=r,this.h4j_1=a;var s=this.h4j_1.y3t(get_ENGINE_CAPABILITIES_KEY()),o=null==s?null:s.x1();this.i4j_1=null==o?emptySet():o}function HttpResponseData(t,e,n,i,r,a){this.k4f_1=t,this.l4f_1=e,this.m4f_1=n,this.n4f_1=i,this.o4f_1=r,this.p4f_1=a,this.q4f_1=GMTDate()}function url(t,e){takeFrom(t.c4e_1,e)}function isUpgradeRequest(t){return t.f4j_1 instanceof ClientUpgradeContent}function Phases(){Phases_instance=this,this.z4k_1=new PipelinePhase("Before"),this.a4l_1=new PipelinePhase("State"),this.b4l_1=new PipelinePhase("Transform"),this.c4l_1=new PipelinePhase("Render"),this.d4l_1=new PipelinePhase("Send")}function Phases_getInstance(){return null==Phases_instance&&new Phases,Phases_instance}function HttpRequestPipeline(t){Phases_getInstance(),t=t!==VOID&&t,Pipeline.call(this,[Phases_getInstance().z4k_1,Phases_getInstance().a4l_1,Phases_getInstance().b4l_1,Phases_getInstance().c4l_1,Phases_getInstance().d4l_1]),this.p50_1=t}function Phases_0(){Phases_instance_0=this,this.s4e_1=new PipelinePhase("Before"),this.t4e_1=new PipelinePhase("State"),this.u4e_1=new PipelinePhase("Monitoring"),this.v4e_1=new PipelinePhase("Engine"),this.w4e_1=new PipelinePhase("Receive")}function Phases_getInstance_0(){return null==Phases_instance_0&&new Phases_0,Phases_instance_0}function HttpSendPipeline(t){Phases_getInstance_0(),t=t!==VOID&&t,Pipeline.call(this,[Phases_getInstance_0().s4e_1,Phases_getInstance_0().t4e_1,Phases_getInstance_0().u4e_1,Phases_getInstance_0().v4e_1,Phases_getInstance_0().w4e_1]),this.x50_1=t}function get_BodyTypeAttributeKey(){return _init_properties_RequestBody_kt__bo3lwf(),BodyTypeAttributeKey}function _init_properties_RequestBody_kt__bo3lwf(){properties_initialized_RequestBody_kt_agyv1b||(properties_initialized_RequestBody_kt_agyv1b=!0,BodyTypeAttributeKey=new AttributeKey("BodyTypeAttributeKey"))}function DefaultHttpResponse(t,e){HttpResponse.call(this),this.y50_1=t,this.z50_1=e.p4f_1,this.a51_1=e.k4f_1,this.b51_1=e.n4f_1,this.c51_1=e.l4f_1,this.d51_1=e.q4f_1;var n=e.o4f_1,i=isInterface(n,ByteReadChannel)?n:null;this.e51_1=null==i?Companion_getInstance().v3m():i,this.f51_1=e.m4f_1}function HttpResponse(){}function get_request(t){return t.l4h().m4g()}function complete(t){var e=ensureNotNull(t.wl().bb(Key_instance));(isInterface(e,CompletableJob)?e:THROW_CCE()).qr()}function bodyAsText(t,e,n){var i=new $bodyAsTextCOROUTINE$13(t,e=e===VOID?Charsets_getInstance().f3q_1:e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()}function $bodyAsTextCOROUTINE$13(t,e,n){CoroutineImpl.call(this,n),this.o51_1=t,this.p51_1=e}function Phases_1(){Phases_instance_1=this,this.a4f_1=new PipelinePhase("Receive"),this.b4f_1=new PipelinePhase("Parse"),this.c4f_1=new PipelinePhase("Transform"),this.d4f_1=new PipelinePhase("State"),this.e4f_1=new PipelinePhase("After")}function Phases_getInstance_1(){return null==Phases_instance_1&&new Phases_1,Phases_instance_1}function HttpResponsePipeline(t){Phases_getInstance_1(),t=t!==VOID&&t,Pipeline.call(this,[Phases_getInstance_1().a4f_1,Phases_getInstance_1().b4f_1,Phases_getInstance_1().c4f_1,Phases_getInstance_1().d4f_1,Phases_getInstance_1().e4f_1]),this.a52_1=t}function Phases_2(){Phases_instance_2=this,this.e4l_1=new PipelinePhase("Before"),this.f4l_1=new PipelinePhase("State"),this.g4l_1=new PipelinePhase("After")}function Phases_getInstance_2(){return null==Phases_instance_2&&new Phases_2,Phases_instance_2}function HttpReceivePipeline(t){Phases_getInstance_2(),t=t!==VOID&&t,Pipeline.call(this,[Phases_getInstance_2().e4l_1,Phases_getInstance_2().f4l_1,Phases_getInstance_2().g4l_1]),this.i52_1=t}function HttpResponseContainer(t,e){this.k4g_1=t,this.l4g_1=e}function checkCapabilities(t){var e,n=t.j52_1.h4e_1.y3t(get_ENGINE_CAPABILITIES_KEY()),i=null==n?null:n.x1();if(null==i)e=null;else{for(var r=ArrayList_init_$Create$(),a=i.s();a.t();){var s=a.u();null!=s&&isInterface(s,HttpClientPlugin)&&r.p(s)}e=r}if(null==e);else for(var o=e.s();o.t();){var l=o.u();if(null==pluginOrNull(t.k52_1,l))throw IllegalArgumentException_init_$Create$(toString("Consider installing "+l+" plugin because the request requires it to be installed"))}}function HttpStatement$execute$slambda(t){CoroutineImpl.call(this,t)}function HttpStatement$execute$slambda_0(t){var e=new HttpStatement$execute$slambda(t),n=function(t,n){return e.u52(t,n)};return n.$arity=1,n}function $executeCOROUTINE$14(t,e,n){CoroutineImpl.call(this,n),this.d53_1=t,this.e53_1=e}function $executeUnsafeCOROUTINE$15(t,e){CoroutineImpl.call(this,e),this.u53_1=t}function $cleanupCOROUTINE$16(t,e,n){CoroutineImpl.call(this,n),this.f54_1=t,this.g54_1=e}function HttpStatement(t,e){this.j52_1=t,this.k52_1=e,checkCapabilities(this)}function observable(t,e,n,i){return writer(GlobalScope_instance,e,!0,observable$slambda_0(n,t,i,null)).tw()}function observable$slambda(t,e,n,i){this.v54_1=t,this.w54_1=e,this.x54_1=n,CoroutineImpl.call(this,i)}function observable$slambda_0(t,e,n,i){var r=new observable$slambda(t,e,n,i),a=function(t,e){return r.j4i(t,e)};return a.$arity=1,a}function get_HttpRequestCreated(){return _init_properties_ClientEvents_kt__xuvbz8(),HttpRequestCreated}function get_HttpRequestIsReadyForSending(){return _init_properties_ClientEvents_kt__xuvbz8(),HttpRequestIsReadyForSending}function get_HttpResponseReceived(){return _init_properties_ClientEvents_kt__xuvbz8(),HttpResponseReceived}function get_HttpResponseReceiveFailed(){return _init_properties_ClientEvents_kt__xuvbz8(),HttpResponseReceiveFailed}function get_HttpResponseCancelled(){return _init_properties_ClientEvents_kt__xuvbz8(),HttpResponseCancelled}function HttpResponseReceiveFail(t,e){this.i55_1=t,this.j55_1=e}function _init_properties_ClientEvents_kt__xuvbz8(){properties_initialized_ClientEvents_kt_rdee4m||(properties_initialized_ClientEvents_kt_rdee4m=!0,HttpRequestCreated=new EventDefinition,HttpRequestIsReadyForSending=new EventDefinition,HttpResponseReceived=new EventDefinition,HttpResponseReceiveFailed=new EventDefinition,HttpResponseCancelled=new EventDefinition)}function EmptyContent(){EmptyContent_instance=this,NoContent.call(this),this.l55_1=new Long(0,0)}function EmptyContent_getInstance(){return null==EmptyContent_instance&&new EmptyContent,EmptyContent_instance}function buildHeaders(t){t=t===VOID?buildHeaders$lambda:t;var e=new HeadersBuilder;return t(e),e.n3j()}function buildHeaders$lambda(t){return Unit_instance}function Js(){}function Js_getInstance(){return Js_instance}function createWebSocket($this,urlString_capturingHack,headers){var tmp;if(2===get_platform(PlatformUtils_getInstance()).n9_1)tmp=new WebSocket(urlString_capturingHack);else{var ws_capturingHack=eval("require")("ws"),headers_capturingHack=new JsClientEngine$createWebSocket$headers_capturingHack$1;headers.t3v(JsClientEngine$createWebSocket$lambda(headers_capturingHack)),tmp=new ws_capturingHack(urlString_capturingHack,{headers:headers_capturingHack})}return tmp}function executeWebSocketRequest(t,e,n,i){var r=new $executeWebSocketRequestCOROUTINE$18(t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function JsClientEngine$createWebSocket$headers_capturingHack$1(){}function JsClientEngine$createWebSocket$lambda(t){return function(e,n){return t[e]=joinToString(n,","),Unit_instance}}function $executeCOROUTINE$17(t,e,n){CoroutineImpl.call(this,n),this.j56_1=t,this.k56_1=e}function $executeWebSocketRequestCOROUTINE$18(t,e,n,i){CoroutineImpl.call(this,i),this.v55_1=t,this.w55_1=e,this.x55_1=n}function JsClientEngine(t){if(HttpClientEngineBase.call(this,"ktor-js"),this.s56_1=t,this.t56_1=Dispatchers_getInstance().cw_1,this.u56_1=setOf_0([Plugin_getInstance_4(),WebSocketCapability_instance]),null!=this.s56_1.x4k_1)throw IllegalStateException_init_$Create$(toString("Proxy unsupported in Js engine."))}function mapToKtor(t){return buildHeaders(mapToKtor$lambda(t))}function awaitConnection(t,e){var n=new CancellableContinuationImpl(intercepted(e),get_MODE_CANCELLABLE());if(n.kq(),!n.qo()){var i=awaitConnection$lambda(n,t);t.addEventListener("open",i),t.addEventListener("error",i),n.to(awaitConnection$lambda_0(t,i))}return n.rq()}function asString(t){var e=StringBuilder_init_$Create$(),n=JSON;return e.g5(n.stringify(t,["message","target","type","isTrusted"])),e.toString()}function JsError(t){extendThrowable(this,"Error from javascript["+t+"]."),captureStack(this,JsError),this.v56_1=t}function mapToKtor$lambda$lambda(t){return function(e,n){return t.a3w(n,e),Unit_instance}}function mapToKtor$lambda(t){return function(e){return t.forEach(mapToKtor$lambda$lambda(e)),Unit_instance}}function awaitConnection$lambda(t,e){return function(n){var i=n.type;if("open"===i){var r=t,a=_Result___init__impl__xyqfz8(e);r.hb(a)}else if("error"===i){var s=t,o=WebSocketException_init_$Create$(asString(n)),l=_Result___init__impl__xyqfz8(createFailure(o));s.hb(l)}return Unit_instance}}function awaitConnection$lambda_0(t,e){return function(n){return t.removeEventListener("open",e),t.removeEventListener("error",e),null!=n&&t.close(),Unit_instance}}function toRaw(t,e,n,i){var r=new $toRawCOROUTINE$19(t,e,n,i);return r.va_1=Unit_instance,r.wa_1=null,r.gb()}function buildObject(t){var e={},n=null==e||null!=e?e:THROW_CCE();return t(n),n}function toRaw$lambda(t){return function(e,n){return t[e]=n,Unit_instance}}function toRaw$slambda(t,e){this.s57_1=t,CoroutineImpl.call(this,e)}function toRaw$slambda_0(t,e){var n=new toRaw$slambda(t,e),i=function(t,e){return n.j4i(t,e)};return i.$arity=1,i}function toRaw$lambda_0(t,e,n,i){return function(r){var a;r.method=t.d4j_1.q45_1,r.headers=e,a=n.m4e_1?"follow":"manual",r.redirect=a;var s=i;return null==s||(r.body=new Uint8Array(toTypedArray(s))),Unit_instance}}function $toRawCOROUTINE$19(t,e,n,i){CoroutineImpl.call(this,i),this.e57_1=t,this.f57_1=e,this.g57_1=n}function asByteArray(t){return new Int8Array(t.buffer,t.byteOffset,t.length)}function readBodyBrowser(t,e){var n=e.body;return null==n?Companion_getInstance().v3m():channelFromStream(t,n)}function channelFromStream(t,e){return writer(t,VOID,VOID,channelFromStream$slambda_0(e,null)).tw()}function readChunk(t,e){var n=new CancellableContinuationImpl(intercepted(e),get_MODE_CANCELLABLE());return n.kq(),t.read().then(readChunk$lambda(n)).catch(readChunk$lambda_0(n)),n.rq()}function channelFromStream$slambda(t,e){this.c58_1=t,CoroutineImpl.call(this,e)}function channelFromStream$slambda_0(t,e){var n=new channelFromStream$slambda(t,e),i=function(t,e){return n.j4i(t,e)};return i.$arity=1,i}function readChunk$lambda(t){return function(e){var n=e.value,i=e.done||null==n?null:n,r=_Result___init__impl__xyqfz8(i);return t.hb(r),Unit_instance}}function readChunk$lambda_0(t){return function(e){var n=t,i=_Result___init__impl__xyqfz8(createFailure(e));return n.hb(i),Unit_instance}}function commonFetch(t,e,n){var i=new CancellableContinuationImpl(intercepted(n),get_MODE_CANCELLABLE());i.kq();var r=AbortController_0();e.signal=r.signal,i.to(commonFetch$lambda(r));var a=2===get_platform(PlatformUtils_getInstance()).n9_1?fetch(t,e):jsRequireNodeFetch()(t,e),s=commonFetch$lambda_0(i);return a.then(s,commonFetch$lambda_1(i)),i.rq()}function readBody(t,e){return 3===get_platform(PlatformUtils_getInstance()).n9_1?readBodyNode(t,e):readBodyBrowser(t,e)}function AbortController_0(){var tmp;if(2===get_platform(PlatformUtils_getInstance()).n9_1)tmp=new AbortController;else{var controller=eval("require")("abort-controller");tmp=new controller}return tmp}function jsRequireNodeFetch(){var tmp;try{tmp=eval("require")("node-fetch")}catch(t){var tmp_0,cause=t;throw Error_init_$Create$("Error loading module 'node-fetch': "+cause)}return tmp}function commonFetch$lambda(t){return function(e){return t.abort(),Unit_instance}}function commonFetch$lambda_0(t){return function(e){var n=_Result___init__impl__xyqfz8(e);return t.hb(n),Unit_instance}}function commonFetch$lambda_1(t){return function(e){var n=Error_init_$Create$_0("Fail to fetch",e),i=_Result___init__impl__xyqfz8(createFailure(n));return t.hb(i),Unit_instance}}function readBodyNode(t,e){return writer(t,VOID,VOID,readBodyNode$slambda_0(e,null)).tw()}function readBodyNode$slambda$lambda(t,e){return function(n){return _ChannelResult___get_isSuccess__impl__odq1z9(t.c12(asByteArray(new Uint8Array(n)))),e.pause()}}function readBodyNode$slambda$lambda_0(t,e){return function(n){var i=new JsError(n);return t.g12(i),e.tw().g12(i)}}function readBodyNode$slambda$lambda_1(t){return function(){return t.i12()}}function readBodyNode$slambda(t,e){this.q58_1=t,CoroutineImpl.call(this,e)}function readBodyNode$slambda_0(t,e){var n=new readBodyNode$slambda(t,e),i=function(t,e){return n.j4i(t,e)};return i.$arity=1,i}function platformRequestDefaultTransform(t,e,n){return null}function platformResponseDefaultTransformers(t){}function isReservedStatusCode(t,e){var n=Companion_getInstance_5().d4b(t);return null==n||equals(n,Codes_CLOSED_ABNORMALLY_getInstance())}function JsWebSocketSession$lambda(t){return function(e){var n,i=e,r=i.data;if(r instanceof ArrayBuffer){var a=new Int8Array(r);n=Binary_init_$Create$(!1,a)}else{if(null==r||"string"!=typeof r){var s=IllegalStateException_init_$Create$("Unknown frame type: "+i.type);throw t.y58_1.pr(s),s}n=Text_init_$Create$(r)}var o=n;return t.z58_1.c12(o),Unit_instance}}function JsWebSocketSession$lambda_0(t){return function(e){var n=WebSocketException_init_$Create$(""+e);return t.y58_1.pr(n),t.z58_1.g12(n),t.a59_1.k12(),Unit_instance}}function JsWebSocketSession$lambda_1(t){return function(e){var n=e.code,i=null!=n&&"number"==typeof n?n:THROW_CCE(),r=e.reason,a=new CloseReason(i,null!=r&&"string"==typeof r?r:THROW_CCE());return t.y58_1.nr(a),t.z58_1.c12(Close_init_$Create$(a)),t.z58_1.i12(),t.a59_1.k12(),Unit_instance}}function JsWebSocketSession$slambda(t,e){this.m59_1=t,CoroutineImpl.call(this,e)}function JsWebSocketSession$slambda_0(t,e){var n=new JsWebSocketSession$slambda(t,e),i=function(t,e){return n.m1j(t,e)};return i.$arity=1,i}function JsWebSocketSession$lambda_2(t){return function(e){return null==e?t.x58_1.close():t.x58_1.close(Codes_NORMAL_getInstance().a4b_1,"Client failed"),Unit_instance}}function JsWebSocketSession(t,e){this.w58_1=t,this.x58_1=e,this.y58_1=CompletableDeferred(),Factory_getInstance(),this.z58_1=Channel(2147483647),Factory_getInstance(),this.a59_1=Channel(2147483647),this.b59_1=this.z58_1,this.c59_1=this.a59_1,this.d59_1=this.y58_1,this.x58_1.binaryType="arraybuffer",this.x58_1.addEventListener("message",JsWebSocketSession$lambda(this)),this.x58_1.addEventListener("error",JsWebSocketSession$lambda_0(this)),this.x58_1.addEventListener("close",JsWebSocketSession$lambda_1(this)),launch(this,VOID,VOID,JsWebSocketSession$slambda_0(this,null));var n=this.w58_1.bb(Key_instance);null==n||n.ym(JsWebSocketSession$lambda_2(this))}function unwrapCancellationException(t){for(var e=t;e instanceof CancellationException;){if(equals(e,e.cause))return t;e=e.cause}return null==e?t:e}return setMetadataFor(HttpClient$slambda,"HttpClient$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpClient$slambda_1,"HttpClient$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor($executeCOROUTINE$0,"$executeCOROUTINE$0",classMeta,CoroutineImpl),setMetadataFor(HttpClient,"HttpClient",classMeta,VOID,[CoroutineScope,Closeable],VOID,VOID,VOID,[1]),setMetadataFor(HttpClientConfig,"HttpClientConfig",classMeta,VOID,VOID,HttpClientConfig),setMetadataFor(Companion,"Companion",objectMeta),setMetadataFor($bodyNullableCOROUTINE$1,"$bodyNullableCOROUTINE$1",classMeta,CoroutineImpl),setMetadataFor(HttpClientCall,"HttpClientCall",classMeta,VOID,[CoroutineScope],VOID,VOID,VOID,[0,1]),setMetadataFor(DoubleReceiveException,"DoubleReceiveException",classMeta,IllegalStateException),setMetadataFor(NoTransformationFoundException,"NoTransformationFoundException",classMeta,UnsupportedOperationException),setMetadataFor(SavedHttpCall,"SavedHttpCall",classMeta,HttpClientCall,VOID,VOID,VOID,VOID,[0,1]),setMetadataFor(HttpRequest_0,"HttpRequest",interfaceMeta,VOID,[CoroutineScope]),setMetadataFor(SavedHttpRequest,"SavedHttpRequest",classMeta,VOID,[HttpRequest_0]),setMetadataFor(HttpResponse,"HttpResponse",classMeta,VOID,[CoroutineScope]),setMetadataFor(SavedHttpResponse,"SavedHttpResponse",classMeta,HttpResponse),setMetadataFor($saveCOROUTINE$3,"$saveCOROUTINE$3",classMeta,CoroutineImpl),setMetadataFor(UnsupportedContentTypeException,"UnsupportedContentTypeException",classMeta,IllegalStateException),setMetadataFor(ObservableContent$content$slambda,"ObservableContent$content$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(ObservableContent,"ObservableContent",classMeta,ReadChannelContent),setMetadataFor(HttpClientEngine$install$slambda,"HttpClientEngine$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpClientEngine$executeWithinCallContext$slambda,"HttpClientEngine$executeWithinCallContext$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor($executeWithinCallContextCOROUTINE$4,"$executeWithinCallContextCOROUTINE$4",classMeta,CoroutineImpl),setMetadataFor(HttpClientEngine,"HttpClientEngine",interfaceMeta,VOID,[CoroutineScope,Closeable],VOID,VOID,VOID,[1]),setMetadataFor(ClientEngineClosedException,"ClientEngineClosedException",classMeta,IllegalStateException,VOID,ClientEngineClosedException),setMetadataFor(HttpClientEngineBase,"HttpClientEngineBase",classMeta,VOID,[HttpClientEngine],VOID,VOID,VOID,[1]),setMetadataFor(HttpClientEngineConfig,"HttpClientEngineConfig",classMeta,VOID,VOID,HttpClientEngineConfig),setMetadataFor(Companion_0,"Companion",objectMeta),setMetadataFor(KtorCallContextElement,"KtorCallContextElement",classMeta,VOID,[Element]),setMetadataFor(HttpClientPlugin,"HttpClientPlugin",interfaceMeta),setMetadataFor(Plugin,"Plugin",objectMeta,VOID,[HttpClientPlugin]),setMetadataFor(BodyProgress$handle$slambda,"BodyProgress$handle$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(BodyProgress$handle$slambda_1,"BodyProgress$handle$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(BodyProgress,"BodyProgress",classMeta),setMetadataFor(ResponseException,"ResponseException",classMeta,IllegalStateException),setMetadataFor(RedirectResponseException,"RedirectResponseException",classMeta,ResponseException),setMetadataFor(ClientRequestException,"ClientRequestException",classMeta,ResponseException),setMetadataFor(ServerResponseException,"ServerResponseException",classMeta,ResponseException),setMetadataFor(addDefaultResponseValidation$lambda$slambda,"addDefaultResponseValidation$lambda$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(defaultTransformers$1$content$1,VOID,classMeta,ByteArrayContent),setMetadataFor(defaultTransformers$1$content$2,VOID,classMeta,ReadChannelContent),setMetadataFor(defaultTransformers$slambda,"defaultTransformers$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(defaultTransformers$slambda$slambda,"defaultTransformers$slambda$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(defaultTransformers$slambda_1,"defaultTransformers$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpCallValidator$Companion$install$slambda,"HttpCallValidator$Companion$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpCallValidator$Companion$install$slambda_1,"HttpCallValidator$Companion$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpCallValidator$Companion$install$slambda_3,"HttpCallValidator$Companion$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(Config,"Config",classMeta,VOID,VOID,Config),setMetadataFor(Companion_1,"Companion",objectMeta,VOID,[HttpClientPlugin]),setMetadataFor($validateResponseCOROUTINE$5,"$validateResponseCOROUTINE$5",classMeta,CoroutineImpl),setMetadataFor($processExceptionCOROUTINE$6,"$processExceptionCOROUTINE$6",classMeta,CoroutineImpl),setMetadataFor(HttpCallValidator,"HttpCallValidator",classMeta,VOID,VOID,VOID,VOID,VOID,[1,2]),setMetadataFor(ExceptionHandlerWrapper,"ExceptionHandlerWrapper",classMeta),setMetadataFor(RequestExceptionHandlerWrapper,"RequestExceptionHandlerWrapper",classMeta),setMetadataFor(HttpRequest$1,VOID,classMeta,VOID,[HttpRequest_0]),setMetadataFor(HttpPlainText$Plugin$install$slambda,"HttpPlainText$Plugin$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpPlainText$Plugin$install$slambda_1,"HttpPlainText$Plugin$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(Config_0,"Config",classMeta,VOID,VOID,Config_0),setMetadataFor(Plugin_0,"Plugin",objectMeta,VOID,[HttpClientPlugin]),setMetadataFor(sam$kotlin_Comparator$0,"sam$kotlin_Comparator$0",classMeta),setMetadataFor(HttpPlainText,"HttpPlainText",classMeta),setMetadataFor(HttpRedirect$Plugin$install$slambda,"HttpRedirect$Plugin$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor($handleCallCOROUTINE$7,"$handleCallCOROUTINE$7",classMeta,CoroutineImpl),setMetadataFor(Config_1,"Config",classMeta,VOID,VOID,Config_1),setMetadataFor(Plugin_1,"Plugin",objectMeta,VOID,[HttpClientPlugin],VOID,VOID,VOID,[4]),setMetadataFor(HttpRedirect,"HttpRedirect",classMeta),setMetadataFor(HttpRequestLifecycle$Plugin$install$slambda,"HttpRequestLifecycle$Plugin$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(Plugin_2,"Plugin",objectMeta,VOID,[HttpClientPlugin]),setMetadataFor(HttpRequestLifecycle,"HttpRequestLifecycle",classMeta),setMetadataFor(HttpSend$Plugin$install$slambda,"HttpSend$Plugin$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor($executeCOROUTINE$8,"$executeCOROUTINE$8",classMeta,CoroutineImpl),setMetadataFor(Config_2,"Config",classMeta,VOID,VOID,Config_2),setMetadataFor(Plugin_3,"Plugin",objectMeta,VOID,[HttpClientPlugin]),setMetadataFor(Sender,"Sender",interfaceMeta,VOID,VOID,VOID,VOID,VOID,[1]),setMetadataFor(InterceptedSender,"InterceptedSender",classMeta,VOID,[Sender],VOID,VOID,VOID,[1]),setMetadataFor(DefaultSender,"DefaultSender",classMeta,VOID,[Sender],VOID,VOID,VOID,[1]),setMetadataFor(HttpSend,"HttpSend",classMeta),setMetadataFor(SendCountExceedException,"SendCountExceedException",classMeta,IllegalStateException),setMetadataFor(Companion_2,"Companion",objectMeta),setMetadataFor(HttpTimeout$Plugin$install$slambda$slambda,"HttpTimeout$Plugin$install$slambda$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(HttpTimeout$Plugin$install$slambda,"HttpTimeout$Plugin$install$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[2]),setMetadataFor(HttpTimeoutCapabilityConfiguration,"HttpTimeoutCapabilityConfiguration",classMeta,VOID,VOID,HttpTimeoutCapabilityConfiguration_init_$Create$),setMetadataFor(Plugin_4,"Plugin",objectMeta,VOID,[HttpClientPlugin]),setMetadataFor(HttpTimeout,"HttpTimeout",classMeta),setMetadataFor(HttpRequestTimeoutException,"HttpRequestTimeoutException",classMeta,IOException),setMetadataFor(DelegatedCall,"DelegatedCall",classMeta,HttpClientCall,VOID,VOID,VOID,VOID,[0,1]),setMetadataFor(DelegatedRequest,"DelegatedRequest",classMeta,VOID,[HttpRequest_0]),setMetadataFor(DelegatedResponse,"DelegatedResponse",classMeta,HttpResponse),setMetadataFor(WebSocketCapability,"WebSocketCapability",objectMeta),setMetadataFor(WebSocketException,"WebSocketException",classMeta,IllegalStateException),setMetadataFor(ClientUpgradeContent,"ClientUpgradeContent",classMeta,NoContent,VOID,VOID,VOID,VOID,[1]),setMetadataFor(DefaultHttpRequest,"DefaultHttpRequest",classMeta,VOID,[HttpRequest_0]),setMetadataFor(Companion_3,"Companion",objectMeta),setMetadataFor(HttpRequestBuilder,"HttpRequestBuilder",classMeta,VOID,VOID,HttpRequestBuilder),setMetadataFor(HttpRequestData,"HttpRequestData",classMeta),setMetadataFor(HttpResponseData,"HttpResponseData",classMeta),setMetadataFor(Phases,"Phases",objectMeta),setMetadataFor(HttpRequestPipeline,"HttpRequestPipeline",classMeta,Pipeline,VOID,HttpRequestPipeline,VOID,VOID,[2]),setMetadataFor(Phases_0,"Phases",objectMeta),setMetadataFor(HttpSendPipeline,"HttpSendPipeline",classMeta,Pipeline,VOID,HttpSendPipeline,VOID,VOID,[2]),setMetadataFor(DefaultHttpResponse,"DefaultHttpResponse",classMeta,HttpResponse),setMetadataFor($bodyAsTextCOROUTINE$13,"$bodyAsTextCOROUTINE$13",classMeta,CoroutineImpl),setMetadataFor(Phases_1,"Phases",objectMeta),setMetadataFor(HttpResponsePipeline,"HttpResponsePipeline",classMeta,Pipeline,VOID,HttpResponsePipeline,VOID,VOID,[2]),setMetadataFor(Phases_2,"Phases",objectMeta),setMetadataFor(HttpReceivePipeline,"HttpReceivePipeline",classMeta,Pipeline,VOID,HttpReceivePipeline,VOID,VOID,[2]),setMetadataFor(HttpResponseContainer,"HttpResponseContainer",classMeta),setMetadataFor(HttpStatement$execute$slambda,"HttpStatement$execute$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor($executeCOROUTINE$14,"$executeCOROUTINE$14",classMeta,CoroutineImpl),setMetadataFor($executeUnsafeCOROUTINE$15,"$executeUnsafeCOROUTINE$15",classMeta,CoroutineImpl),setMetadataFor($cleanupCOROUTINE$16,"$cleanupCOROUTINE$16",classMeta,CoroutineImpl),setMetadataFor(HttpStatement,"HttpStatement",classMeta,VOID,VOID,VOID,VOID,VOID,[1,0]),setMetadataFor(observable$slambda,"observable$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(HttpResponseReceiveFail,"HttpResponseReceiveFail",classMeta),setMetadataFor(EmptyContent,"EmptyContent",objectMeta,NoContent),setMetadataFor(Js,"Js",objectMeta),setMetadataFor(JsClientEngine$createWebSocket$headers_capturingHack$1,VOID,classMeta),setMetadataFor($executeCOROUTINE$17,"$executeCOROUTINE$17",classMeta,CoroutineImpl),setMetadataFor($executeWebSocketRequestCOROUTINE$18,"$executeWebSocketRequestCOROUTINE$18",classMeta,CoroutineImpl),setMetadataFor(JsClientEngine,"JsClientEngine",classMeta,HttpClientEngineBase,VOID,VOID,VOID,VOID,[1,2]),setMetadataFor(JsError,"JsError",classMeta,Error),setMetadataFor(toRaw$slambda,"toRaw$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor($toRawCOROUTINE$19,"$toRawCOROUTINE$19",classMeta,CoroutineImpl),setMetadataFor(channelFromStream$slambda,"channelFromStream$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(readBodyNode$slambda,"readBodyNode$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(JsWebSocketSession$slambda,"JsWebSocketSession$slambda",classMeta,CoroutineImpl,VOID,VOID,VOID,VOID,[1]),setMetadataFor(JsWebSocketSession,"JsWebSocketSession",classMeta,VOID,[CoroutineScope],VOID,VOID,VOID,[0,1]),protoOf(HttpClient$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpClient$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(HttpClient$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,!(this.t4c_1 instanceof HttpClientCall)){var e="Error: HttpClientCall expected, but found "+toString(this.t4c_1)+"("+getKClassFromExpression(this.t4c_1)+").";throw IllegalStateException_init_$Create$(toString(e))}if(this.ta_1=1,(t=this.r4c_1.e4c_1.m3y(Unit_instance,this.t4c_1.d4d(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.u4c_1=t,this.t4c_1.e4d(this.u4c_1),this.ta_1=2,(t=this.s4c_1.r3x(this.t4c_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(HttpClient$slambda).w4c=function(t,e,n){var i=new HttpClient$slambda(this.r4c_1,n);return i.s4c_1=t,i.t4c_1=e,i},protoOf(HttpClient$slambda_1).q4d=function(t,e,n){var i=this.r4d(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpClient$slambda_1).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.q4d(i,e instanceof HttpResponseContainer?e:THROW_CCE(),n)},protoOf(HttpClient$slambda_1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ua_1=2,this.ta_1=1,(t=this.o4d_1.s3x(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.ua_1=3,this.ta_1=4;continue t;case 2:if(this.ua_1=3,this.wa_1 instanceof Error){var e=this.wa_1;throw this.n4d_1.h4c_1.t4a(get_HttpResponseReceiveFailed(),new HttpResponseReceiveFail(this.o4d_1.n3y_1.d4d(),e)),e}throw this.wa_1;case 3:throw this.wa_1;case 4:return this.ua_1=3,Unit_instance}}catch(t){var n=t;if(3===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(HttpClient$slambda_1).r4d=function(t,e,n){var i=new HttpClient$slambda_1(this.n4d_1,n);return i.o4d_1=t,i.p4d_1=e,i},protoOf($executeCOROUTINE$0).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.a4e_1.h4c_1.t4a(get_HttpRequestCreated(),this.b4e_1),this.ta_1=1,(t=this.a4e_1.b4c_1.m3y(this.b4e_1,this.b4e_1.f4e_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return t instanceof HttpClientCall?t:THROW_CCE();case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpClient).wl=function(){return this.a4c_1},protoOf(HttpClient).f4f=function(t,e){var n=new $executeCOROUTINE$0(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpClient).i15=function(){if(!this.y4b_1.atomicfu$compareAndSet(!1,!0))return Unit_instance;for(var t=this.f4c_1.x3t(get_PLUGIN_INSTALLED_LIST()),e=t.d3u().s();e.t();){var n=e.u(),i=t.x3t(n instanceof AttributeKey?n:THROW_CCE());isInterface(i,Closeable)&&i.i15()}this.z4b_1.qr(),this.x4b_1&&this.v4b_1.i15()},protoOf(HttpClient).toString=function(){return"HttpClient["+this.v4b_1+"]"},protoOf(HttpClientConfig).j4f=function(t,e){var n=this.j4e_1.k2(t.c2()),i=this.j4e_1,r=t.c2(),a=HttpClientConfig$install$lambda_0(n,e);if(i.a2(r,a),this.i4e_1.h2(t.c2()))return Unit_instance;var s=this.i4e_1,o=t.c2(),l=HttpClientConfig$install$lambda_1(t);s.a2(o,l)},protoOf(HttpClientConfig).x4e=function(t,e,n){var i;return e=e===VOID?HttpClientConfig$install$lambda:e,n===VOID?(this.j4f(t,e),i=Unit_instance):i=n.j4f.call(this,t,e),i},protoOf(HttpClientConfig).y4e=function(t,e){this.k4e_1.a2(t,e)},protoOf(HttpClientConfig).r4e=function(t){for(var e=this.i4e_1.y1().s();e.t();)e.u()(t);for(var n=this.k4e_1.y1().s();n.t();)n.u()(t)},protoOf(HttpClientConfig).z4e=function(t){this.m4e_1=t.m4e_1,this.n4e_1=t.n4e_1,this.o4e_1=t.o4e_1;var e=this.i4e_1,n=t.i4e_1;e.b2(n);var i=this.j4e_1,r=t.j4e_1;i.b2(r);var a=this.k4e_1,s=t.k4e_1;a.b2(s)},protoOf($bodyNullableCOROUTINE$1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=10,this.ta_1=1;continue t;case 1:this.ta_1=2;continue t;case 2:if(this.ua_1=9,this.ua_1=8,instanceOf(this.b4g_1.d4d(),this.c4g_1.d3z_1)){this.d4g_1=this.b4g_1.d4d(),this.ua_1=10,this.ta_1=7;continue t}this.ta_1=3;continue t;case 3:if(!this.b4g_1.i4g()&&!this.b4g_1.z4c_1.atomicfu$compareAndSet(!1,!0))throw new DoubleReceiveException(this.b4g_1);if(this.e4g_1=this.b4g_1.r4f().y3t(Companion_getInstance_6().s4f_1),null==this.e4g_1){if(this.ta_1=4,(t=this.b4g_1.j4g(this))===get_COROUTINE_SUSPENDED())return t;continue t}this.f4g_1=this.e4g_1,this.ta_1=5;continue t;case 4:this.f4g_1=t,this.ta_1=5;continue t;case 5:if(this.g4g_1=this.f4g_1,this.h4g_1=new HttpResponseContainer(this.c4g_1,this.g4g_1),this.ta_1=6,(t=this.b4g_1.y4c_1.c4c_1.m3y(this.b4g_1,this.h4g_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 6:var e=t.l4g_1,n=equals(e,NullBody_instance)?null:e;if(null!=n&&!instanceOf(n,this.c4g_1.d3z_1)){var i=getKClassFromExpression(n),r=this.c4g_1.d3z_1;throw new NoTransformationFoundException(this.b4g_1.d4d(),i,r)}this.d4g_1=n,this.ua_1=10,this.ta_1=7;continue t;case 7:var a=this.d4g_1;return complete(this.b4g_1.d4d()),a;case 8:if(this.ua_1=9,this.wa_1 instanceof Error){var s=this.wa_1;throw cancel_0(this.b4g_1.d4d(),"Receive failed",s),s}throw this.wa_1;case 9:this.ua_1=10;var o=this.wa_1;throw complete(this.b4g_1.d4d()),o;case 10:throw this.wa_1;case 11:return complete(this.b4g_1.d4d()),Unit_instance}}catch(t){var l=t;if(10===this.ua_1)throw l;this.ta_1=this.ua_1,this.wa_1=l}},protoOf(HttpClientCall).wl=function(){return this.d4d().wl()},protoOf(HttpClientCall).r4f=function(){return this.m4g().r4f()},protoOf(HttpClientCall).m4g=function(){var t=this.a4d_1;if(null!=t)return t;throwUninitializedPropertyAccessException("request")},protoOf(HttpClientCall).d4d=function(){var t=this.b4d_1;if(null!=t)return t;throwUninitializedPropertyAccessException("response")},protoOf(HttpClientCall).i4g=function(){return this.c4d_1},protoOf(HttpClientCall).j4g=function(t){return this.d4d().n4g()},protoOf(HttpClientCall).o4g=function(t,e){var n=new $bodyNullableCOROUTINE$1(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpClientCall).toString=function(){return"HttpClientCall["+this.m4g().p4g()+", "+this.d4d().q4g()+"]"},protoOf(HttpClientCall).e4d=function(t){this.b4d_1=t},protoOf(DoubleReceiveException).z5=function(){return this.r4g_1},protoOf(NoTransformationFoundException).z5=function(){return this.s4g_1},protoOf(SavedHttpCall).j4g=function(t){return ByteReadChannel_0(this.h4h_1)},protoOf(SavedHttpCall).i4g=function(){return this.i4h_1},protoOf(SavedHttpRequest).l4h=function(){return this.j4h_1},protoOf(SavedHttpRequest).r4f=function(){return this.k4h_1.r4f()},protoOf(SavedHttpRequest).wl=function(){return this.k4h_1.wl()},protoOf(SavedHttpRequest).h45=function(){return this.k4h_1.h45()},protoOf(SavedHttpRequest).m4h=function(){return this.k4h_1.m4h()},protoOf(SavedHttpRequest).p4g=function(){return this.k4h_1.p4g()},protoOf(SavedHttpResponse).l4h=function(){return this.n4h_1},protoOf(SavedHttpResponse).q4g=function(){return this.p4h_1},protoOf(SavedHttpResponse).w4h=function(){return this.q4h_1},protoOf(SavedHttpResponse).x4h=function(){return this.r4h_1},protoOf(SavedHttpResponse).y4h=function(){return this.s4h_1},protoOf(SavedHttpResponse).h45=function(){return this.t4h_1},protoOf(SavedHttpResponse).wl=function(){return this.u4h_1},protoOf(SavedHttpResponse).n4g=function(){return this.v4h_1},protoOf($saveCOROUTINE$3).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.b4h_1.d4d().n4g().s3l(VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=readBytes(t);return new SavedHttpCall(this.b4h_1.y4c_1,this.b4h_1.m4g(),this.b4h_1.d4d(),e);case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(ObservableContent$content$slambda).j4i=function(t,e){var n=this.k4i(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(ObservableContent$content$slambda).tb=function(t,e){return this.j4i(null!=t&&isInterface(t,WriterScope)?t:THROW_CCE(),e)},protoOf(ObservableContent$content$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.h4i_1.k4a(this.i4i_1.tw(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(ObservableContent$content$slambda).k4i=function(t,e){var n=new ObservableContent$content$slambda(this.h4i_1,e);return n.i4i_1=t,n},protoOf(ObservableContent).f4a=function(){return this.p4i_1.f4a()},protoOf(ObservableContent).g4a=function(){return this.p4i_1.g4a()},protoOf(ObservableContent).h45=function(){return this.p4i_1.h45()},protoOf(ObservableContent).i4a=function(){return observable(this.o4i_1,this.m4i_1,this.g4a(),this.n4i_1)},protoOf(HttpClientEngine$install$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpClientEngine$install$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(HttpClientEngine$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=new HttpRequestBuilder;e.b4k(this.u4j_1.n3y_1);var n=this.v4j_1;if(null==n){e.f4e_1=NullBody_instance;var i,r=JsType_instance,a=PrimitiveClasses_getInstance().p6();try{i=createKType(PrimitiveClasses_getInstance().p6(),arrayOf([]),!1)}catch(t){if(!(t instanceof Error))throw t;i=null}e.c4k(typeInfoImpl(r,a,i))}else if(n instanceof OutgoingContent)e.f4e_1=n,e.c4k(null);else{e.f4e_1=n;var s,o=JsType_instance,l=PrimitiveClasses_getInstance().p6();try{s=createKType(PrimitiveClasses_getInstance().p6(),arrayOf([]),!1)}catch(t){if(!(t instanceof Error))throw t;s=null}e.c4k(typeInfoImpl(o,l,s))}this.w4j_1=e,this.s4j_1.h4c_1.t4a(get_HttpRequestIsReadyForSending(),this.w4j_1);var u=this.w4j_1.n3j();if(u.h4j_1.a3u(get_CLIENT_CONFIG(),this.s4j_1.i4c_1),this.x4j_1=u,validateHeaders(this.x4j_1),checkExtensions(this.t4j_1,this.x4j_1),this.ta_1=1,(t=executeWithinCallContext(this.t4j_1,this.x4j_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.y4j_1=t,this.z4j_1=HttpClientCall_init_$Create$(this.s4j_1,this.x4j_1,this.y4j_1),this.a4k_1=this.z4j_1.d4d(),this.s4j_1.h4c_1.t4a(get_HttpResponseReceived(),this.a4k_1),get_job(this.a4k_1.wl()).ym(HttpClientEngine$install$slambda$lambda(this.s4j_1,this.a4k_1)),this.ta_1=2,(t=this.u4j_1.r3x(this.z4j_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var c=t;if(3===this.ua_1)throw c;this.ta_1=this.ua_1,this.wa_1=c}},protoOf(HttpClientEngine$install$slambda).w4c=function(t,e,n){var i=new HttpClientEngine$install$slambda(this.s4j_1,this.t4j_1,n);return i.u4j_1=t,i.v4j_1=e,i},protoOf(HttpClientEngine$executeWithinCallContext$slambda).o4k=function(t,e){var n=this.n1j(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpClientEngine$executeWithinCallContext$slambda).tb=function(t,e){return this.o4k(null!=t&&isInterface(t,CoroutineScope)?t:THROW_CCE(),e)},protoOf(HttpClientEngine$executeWithinCallContext$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,_get_closed__iwkfs1(this.l4k_1))throw new ClientEngineClosedException;if(this.ta_1=1,(t=this.l4k_1.p4k(this.m4k_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return t;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpClientEngine$executeWithinCallContext$slambda).n1j=function(t,e){var n=new HttpClientEngine$executeWithinCallContext$slambda(this.l4k_1,this.m4k_1,e);return n.n4k_1=t,n},protoOf($executeWithinCallContextCOROUTINE$4).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=createCallContext(this.y4i_1,this.z4i_1.g4j_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.a4j_1=t,this.b4j_1=this.a4j_1.ge(new KtorCallContextElement(this.a4j_1)),this.ta_1=2,(t=async(this.y4i_1,this.b4j_1,VOID,HttpClientEngine$executeWithinCallContext$slambda_0(this.y4i_1,this.z4i_1,null)).lo(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(ClientEngineClosedException).a6=function(){return this.r4k_1},protoOf(HttpClientEngineBase).wl=function(){var t=this.u4k_1;return coroutineContext$factory(),t.d2()},protoOf(HttpClientEngineBase).i15=function(){if(!this.t4k_1.atomicfu$compareAndSet(!1,!0))return Unit_instance;var t=this.wl().bb(Key_instance),e=null!=t&&isInterface(t,CompletableJob)?t:null;if(null==e)return Unit_instance;var n=e;n.qr(),n.ym(HttpClientEngineBase$close$lambda(this))},protoOf(KtorCallContextElement).c2=function(){return Companion_instance_1},protoOf(Plugin).c2=function(){return this.h4l_1},protoOf(Plugin).i4l=function(t){return new BodyProgress},protoOf(Plugin).h4f=function(t){return this.i4l(t)},protoOf(Plugin).j4l=function(t,e){handle(t,e)},protoOf(Plugin).i4f=function(t,e){return this.j4l(t instanceof BodyProgress?t:THROW_CCE(),e)},protoOf(BodyProgress$handle$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(BodyProgress$handle$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(BodyProgress$handle$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=2;var e,n=this.s4l_1.n3y_1.h4e_1.y3t(get_UploadProgressListenerAttributeKey());if(null==n)return Unit_instance;e=n,this.u4l_1=e;var i=this.t4l_1;if(this.v4l_1=new ObservableContent(i instanceof OutgoingContent?i:THROW_CCE(),this.s4l_1.n3y_1.g4e_1,this.u4l_1),this.ta_1=1,(t=this.s4l_1.r3x(this.v4l_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var r=t;if(2===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf(BodyProgress$handle$slambda).w4c=function(t,e,n){var i=new BodyProgress$handle$slambda(n);return i.s4l_1=t,i.t4l_1=e,i},protoOf(BodyProgress$handle$slambda_1).i4m=function(t,e,n){var i=this.j4m(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(BodyProgress$handle$slambda_1).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.i4m(i,e instanceof HttpResponse?e:THROW_CCE(),n)},protoOf(BodyProgress$handle$slambda_1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=2;var e,n=this.f4m_1.l4h().m4g().r4f().y3t(get_DownloadProgressListenerAttributeKey());if(null==n)return Unit_instance;if(e=n,this.g4m_1=e,this.h4m_1=withObservableDownload(this.f4m_1,this.g4m_1),this.ta_1=1,(t=this.e4m_1.r3x(this.h4m_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var i=t;if(2===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(BodyProgress$handle$slambda_1).j4m=function(t,e,n){var i=new BodyProgress$handle$slambda_1(n);return i.e4m_1=t,i.f4m_1=e,i},protoOf(RedirectResponseException).z5=function(){return this.m4m_1},protoOf(ClientRequestException).z5=function(){return this.o4m_1},protoOf(ServerResponseException).z5=function(){return this.q4m_1},protoOf(addDefaultResponseValidation$lambda$slambda).h4n=function(t,e){var n=this.i4n(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(addDefaultResponseValidation$lambda$slambda).tb=function(t,e){return this.h4n(t instanceof HttpResponse?t:THROW_CCE(),e)},protoOf(addDefaultResponseValidation$lambda$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=5,this.a4n_1=this.z4m_1.l4h().r4f().x3t(get_ExpectSuccessAttributeKey()),!this.a4n_1)return get_LOGGER().h3z("Skipping default response validation for "+this.z4m_1.l4h().m4g().p4g()),Unit_instance;if(this.b4n_1=this.z4m_1.q4g().c48_1,this.c4n_1=this.z4m_1.l4h(),this.b4n_1<300||this.c4n_1.r4f().z3t(get_ValidateMark()))return Unit_instance;if(this.ta_1=1,(t=save(this.c4n_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.d4n_1=t,this.d4n_1.r4f().a3u(get_ValidateMark(),Unit_instance),this.e4n_1=this.d4n_1,this.f4n_1=this.e4n_1.d4d(),this.ua_1=3,this.ta_1=2,(t=bodyAsText(this.f4n_1,VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.g4n_1=t,this.ua_1=5,this.ta_1=4;continue t;case 3:if(this.ua_1=5,this.wa_1 instanceof MalformedInputException){this.wa_1,this.g4n_1="<body failed decoding>",this.ta_1=4;continue t}throw this.wa_1;case 4:this.ua_1=5;var e=this.g4n_1,n=this.b4n_1,i=300<=n&&n<=399?new RedirectResponseException(this.f4n_1,e):400<=n&&n<=499?new ClientRequestException(this.f4n_1,e):500<=n&&n<=599?new ServerResponseException(this.f4n_1,e):new ResponseException(this.f4n_1,e);throw get_LOGGER().h3z("Default response validation for "+this.z4m_1.l4h().m4g().p4g()+" failed with "+i),i;case 5:throw this.wa_1}}catch(t){var r=t;if(5===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf(addDefaultResponseValidation$lambda$slambda).i4n=function(t,e){var n=new addDefaultResponseValidation$lambda$slambda(e);return n.z4m_1=t,n},protoOf(defaultTransformers$1$content$1).f4a=function(){return this.o4n_1},protoOf(defaultTransformers$1$content$1).g4a=function(){return this.p4n_1},protoOf(defaultTransformers$1$content$1).m4a=function(){return this.q4n_1},protoOf(defaultTransformers$1$content$2).g4a=function(){return this.s4n_1},protoOf(defaultTransformers$1$content$2).f4a=function(){return this.t4n_1},protoOf(defaultTransformers$1$content$2).i4a=function(){return this.u4n_1},protoOf(defaultTransformers$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(defaultTransformers$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(defaultTransformers$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,null==this.d4o_1.n3y_1.e4e_1.x1e(HttpHeaders_getInstance().f41_1)&&this.d4o_1.n3y_1.e4e_1.a3w(HttpHeaders_getInstance().f41_1,"*/*"),this.f4o_1=contentType(this.d4o_1.n3y_1);var e,n=this.e4o_1;if("string"==typeof n){var i=this.f4o_1;e=new TextContent(this.e4o_1,null==i?Text_getInstance().o40_1:i)}else e=isByteArray(n)?new defaultTransformers$1$content$1(this.f4o_1,this.e4o_1):isInterface(n,ByteReadChannel)?new defaultTransformers$1$content$2(this.d4o_1,this.f4o_1,this.e4o_1):n instanceof OutgoingContent?this.e4o_1:platformRequestDefaultTransform(this.f4o_1,this.d4o_1.n3y_1,this.e4o_1);this.g4o_1=e;var r=this.g4o_1;if(null!=(null==r?null:r.f4a())){if(this.d4o_1.n3y_1.e4e_1.c3w(HttpHeaders_getInstance().x41_1),get_LOGGER_0().h3z("Transformed with default transformers request body for "+this.d4o_1.n3y_1.c4e_1+" from "+getKClassFromExpression(this.e4o_1)),this.ta_1=1,(t=this.d4o_1.r3x(this.g4o_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var a=t;if(3===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf(defaultTransformers$slambda).w4c=function(t,e,n){var i=new defaultTransformers$slambda(n);return i.d4o_1=t,i.e4o_1=e,i},protoOf(defaultTransformers$slambda$slambda).j4i=function(t,e){var n=this.k4i(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(defaultTransformers$slambda$slambda).tb=function(t,e){return this.j4i(null!=t&&isInterface(t,WriterScope)?t:THROW_CCE(),e)},protoOf(defaultTransformers$slambda$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.ta_1=1;continue t;case 1:this.ua_1=4,this.ua_1=3,this.ta_1=2;var e=this.r4o_1.tw();if(Companion_getInstance_0(),(t=copyTo(this.p4o_1,e,new Long(-1,2147483647),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.s4o_1=Unit_instance,this.ua_1=5,this.ta_1=6;continue t;case 3:if(this.ua_1=4,this.wa_1 instanceof CancellationException){var n=this.wa_1;throw cancel(this.q4o_1,n),n}if(this.wa_1 instanceof Error){var i=this.wa_1;throw cancel_0(this.q4o_1,"Receive failed",i),i}throw this.wa_1;case 4:this.ua_1=5;var r=this.wa_1;throw complete(this.q4o_1),r;case 5:throw this.wa_1;case 6:return complete(this.q4o_1),Unit_instance}}catch(t){var a=t;if(5===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf(defaultTransformers$slambda$slambda).k4i=function(t,e){var n=new defaultTransformers$slambda$slambda(this.p4o_1,this.q4o_1,e);return n.r4o_1=t,n},protoOf(defaultTransformers$slambda_1).q4d=function(t,e,n){var i=this.r4d(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(defaultTransformers$slambda_1).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.q4d(i,e instanceof HttpResponseContainer?e:THROW_CCE(),n)},protoOf(defaultTransformers$slambda_1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=11,this.d4p_1=this.c4p_1.dd(),this.e4p_1=this.c4p_1.ed();var e=this.e4p_1;if(!isInterface(e,ByteReadChannel))return Unit_instance;if(this.f4p_1=this.b4p_1.n3y_1.d4d(),this.g4p_1=this.d4p_1.d3z_1,this.g4p_1.equals(getKClass(Unit))){if(cancel_1(this.e4p_1),this.ta_1=9,(t=this.b4p_1.r3x(new HttpResponseContainer(this.d4p_1,Unit_instance),this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.g4p_1.equals(PrimitiveClasses_getInstance().v6())){if(this.ta_1=7,(t=this.e4p_1.s3l(VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.g4p_1.equals(getKClass(ByteReadPacket))||this.g4p_1.equals(getKClass(Input))){if(this.ta_1=5,(t=this.e4p_1.s3l(VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.g4p_1.equals(PrimitiveClasses_getInstance().d7())){if(this.ta_1=3,(t=toByteArray(this.e4p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.g4p_1.equals(getKClass(ByteReadChannel))){this.i4p_1=Job(this.f4p_1.wl().bb(Key_instance));var n=this.f4p_1.wl(),i=writer(this.b4p_1,n,VOID,defaultTransformers$slambda$slambda_0(this.e4p_1,this.f4p_1,null));if(i.ym(defaultTransformers$slambda$lambda(this.i4p_1)),this.j4p_1=i.tw(),this.ta_1=2,(t=this.b4p_1.r3x(new HttpResponseContainer(this.d4p_1,this.j4p_1),this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.g4p_1.equals(getKClass(HttpStatusCode))){if(cancel_1(this.e4p_1),this.ta_1=1,(t=this.b4p_1.r3x(new HttpResponseContainer(this.d4p_1,this.f4p_1.q4g()),this))===get_COROUTINE_SUSPENDED())return t;continue t}this.h4p_1=null,this.ta_1=10;continue t;case 1:case 2:case 4:case 6:case 8:case 9:this.h4p_1=t,this.ta_1=10;continue t;case 3:if(this.k4p_1=t,this.l4p_1=contentLength(this.f4p_1),this.m4p_1=!PlatformUtils_getInstance().j3v_1&&null==this.f4p_1.h45().x1e(HttpHeaders_getInstance().s41_1),this.n4p_1=!this.b4p_1.n3y_1.m4g().m4h().equals(Companion_getInstance_1().n45_1),this.m4p_1&&this.n4p_1&&null!=this.l4p_1&&this.l4p_1.t8(new Long(0,0))>0&&this.k4p_1.length!==this.l4p_1.y8()){var r="Expected "+toString_0(this.l4p_1)+", actual "+this.k4p_1.length;throw IllegalStateException_init_$Create$(toString(r))}if(this.ta_1=4,(t=this.b4p_1.r3x(new HttpResponseContainer(this.d4p_1,this.k4p_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(this.o4p_1=t,this.p4p_1=new HttpResponseContainer(this.d4p_1,this.o4p_1),this.ta_1=6,(t=this.b4p_1.r3x(this.p4p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:if(this.q4p_1=t,this.r4p_1=this.q4p_1.w3p(),this.s4p_1=toInt(this.r4p_1),this.t4p_1=new HttpResponseContainer(this.d4p_1,this.s4p_1),this.ta_1=8,(t=this.b4p_1.r3x(this.t4p_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 10:return null!=this.h4p_1&&get_LOGGER_0().h3z("Transformed with default transformers response body for "+this.b4p_1.n3y_1.m4g().p4g()+" to "+this.d4p_1.d3z_1),Unit_instance;case 11:throw this.wa_1}}catch(t){var a=t;if(11===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf(defaultTransformers$slambda_1).r4d=function(t,e,n){var i=new defaultTransformers$slambda_1(n);return i.b4p_1=t,i.c4p_1=e,i},protoOf(HttpCallValidator$Companion$install$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpCallValidator$Companion$install$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(HttpCallValidator$Companion$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.ua_1=3;var e=get_ExpectSuccessAttributeKey();if(this.g4q_1.n3y_1.h4e_1.c3u(e,HttpCallValidator$Companion$install$slambda$lambda(this.f4q_1)),this.ta_1=1,(t=this.g4q_1.r3x(this.h4q_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.ua_1=5,this.ta_1=2;continue t;case 2:return this.ua_1=5,Unit_instance;case 3:if(this.ua_1=5,this.wa_1 instanceof Error){if(this.i4q_1=this.wa_1,this.j4q_1=unwrapCancellationException(this.i4q_1),this.ta_1=4,(t=processException(this.f4q_1,this.j4q_1,HttpRequest(this.g4q_1.n3y_1),this))===get_COROUTINE_SUSPENDED())return t;continue t}throw this.wa_1;case 4:throw this.j4q_1;case 5:throw this.wa_1}}catch(t){var n=t;if(5===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(HttpCallValidator$Companion$install$slambda).w4c=function(t,e,n){var i=new HttpCallValidator$Companion$install$slambda(this.f4q_1,n);return i.g4q_1=t,i.h4q_1=e,i},protoOf(HttpCallValidator$Companion$install$slambda_1).q4d=function(t,e,n){var i=this.r4d(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpCallValidator$Companion$install$slambda_1).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.q4d(i,e instanceof HttpResponseContainer?e:THROW_CCE(),n)},protoOf(HttpCallValidator$Companion$install$slambda_1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=5,this.ua_1=3,this.ta_1=1,(t=this.t4q_1.r3x(this.u4q_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.ua_1=5,this.ta_1=2;continue t;case 2:return this.ua_1=5,Unit_instance;case 3:if(this.ua_1=5,this.wa_1 instanceof Error){if(this.v4q_1=this.wa_1,this.w4q_1=unwrapCancellationException(this.v4q_1),this.ta_1=4,(t=processException(this.s4q_1,this.w4q_1,this.t4q_1.n3y_1.m4g(),this))===get_COROUTINE_SUSPENDED())return t;continue t}throw this.wa_1;case 4:throw this.w4q_1;case 5:throw this.wa_1}}catch(t){var e=t;if(5===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpCallValidator$Companion$install$slambda_1).r4d=function(t,e,n){var i=new HttpCallValidator$Companion$install$slambda_1(this.s4q_1,n);return i.t4q_1=t,i.u4q_1=e,i},protoOf(HttpCallValidator$Companion$install$slambda_3).j4r=function(t,e,n){var i=this.k4r(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpCallValidator$Companion$install$slambda_3).x4c=function(t,e,n){var i=null!=t&&isInterface(t,Sender)?t:THROW_CCE();return this.j4r(i,e instanceof HttpRequestBuilder?e:THROW_CCE(),n)},protoOf(HttpCallValidator$Companion$install$slambda_3).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.g4r_1.f4f(this.h4r_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.i4r_1=t,this.ta_1=2,(t=validateResponse(this.f4r_1,this.i4r_1.d4d(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return this.i4r_1;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpCallValidator$Companion$install$slambda_3).k4r=function(t,e,n){var i=new HttpCallValidator$Companion$install$slambda_3(this.f4r_1,n);return i.g4r_1=t,i.h4r_1=e,i},protoOf(Config).m4n=function(t){this.j4n_1.p(t)},protoOf(Companion_1).c2=function(){return this.o4s_1},protoOf(Companion_1).p4s=function(t){var e=new Config;t(e);var n=e;return new HttpCallValidator(reversed(n.j4n_1),reversed(n.k4n_1),n.l4n_1)},protoOf(Companion_1).h4f=function(t){return this.p4s(t)},protoOf(Companion_1).q4s=function(t,e){var n=Phases_getInstance().z4k_1;e.b4c_1.r3y(n,HttpCallValidator$Companion$install$slambda_0(t,null));var i=new PipelinePhase("BeforeReceive");e.c4c_1.q3y(Phases_getInstance_1().a4f_1,i),e.c4c_1.r3y(i,HttpCallValidator$Companion$install$slambda_2(t,null)),plugin(e,Plugin_getInstance_3()).t4s(HttpCallValidator$Companion$install$slambda_4(t,null))},protoOf(Companion_1).i4f=function(t,e){return this.q4s(t instanceof HttpCallValidator?t:THROW_CCE(),e)},protoOf($validateResponseCOROUTINE$5).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,get_LOGGER_1().h3z("Validating response for request "+this.u4r_1.l4h().m4g().p4g()),this.v4r_1=this.t4r_1.u4p_1,this.w4r_1=this.v4r_1.s(),this.ta_1=1;continue t;case 1:if(!this.w4r_1.t()){this.ta_1=3;continue t}if(this.x4r_1=this.w4r_1.u(),this.ta_1=2,(t=this.x4r_1(this.u4r_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.ta_1=1;continue t;case 3:return Unit_instance;case 4:throw this.wa_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($processExceptionCOROUTINE$6).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=6,get_LOGGER_1().h3z("Processing exception "+this.h4s_1+" for request "+this.i4s_1.p4g()),this.j4s_1=this.g4s_1.v4p_1,this.k4s_1=this.j4s_1.s(),this.ta_1=1;continue t;case 1:if(!this.k4s_1.t()){this.ta_1=5;continue t}if(this.l4s_1=this.k4s_1.u(),this.m4s_1=this.l4s_1,this.n4s_1=this.m4s_1,this.n4s_1 instanceof ExceptionHandlerWrapper){if(this.ta_1=3,(t=this.m4s_1.v4s_1(this.h4s_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.n4s_1 instanceof RequestExceptionHandlerWrapper){if(this.ta_1=2,(t=this.m4s_1.u4s_1(this.h4s_1,this.i4s_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=4;continue t;case 2:case 3:this.ta_1=4;continue t;case 4:this.ta_1=1;continue t;case 5:return Unit_instance;case 6:throw this.wa_1}}catch(t){var e=t;if(6===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpRequest$1).l4h=function(){throw IllegalStateException_init_$Create$(toString("Call is not initialized"))},protoOf(HttpRequest$1).m4h=function(){return this.w4s_1},protoOf(HttpRequest$1).p4g=function(){return this.x4s_1},protoOf(HttpRequest$1).r4f=function(){return this.y4s_1},protoOf(HttpRequest$1).h45=function(){return this.z4s_1},protoOf(HttpPlainText$Plugin$install$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpPlainText$Plugin$install$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(HttpPlainText$Plugin$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.j4t_1.q4t(this.k4t_1.n3y_1),"string"!=typeof this.l4t_1)return Unit_instance;if(this.m4t_1=contentType(this.k4t_1.n3y_1),null!=this.m4t_1&&this.m4t_1.y40_1!==Text_getInstance().o40_1.y40_1)return Unit_instance;if(this.ta_1=1,(t=this.k4t_1.r3x(wrapContent(this.j4t_1,this.k4t_1.n3y_1,this.l4t_1,this.m4t_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpPlainText$Plugin$install$slambda).w4c=function(t,e,n){var i=new HttpPlainText$Plugin$install$slambda(this.j4t_1,n);return i.k4t_1=t,i.l4t_1=e,i},protoOf(HttpPlainText$Plugin$install$slambda_1).q4d=function(t,e,n){var i=this.r4d(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpPlainText$Plugin$install$slambda_1).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.q4d(i,e instanceof HttpResponseContainer?e:THROW_CCE(),n)},protoOf(HttpPlainText$Plugin$install$slambda_1).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:var e;if(this.ua_1=3,this.c4u_1=this.b4u_1.dd(),this.d4u_1=this.b4u_1.ed(),this.c4u_1.d3z_1.equals(PrimitiveClasses_getInstance().z6())){var n=this.d4u_1;e=!isInterface(n,ByteReadChannel)}else e=!0;if(e)return Unit_instance;if(this.ta_1=1,(t=this.d4u_1.s3l(VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.e4u_1=t,this.f4u_1=this.z4t_1.g4u(this.a4u_1.n3y_1,this.e4u_1),this.ta_1=2,(t=this.a4u_1.r3x(new HttpResponseContainer(this.c4u_1,this.f4u_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(HttpPlainText$Plugin$install$slambda_1).r4d=function(t,e,n){var i=new HttpPlainText$Plugin$install$slambda_1(this.z4t_1,n);return i.a4u_1=t,i.b4u_1=e,i},protoOf(Plugin_0).c2=function(){return this.l4u_1},protoOf(Plugin_0).m4u=function(t){var e=new Config_0;t(e);var n=e;return new HttpPlainText(n.h4u_1,n.i4u_1,n.j4u_1,n.k4u_1)},protoOf(Plugin_0).h4f=function(t){return this.m4u(t)},protoOf(Plugin_0).n4u=function(t,e){var n=Phases_getInstance().c4l_1;e.b4c_1.r3y(n,HttpPlainText$Plugin$install$slambda_0(t,null));var i=Phases_getInstance_1().c4f_1;e.c4c_1.r3y(i,HttpPlainText$Plugin$install$slambda_2(t,null))},protoOf(Plugin_0).i4f=function(t,e){return this.n4u(t instanceof HttpPlainText?t:THROW_CCE(),e)},protoOf(sam$kotlin_Comparator$0).e8=function(t,e){return this.o4u_1(t,e)},protoOf(sam$kotlin_Comparator$0).compare=function(t,e){return this.e8(t,e)},protoOf(HttpPlainText).g4u=function(t,e){var n=charset_0(t.d4d()),i=null==n?this.n4t_1:n;return get_LOGGER_2().h3z("Reading response body for "+t.m4g().p4g()+" as String with charset "+i),readText(e,i)},protoOf(HttpPlainText).q4t=function(t){if(null!=t.e4e_1.x1e(HttpHeaders_getInstance().g41_1))return Unit_instance;get_LOGGER_2().h3z("Adding Accept-Charset="+this.p4t_1+" to "+t.c4e_1),t.e4e_1.y3v(HttpHeaders_getInstance().g41_1,this.p4t_1)},protoOf(HttpRedirect$Plugin$install$slambda).j4r=function(t,e,n){var i=this.k4r(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpRedirect$Plugin$install$slambda).x4c=function(t,e,n){var i=null!=t&&isInterface(t,Sender)?t:THROW_CCE();return this.j4r(i,e instanceof HttpRequestBuilder?e:THROW_CCE(),n)},protoOf(HttpRedirect$Plugin$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,(t=this.s4v_1.f4f(this.t4v_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.u4v_1=t,this.q4v_1.v4v_1&&!get_ALLOWED_FOR_REDIRECT().x(this.u4v_1.m4g().m4h()))return this.u4v_1;if(this.ta_1=2,(t=handleCall(this.s4v_1,Plugin_getInstance_1(),this.t4v_1,this.u4v_1,this.q4v_1.w4v_1,this.r4v_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpRedirect$Plugin$install$slambda).k4r=function(t,e,n){var i=new HttpRedirect$Plugin$install$slambda(this.q4v_1,this.r4v_1,n);return i.s4v_1=t,i.t4v_1=e,i},protoOf($handleCallCOROUTINE$7).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,!isRedirect(this.a4v_1.d4d().q4g()))return this.a4v_1;this.d4v_1=this.a4v_1,this.e4v_1=this.z4u_1,this.f4v_1=this.a4v_1.m4g().p4g().u48_1,this.g4v_1=get_authority(this.a4v_1.m4g().p4g()),this.ta_1=1;continue t;case 1:this.c4v_1.h4c_1.t4a(this.x4u_1.y4v_1,this.d4v_1.d4d()),this.h4v_1=this.d4v_1.d4d().h45().x1e(HttpHeaders_getInstance().t42_1),get_LOGGER_3().h3z("Received redirect response to "+this.h4v_1+" for request "+this.z4u_1.c4e_1);var e=new HttpRequestBuilder;e.b4k(this.e4v_1),e.c4e_1.r48_1.v();var n=this.h4v_1;if(null==n||takeFrom(e.c4e_1,n),!this.b4v_1&&isSecure(this.f4v_1)&&!isSecure(e.c4e_1.i48_1))return get_LOGGER_3().h3z("Can not redirect "+this.z4u_1.c4e_1+" because of security downgrade"),this.d4v_1;if(this.g4v_1!==get_authority_0(e.c4e_1)&&(e.e4e_1.c3w(HttpHeaders_getInstance().o41_1),get_LOGGER_3().h3z("Removing Authorization header from redirect for "+this.z4u_1.c4e_1)),this.e4v_1=e,this.ta_1=2,(t=this.y4u_1.f4f(this.e4v_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(this.d4v_1=t,!isRedirect(this.d4v_1.d4d().q4g()))return this.d4v_1;this.ta_1=1;continue t;case 3:throw this.wa_1;case 4:return Unit_instance}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(Plugin_1).c2=function(){return this.x4v_1},protoOf(Plugin_1).b4w=function(t){var e=new Config_1;t(e);var n=e;return new HttpRedirect(n.z4v_1,n.a4w_1)},protoOf(Plugin_1).h4f=function(t){return this.b4w(t)},protoOf(Plugin_1).c4w=function(t,e){plugin(e,Plugin_getInstance_3()).t4s(HttpRedirect$Plugin$install$slambda_0(t,e,null))},protoOf(Plugin_1).i4f=function(t,e){return this.c4w(t instanceof HttpRedirect?t:THROW_CCE(),e)},protoOf(HttpRequestLifecycle$Plugin$install$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpRequestLifecycle$Plugin$install$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(HttpRequestLifecycle$Plugin$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=6,this.o4w_1=SupervisorJob(this.m4w_1.n3y_1.g4e_1),attachToClientEngineJob(this.o4w_1,ensureNotNull(this.l4w_1.a4c_1.bb(Key_instance))),this.ta_1=1;continue t;case 1:if(this.ua_1=4,this.ua_1=3,this.m4w_1.n3y_1.g4e_1=this.o4w_1,this.ta_1=2,(t=this.m4w_1.s3x(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.p4w_1=Unit_instance,this.ua_1=6,this.ta_1=5;continue t;case 3:if(this.ua_1=4,this.wa_1 instanceof Error){var e=this.wa_1;throw this.o4w_1.pr(e),e}throw this.wa_1;case 4:this.ua_1=6;var n=this.wa_1;throw this.o4w_1.qr(),n;case 5:return this.o4w_1.qr(),Unit_instance;case 6:throw this.wa_1}}catch(t){var i=t;if(6===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(HttpRequestLifecycle$Plugin$install$slambda).w4c=function(t,e,n){var i=new HttpRequestLifecycle$Plugin$install$slambda(this.l4w_1,n);return i.m4w_1=t,i.n4w_1=e,i},protoOf(Plugin_2).c2=function(){return this.q4w_1},protoOf(Plugin_2).i4l=function(t){return new HttpRequestLifecycle},protoOf(Plugin_2).h4f=function(t){return this.i4l(t)},protoOf(Plugin_2).r4w=function(t,e){var n=Phases_getInstance().z4k_1;e.b4c_1.r3y(n,HttpRequestLifecycle$Plugin$install$slambda_0(e,null))},protoOf(Plugin_2).i4f=function(t,e){return this.r4w(t instanceof HttpRequestLifecycle?t:THROW_CCE(),e)},protoOf(HttpSend$Plugin$install$slambda).v4c=function(t,e,n){var i=this.w4c(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpSend$Plugin$install$slambda).x4c=function(t,e,n){var i=t instanceof PipelineContext?t:THROW_CCE();return this.v4c(i,null!=e?e:THROW_CCE(),n)},protoOf(HttpSend$Plugin$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,!(this.d4x_1 instanceof OutgoingContent)){var e=trimMargin("\n|Fail to prepare request body for sending. \n|The body type is: "+getKClassFromExpression(this.d4x_1)+", with Content-Type: "+contentType(this.c4x_1.n3y_1)+".\n|\n|If you expect serialized body, please check that you have installed the corresponding plugin(like `ContentNegotiation`) and set `Content-Type` header.");throw IllegalStateException_init_$Create$(toString(e))}var n=this.c4x_1.n3y_1,i=this.d4x_1;if(null==i){n.f4e_1=NullBody_instance;var r,a=JsType_instance,s=getKClass(OutgoingContent);try{r=createKType(getKClass(OutgoingContent),arrayOf([]),!1)}catch(t){if(!(t instanceof Error))throw t;r=null}n.c4k(typeInfoImpl(a,s,r))}else if(i instanceof OutgoingContent)n.f4e_1=i,n.c4k(null);else{n.f4e_1=i;var o,l=JsType_instance,u=getKClass(OutgoingContent);try{o=createKType(getKClass(OutgoingContent),arrayOf([]),!1)}catch(t){if(!(t instanceof Error))throw t;o=null}n.c4k(typeInfoImpl(l,u,o))}this.e4x_1=new DefaultSender(this.a4x_1.r4s_1,this.b4x_1),this.f4x_1=this.e4x_1;for(var c=downTo(get_lastIndex(this.a4x_1.s4s_1),0).s();c.t();){var h=c.u(),f=this.a4x_1.s4s_1.d1(h);this.f4x_1=new InterceptedSender(f,this.f4x_1)}if(this.ta_1=1,(t=this.f4x_1.f4f(this.c4x_1.n3y_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.g4x_1=t,this.ta_1=2,(t=this.c4x_1.r3x(this.g4x_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return Unit_instance;case 3:throw this.wa_1}}catch(t){var _=t;if(3===this.ua_1)throw _;this.ta_1=this.ua_1,this.wa_1=_}},protoOf(HttpSend$Plugin$install$slambda).w4c=function(t,e,n){var i=new HttpSend$Plugin$install$slambda(this.a4x_1,this.b4x_1,n);return i.c4x_1=t,i.d4x_1=e,i},protoOf($executeCOROUTINE$8).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=2;var e=this.p4x_1.u4x_1;if(null==e||cancel(e),this.p4x_1.t4x_1>=this.p4x_1.r4x_1)throw new SendCountExceedException("Max send count "+this.p4x_1.r4x_1+" exceeded. Consider increasing the property maxSendCount if more is required.");var n=this.p4x_1;if(n.t4x_1=n.t4x_1+1|0,this.ta_1=1,(t=this.p4x_1.s4x_1.d4c_1.m3y(this.q4x_1,this.q4x_1.f4e_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var i=t instanceof HttpClientCall?t:null;if(null==i){var r="Failed to execute send pipeline. Expected [HttpClientCall], but received "+toString(t);throw IllegalStateException_init_$Create$(toString(r))}var a=i;return this.p4x_1.u4x_1=a,a;case 2:throw this.wa_1}}catch(t){var s=t;if(2===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf(Plugin_3).c2=function(){return this.w4x_1},protoOf(Plugin_3).x4x=function(t){var e=new Config_2;return t(e),new HttpSend(e.v4x_1)},protoOf(Plugin_3).h4f=function(t){return this.x4x(t)},protoOf(Plugin_3).y4x=function(t,e){var n=Phases_getInstance().d4l_1;e.b4c_1.r3y(n,HttpSend$Plugin$install$slambda_0(t,e,null))},protoOf(Plugin_3).i4f=function(t,e){return this.y4x(t instanceof HttpSend?t:THROW_CCE(),e)},protoOf(InterceptedSender).f4f=function(t,e){return this.z4x_1(this.a4y_1,t,e)},protoOf(DefaultSender).f4f=function(t,e){var n=new $executeCOROUTINE$8(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpSend).t4s=function(t){this.s4s_1.p(t)},protoOf(HttpTimeout$Plugin$install$slambda$slambda).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpTimeout$Plugin$install$slambda$slambda).tb=function(t,e){return this.m1j(null!=t&&isInterface(t,CoroutineScope)?t:THROW_CCE(),e)},protoOf(HttpTimeout$Plugin$install$slambda$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=delay(this.q4y_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var e=HttpRequestTimeoutException_init_$Create$(this.r4y_1);return get_LOGGER_5().h3z("Request timeout: "+this.r4y_1.c4e_1),cancel_2(this.s4y_1,ensureNotNull(e.message),e),Unit_instance;case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(HttpTimeout$Plugin$install$slambda$slambda).n1j=function(t,e){var n=new HttpTimeout$Plugin$install$slambda$slambda(this.q4y_1,this.r4y_1,this.s4y_1,e);return n.t4y_1=t,n},protoOf(HttpTimeout$Plugin$install$slambda).j4r=function(t,e,n){var i=this.k4r(t,e,n);return i.va_1=Unit_instance,i.wa_1=null,i.gb()},protoOf(HttpTimeout$Plugin$install$slambda).x4c=function(t,e,n){var i=null!=t&&isInterface(t,Sender)?t:THROW_CCE();return this.j4r(i,e instanceof HttpRequestBuilder?e:THROW_CCE(),n)},protoOf(HttpTimeout$Plugin$install$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.g4z_1=isWebsocket(this.f4z_1.c4e_1.i48_1),this.g4z_1||this.f4z_1.f4e_1 instanceof ClientUpgradeContent){if(this.ta_1=3,(t=this.e4z_1.f4f(this.f4z_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=1;continue t;case 1:this.h4z_1=this.f4z_1.i4z(Plugin_getInstance_4()),null==this.h4z_1&&hasNotNullTimeouts(this.c4z_1)&&(this.h4z_1=HttpTimeoutCapabilityConfiguration_init_$Create$(),this.f4z_1.j4z(Plugin_getInstance_4(),this.h4z_1));var e=this.h4z_1;if(null==e);else e:do{var n=e.k4z();e.f4y(null==n?this.c4z_1.m4z_1:n);var i=e.o4z();e.g4y(null==i?this.c4z_1.n4z_1:i);var r=e.p4z();e.e4y(null==r?this.c4z_1.l4z_1:r);var a=e.p4z(),s=null==a?this.c4z_1.l4z_1:a;if(null==s||equals(s,new Long(-1,2147483647)))break e;var o=this.f4z_1.g4e_1,l=launch(this.d4z_1,VOID,VOID,HttpTimeout$Plugin$install$slambda$slambda_0(s,this.f4z_1,o,null));this.f4z_1.g4e_1.ym(HttpTimeout$Plugin$install$slambda$lambda(l))}while(0);if(this.ta_1=2,(t=this.e4z_1.f4f(this.f4z_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:case 3:return t;case 4:throw this.wa_1}}catch(t){var u=t;if(4===this.ua_1)throw u;this.ta_1=this.ua_1,this.wa_1=u}},protoOf(HttpTimeout$Plugin$install$slambda).k4r=function(t,e,n){var i=new HttpTimeout$Plugin$install$slambda(this.c4z_1,this.d4z_1,n);return i.e4z_1=t,i.f4z_1=e,i},protoOf(HttpTimeoutCapabilityConfiguration).e4y=function(t){this.b4y_1=checkTimeoutValue(this,t)},protoOf(HttpTimeoutCapabilityConfiguration).p4z=function(){return this.b4y_1},protoOf(HttpTimeoutCapabilityConfiguration).f4y=function(t){this.c4y_1=checkTimeoutValue(this,t)},protoOf(HttpTimeoutCapabilityConfiguration).k4z=function(){return this.c4y_1},protoOf(HttpTimeoutCapabilityConfiguration).g4y=function(t){this.d4y_1=checkTimeoutValue(this,t)},protoOf(HttpTimeoutCapabilityConfiguration).o4z=function(){return this.d4y_1},protoOf(HttpTimeoutCapabilityConfiguration).n3j=function(){return new HttpTimeout(this.p4z(),this.k4z(),this.o4z())},protoOf(HttpTimeoutCapabilityConfiguration).equals=function(t){return!!(this===t||null!=t&&getKClassFromExpression(this).equals(getKClassFromExpression(t))&&(t instanceof HttpTimeoutCapabilityConfiguration||THROW_CCE(),equals(this.b4y_1,t.b4y_1)&&equals(this.c4y_1,t.c4y_1)&&equals(this.d4y_1,t.d4y_1)))},protoOf(HttpTimeoutCapabilityConfiguration).hashCode=function(){var t=this.b4y_1,e=null==t?null:t.hashCode(),n=null==e?0:e,i=imul(31,n),r=this.c4y_1,a=null==r?null:r.hashCode(),s=imul(31,n=i+(null==a?0:a)|0),o=this.d4y_1,l=null==o?null:o.hashCode();return s+(null==l?0:l)|0},protoOf(Plugin_4).c2=function(){return this.q4z_1},protoOf(Plugin_4).s4z=function(t){var e=HttpTimeoutCapabilityConfiguration_init_$Create$();return t(e),e.n3j()},protoOf(Plugin_4).h4f=function(t){return this.s4z(t)},protoOf(Plugin_4).t4z=function(t,e){plugin(e,Plugin_getInstance_3()).t4s(HttpTimeout$Plugin$install$slambda_0(t,e,null))},protoOf(Plugin_4).i4f=function(t,e){return this.t4z(t instanceof HttpTimeout?t:THROW_CCE(),e)},protoOf(DelegatedRequest).l4h=function(){return this.u4z_1},protoOf(DelegatedRequest).r4f=function(){return this.v4z_1.r4f()},protoOf(DelegatedRequest).wl=function(){return this.v4z_1.wl()},protoOf(DelegatedRequest).h45=function(){return this.v4z_1.h45()},protoOf(DelegatedRequest).m4h=function(){return this.v4z_1.m4h()},protoOf(DelegatedRequest).p4g=function(){return this.v4z_1.p4g()},protoOf(DelegatedResponse).l4h=function(){return this.w4z_1},protoOf(DelegatedResponse).n4g=function(){return this.x4z_1},protoOf(DelegatedResponse).wl=function(){return this.z4z_1},protoOf(DelegatedResponse).q4g=function(){return this.y4z_1.q4g()},protoOf(DelegatedResponse).w4h=function(){return this.y4z_1.w4h()},protoOf(DelegatedResponse).x4h=function(){return this.y4z_1.x4h()},protoOf(DelegatedResponse).y4h=function(){return this.y4z_1.y4h()},protoOf(DelegatedResponse).h45=function(){return this.y4z_1.h45()},protoOf(WebSocketCapability).toString=function(){return"WebSocketCapability"},protoOf(DefaultHttpRequest).l4h=function(){return this.a50_1},protoOf(DefaultHttpRequest).wl=function(){return this.l4h().wl()},protoOf(DefaultHttpRequest).m4h=function(){return this.b50_1},protoOf(DefaultHttpRequest).p4g=function(){return this.c50_1},protoOf(DefaultHttpRequest).h45=function(){return this.e50_1},protoOf(DefaultHttpRequest).r4f=function(){return this.f50_1},protoOf(HttpRequestBuilder).h45=function(){return this.e4e_1},protoOf(HttpRequestBuilder).c4k=function(t){null!=t?this.h4e_1.a3u(get_BodyTypeAttributeKey(),t):this.h4e_1.b3u(get_BodyTypeAttributeKey())},protoOf(HttpRequestBuilder).g50=function(){return this.h4e_1.y3t(get_BodyTypeAttributeKey())},protoOf(HttpRequestBuilder).n3j=function(){var t=this.c4e_1.n3j(),e=this.d4e_1,n=this.e4e_1.n3j(),i=this.f4e_1,r=i instanceof OutgoingContent?i:null;if(null==r){var a="No request transformation found: "+toString(this.f4e_1);throw IllegalStateException_init_$Create$(toString(a))}return new HttpRequestData(t,e,n,r,this.g4e_1,this.h4e_1)},protoOf(HttpRequestBuilder).b4k=function(t){return this.g4e_1=t.g4e_1,this.h50(t)},protoOf(HttpRequestBuilder).h50=function(t){return this.d4e_1=t.d4e_1,this.f4e_1=t.f4e_1,this.c4k(t.g50()),takeFrom_0(this.c4e_1,t.c4e_1),this.c4e_1.p48_1=this.c4e_1.p48_1,appendAll(this.e4e_1,t.e4e_1),putAll(this.h4e_1,t.h4e_1),this},protoOf(HttpRequestBuilder).j4z=function(t,e){var n=get_ENGINE_CAPABILITIES_KEY();this.h4e_1.c3u(n,HttpRequestBuilder$setCapability$lambda).a2(t,e)},protoOf(HttpRequestBuilder).i4z=function(t){var e=this.h4e_1.y3t(get_ENGINE_CAPABILITIES_KEY()),n=null==e?null:e.k2(t);return null==n||null!=n?n:THROW_CCE()},protoOf(HttpRequestData).toString=function(){return"HttpRequestData(url="+this.c4j_1+", method="+this.d4j_1+")"},protoOf(HttpResponseData).toString=function(){return"HttpResponseData=(statusCode="+this.k4f_1+")"},protoOf(HttpRequestPipeline).l3y=function(){return this.p50_1},protoOf(HttpSendPipeline).l3y=function(){return this.x50_1},protoOf(DefaultHttpResponse).l4h=function(){return this.y50_1},protoOf(DefaultHttpResponse).wl=function(){return this.z50_1},protoOf(DefaultHttpResponse).q4g=function(){return this.a51_1},protoOf(DefaultHttpResponse).w4h=function(){return this.b51_1},protoOf(DefaultHttpResponse).x4h=function(){return this.c51_1},protoOf(DefaultHttpResponse).y4h=function(){return this.d51_1},protoOf(DefaultHttpResponse).n4g=function(){return this.e51_1},protoOf(DefaultHttpResponse).h45=function(){return this.f51_1},protoOf(HttpResponse).toString=function(){return"HttpResponse["+get_request(this).p4g()+", "+this.q4g()+"]"},protoOf($bodyAsTextCOROUTINE$13).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=2;var e=charset_0(this.o51_1);this.q51_1=null==e?this.p51_1:e,this.r51_1=this.q51_1.i3q(),this.s51_1=this.o51_1,this.ta_1=1;var n,i=this.s51_1.l4h(),r=JsType_instance,a=getKClass(ByteReadPacket);try{n=createKType(getKClass(ByteReadPacket),arrayOf([]),!1)}catch(t){if(!(t instanceof Error))throw t;n=null}if((t=i.o4g(typeInfoImpl(r,a,n),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:var s=t instanceof ByteReadPacket?t:THROW_CCE();return decode(this.r51_1,s);case 2:throw this.wa_1}}catch(t){var o=t;if(2===this.ua_1)throw o;this.ta_1=this.ua_1,this.wa_1=o}},protoOf(HttpResponsePipeline).l3y=function(){return this.a52_1},protoOf(HttpReceivePipeline).l3y=function(){return this.i52_1},protoOf(HttpResponseContainer).dd=function(){return this.k4g_1},protoOf(HttpResponseContainer).ed=function(){return this.l4g_1},protoOf(HttpResponseContainer).toString=function(){return"HttpResponseContainer(expectedType="+this.k4g_1+", response="+toString(this.l4g_1)+")"},protoOf(HttpResponseContainer).hashCode=function(){var t=this.k4g_1.hashCode();return imul(t,31)+hashCode(this.l4g_1)|0},protoOf(HttpResponseContainer).equals=function(t){if(this===t)return!0;if(!(t instanceof HttpResponseContainer))return!1;var e=t instanceof HttpResponseContainer?t:THROW_CCE();return!!this.k4g_1.equals(e.k4g_1)&&!!equals(this.l4g_1,e.l4g_1)},protoOf(HttpStatement$execute$slambda).u52=function(t,e){var n=this.i4n(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpStatement$execute$slambda).tb=function(t,e){return this.u52(t instanceof HttpResponse?t:THROW_CCE(),e)},protoOf(HttpStatement$execute$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=save(this.t52_1.l4h(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return t.d4d();case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(HttpStatement$execute$slambda).i4n=function(t,e){var n=new HttpStatement$execute$slambda(e);return n.t52_1=t,n},protoOf($executeCOROUTINE$14).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=13,this.ta_1=1;continue t;case 1:if(this.ua_1=12,this.ta_1=2,(t=this.d53_1.k53(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:this.g53_1=t,this.ta_1=3;continue t;case 3:this.ta_1=4;continue t;case 4:if(this.ua_1=10,this.ta_1=5,(t=this.e53_1(this.g53_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:this.h53_1=t,this.ta_1=6;continue t;case 6:if(this.i53_1=this.h53_1,this.ta_1=7,(t=this.d53_1.l53(this.g53_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:return this.i53_1;case 8:if(this.ta_1=9,(t=this.d53_1.l53(this.g53_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 9:this.f53_1=Unit_instance,this.ua_1=13,this.ta_1=15;continue t;case 10:if(this.ua_1=12,this.j53_1=this.wa_1,this.ta_1=11,(t=this.d53_1.l53(this.g53_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 11:throw this.j53_1;case 12:if(this.ua_1=13,this.wa_1 instanceof CancellationException)throw unwrapCancellationException(this.wa_1);throw this.wa_1;case 13:throw this.wa_1;case 14:this.ua_1=13,this.ta_1=15;continue t;case 15:return this.f53_1}}catch(t){var e=t;if(13===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($executeUnsafeCOROUTINE$15).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.ta_1=1;continue t;case 1:if(this.ua_1=3,this.w53_1=(new HttpRequestBuilder).b4k(this.u53_1.j52_1),this.ta_1=2,(t=this.u53_1.k52_1.f4f(this.w53_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:return t.d4d();case 3:if(this.ua_1=4,this.wa_1 instanceof CancellationException)throw unwrapCancellationException(this.wa_1);throw this.wa_1;case 4:throw this.wa_1;case 5:this.ua_1=4,this.ta_1=6;continue t;case 6:return this.v53_1}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf($cleanupCOROUTINE$16).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4;var e=ensureNotNull(this.g54_1.wl().bb(Key_instance));this.h54_1=isInterface(e,CompletableJob)?e:THROW_CCE(),this.i54_1=this.h54_1,this.j54_1=this.i54_1,this.j54_1.qr(),this.ua_1=1,cancel_1(this.g54_1.n4g()),this.ua_1=4,this.ta_1=2;continue t;case 1:if(this.ua_1=4,this.wa_1 instanceof Error){this.k54_1=this.wa_1,this.ta_1=2;continue t}throw this.wa_1;case 2:if(this.ua_1=4,this.ta_1=3,(t=this.j54_1.rr(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:return Unit_instance;case 4:throw this.wa_1}}catch(t){var n=t;if(4===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(HttpStatement).l54=function(t,e){var n=new $executeCOROUTINE$14(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpStatement).m54=function(t){return this.l54(HttpStatement$execute$slambda_0(null),t)},protoOf(HttpStatement).k53=function(t){var e=new $executeUnsafeCOROUTINE$15(this,t);return e.va_1=Unit_instance,e.wa_1=null,e.gb()},protoOf(HttpStatement).l53=function(t,e){var n=new $cleanupCOROUTINE$16(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(HttpStatement).toString=function(){return"HttpStatement["+this.j52_1.c4e_1+"]"},protoOf(observable$slambda).j4i=function(t,e){var n=this.k4i(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(observable$slambda).tb=function(t,e){return this.j4i(null!=t&&isInterface(t,WriterScope)?t:THROW_CCE(),e)},protoOf(observable$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=15,this.ta_1=1;continue t;case 1:this.a55_1=get_ByteArrayPool(),this.b55_1=this.a55_1.s3o(),this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:this.ua_1=14,this.d55_1=this.b55_1;var e=this.v54_1;this.e55_1=null==e?new Long(-1,-1):e,this.f55_1=new Long(0,0),this.ta_1=4;continue t;case 4:if(this.w54_1.n3g()){this.ta_1=8;continue t}if(this.ta_1=5,(t=readAvailable(this.w54_1,this.d55_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(this.g55_1=t,this.ta_1=6,(t=this.y54_1.tw().q3l(this.d55_1,0,this.g55_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 6:var n=this.f55_1,i=this.g55_1;if(this.f55_1=n.ba(toLong(i)),this.ta_1=7,(t=this.x54_1(this.f55_1,this.e55_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 7:this.ta_1=4;continue t;case 8:if(this.h55_1=this.w54_1.x3f(),this.y54_1.tw().g12(this.h55_1),null==this.h55_1&&this.f55_1.equals(new Long(0,0))){if(this.ta_1=9,(t=this.x54_1(this.f55_1,this.e55_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=10;continue t;case 9:this.ta_1=10;continue t;case 10:this.c55_1=Unit_instance,this.ua_1=15,this.ta_1=11;continue t;case 11:this.a55_1.t3o(this.b55_1),this.z54_1=Unit_instance,this.ta_1=13;continue t;case 12:this.a55_1.t3o(this.b55_1),this.ta_1=13;continue t;case 13:return Unit_instance;case 14:this.ua_1=15;var r=this.wa_1;throw this.a55_1.t3o(this.b55_1),r;case 15:throw this.wa_1}}catch(t){var a=t;if(15===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},protoOf(observable$slambda).k4i=function(t,e){var n=new observable$slambda(this.v54_1,this.w54_1,this.x54_1,e);return n.y54_1=t,n},protoOf(EmptyContent).g4a=function(){return this.l55_1},protoOf(EmptyContent).toString=function(){return"EmptyContent"},protoOf(Js).m55=function(t){var e=new HttpClientEngineConfig;return t(e),new JsClientEngine(e)},protoOf(Js).g4f=function(t){return this.m55(t)},protoOf($executeCOROUTINE$17).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=6,this.ta_1=1,(t=callContext(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:if(this.l56_1=t,this.m56_1=this.k56_1.h4j_1.x3t(get_CLIENT_CONFIG()),isUpgradeRequest(this.k56_1)){if(this.ta_1=5,(t=executeWebSocketRequest(this.j56_1,this.k56_1,this.l56_1,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.ta_1=2;continue t;case 2:if(this.n56_1=GMTDate(),this.ta_1=3,(t=toRaw(this.k56_1,this.m56_1,this.l56_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:if(this.o56_1=t,this.ta_1=4,(t=commonFetch(this.k56_1.c4j_1.toString(),this.o56_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:var e=t,n=new HttpStatusCode(e.status,e.statusText),i=mapToKtor(e.headers),r=Companion_getInstance_3().s45_1,a=readBody(CoroutineScope_0(this.l56_1),e);return new HttpResponseData(n,this.n56_1,i,r,a,this.l56_1);case 5:return t;case 6:throw this.wa_1}}catch(t){var s=t;if(6===this.ua_1)throw s;this.ta_1=this.ua_1,this.wa_1=s}},protoOf($executeWebSocketRequestCOROUTINE$18).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.y55_1=GMTDate(),this.z55_1=this.w55_1.c4j_1.toString(),this.a56_1=createWebSocket(this.v55_1,this.z55_1,this.w55_1.e4j_1),this.ua_1=2,this.ta_1=1,(t=awaitConnection(this.a56_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:this.ua_1=4,this.ta_1=3;continue t;case 2:if(this.ua_1=4,this.wa_1 instanceof Error){var e=this.wa_1;throw cancel_3(this.x55_1,CancellationException_init_$Create$_0("Failed to connect to "+this.z55_1,e)),e}throw this.wa_1;case 3:this.ua_1=4;var n=new JsWebSocketSession(this.x55_1,this.a56_1);return new HttpResponseData(Companion_getInstance_2().c46_1,this.y55_1,Companion_getInstance_4().c41_1,Companion_getInstance_3().s45_1,n,this.x55_1);case 4:throw this.wa_1}}catch(t){var i=t;if(4===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},protoOf(JsClientEngine).q4e=function(){return this.s56_1},protoOf(JsClientEngine).q4k=function(){return this.t56_1},protoOf(JsClientEngine).j4j=function(){return this.u56_1},protoOf(JsClientEngine).p4k=function(t,e){var n=new $executeCOROUTINE$17(this,t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(toRaw$slambda).j4i=function(t,e){var n=this.k4i(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(toRaw$slambda).tb=function(t,e){return this.j4i(null!=t&&isInterface(t,WriterScope)?t:THROW_CCE(),e)},protoOf(toRaw$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.s57_1.k4a(this.t57_1.tw(),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 1:return Unit_instance;case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},protoOf(toRaw$slambda).k4i=function(t,e){var n=new toRaw$slambda(this.s57_1,e);return n.t57_1=t,n},protoOf($toRawCOROUTINE$19).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=4,this.h57_1={},mergeHeaders(this.e57_1.e4j_1,this.e57_1.f4j_1,toRaw$lambda(this.h57_1)),this.i57_1=this.e57_1.f4j_1,this.i57_1 instanceof ByteArrayContent){this.j57_1=this.i57_1.m4a(),this.ta_1=3;continue t}if(this.i57_1 instanceof ReadChannelContent){if(this.ta_1=2,(t=this.i57_1.i4a().s3l(VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t}if(this.i57_1 instanceof WriteChannelContent){if(this.ta_1=1,(t=writer(GlobalScope_instance,this.g57_1,VOID,toRaw$slambda_0(this.i57_1,null)).tw().s3l(VOID,this))===get_COROUTINE_SUSPENDED())return t;continue t}this.j57_1=null,this.ta_1=3;continue t;case 1:var e=t;this.j57_1=readBytes(e),this.ta_1=3;continue t;case 2:var n=t;this.j57_1=readBytes(n),this.ta_1=3;continue t;case 3:var i=this.j57_1;return buildObject(toRaw$lambda_0(this.e57_1,this.h57_1,this.f57_1,i));case 4:throw this.wa_1}}catch(t){var r=t;if(4===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf(channelFromStream$slambda).j4i=function(t,e){var n=this.k4i(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(channelFromStream$slambda).tb=function(t,e){return this.j4i(null!=t&&isInterface(t,WriterScope)?t:THROW_CCE(),e)},protoOf(channelFromStream$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=6,this.e58_1=this.c58_1.getReader(),this.ta_1=1;continue t;case 1:if(this.ua_1=5,this.ta_1=2,(t=readChunk(this.e58_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(this.f58_1=t,null==this.f58_1){this.ua_1=6,this.ta_1=8;continue t}this.g58_1=this.f58_1,this.ta_1=3;continue t;case 3:if(this.h58_1=this.g58_1,this.ta_1=4,(t=writeFully(this.d58_1.tw(),asByteArray(this.h58_1),this))===get_COROUTINE_SUSPENDED())return t;continue t;case 4:this.d58_1.tw().y5(),this.ua_1=6,this.ta_1=7;continue t;case 5:if(this.ua_1=6,this.wa_1 instanceof Error){var e=this.wa_1;throw this.e58_1.cancel(e),e}throw this.wa_1;case 6:throw this.wa_1;case 7:this.ua_1=6,this.ta_1=1;continue t;case 8:return Unit_instance}}catch(t){var n=t;if(6===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},protoOf(channelFromStream$slambda).k4i=function(t,e){var n=new channelFromStream$slambda(this.c58_1,e);return n.d58_1=t,n},protoOf(readBodyNode$slambda).j4i=function(t,e){var n=this.k4i(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(readBodyNode$slambda).tb=function(t,e){return this.j4i(null!=t&&isInterface(t,WriterScope)?t:THROW_CCE(),e)},protoOf(readBodyNode$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=6;var e,n=this.q58_1.body;if(null==n)throw IllegalStateException_init_$Create$(toString("Fail to get body"));e=n,this.s58_1=e,this.t58_1=Channel(1),this.s58_1.on("data",readBodyNode$slambda$lambda(this.t58_1,this.s58_1)),this.s58_1.on("error",readBodyNode$slambda$lambda_0(this.t58_1,this.r58_1)),this.s58_1.on("end",readBodyNode$slambda$lambda_1(this.t58_1)),this.ua_1=5,this.u58_1=this.t58_1.s(),this.ta_1=1;continue t;case 1:if(this.ta_1=2,(t=this.u58_1.vz(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 2:if(!t){this.ta_1=4;continue t}if(this.v58_1=this.u58_1.u(),this.ta_1=3,(t=writeFully(this.r58_1.tw(),this.v58_1,this))===get_COROUTINE_SUSPENDED())return t;continue t;case 3:this.r58_1.tw().y5(),this.s58_1.resume(),this.ta_1=1;continue t;case 4:this.ua_1=6,this.ta_1=7;continue t;case 5:if(this.ua_1=6,this.wa_1 instanceof Error){var i=this.wa_1;throw this.s58_1.destroy(i),i}throw this.wa_1;case 6:throw this.wa_1;case 7:return this.ua_1=6,Unit_instance}}catch(t){var r=t;if(6===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},protoOf(readBodyNode$slambda).k4i=function(t,e){var n=new readBodyNode$slambda(this.q58_1,e);return n.r58_1=t,n},protoOf(JsWebSocketSession$slambda).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=Unit_instance,n.wa_1=null,n.gb()},protoOf(JsWebSocketSession$slambda).tb=function(t,e){return this.m1j(null!=t&&isInterface(t,CoroutineScope)?t:THROW_CCE(),e)},protoOf(JsWebSocketSession$slambda).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=10,this.o59_1=this.m59_1.a59_1,this.ta_1=1;continue t;case 1:this.q59_1=this.o59_1,this.r59_1=null,this.ta_1=2;continue t;case 2:this.ta_1=3;continue t;case 3:this.ua_1=9,this.ua_1=8,this.t59_1=this.q59_1,this.u59_1=this.t59_1.s(),this.ta_1=4;continue t;case 4:if(this.ta_1=5,(t=this.u59_1.vz(this))===get_COROUTINE_SUSPENDED())return t;continue t;case 5:if(!t){this.ta_1=6;continue t}var e=this.u59_1.u();switch(e.p4b_1.n9_1){case 0:var n=e.q4b_1;this.m59_1.x58_1.send(String_0(n));break;case 1:var i=e.q4b_1,r=i instanceof Int8Array?i:THROW_CCE(),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength|0);this.m59_1.x58_1.send(a);break;case 2:var s;e:do{var o=new BytePacketBuilder;try{writeFully_0(o,e.q4b_1),s=o.n3j();break e}catch(t){if(t instanceof Error){var l=t;throw o.xr(),l}throw t}}while(0);var u=s,c=readShort(u),h=u.w3p();this.m59_1.y58_1.nr(new CloseReason(c,h)),isReservedStatusCode(c,this.m59_1)?this.m59_1.x58_1.close():this.m59_1.x58_1.close(c,h)}this.ta_1=4;continue t;case 6:this.s59_1=Unit_instance,this.ua_1=10,this.ta_1=7;continue t;case 7:cancelConsumed(this.q59_1,this.r59_1),this.p59_1=Unit_instance,this.ta_1=12;continue t;case 8:if(this.ua_1=9,this.wa_1 instanceof Error){var f=this.wa_1;throw this.r59_1=f,f}throw this.wa_1;case 9:this.ua_1=10;var _=this.wa_1;throw cancelConsumed(this.q59_1,this.r59_1),_;case 10:throw this.wa_1;case 11:cancelConsumed(this.q59_1,this.r59_1),this.ta_1=12;continue t;case 12:return Unit_instance}}catch(t){var d=t;if(10===this.ua_1)throw d;this.ta_1=this.ua_1,this.wa_1=d}},protoOf(JsWebSocketSession$slambda).n1j=function(t,e){var n=new JsWebSocketSession$slambda(this.m59_1,e);return n.n59_1=t,n},protoOf(JsWebSocketSession).wl=function(){return this.w58_1},defineProp(protoOf(DoubleReceiveException),"message",(function(){return this.z5()})),defineProp(protoOf(NoTransformationFoundException),"message",(function(){return this.z5()})),defineProp(protoOf(ClientEngineClosedException),"cause",(function(){return this.a6()})),protoOf(HttpClientEngineBase).j4j=get_supportedCapabilities,protoOf(HttpClientEngineBase).r4e=install,protoOf(KtorCallContextElement).bb=get,protoOf(KtorCallContextElement).fe=fold,protoOf(KtorCallContextElement).ee=minusKey,protoOf(KtorCallContextElement).ge=plus,defineProp(protoOf(RedirectResponseException),"message",(function(){return this.z5()})),defineProp(protoOf(ClientRequestException),"message",(function(){return this.z5()})),defineProp(protoOf(ServerResponseException),"message",(function(){return this.z5()})),protoOf(HttpRequest$1).wl=get_coroutineContext,Companion_instance_1=new Companion_0,WebSocketCapability_instance=new WebSocketCapability,Companion_instance_4=new Companion_3,Js_instance=new Js,_.$_$=_.$_$||{},_.$_$.a=bodyAsText,_.$_$.b=Js_instance,_.$_$.c=HttpRequestBuilder,_.$_$.d=url,_.$_$.e=HttpStatement,_.$_$.f=HttpClient_0,_},__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(675),__webpack_require__(646),__webpack_require__(754),__webpack_require__(868),__webpack_require__(498),__webpack_require__(229),__webpack_require__(997),__webpack_require__(878)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},498:function(t,e,n){var i,r,a;r=[e,n(646),n(675),n(754)],void 0===(a="function"==typeof(i=function(t,e,n,i){"use strict";var r=e.$_$.q,a=n.$_$.x6,s=n.$_$.b8,o=i.$_$.d,l=n.$_$.b7,u=n.$_$.ib,c=n.$_$.ob,h=n.$_$.a3,f=n.$_$.a8,_=n.$_$.d;function d(){}function p(){this.s4a_1=new o}function m(){}return s(d,"HandlerRegistration",a,r),s(p,"Events",a,_,_,p),s(m,"EventDefinition",a,_,_,m),f(p).t4a=function(t,e){var n=null,i=this.s4a_1.g3w(t);if(null==i);else for(var r=i.ys_1;!l(r,i);){if(r instanceof d){var a=r;try{var s=a.x4a_1;("function"==typeof s?s:u())(e)}catch(t){if(!(t instanceof Error))throw t;var o,f=t;null==n?o=null:(c(n,f),o=h),null==o&&(n=f)}}r=r.ys_1}if(null!=n)throw n},t.$_$=t.$_$||{},t.$_$.a=m,t.$_$.b=p,t})?i.apply(e,r):i)||(t.exports=a)},997:function(t,e,n){var i,r,a;r=[e,n(675),n(229),n(754)],void 0===(a="function"==typeof(i=function(t,e,n,i){"use strict";var r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$,A,R=Math.imul,O=e.$_$.d,I=e.$_$.t,k=n.$_$.f,U=n.$_$.k,P=e.$_$.a3,D=n.$_$.n,N=n.$_$.o,L=n.$_$.m,z=e.$_$.t6,F=e.$_$.y1,B=e.$_$.b9,H=e.$_$.u6,V=e.$_$.f8,q=e.$_$.va,j=e.$_$.q9,G=e.$_$.c2,W=e.$_$.b2,X=e.$_$.s,Y=e.$_$.v6,K=e.$_$.w6,J=e.$_$.g2,Z=e.$_$.c8,Q=n.$_$.t,tt=e.$_$.za,et=e.$_$.z,nt=e.$_$.r6,it=e.$_$.a8,rt=e.$_$.x6,at=e.$_$.b8,st=e.$_$.a2,ot=e.$_$.v7,lt=e.$_$.d2,ut=e.$_$.a5,ct=e.$_$.b5,ht=e.$_$.n3,ft=e.$_$.g,_t=e.$_$.f2,dt=e.$_$.t5,pt=e.$_$.h5,mt=e.$_$.z4,gt=e.$_$.t4,vt=e.$_$.a4,yt=e.$_$.y7,wt=e.$_$.i9,bt=e.$_$.d3,xt=e.$_$.r7,St=e.$_$.n9,Et=e.$_$.r4,Mt=e.$_$.m9,Tt=e.$_$.ib,Ct=e.$_$.p7,$t=e.$_$.ua,At=e.$_$.d9,Rt=e.$_$.z7,Ot=e.$_$.c5,It=e.$_$.b7,kt=e.$_$.j7,Ut=e.$_$.k7,Pt=n.$_$.e,Dt=e.$_$.ab,Nt=n.$_$.l,Lt=e.$_$.p4,zt=e.$_$.u9,Ft=e.$_$.j9,Bt=e.$_$.s9,Ht=i.$_$.q,Vt=e.$_$.c4,qt=i.$_$.p,jt=i.$_$.o,Gt=i.$_$.s,Wt=i.$_$.r,Xt=e.$_$.b4,Yt=e.$_$.ja,Kt=e.$_$.e,Jt=e.$_$.ub,Zt=e.$_$.cc,Qt=e.$_$.h,te=e.$_$.m3,ee=e.$_$.z1,ne=e.$_$.d1,ie=e.$_$.pa,re=e.$_$.u4,ae=e.$_$.k8,se=e.$_$.k,oe=e.$_$.wa,le=e.$_$.m7,ue=e.$_$.r9,ce=e.$_$.ca,he=e.$_$.s6,fe=e.$_$.z9,_e=e.$_$.r5,de=e.$_$.h4,pe=e.$_$.l4,me=e.$_$.e1,ge=i.$_$.y,ve=e.$_$.k9,ye=e.$_$.z3,we=e.$_$.bb,be=e.$_$.j1,xe=e.$_$.l9,Se=e.$_$.ma,Ee=e.$_$.s4,Me=i.$_$.z,Te=i.$_$.v,Ce=i.$_$.t,$e=e.$_$.ba,Ae=e.$_$.k3,Re=e.$_$.o4,Oe=e.$_$.bc,Ie=e.$_$.vb,ke=e.$_$.b,Ue=e.$_$.w8,Pe=e.$_$.i7,De=e.$_$.g9,Ne=n.$_$.j,Le=e.$_$.d8,ze=e.$_$.ia,Fe=i.$_$.c,Be=i.$_$.w;function He(){return on(),r}function Ve(){return on(),a}function qe(){return on(),s}function je(){return on(),l}function Ge(t,e){e=e!==O&&e,on();var n,i,r=I();return Je(U(k().f3q_1.j3q(),t),(n=r,i=e,function(t){return He().x(t)||(on(),u).x(t)?n.h5(ot(t)):i&&32===t?n.h5(F(43)):n.g5(Ze(t)),P})),r.toString()}function We(t,e,n,i){return e=e===O?0:e,n=n===O?t.length:n,i=i===O?k().f3q_1:i,on(),Qe(t,e,n,!1,i)}function Xe(t,e,n,i){e=e!==O&&e,n=n!==O&&n,i=i===O?k().f3q_1:i,on();var r,a,s,l=I();return Je(U(i.j3q(),t),(r=n,a=l,s=e,function(t){return 32===t?r?a.h5(F(43)):a.g5("%20"):He().x(t)||!s&&(on(),o).x(t)?a.h5(ot(t)):a.g5(Ze(t)),P})),l.toString()}function Ye(t,e,n,i,r){return e=e===O?0:e,n=n===O?t.length:n,i=i!==O&&i,r=r===O?k().f3q_1:r,on(),Qe(t,e,n,i,r)}function Ke(t){return on(),function(t,e){on();for(var n=I(),i=k().f3q_1,r=0;r<t.length;){var a=H(t,r);if(!e&&a===F(47)||Ve().x(new q(a))||je().x(new q(a)))n.h5(a),r=r+1|0;else if(a===F(37)&&(r+2|0)<t.length&&qe().x(new q(H(t,r+1|0)))&&qe().x(new q(H(t,r+2|0))))n.h5(a),n.h5(H(t,r+1|0)),n.h5(H(t,r+2|0)),r=r+3|0;else{var s=j(a)?2:1;Je(U(i.j3q(),t,r,r+s|0),sn(n)),r=r+s|0}}return n.toString()}(t,!0)}function Je(t,e){on();var n=!0,i=D(t,1);if(null!=i){var r=i;try{t:for(;;){for(var a=r;a.w3h_1>a.v3h_1;)e(a.ok());n=!1;var s=N(t,r);if(null==s)break t;r=s,n=!0}}finally{n&&L(t,r)}}}function Ze(t){on();var e=255&t,n=z(3);return n[0]=F(37),n[1]=tn(e>>4),n[2]=tn(15&e),B(n)}function Qe(t,e,n,i,r){on();var a=e;if(a<n)do{var s=a;a=a+1|0;var o=H(t,s);if(o===F(37)||i&&o===F(43))return en(t,e,n,s,i,r)}while(a<n);return 0===e&&n===t.length?V(t):t.substring(e,n)}function tn(t){return on(),0<=t&&t<=9?G(F(48),t):W(G(F(65),t),10)}function en(t,e,n,i,r,a){on();var s=n-e|0,o=X(s>255?s/3|0:s);i>e&&o.k7(t,e,i);for(var l=i,u=null;l<n;){var c=H(t,l);if(r&&c===F(43))o.h5(F(32)),l=l+1|0;else if(c===F(37)){null==u&&(u=new Int8Array((n-l|0)/3|0));for(var h=0;l<n&&H(t,l)===F(37);){if((l+2|0)>=n){var f=l,_=Y(t);throw new nn("Incomplete trailing HEX escape: "+V(K(t,f,_))+", in "+t+" at "+l)}var d=rn(H(t,l+1|0)),p=rn(H(t,l+2|0));if(-1===d||-1===p)throw new nn("Wrong HEX escape: %"+J(H(t,l+1|0))+J(H(t,l+2|0))+", in "+t+", at "+l);var m=h;h=m+1|0,u[m]=Z(R(d,16)+p|0),l=l+3|0}o.g5(Q(u,0,h,a))}else o.h5(c),l=l+1|0}return o.toString()}function nn(t){et(t,this),nt(this,nn)}function rn(t){return on(),F(48)<=t&&t<=F(57)?st(t,F(48)):F(65)<=t&&t<=F(70)?st(t,F(65))+10|0:F(97)<=t&&t<=F(102)?st(t,F(97))+10|0:-1}function an(t){return on(),Ge(t,!0)}function sn(t){return function(e){return t.g5(Ze(e)),P}}function on(){if(!c){c=!0;for(var t=ct(ut(lt(F(97),F(122)),lt(F(65),F(90))),lt(F(48),F(57))),e=ft(ht(t,10)),n=t.s();n.t();){var i=n.u().a9_1,h=_t(i),f=Z(h);e.p(f)}r=dt(e),a=dt(ct(ut(lt(F(97),F(122)),lt(F(65),F(90))),lt(F(48),F(57)))),s=dt(ct(ut(lt(F(97),F(102)),lt(F(65),F(70))),lt(F(48),F(57))));for(var _=pt([new q(F(58)),new q(F(47)),new q(F(63)),new q(F(35)),new q(F(91)),new q(F(93)),new q(F(64)),new q(F(33)),new q(F(36)),new q(F(38)),new q(F(39)),new q(F(40)),new q(F(41)),new q(F(42)),new q(F(44)),new q(F(59)),new q(F(61)),new q(F(45)),new q(F(46)),new q(F(95)),new q(F(126)),new q(F(43))]),d=ft(ht(_,10)),p=_.s();p.t();){var m=p.u().a9_1,g=_t(m),v=Z(g);d.p(v)}o=d,l=pt([new q(F(58)),new q(F(64)),new q(F(33)),new q(F(36)),new q(F(38)),new q(F(39)),new q(F(40)),new q(F(41)),new q(F(42)),new q(F(43)),new q(F(44)),new q(F(59)),new q(F(61)),new q(F(45)),new q(F(46)),new q(F(95)),new q(F(126))]),mt(Ve(),pt([new q(F(33)),new q(F(35)),new q(F(36)),new q(F(38)),new q(F(43)),new q(F(45)),new q(F(46)),new q(F(94)),new q(F(95)),new q(F(96)),new q(F(124)),new q(F(126))]));for(var y=gt([new q(F(45)),new q(F(46)),new q(F(95)),new q(F(126))]),w=ft(ht(y,10)),b=y.s();b.t();){var x=b.u().a9_1,S=_t(x),E=Z(S);w.p(E)}u=w}}function ln(t,e,n){return function(t,e,n,i){return n=n===O?vt():n,_n.call(i,t,e,t+"/"+e,n),i}(t,e,n,yt(it(_n)))}function un(){h=this,this.n3z_1=ln("*","*")}function cn(){return null==h&&new un,h}function hn(){f=this,this.s3z_1=ln("application","*"),this.t3z_1=ln("application","atom+xml"),this.u3z_1=ln("application","cbor"),this.v3z_1=ln("application","json"),this.w3z_1=ln("application","hal+json"),this.x3z_1=ln("application","javascript"),this.y3z_1=ln("application","octet-stream"),this.z3z_1=ln("application","rss+xml"),this.a40_1=ln("application","xml"),this.b40_1=ln("application","xml-dtd"),this.c40_1=ln("application","zip"),this.d40_1=ln("application","gzip"),this.e40_1=ln("application","x-www-form-urlencoded"),this.f40_1=ln("application","pdf"),this.g40_1=ln("application","vnd.openxmlformats-officedocument.spreadsheetml.sheet"),this.h40_1=ln("application","vnd.openxmlformats-officedocument.wordprocessingml.document"),this.i40_1=ln("application","vnd.openxmlformats-officedocument.presentationml.presentation"),this.j40_1=ln("application","protobuf"),this.k40_1=ln("application","wasm"),this.l40_1=ln("application","problem+json"),this.m40_1=ln("application","problem+xml")}function fn(){_=this,this.n40_1=ln("text","*"),this.o40_1=ln("text","plain"),this.p40_1=ln("text","css"),this.q40_1=ln("text","csv"),this.r40_1=ln("text","html"),this.s40_1=ln("text","javascript"),this.t40_1=ln("text","vcard"),this.u40_1=ln("text","xml"),this.v40_1=ln("text","event-stream")}function _n(t,e,n,i){cn(),i=i===O?vt():i,gn.call(this,n,i),this.y40_1=t,this.z40_1=e}function dn(t){et("Bad Content-Type format: "+t,this),nt(this,dn)}function pn(t){var e,n=t.b41("charset");if(null==n)e=null;else{var i;try{i=Pt.g3t(n)}catch(t){if(!(t instanceof Dt))throw t;i=null}e=i}return e}function mn(){}function gn(t,e){e=e===O?vt():e,this.i3z_1=t,this.j3z_1=e}function vn(t){if(wn(),0===Y(t))return!0;if(function(t){if(wn(),t.length<2)return!1;if(Ft(t)!==F(34)||zt(t)!==F(34))return!1;var e=1;t:do{var n=Mt(t,F(34),e);if(n===Bt(t))break t;for(var i=0,r=n-1|0;H(t,r)===F(92);)i=i+1|0,r=r-1|0;if(0==(i%2|0))return!1;e=n+1|0}while(e<t.length);return!0}(t))return!1;var e=0,n=t.length;if(e<n)do{var i=e;if(e=e+1|0,(wn(),d).x(new q(H(t,i))))return!0}while(e<n);return!1}function yn(t){wn();var e=I();return function(t,e){wn(),e.g5('"');var n=0,i=t.length;if(n<i)do{var r=n;n=n+1|0;var a=H(t,r);a===F(92)?e.g5("\\\\"):a===F(10)?e.g5("\\n"):a===F(13)?e.g5("\\r"):a===F(9)?e.g5("\\t"):a===F(34)?e.g5('\\"'):e.h5(a)}while(n<i);e.g5('"')}(t,e),e.toString()}function wn(){p||(p=!0,d=pt([new q(F(40)),new q(F(41)),new q(F(60)),new q(F(62)),new q(F(64)),new q(F(44)),new q(F(59)),new q(F(58)),new q(F(92)),new q(F(34)),new q(F(47)),new q(F(91)),new q(F(93)),new q(F(63)),new q(F(61)),new q(F(123)),new q(F(125)),new q(F(32)),new q(F(9)),new q(F(10)),new q(F(13))]))}function bn(){m=this,this.c41_1=g}function xn(){return null==m&&new bn,m}function Sn(t){t=t===O?8:t,Ht.call(this,!0,t)}function En(){}function Mn(t){t=t===O?Xt():t,Wt.call(this,!0,t)}function Tn(t,e){return function(t,e,n){return Cn.call(n,t,e,!1),n}(t,e,yt(it(Cn)))}function Cn(t,e,n){this.k3z_1=t,this.l3z_1=e,this.m3z_1=n}function $n(t,e){e=e===O?vt():e,this.p3z_1=t,this.q3z_1=e;var n;t:{for(var i=this.q3z_1.s();i.t();){var r=i.u();if("q"===r.k3z_1){n=r;break t}}n=null}var a=null==n?null:n.l3z_1,s=null==a?null:Yt(a),o=null==s?null:0<=s&&s<=1?s:null;this.r3z_1=null==o?1:o}function An(t){return function(t,e){if(null==t)return vt();for(var n=0,i=Kt(),r=Jt(i,Nn);n<=Bt(t);)n=Rn(t,n,r,e);return On(r)}(t,!1)}function Rn(t,e,n,i){for(var r=e,a=Kt(),s=Jt(a,Ln),o=i?r:null;r<=Bt(t);){var l=H(t,r);if(l===F(44)){var u=o;return n.d2().p(new $n(In(t,e,null==u?r:u),On(s))),r+1|0}l===F(59)?(null==o&&(o=r),r=kn(t,r+1|0,s)):r=i?kn(t,r,s):r+1|0}var c=o;return n.d2().p(new $n(In(t,e,null==c?r:c),On(s))),r}function On(t){return t.gh()?t.d2():vt()}function In(t,e,n){var i=t.substring(e,n);return V($t(Ct(i)?i:Tt()))}function kn(t,e,n){for(var i=e;i<=Bt(t);){var r=H(t,i);if(r===F(61)){var a=Un(t,i+1|0),s=a.dd();return Dn(n,t,e,i,a.ed()),s}if(r===F(59)||r===F(44))return Dn(n,t,e,i,""),i;i=i+1|0}return Dn(n,t,e,i,""),i}function Un(t,e){if(t.length===e)return Zt(e,"");var n=e;if(H(t,e)===F(34))return function(t,e){for(var n=e,i=I();n<=Bt(t);){var r=H(t,n);if(r===F(34)&&Pn(t,n))return Zt(n+1|0,i.toString());r===F(92)&&n<(Bt(t)-2|0)?(i.h5(H(t,n+1|0)),n=n+2|0):(i.h5(r),n=n+1|0)}var a=n,s=F(34),o=i.toString(),l=J(s)+o;return Zt(a,l)}(t,n+1|0);for(;n<=Bt(t);){var i=H(t,n);if(i===F(59)||i===F(44))return Zt(n,In(t,e,n));n=n+1|0}return Zt(n,In(t,e,n))}function Pn(t,e){for(var n=e+1|0;n<t.length&&H(t,n)===F(32);)n=n+1|0;return n===t.length||H(t,n)===F(59)}function Dn(t,e,n,i,r){var a=In(e,n,i);if(0===Y(a))return P;t.d2().p(Tn(a,r))}function Nn(){return Qt()}function Ln(){return Qt()}function zn(){v=this,this.f41_1="Accept",this.g41_1="Accept-Charset",this.h41_1="Accept-Encoding",this.i41_1="Accept-Language",this.j41_1="Accept-Ranges",this.k41_1="Age",this.l41_1="Allow",this.m41_1="ALPN",this.n41_1="Authentication-Info",this.o41_1="Authorization",this.p41_1="Cache-Control",this.q41_1="Connection",this.r41_1="Content-Disposition",this.s41_1="Content-Encoding",this.t41_1="Content-Language",this.u41_1="Content-Length",this.v41_1="Content-Location",this.w41_1="Content-Range",this.x41_1="Content-Type",this.y41_1="Cookie",this.z41_1="DASL",this.a42_1="Date",this.b42_1="DAV",this.c42_1="Depth",this.d42_1="Destination",this.e42_1="ETag",this.f42_1="Expect",this.g42_1="Expires",this.h42_1="From",this.i42_1="Forwarded",this.j42_1="Host",this.k42_1="HTTP2-Settings",this.l42_1="If",this.m42_1="If-Match",this.n42_1="If-Modified-Since",this.o42_1="If-None-Match",this.p42_1="If-Range",this.q42_1="If-Schedule-Tag-Match",this.r42_1="If-Unmodified-Since",this.s42_1="Last-Modified",this.t42_1="Location",this.u42_1="Lock-Token",this.v42_1="Link",this.w42_1="Max-Forwards",this.x42_1="MIME-Version",this.y42_1="Ordering-Type",this.z42_1="Origin",this.a43_1="Overwrite",this.b43_1="Position",this.c43_1="Pragma",this.d43_1="Prefer",this.e43_1="Preference-Applied",this.f43_1="Proxy-Authenticate",this.g43_1="Proxy-Authentication-Info",this.h43_1="Proxy-Authorization",this.i43_1="Public-Key-Pins",this.j43_1="Public-Key-Pins-Report-Only",this.k43_1="Range",this.l43_1="Referer",this.m43_1="Retry-After",this.n43_1="Schedule-Reply",this.o43_1="Schedule-Tag",this.p43_1="Sec-WebSocket-Accept",this.q43_1="Sec-WebSocket-Extensions",this.r43_1="Sec-WebSocket-Key",this.s43_1="Sec-WebSocket-Protocol",this.t43_1="Sec-WebSocket-Version",this.u43_1="Server",this.v43_1="Set-Cookie",this.w43_1="SLUG",this.x43_1="Strict-Transport-Security",this.y43_1="TE",this.z43_1="Timeout",this.a44_1="Trailer",this.b44_1="Transfer-Encoding",this.c44_1="Upgrade",this.d44_1="User-Agent",this.e44_1="Vary",this.f44_1="Via",this.g44_1="Warning",this.h44_1="WWW-Authenticate",this.i44_1="Access-Control-Allow-Origin",this.j44_1="Access-Control-Allow-Methods",this.k44_1="Access-Control-Allow-Credentials",this.l44_1="Access-Control-Allow-Headers",this.m44_1="Access-Control-Request-Method",this.n44_1="Access-Control-Request-Headers",this.o44_1="Access-Control-Expose-Headers",this.p44_1="Access-Control-Max-Age",this.q44_1="X-Http-Method-Override",this.r44_1="X-Forwarded-Host",this.s44_1="X-Forwarded-Server",this.t44_1="X-Forwarded-Proto",this.u44_1="X-Forwarded-For",this.v44_1="X-Forwarded-Port",this.w44_1="X-Request-ID",this.x44_1="X-Correlation-ID",this.y44_1="X-Total-Count",this.z44_1=[this.b44_1,this.c44_1],this.a45_1=te(this.z44_1)}function Fn(){return null==v&&new zn,v}function Bn(t,e){var n="Header name '"+t+"' contains illegal character '"+J(H(t,e))+"'",i=H(t,e),r=_t(i);ne(n+" (code "+(255&r)+")",this),nt(this,Bn),this.d45_1=t,this.e45_1=e}function Hn(t,e){var n="Header value '"+t+"' contains illegal character '"+J(H(t,e))+"'",i=H(t,e),r=_t(i);ne(n+" (code "+(255&r)+")",this),nt(this,Hn),this.f45_1=t,this.g45_1=e}function Vn(t){ne("Header(s) "+t+" are controlled by the engine and cannot be set explicitly",this),nt(this,Vn)}function qn(){y=this,this.i45_1=new Gn("GET"),this.j45_1=new Gn("POST"),this.k45_1=new Gn("PUT"),this.l45_1=new Gn("PATCH"),this.m45_1=new Gn("DELETE"),this.n45_1=new Gn("HEAD"),this.o45_1=new Gn("OPTIONS"),this.p45_1=gt([this.i45_1,this.j45_1,this.k45_1,this.l45_1,this.m45_1,this.n45_1,this.o45_1])}function jn(){return null==y&&new qn,y}function Gn(t){jn(),this.q45_1=t}function Wn(){w=this,this.r45_1=new Yn("HTTP",2,0),this.s45_1=new Yn("HTTP",1,1),this.t45_1=new Yn("HTTP",1,0),this.u45_1=new Yn("SPDY",3,0),this.v45_1=new Yn("QUIC",1,0)}function Xn(){return null==w&&new Wn,w}function Yn(t,e,n){Xn(),this.w45_1=t,this.x45_1=e,this.y45_1=n}function Kn(){b=this,this.z45_1=new Zn(100,"Continue"),this.a46_1=new Zn(101,"Switching Protocols"),this.b46_1=new Zn(102,"Processing"),this.c46_1=new Zn(200,"OK"),this.d46_1=new Zn(201,"Created"),this.e46_1=new Zn(202,"Accepted"),this.f46_1=new Zn(203,"Non-Authoritative Information"),this.g46_1=new Zn(204,"No Content"),this.h46_1=new Zn(205,"Reset Content"),this.i46_1=new Zn(206,"Partial Content"),this.j46_1=new Zn(207,"Multi-Status"),this.k46_1=new Zn(300,"Multiple Choices"),this.l46_1=new Zn(301,"Moved Permanently"),this.m46_1=new Zn(302,"Found"),this.n46_1=new Zn(303,"See Other"),this.o46_1=new Zn(304,"Not Modified"),this.p46_1=new Zn(305,"Use Proxy"),this.q46_1=new Zn(306,"Switch Proxy"),this.r46_1=new Zn(307,"Temporary Redirect"),this.s46_1=new Zn(308,"Permanent Redirect"),this.t46_1=new Zn(400,"Bad Request"),this.u46_1=new Zn(401,"Unauthorized"),this.v46_1=new Zn(402,"Payment Required"),this.w46_1=new Zn(403,"Forbidden"),this.x46_1=new Zn(404,"Not Found"),this.y46_1=new Zn(405,"Method Not Allowed"),this.z46_1=new Zn(406,"Not Acceptable"),this.a47_1=new Zn(407,"Proxy Authentication Required"),this.b47_1=new Zn(408,"Request Timeout"),this.c47_1=new Zn(409,"Conflict"),this.d47_1=new Zn(410,"Gone"),this.e47_1=new Zn(411,"Length Required"),this.f47_1=new Zn(412,"Precondition Failed"),this.g47_1=new Zn(413,"Payload Too Large"),this.h47_1=new Zn(414,"Request-URI Too Long"),this.i47_1=new Zn(415,"Unsupported Media Type"),this.j47_1=new Zn(416,"Requested Range Not Satisfiable"),this.k47_1=new Zn(417,"Expectation Failed"),this.l47_1=new Zn(422,"Unprocessable Entity"),this.m47_1=new Zn(423,"Locked"),this.n47_1=new Zn(424,"Failed Dependency"),this.o47_1=new Zn(425,"Too Early"),this.p47_1=new Zn(426,"Upgrade Required"),this.q47_1=new Zn(429,"Too Many Requests"),this.r47_1=new Zn(431,"Request Header Fields Too Large"),this.s47_1=new Zn(500,"Internal Server Error"),this.t47_1=new Zn(501,"Not Implemented"),this.u47_1=new Zn(502,"Bad Gateway"),this.v47_1=new Zn(503,"Service Unavailable"),this.w47_1=new Zn(504,"Gateway Timeout"),this.x47_1=new Zn(505,"HTTP Version Not Supported"),this.y47_1=new Zn(506,"Variant Also Negotiates"),this.z47_1=new Zn(507,"Insufficient Storage"),this.a48_1=gt([Jn().z45_1,Jn().a46_1,Jn().b46_1,Jn().c46_1,Jn().d46_1,Jn().e46_1,Jn().f46_1,Jn().g46_1,Jn().h46_1,Jn().i46_1,Jn().j46_1,Jn().k46_1,Jn().l46_1,Jn().m46_1,Jn().n46_1,Jn().o46_1,Jn().p46_1,Jn().q46_1,Jn().r46_1,Jn().s46_1,Jn().t46_1,Jn().u46_1,Jn().v46_1,Jn().w46_1,Jn().x46_1,Jn().y46_1,Jn().z46_1,Jn().a47_1,Jn().b47_1,Jn().c47_1,Jn().d47_1,Jn().e47_1,Jn().f47_1,Jn().g47_1,Jn().h47_1,Jn().i47_1,Jn().j47_1,Jn().k47_1,Jn().l47_1,Jn().m47_1,Jn().n47_1,Jn().o47_1,Jn().p47_1,Jn().q47_1,Jn().r47_1,Jn().s47_1,Jn().t47_1,Jn().u47_1,Jn().v47_1,Jn().w47_1,Jn().x47_1,Jn().y47_1,Jn().z47_1]);for(var t=this.a48_1,e=ae(re(ht(t,10)),16),n=se(e),i=t.s();i.t();){var r=i.u(),a=r.c48_1;n.a2(a,r)}this.b48_1=n}function Jn(){return null==b&&new Kn,b}function Zn(t,e){Jn(),this.c48_1=t,this.d48_1=e}function Qn(){x=this,this.f48_1=S}function ti(){return null==x&&new Qn,x}function ei(){}function ni(t){return new ri(t=t===O?8:t)}function ii(){}function ri(t){t=t===O?8:t,Ht.call(this,!0,t)}function ai(t){t=t===O?Xt():t,Wt.call(this,!0,t)}function si(t,e,n,i){var r;if(n=n===O?1e3:n,i=i===O||i,(e=e===O?0:e)>Bt(t))r=ti().f48_1;else{ti();var a=ni();(function(t,e,n,i,r){var a=0,s=n,o=-1,l=n,u=Bt(e);if(l<=u)do{var c=l;if(l=l+1|0,a===i)return P;var h=H(e,c);h===F(38)?(oi(t,e,s,o,c,r),s=c+1|0,o=-1,a=a+1|0):h===F(61)&&-1===o&&(o=c)}while(c!==u);if(a===i)return P;oi(t,e,s,o,e.length,r)})(a,t,e,n,i),r=a.n3j()}return r}function oi(t,e,n,i,r,a){if(-1===i){var s=li(n,r,e),o=ui(s,r,e);if(o>s){var l=a?Ye(e,s,o):e.substring(s,o);t.x3v(l,vt())}return P}var u=li(n,i,e),c=ui(u,i,e);if(c>u){var h=a?Ye(e,u,c):e.substring(u,c),f=li(i+1|0,r,e),_=ui(f,r,e),d=a?Ye(e,f,_,!0):e.substring(f,_);t.a3w(h,d)}}function li(t,e,n){for(var i=t;i<e&&ue(H(n,i));)i=i+1|0;return i}function ui(t,e,n){for(var i=e;i>t&&ue(H(n,i-1|0));)i=i-1|0;return i}function ci(t){var e=t.j48_1;if(Y(e)>0||"file"===t.i48_1.s48_1)return P;t.j48_1=fi().k49_1.v48_1,t.i48_1.equals(Ci().l49_1)&&(t.i48_1=fi().k49_1.u48_1),0===t.k48_1&&(t.k48_1=fi().k49_1.w48_1)}function hi(){E=this,this.k49_1=function(t){return bi(new _i,t)}(function(t){var e,n;if(2===Be(Fe()).n9_1){var i=(n="",(n="undefined"!=typeof window?window.location.origin:self.location.origin)&&"null"!=n?n:"http://localhost");e=null!=i&&"string"==typeof i?i:Tt()}else e="http://localhost";return e}()).n3j()}function fi(){return null==E&&new hi,E}function _i(t,e,n,i,r,a,s,o,l){fi(),t=t===O?Ci().l49_1:t,e=e===O?"":e,n=n===O?0:n,i=i===O?null:i,r=r===O?null:r,a=a===O?vt():a,s=s===O?ti().f48_1:s,o=o===O?"":o,l=l!==O&&l,this.i48_1=t,this.j48_1=e,this.k48_1=n,this.l48_1=l,this.m48_1=null==i?null:Ge(i),this.n48_1=null==r?null:Ge(r),this.o48_1=Xe(o);for(var u=ft(ht(a,10)),c=a.s();c.t();){var h=Ke(c.u());u.p(h)}this.p48_1=u,this.q48_1=function(t){var e=ni();return function(t,e){for(var n=e.r3v().s();n.t();){for(var i=n.u(),r=e.q3v(i),a=null==r?vt():r,s=Ge(i),o=ft(ht(a,10)),l=a.s();l.t();){var u=an(l.u());o.p(u)}t.x3v(s,o)}}(e,t),e}(s),this.r48_1=new ki(this.q48_1)}function di(t){var e=I();return e.g5(gi(t)),e.g5(t.j48_1),0!==t.k48_1&&t.k48_1!==t.i48_1.t48_1&&(e.g5(":"),e.g5(t.k48_1.toString())),e.toString()}function pi(){return M}function mi(t,e){e.j7(t.i48_1.s48_1);var n=t.i48_1.s48_1;if("file"===n)return function(t,e,n){t.j7("://"),t.j7(e),ce(n,F(47))||t.h5(F(47)),t.j7(n)}(e,t.j48_1,yi(t)),e;if("mailto"===n)return function(t,e,n){t.j7(":"),t.j7(e),t.j7(n)}(e,gi(t),t.j48_1),e;e.j7("://"),e.j7(di(t)),function(t,e,n,i){!St(e)&&!$e(e,"/")&&t.h5(F(47)),t.j7(e),n.z()&&!i||t.j7("?");for(var r=n.s3v(),a=Qt(),s=r.s();s.t();){var o,l=s.u(),u=l.c2(),c=l.d2();if(c.z())o=Ee(Zt(u,null));else{for(var h=ft(ht(c,10)),f=c.s();f.t();){var _=f.u(),d=Zt(u,_);h.p(d)}o=h}Ae(a,o)}Re(a,t,"&",O,O,O,O,Ri)}(e,yi(t),t.q48_1,t.l48_1);var i=t.o48_1;return Y(i)>0&&(e.h5(F(35)),e.j7(t.o48_1)),e}function gi(t){var e=I();return Ai(e,t.m48_1,t.n48_1),e.toString()}function vi(t,e){t.p48_1=St(e)?vt():"/"===e?wi():_e(fe(e,he([F(47)])))}function yi(t){return function(t){if(t.z())return"";if(1===t.n()){var e=de(t);return 0===Y(e)?"/":de(t)}return pe(t,"/")}(t.p48_1)}function wi(){return Mi(),T}function bi(t,e){if(Mi(),St(e))return t;var n;try{n=function(t,e){var n;Mi();t:{var i=0,r=Y(e)-1|0;if(i<=r)do{var a=i;i=i+1|0;var s=H(e,a);if(!ue(s)){n=a;break t}}while(i<=r);n=-1}var o,l=n;t:{var u=Y(e)-1|0;if(0<=u)do{var c=u;u=u+-1|0;var h=H(e,c);if(!ue(h)){o=c;break t}}while(0<=u);o=-1}var f=o+1|0,_=function(t,e,n){Mi();var i=e,r=-1,a=H(t,i);for(F(97)<=a&&a<=F(122)||F(65)<=a&&a<=F(90)||(r=i);i<n;){var s=H(t,i);if(s===F(58)){if(-1!==r)throw me("Illegal character in scheme at position "+r);return i-e|0}if(s===F(47)||s===F(63)||s===F(35))return-1;-1!==r||F(97)<=s&&s<=F(122)||F(65)<=s&&s<=F(90)||F(48)<=s&&s<=F(57)||s===F(46)||s===F(43)||s===F(45)||(r=i),i=i+1|0}return-1}(e,l,f);if(_>0){var d=l,p=l+_|0,m=e.substring(d,p);t.i48_1=Ci().y49(m),l=l+(_+1|0)|0}var g=function(t,e,n,i){Mi();for(var r=0;(e+r|0)<n&&H(t,e+r|0)===i;)r=r+1|0;return r}(e,l,f,F(47));if(l=l+g|0,"file"===t.i48_1.s48_1)return function(t,e,n,i,r){switch(Mi(),r){case 2:var a=Mt(e,F(47),n);if(-1===a||a===i)return t.j48_1=e.substring(n,i),P;t.j48_1=e.substring(n,a),vi(t,e.substring(a,i));break;case 3:t.j48_1="",vi(t,"/"+e.substring(n,i));break;default:throw me("Invalid file url: "+e)}}(t,e,l,f,g),t;if("mailto"===t.i48_1.s48_1){if(0!==g)throw me(V("Failed requirement."));return function(t,e,n,i){Mi();var r=xe(e,"@",n);if(-1===r)throw me("Invalid mailto url: "+e+", it should contain '@'.");var a=e.substring(n,r);t.r49(We(a));var s=r+1|0;t.j48_1=e.substring(s,i)}(t,e,l,f),t}if(g>=2)t:for(;;){var v,y=ve(e,ge("@/\\?#"),l),w=null==(v=y>0?y:null)?f:v;if(!(w<f&&H(e,w)===F(64))){Ei(t,e,l,w),l=w;break t}var b=Si(e,l,w);if(-1!==b){var x=l;t.m48_1=e.substring(x,b);var S=b+1|0;t.n48_1=e.substring(S,w)}else{var E=l;t.m48_1=e.substring(E,w)}l=w+1|0}if(l>=f)return t.p48_1=H(e,f-1|0)===F(47)?wi():vt(),t;var M,T=t;M=0===g?ye(t.p48_1,1):vt(),T.p48_1=M;var C,$=ve(e,ge("?#"),l),A=null==(C=$>0?$:null)?f:C;if(A>l){var R,I=l,k=e.substring(I,A);if(1===t.p48_1.n()){var U=de(t.p48_1);R=0===Y(U)}else R=!1;var D=R?vt():t.p48_1,N="/"===k?wi():fe(k,he([F(47)])),L=ct(1===g?wi():vt(),N);t.p48_1=ct(D,L),l=A}return l<f&&H(e,l)===F(63)&&(l=function(t,e,n,i){if(Mi(),(n+1|0)===i)return t.l48_1=!0,i;var r,a=Mt(e,F(35),n+1|0),s=null==(r=a>0?a:null)?i:r,o=n+1|0;return si(e.substring(o,s),O,O,!1).t3v((l=t,function(t,e){return l.q48_1.x3v(t,e),P})),s;var l}(t,e,l,f)),function(t,e,n,i){if(Mi(),n<i&&H(e,n)===F(35)){var r=n+1|0;t.o48_1=e.substring(r,i)}}(t,e,l,f),t}(t,e)}catch(t){if(t instanceof Error)throw new xi(e,t);throw t}return n}function xi(t,e){be("Fail to parse url: "+t,e,this),nt(this,xi)}function Si(t,e,n){Mi();var i=!1,r=e;if(r<n)do{var a=r;r=r+1|0;var s=H(t,a);if(s===F(91))i=!0;else if(s===F(93))i=!1;else if(s===F(58)&&!i)return a}while(r<n);return-1}function Ei(t,e,n,i){Mi();var r,a=Si(e,n,i),s=null==(r=a>0?a:null)?i:r;if(t.j48_1=e.substring(n,s),(s+1|0)<i){var o=t,l=s+1|0,u=e.substring(l,i);o.k48_1=Se(u)}else t.k48_1=pi()}function Mi(){C||(C=!0,T=Ee(""))}function Ti(){$=this,this.l49_1=new $i("http",80),this.m49_1=new $i("https",443),this.n49_1=new $i("ws",80),this.o49_1=new $i("wss",443),this.p49_1=new $i("socks",1080);for(var t=gt([this.l49_1,this.m49_1,this.n49_1,this.o49_1,this.p49_1]),e=ae(re(ht(t,10)),16),n=se(e),i=t.s();i.t();){var r=i.u(),a=r.s48_1;n.a2(a,r)}this.q49_1=n}function Ci(){return null==$&&new Ti,$}function $i(t,e){var n;Ci(),this.s48_1=t,this.t48_1=e;t:{for(var i=this.s48_1,r=0;r<Y(i);){var a=H(i,r);if(r=r+1|0,!Te(a)){n=!1;break t}}n=!0}if(!n)throw me(V("All characters should be lower case"))}function Ai(t,e,n){if(null==e)return P;t.g5(e),null!=n&&(t.h5(F(58)),t.g5(n)),t.g5("@")}function Ri(t){var e=t.bd_1;return null==t.cd_1?e:e+"="+Oe(t.cd_1)}function Oi(){}function Ii(t,e,n,i,r,a,s,o,l,u){this.u48_1=t,this.v48_1=e,this.w48_1=n,this.x48_1=i,this.y48_1=r,this.z48_1=a,this.a49_1=s,this.b49_1=o,this.c49_1=l,this.d49_1=u;var c,h=this.w48_1;if(!(0<=h&&h<=65535||this.w48_1===pi())){var f="port must be between 0 and 65535, or "+pi()+" if not set";throw me(V(f))}this.e49_1=Ie((c=this,function(){if(c.x48_1.z())return"";var t=Mt(c.d49_1,F(47),c.u48_1.s48_1.length+3|0);if(-1===t)return"";var e=he([F(63),F(35)]),n=ve(c.d49_1,e,t);return-1===n?c.d49_1.substring(t):c.d49_1.substring(t,n)})),this.f49_1=Ie(function(t){return function(){var e=Mt(t.d49_1,F(63))+1|0;if(0===e)return"";var n=Mt(t.d49_1,F(35),e);return-1===n?t.d49_1.substring(e):t.d49_1.substring(e,n)}}(this)),this.g49_1=Ie(function(t){return function(){var e=Mt(t.d49_1,F(47),t.u48_1.s48_1.length+3|0);if(-1===e)return"";var n=Mt(t.d49_1,F(35),e);return-1===n?t.d49_1.substring(e):t.d49_1.substring(e,n)}}(this)),this.h49_1=Ie(function(t){return function(){if(null==t.a49_1)return null;var e=t.a49_1;if(0===Y(e))return"";var n=t.u48_1.s48_1.length+3|0,i=he([F(58),F(64)]),r=ve(t.d49_1,i,n);return t.d49_1.substring(n,r)}}(this)),this.i49_1=Ie(function(t){return function(){if(null==t.b49_1)return null;var e=t.b49_1;if(0===Y(e))return"";var n=Mt(t.d49_1,F(58),t.u48_1.s48_1.length+3|0)+1|0,i=Mt(t.d49_1,F(64));return t.d49_1.substring(n,i)}}(this)),this.j49_1=Ie(function(t){return function(){var e=Mt(t.d49_1,F(35))+1|0;return 0===e?"":t.d49_1.substring(e)}}(this))}function ki(t){this.c4a_1=t,this.d4a_1=this.c4a_1.p3v()}function Ui(t){var e=ni();return function(t,e){for(var n=e.r3v().s();n.t();){for(var i=n.u(),r=e.q3v(i),a=null==r?vt():r,s=Ye(i),o=ft(ht(a,10)),l=a.s();l.t();){var u=Ye(l.u(),O,O,!0);o.p(u)}t.x3v(s,o)}}(e,t),e.n3j()}function Pi(){Fi.call(this)}function Di(){Fi.call(this)}function Ni(){}function Li(){Fi.call(this)}function zi(){}function Fi(){this.e4a_1=null}function Bi(){}function Hi(t,e,n){n=n===O?null:n,Li.call(this),this.o4a_1=t,this.p4a_1=e,this.q4a_1=n;var i,r=this.o4a_1,a=pn(this.p4a_1),s=null==a?k().f3q_1:a;i=s.equals(k().f3q_1)?De(r):Ne(s.j3q(),r,0,r.length),this.r4a_1=i}return at(nn,"URLDecodeException",rt,tt),at(un,"Companion",Rt),at(hn,"Application",Rt),at(fn,"Text",Rt),at(gn,"HeaderValueWithParameters",rt),at(_n,"ContentType",rt,gn),at(dn,"BadContentTypeFormatException",rt,tt),at(mn,"Companion",Rt),at(bn,"Companion",Rt),at(Sn,"HeadersBuilder",rt,Ht,O,Sn),at(En,"EmptyHeaders",Rt,O,[Gt]),at(Mn,"HeadersImpl",rt,Wt,[Gt,Wt],Mn),at(Cn,"HeaderValueParam",rt),at($n,"HeaderValue",rt),at(zn,"HttpHeaders",Rt),at(Bn,"IllegalHeaderNameException",rt,Dt),at(Hn,"IllegalHeaderValueException",rt,Dt),at(Vn,"UnsafeHeaderException",rt,Dt),at(qn,"Companion",Rt),at(Gn,"HttpMethod",rt),at(Wn,"Companion",Rt),at(Yn,"HttpProtocolVersion",rt),at(Kn,"Companion",Rt),at(Zn,"HttpStatusCode",rt,O,[oe]),at(Qn,"Companion",Rt),at(ei,"Parameters",le,O,[Gt]),at(ii,"EmptyParameters",Rt,O,[ei]),at(ri,"ParametersBuilderImpl",rt,Ht,O,ri),at(ai,"ParametersImpl",rt,Wt,[ei,Wt],ai),at(hi,"Companion",Rt),at(_i,"URLBuilder",rt,O,O,_i),at(xi,"URLParserException",rt,we),at(Ti,"Companion",Rt),at($i,"URLProtocol",rt),at(Oi,"Companion",Rt),at(Ii,"Url",rt),at(ki,"UrlDecodedParametersBuilder",rt),at(Fi,"OutgoingContent",rt),at(Pi,"NoContent",rt,Fi),at(Di,"ReadChannelContent",rt,Fi),at(Ni,"WriteChannelContent",rt,Fi,O,O,O,O,[1]),at(Li,"ByteArrayContent",rt,Fi),at(zi,"ProtocolUpgrade",rt,Fi,O,O,O,O,[4]),at(Bi,"NullBody",Rt),at(Hi,"TextContent",rt,Li),it(un).o3z=function(t){if(St(t))return this.n3z_1;var e=Et(An(t)),n=e.p3z_1,i=e.q3z_1,r=Mt(n,F(47));if(-1===r){if("*"===V($t(Ct(n)?n:Tt())))return cn().n3z_1;throw new dn(t)}var a=n.substring(0,r),s=V($t(Ct(a)?a:Tt()));if(0===Y(s))throw new dn(t);var o=r+1|0,l=n.substring(o),u=V($t(Ct(l)?l:Tt()));if(At(s,F(32))||At(u,F(32)))throw new dn(t);if(0===Y(u)||At(u,F(47)))throw new dn(t);return ln(s,u,i)},it(_n).a41=function(t,e){return function(t,e,n){var i;switch(t.j3z_1.n()){case 0:i=!1;break;case 1:var r=t.j3z_1.d1(0);i=!!wt(r.k3z_1,e,!0)&&wt(r.l3z_1,n,!0);break;default:var a;t:{var s=t.j3z_1;if(xt(s,bt)&&s.z())a=!1;else{for(var o=s.s();o.t();){var l=o.u();if(wt(l.k3z_1,e,!0)&&wt(l.l3z_1,n,!0)){a=!0;break t}}a=!1}}i=a}return i}(this,t,e)?this:new _n(this.y40_1,this.z40_1,this.i3z_1,Ot(this.j3z_1,Tn(t,e)))},it(_n).equals=function(t){return!!(t instanceof _n&&wt(this.y40_1,t.y40_1,!0)&&wt(this.z40_1,t.z40_1,!0))&&It(this.j3z_1,t.j3z_1)},it(_n).hashCode=function(){var t=this.y40_1.toLowerCase(),e=kt(t),n=e,i=R(31,e),r=this.z40_1.toLowerCase();return(e=n+(i+kt(r)|0)|0)+R(31,Ut(this.j3z_1))|0},it(gn).b41=function(t){var e=0,n=Lt(this.j3z_1);if(e<=n)do{var i=e;e=e+1|0;var r=this.j3z_1.d1(i);if(wt(r.k3z_1,t,!0))return r.l3z_1}while(i!==n);return null},it(gn).toString=function(){var t,e;if(this.j3z_1.z())t=this.i3z_1;else{for(var n=this.i3z_1.length,i=0,r=this.j3z_1.s();r.t();){var a=r.u();i=i+(3+(a.k3z_1.length+a.l3z_1.length|0)|0)|0}var s=X(n+i|0);s.g5(this.i3z_1);var o=0,l=Lt(this.j3z_1);if(o<=l)do{var u=o;o=o+1|0;var c=this.j3z_1.d1(u);s.g5("; "),s.g5(c.k3z_1),s.g5("=");var h=c.l3z_1;e=h,wn(),vn(e)?s.g5(yn(h)):s.g5(h)}while(u!==l);t=s.toString()}return t},it(Sn).n3j=function(){return new Mn(this.v3v_1)},it(Sn).w3v=function(t){it(Ht).w3v.call(this,t),Fn().b45(t)},it(Sn).z3v=function(t){it(Ht).z3v.call(this,t),Fn().c45(t)},it(En).p3v=function(){return!0},it(En).q3v=function(t){return null},it(En).r3v=function(){return Vt()},it(En).s3v=function(){return Vt()},it(En).toString=function(){return"Headers "+this.s3v()},it(Mn).toString=function(){return"Headers "+this.s3v()},it(Cn).equals=function(t){return!!(t instanceof Cn&&wt(t.k3z_1,this.k3z_1,!0))&&wt(t.l3z_1,this.l3z_1,!0)},it(Cn).hashCode=function(){var t=this.k3z_1.toLowerCase(),e=kt(t),n=e,i=R(31,e),r=this.l3z_1.toLowerCase();return n+(i+kt(r)|0)|0},it(Cn).toString=function(){return"HeaderValueParam(name="+this.k3z_1+", value="+this.l3z_1+", escapeValue="+this.m3z_1+")"},it($n).toString=function(){return"HeaderValue(value="+this.p3z_1+", params="+this.q3z_1+")"},it($n).hashCode=function(){var t=kt(this.p3z_1);return R(t,31)+Ut(this.q3z_1)|0},it($n).equals=function(t){if(this===t)return!0;if(!(t instanceof $n))return!1;var e=t instanceof $n?t:Tt();return this.p3z_1===e.p3z_1&&!!It(this.q3z_1,e.q3z_1)},it(zn).b45=function(t){for(var e=0,n=0;n<Y(t);){var i=H(t,n);n=n+1|0;var r=e;if(e=r+1|0,ee(i,F(32))<=0||At('"(),/:;<=>?@[\\]{}',i))throw new Bn(t,r)}},it(zn).c45=function(t){for(var e=0,n=0;n<Y(t);){var i=H(t,n);n=n+1|0;var r=e;if(e=r+1|0,ee(i,F(32))<0&&i!==F(9))throw new Hn(t,r)}},it(Gn).toString=function(){return"HttpMethod(value="+this.q45_1+")"},it(Gn).hashCode=function(){return kt(this.q45_1)},it(Gn).equals=function(t){if(this===t)return!0;if(!(t instanceof Gn))return!1;var e=t instanceof Gn?t:Tt();return this.q45_1===e.q45_1},it(Yn).toString=function(){return this.w45_1+"/"+this.x45_1+"."+this.y45_1},it(Yn).hashCode=function(){var t=kt(this.w45_1);return t=R(t,31)+this.x45_1|0,R(t,31)+this.y45_1|0},it(Yn).equals=function(t){if(this===t)return!0;if(!(t instanceof Yn))return!1;var e=t instanceof Yn?t:Tt();return this.w45_1===e.w45_1&&this.x45_1===e.x45_1&&this.y45_1===e.y45_1},it(Zn).toString=function(){return this.c48_1+" "+this.d48_1},it(Zn).equals=function(t){return t instanceof Zn&&t.c48_1===this.c48_1},it(Zn).hashCode=function(){return this.c48_1},it(Zn).e48=function(t){return this.c48_1-t.c48_1|0},it(Zn).d=function(t){return this.e48(t instanceof Zn?t:Tt())},it(ii).p3v=function(){return!0},it(ii).q3v=function(t){return null},it(ii).r3v=function(){return Vt()},it(ii).s3v=function(){return Vt()},it(ii).z=function(){return!0},it(ii).toString=function(){return"Parameters "+this.s3v()},it(ii).equals=function(t){return!(null==t||!xt(t,ei))&&t.z()},it(ri).n3j=function(){return new ai(this.v3v_1)},it(ai).toString=function(){return"Parameters "+this.s3v()},it(_i).r49=function(t){this.m48_1=null==t?null:Ge(t)},it(_i).s49=function(){var t=this.m48_1;return null==t?null:We(t)},it(_i).t49=function(){var t=this.n48_1;return null==t?null:We(t)},it(_i).u49=function(){return Ye(this.o48_1)},it(_i).v49=function(){for(var t=this.p48_1,e=ft(ht(t,10)),n=t.s();n.t();){var i=We(n.u());e.p(i)}return e},it(_i).w49=function(t){this.q48_1=t,this.r48_1=new ki(t)},it(_i).x49=function(){return ci(this),mi(this,X(256)).toString()},it(_i).toString=function(){return mi(this,X(256)).toString()},it(_i).n3j=function(){return ci(this),new Ii(this.i48_1,this.j48_1,this.k48_1,this.v49(),this.r48_1.n3j(),this.u49(),this.s49(),this.t49(),this.l48_1,this.x49())},it(Ti).y49=function(t){var e=Me(t),n=Ci().q49_1.k2(e);return null==n?new $i(e,pi()):n},it($i).toString=function(){return"URLProtocol(name="+this.s48_1+", defaultPort="+this.t48_1+")"},it($i).hashCode=function(){var t=kt(this.s48_1);return R(t,31)+this.t48_1|0},it($i).equals=function(t){if(this===t)return!0;if(!(t instanceof $i))return!1;var e=t instanceof $i?t:Tt();return this.s48_1===e.s48_1&&this.t48_1===e.t48_1},it(Ii).z49=function(){var t=this.w48_1,e=t!==pi()?t:null;return null==e?this.u48_1.t48_1:e},it(Ii).a4a=function(){var t=this.h49_1;return Pe("encodedUser",1,Ue,(function(t){return t.a4a()}),null),t.d2()},it(Ii).b4a=function(){var t=this.i49_1;return Pe("encodedPassword",1,Ue,(function(t){return t.b4a()}),null),t.d2()},it(Ii).toString=function(){return this.d49_1},it(Ii).equals=function(t){return this===t||!(null==t||!ke(this).equals(ke(t)))&&(t instanceof Ii||Tt(),this.d49_1===t.d49_1)},it(Ii).hashCode=function(){return kt(this.d49_1)},it(ki).n3j=function(){return Ui(this.c4a_1)},it(ki).p3v=function(){return this.d4a_1},it(ki).q3v=function(t){var e,n=this.c4a_1.q3v(Ge(t));if(null==n)e=null;else{for(var i=ft(ht(n,10)),r=n.s();r.t();){var a=Ye(r.u(),O,O,!0);i.p(a)}e=i}return e},it(ki).r3v=function(){for(var t=this.c4a_1.r3v(),e=ft(ht(t,10)),n=t.s();n.t();){var i=Ye(n.u());e.p(i)}return dt(e)},it(ki).z=function(){return this.c4a_1.z()},it(ki).s3v=function(){return Ui(this.c4a_1).s3v()},it(ki).a3w=function(t,e){return this.c4a_1.a3w(Ge(t),an(e))},it(ki).x3v=function(t,e){for(var n=Ge(t),i=ft(ht(e,10)),r=e.s();r.t();){var a=an(r.u());i.p(a)}return this.c4a_1.x3v(n,i)},it(ki).v=function(){return this.c4a_1.v()},it(Fi).f4a=function(){return null},it(Fi).g4a=function(){return null},it(Fi).h45=function(){return xn().c41_1},it(Hi).f4a=function(){return this.p4a_1},it(Hi).g4a=function(){return Le(this.r4a_1.length)},it(Hi).m4a=function(){return this.r4a_1},it(Hi).toString=function(){return"TextContent["+this.p4a_1+'] "'+ze(this.o4a_1,30)+'"'},it(En).x1e=qt,it(En).t3v=jt,it(ii).t3v=jt,new mn,g=new En,S=new ii,M=0,new Oi,A=new Bi,t.$_$=t.$_$||{},t.$_$.a=A,t.$_$.b=function(){return null==f&&new hn,f},t.$_$.c=function(){return null==_&&new fn,_},t.$_$.d=xn,t.$_$.e=Fn,t.$_$.f=jn,t.$_$.g=Xn,t.$_$.h=Jn,t.$_$.i=Li,t.$_$.j=Pi,t.$_$.k=zi,t.$_$.l=Di,t.$_$.m=Ni,t.$_$.n=Fi,t.$_$.o=Hi,t.$_$.p=Sn,t.$_$.q=Zn,t.$_$.r=_i,t.$_$.s=Vn,t.$_$.t=di,t.$_$.u=function(t){var e=I();return e.g5(function(t){var e=I();return Ai(e,t.a4a(),t.b4a()),e.toString()}(t)),t.w48_1===pi()||t.w48_1===t.u48_1.t48_1?e.g5(t.v48_1):e.g5(function(t){return t.v48_1+":"+t.z49()}(t)),e.toString()},t.$_$.v=function(t){var e=function(t){var e=t.h45().x1e(Fn().x41_1);return null==e?null:cn().o3z(e)}(t);return null==e?null:pn(e)},t.$_$.w=pn,t.$_$.x=function(t){var e=t.h45().x1e(Fn().u41_1);return null==e?null:ie(e)},t.$_$.y=function(t){var e=t.h45().x1e(Fn().x41_1);return null==e?null:cn().o3z(e)},t.$_$.z=function(t){return"https"===t.s48_1||"wss"===t.s48_1},t.$_$.a1=function(t){return"ws"===t.s48_1||"wss"===t.s48_1},t.$_$.b1=function(t,e){t.i48_1=e.i48_1,t.j48_1=e.j48_1,t.k48_1=e.k48_1,t.p48_1=e.p48_1,t.m48_1=e.m48_1,t.n48_1=e.n48_1;var n=ni();return Ce(n,e.q48_1),t.w49(n),t.o48_1=e.o48_1,t.l48_1=e.l48_1,t},t.$_$.c1=bi,t.$_$.d1=function(t,e){return t.a41("charset",Nt(e))},t})?i.apply(e,r):i)||(t.exports=a)},229:function(t,e,n){var i,r,a;r=[e,n(675),n(868),n(646)],void 0===(a="function"==typeof(i=function(t,e,n,i){"use strict";var r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$=Math.imul,A=e.$_$.sb,R=e.$_$.a3,O=e.$_$.f8,I=e.$_$.e1,k=e.$_$.d8,U=e.$_$.i1,P=e.$_$.m6,D=e.$_$.x5,N=e.$_$.a8,L=e.$_$.x6,z=e.$_$.b8,F=e.$_$.db,B=e.$_$.d,H=n.$_$.d,V=n.$_$.c,q=n.$_$.e,j=e.$_$.ib,G=e.$_$.o,W=e.$_$.w5,X=e.$_$.n,Y=e.$_$.r6,K=e.$_$.r2,J=i.$_$.y,Z=e.$_$.m7,Q=i.$_$.d,tt=i.$_$.e,et=i.$_$.b1,nt=i.$_$.h,it=i.$_$.k1,rt=e.$_$.r7,at=i.$_$.l,st=i.$_$.j,ot=e.$_$.b7,lt=e.$_$.u2,ut=e.$_$.s,ct=e.$_$.v6,ht=e.$_$.z7,ft=e.$_$.y7,_t=e.$_$.za,dt=e.$_$.z,pt=e.$_$.v7,mt=e.$_$.k8,gt=e.$_$.m8,vt=e.$_$.f2,yt=e.$_$.c8,wt=e.$_$.p2,bt=e.$_$.x1,xt=e.$_$.e8,St=e.$_$.o2,Et=e.$_$.z2,Mt=e.$_$.u6,Tt=e.$_$.p9,Ct=e.$_$.o9,$t=i.$_$.a1,At=e.$_$.l8,Rt=e.$_$.k7,Ot=e.$_$.vb,It=e.$_$.x2,kt=e.$_$.w8,Ut=e.$_$.i7,Pt=e.$_$.n1,Dt=e.$_$.y1,Nt=e.$_$.y9,Lt=e.$_$.j7,zt=e.$_$.c7,Ft=e.$_$.w6,Bt=e.$_$.l1,Ht=e.$_$.b1,Vt=e.$_$.p7,qt=e.$_$.ua,jt=e.$_$.e9,Gt=e.$_$.h5,Wt=e.$_$.d7;function Xt(){this.xo()}function Yt(t){return t.u3e_1.m3f()?(t.y3e_1.d3f(),!1):(function(t){t.z3e_1;var e=t.u3e_1.n(),n=A(t.u3e_1.v3f());t.a3f_1.w3f(n),t.r3e_1.atomicfu$addAndGet(e)}(t),t.y3e_1.d3f(),!0)}function Kt(t){var e=t.x3f();if(null!=e)throw e}function Jt(t,e){var n=t.x3f();if(null!=n)throw e.xr(),n}function Zt(t,e){return function(){return t.m3g()<e&&!t.y3f()}}function Qt(t,e){return function(){return t.l3g()<e&&!t.n3g()}}function te(t,e,n){P.call(this,n),this.w3g_1=t,this.x3g_1=e}function ee(t,e,n){P.call(this,n),this.h3h_1=t,this.i3h_1=e}function ne(t,e,n){P.call(this,n),this.r3h_1=t,this.s3h_1=e}function ie(t,e,n,i,r){P.call(this,r),this.j3i_1=t,this.k3i_1=e,this.l3i_1=n,this.m3i_1=i}function re(t,e,n){P.call(this,n),this.x3i_1=t,this.y3i_1=e}function ae(t,e,n,i){P.call(this,i),this.h3g_1=t,this.i3g_1=e,this.j3g_1=n}function se(t,e,n){P.call(this,n),this.x3j_1=t,this.y3j_1=e}function oe(t,e,n,i,r){P.call(this,r),this.j3k_1=t,this.k3k_1=e,this.l3k_1=n,this.m3k_1=i}function le(t,e){P.call(this,e),this.v3k_1=t}function ue(t,e,n){P.call(this,n),this.g3l_1=t,this.h3l_1=e}function ce(t,e,n){n=n===B?pn().j3l_1:n,this.n3e_1=e,this.o3e_1=H(pn().l3l_1),this.p3e_1=V(new F(0,0)),this.q3e_1=V(new F(0,0)),this.r3e_1=q(0),this.s3e_1=q(0),this.t3e_1=H(null),this.u3e_1=new De(n),this.v3e_1=Ne(t,n),this.w3e_1=q(0),this.x3e_1=H(pn().l3l_1),this.y3e_1=new Nn,this.z3e_1=new Object,this.a3f_1=new De;var i=ke(t).y8();this.a3i(i),this.r3e_1.atomicfu$addAndGet(i)}function he(t){X(t,this),Y(this,he)}function fe(){return a||(a=!0,r=new _e(null)),r}function _e(t){this.b3f_1=t}function de(){}function pe(t,e){this.b3m_1=t,this.c3m_1=e}function me(t,e){this.d3m_1=e,this.e3m_1=t}function ge(t,e,n,i,r){this.n3m_1=t,this.o3m_1=e,this.p3m_1=n,this.q3m_1=i,P.call(this,r)}function ve(t,e,n){n=n===B?lt.MAX_VALUE:n;var i=k(n),r=function(t){var e;if(t instanceof Fe)e=t.k3j();else{var n=t.k3j(),i=new F(16,0);e=n.t8(i)>=0?n:i}return e}(e),a=(i.t8(r)<=0?i:r).y8(),s=ut(a);return function(t,e,n,i){var r=Mi(ii(di(t)),!0),a=0,s=!0,o=On(e,1);if(null!=o){var l=o,u=1;try{t:do{var c,h,f=l,_=f.w3h_1-f.v3h_1|0;if(_>=u)try{var d,p=l,m=i-a|0,g=p.w3h_1-p.v3h_1|0;if(m<g)d=0;else{var v=p.u3h_1,y=p.v3h_1,w=p.w3h_1,b=new Int8Array(v.w3m_1.buffer,v.w3m_1.byteOffset+y|0,w-y|0);e:try{var x;n:try{x=r.p3t(b,Ti(!0));break n}catch(t){if(t instanceof Error){var S=t.message;throw new si("Failed to decode bytes: "+(null==S?"no cause provided":S))}throw t}break e}catch(t){if(t instanceof Error){var E=t.message;throw new si("Failed to decode bytes: "+(null==E?"no cause provided":E))}throw t}var M=x;n.j7(M),a=a+M.length|0;var T,C=b.byteLength;if(p.x3m(C),a===i){var $;try{$=r.q3t()}catch(t){$=""}ct($)>0&&p.b3n(g),T=0}else T=a<i?pi():0;d=T}u=d}finally{var A=l;c=A.w3h_1-A.v3h_1|0}else c=_;if(s=!1,0===c)h=In(e,l);else{var R;if(c<u)R=!0;else{var O=l;R=(O.z3h_1-O.y3h_1|0)<8}R?(Rn(e,l),h=On(e,u)):h=l}var I=h;if(null==I)break t;l=I,s=!0}while(u>0)}finally{s&&Rn(e,l)}}if(a<i){var k=1,U=!0,P=On(e,1);if(null!=P){var D=P,N=1;try{t:do{var L,z,F=D,B=F.w3h_1-F.v3h_1|0;if(B>=N)try{var H=D,V=H.u3h_1,q=H.v3h_1,j=H.w3h_1,G=gi(new Int8Array(V.w3m_1.buffer,V.w3m_1.byteOffset+q|0,j-q|0),r,i-a|0);n.j7(G.r3t_1),a=a+G.r3t_1.length|0;var W=G.s3t_1;H.x3m(W),N=k=W>0?1:k===pi()?0:k+1|0}finally{var X=D;L=X.w3h_1-X.v3h_1|0}else L=B;if(U=!1,0===L)z=In(e,D);else{var Y;if(L<N)Y=!0;else{var K=D;Y=(K.z3h_1-K.y3h_1|0)<8}Y?(Rn(e,D),z=On(e,N)):z=D}var J=z;if(null==J)break t;D=J,U=!0}while(N>0)}finally{U&&Rn(e,D)}}}}(t,e,s,n),s.toString()}function ye(t,e,n,i,r){var a=i;if(a>=r)return 0;var s=0,o=kn(e,1,null);try{var l;t:for(;;){var u=o,c=u.y3h_1-u.w3h_1|0,h=fi(t,n,a,r,u);if(!(h>=0))throw U(O("Check failed."));if(a=a+h|0,s=s+(c-(u.y3h_1-u.w3h_1|0)|0)|0,(l=a>=r?0:0===h?8:1)<=0)break t;o=kn(e,l,o)}}finally{e.t3m()}return s+function(t,e){var n=1,i=0,r=kn(e,1,null);try{t:for(;;){var a=r,s=a.y3h_1-a.w3h_1|0;if(n=0,i=i+(s-(a.y3h_1-a.w3h_1|0)|0)|0,!(n>0))break t;r=kn(e,1,r)}}finally{e.t3m()}return i}(0,e)|0}function we(){this.u3m_1=8}function be(t){this.u3h_1=t,this.v3h_1=0,this.w3h_1=0,this.x3h_1=0,this.y3h_1=this.u3h_1.w3m_1.byteLength,this.z3h_1=this.u3h_1.w3m_1.byteLength}function xe(t,e){throw new xi("Unable to discard "+t+" bytes: only "+e+" available for reading")}function Se(t,e){throw new xi("Unable to discard "+t+" bytes: only "+e+" available for writing")}function Ee(t,e,n){var i=function(t,e,n,i){return Me.call(i,"Not enough free space to write "+t+" of "+e+" bytes, available "+n+" bytes."),i}(t,e,n,ft(N(Me)));return Y(i,Ee),i}function Me(t){dt(t=t===B?"Not enough free space":t,this),Y(this,Me)}function Te(t,e,n){var i=e.w3h_1-e.v3h_1|0,r=Math.min(i,n);(t.y3h_1-t.w3h_1|0)<=r&&function(t,e){if(((t.y3h_1-t.w3h_1|0)+(t.z3h_1-t.y3h_1|0)|0)<e)throw I("Can't append buffer: not enough free space at the end");((t.w3h_1+e|0)-t.y3h_1|0)>0&&t.j3n()}(t,r);var a=t.u3h_1,s=t.w3h_1;t.y3h_1;var o=e.u3h_1,l=e.v3h_1;e.w3h_1,o.n3n(a,l,r,s);var u=r;e.x3m(u);var c=u;return t.y3m(c),c}function Ce(){return u||(u=!0,o=new $e),o}function $e(t,e,n){t=t===B?4096:t,e=e===B?1e3:e,n=n===B?g:n,Oi.call(this,e),this.r3n_1=t,this.s3n_1=n}function Ae(t,e,n,i){n=n===B?0:n,i=i===B?e.length-n|0:i;var r=t.u3h_1,a=t.w3h_1,s=t.y3h_1-a|0;if(s<i)throw Ee("byte array",i,s);(function(t,e,n,i){n=n===B?0:n,i=i===B?e.length-n|0:i;var r=e;return function(t,e,n,i){return n=n===B?0:n,i=i===B?e.byteLength:i,Kn(Zn(),e.buffer,e.byteOffset+n|0,i)}(Zn(),r,n,i)})(Zn(),e,n,i).n3n(r,0,i,a);var o=i;t.y3m(o)}function Re(t,e,n){if(!(n>=0))throw I(O("length shouldn't be negative: "+n));if(!(n<=(e.w3h_1-e.v3h_1|0))){var i="length shouldn't be greater than the source read remaining: "+n+" > "+(e.w3h_1-e.v3h_1|0);throw I(O(i))}if(!(n<=(t.y3h_1-t.w3h_1|0))){var r="length shouldn't be greater than the destination write remaining space: "+n+" > "+(t.y3h_1-t.w3h_1|0);throw I(O(r))}var a=t.u3h_1,s=t.w3h_1,o=t.y3h_1-s|0;if(o<n)throw Ee("buffer readable content",n,o);e.u3h_1.n3n(a,e.v3h_1,n,s),e.x3m(n);var l=n;t.y3m(l)}function Oe(t,e,n,i){n=n===B?0:n,i=i===B?e.length-n|0:i;var r=t.u3h_1,a=t.v3h_1;if((t.w3h_1-a|0)<i)throw new xi("Not enough bytes to read a byte array of size "+i+".");!function(t,e,n,i,r){var a=e,s=new Int8Array(t.w3m_1.buffer,t.w3m_1.byteOffset+n|0,i);a.set(s,r)}(r,e,a,i,n);var s=i;t.x3m(s)}function Ie(t,e,n){if(!((n=n===B?e.y3h_1-e.w3h_1|0:n)>=0))throw I(O("Failed requirement."));if(!(n<=(e.y3h_1-e.w3h_1|0)))throw I(O("Failed requirement."));var i=t.u3h_1,r=t.v3h_1;if((t.w3h_1-r|0)<n)throw new xi("Not enough bytes to read a buffer content of size "+n+".");i.n3n(e.u3h_1,r,n,e.w3h_1),e.y3m(n);var a=n;return t.x3m(a),n}function ke(t){return function(t,e){for(var n=t,i=e;;){var r=n,a=r.w3h_1-r.v3h_1|0,s=k(a).ba(i),o=n.xx();if(null==o)return s;n=o,i=s}}(t,new F(0,0))}function Ue(t){for(var e=t;;){var n=e.xx();if(null==n)return e;e=n}}function Pe(t,e){for(var n=t;null!=n;){var i=n.u3o();n.v3o(e),n=i}}function De(t){t=t===B?pn().j3l_1:t,nn.call(this,t)}function Ne(t,e){return function(t,e,n){return Fe.call(n,t,ke(t),e),n}(t,e,ft(N(Fe)))}function Le(){c=this,this.z3o_1=new Fe(pn().l3l_1,new F(0,0),pn().k3l_1)}function ze(){return null==c&&new Le,c}function Fe(t,e,n){ze(),Ke.call(this,t,e,n),this.f3p()}function Be(t,e){t.e3j_1=e,t.f3j_1=e.u3h_1,t.g3j_1=e.v3h_1,t.h3j_1=e.w3h_1}function He(t,e,n,i){if(0===i&&0===n)return 0;if(t.x3k()){if(0===n)return 0;!function(t,e){throw new xi("at least "+e+" characters required but no bytes available")}(0,n)}else i<n&&function(t,e,n){throw I("min should be less or equal to max but min = "+e+", max = "+n)}(0,n,i);var r=0,a=!1,s=!0,o=On(t,1);if(null!=o){var l=o;try{t:for(;;){var u,c,h=l;e:{var f=h.u3h_1,_=h.v3h_1,d=h.w3h_1,p=_;if(p<d)do{var m=p;p=p+1|0;var g,v=255&f.w3m_1.getInt8(m);if(128==(128&v))g=!0;else{var y,w=pt(v);r===i?y=!1:(e.h5(w),r=r+1|0,y=!0),g=!y}if(g){h.x3m(m-_|0),u=!1;break e}}while(p<d);var b=d-_|0;h.x3m(b),u=!0}if(u?c=!0:(r===i||(a=!0),c=!1),!c)break t;s=!1;var x=In(t,l);if(null==x)break t;l=x,s=!0}}finally{s&&Rn(t,l)}}return a?r+function(t,e,n,i){var r=0,a=!0,s=On(t,1);if(null!=s){var o=s,l=1;try{t:do{var u,c,h=o,f=h.w3h_1-h.v3h_1|0;if(f>=l)try{var _,d=o;e:{var p=0,m=0,g=0,v=d.u3h_1,y=d.v3h_1,w=d.w3h_1,b=y;if(b<w)do{var x=b;b=b+1|0;var S=255&v.w3m_1.getInt8(x);if(0==(128&S)){0!==p&&bn(p);var E,M=pt(S);if(r===i?E=!1:(e.h5(M),r=r+1|0,E=!0),!E){d.x3m(x-y|0),_=-1;break e}}else if(0===p){var T=128;m=S;var C=1;if(C<=6)n:do{if(C=C+1|0,0==(m&T))break n;m&=~T,T>>=1,p=p+1|0}while(C<=6);if(g=p,p=p-1|0,g>(w-x|0)){d.x3m(x-y|0),_=g;break e}}else if(m=m<<6|127&S,0==(p=p-1|0)){if(xn(m)){var $,A=pt(m);if(r===i?$=!1:(e.h5(A),r=r+1|0,$=!0),!$){d.x3m(1+((x-y|0)-g|0)|0),_=-1;break e}}else if(Sn(m)){var R,O,I=pt(Mn(m));if(r===i?O=!1:(e.h5(I),r=r+1|0,O=!0),O){var k,U=pt(Tn(m));r===i?k=!1:(e.h5(U),r=r+1|0,k=!0),R=!k}else R=!0;if(R){d.x3m(1+((x-y|0)-g|0)|0),_=-1;break e}}else En(m);m=0}}while(b<w);var P=w-y|0;d.x3m(P),_=0}l=0===_?1:_>0?_:0}finally{var D=o;u=D.w3h_1-D.v3h_1|0}else u=f;if(a=!1,0===u)c=In(t,o);else{var N;if(u<l)N=!0;else{var L=o;N=(L.z3h_1-L.y3h_1|0)<8}N?(Rn(t,o),c=On(t,l)):c=o}var z=c;if(null==z)break t;o=z,a=!0}while(l>0)}finally{a&&Rn(t,o)}}return r<n&&Ve(0,n,r),r}(t,e,n-r|0,i-r|0)|0:(r<n&&Ve(0,n,r),r)}function Ve(t,e,n){throw new wn("Premature end of stream: expected at least "+e+" chars but had only "+n)}function qe(t,e){if(t.j3j_1&&null==e.xx())return t.g3j_1=e.v3h_1,t.h3j_1=e.w3h_1,t.q3p(new F(0,0)),R;var n=e.w3h_1-e.v3h_1|0,i=8-(e.z3h_1-e.y3h_1|0)|0,r=Math.min(n,i);if(n>r)!function(t,e,n,i){var r=t.d3j_1.s3o(),a=t.d3j_1.s3o();r.d3n(8),a.d3n(8),r.d3q(a),a.d3q(e.u3o()),Te(r,e,n-i|0),Te(a,e,i),Be(t,r),t.q3p(ke(a))}(t,e,n,r);else{var a=t.d3j_1.s3o();a.d3n(8),a.d3q(e.u3o()),Te(a,e,n),Be(t,a)}e.v3o(t.d3j_1)}function je(t){if(t.j3j_1)return null;var e=t.n3p();return null==e?(t.j3j_1=!0,null):(function(t,e){var n=Ue(t.e3j_1);if(n===pn().l3l_1){if(Be(t,e),!t.i3j_1.equals(new F(0,0)))throw U("It should be no tail remaining bytes if current tail is EmptyBuffer");var i=e.xx(),r=null==i?null:ke(i);t.q3p(null==r?new F(0,0):r)}else n.d3q(e),t.q3p(t.i3j_1.ba(ke(e)))}(t,e),e)}function Ge(t,e,n){for(var i=t,r=e,a=n;;){var s=i,o=s.h3j_1-s.g3j_1|0;if(o>=r)return a;var l=a.xx(),u=null==l?je(i):l;if(null==u)return null;var c=u;if(0!==o){var h=Te(a,c,r-o|0);i.h3j_1=a.w3h_1;var f=i,_=f.i3j_1.ca(k(h));f.q3p(_),c.w3h_1>c.v3h_1?c.c3n(h):(a.d3q(null),a.d3q(c.u3o()),c.v3o(i.d3j_1));var d=a;if((d.w3h_1-d.v3h_1|0)>=r)return a;r>8&&We(0,r)}else a!==pn().l3l_1&&i.c3q(a),a=c}}function We(t,e){throw U("minSize of "+e+" is too big (should be less than 8)")}function Xe(t,e){0==(e.w3h_1-e.v3h_1|0)&&t.c3q(e)}function Ye(){}function Ke(t,e,n){t=t===B?pn().l3l_1:t,e=e===B?ke(t):e,n=n===B?pn().j3l_1:n,this.d3j_1=n,this.e3j_1=t,this.f3j_1=t.u3h_1,this.g3j_1=t.v3h_1,this.h3j_1=t.w3h_1;var i=this.h3j_1-this.g3j_1|0;this.i3j_1=e.ca(k(i)),this.j3j_1=!1}function Je(t,e,n,i){n=n===B?0:n;var r=i=i===B?e.length-n|0:i,a=n,s=!0,o=On(t,1);if(null!=o){var l=o;try{t:for(;;){var u=l,c=r,h=u.w3h_1-u.v3h_1|0,f=Math.min(c,h);if(Oe(u,e,a,f),a=a+f|0,!((r=r-f|0)>0))break t;s=!1;var _=In(t,l);if(null==_)break t;l=_,s=!0}}finally{s&&Rn(t,l)}}r>0&&on(r)}function Ze(t,e,n){var i=n=n===B?e.y3h_1-e.w3h_1|0:n,r=0,a=!0,s=On(t,1);if(null!=s){var o=s;try{t:for(;;){var l=o,u=i,c=l.w3h_1-l.v3h_1|0,h=Math.min(u,c);if(Ie(l,e,h),r=r+h|0,!((i=i-h|0)>0))break t;a=!1;var f=In(t,o);if(null==f)break t;o=f,a=!0}}finally{a&&Rn(t,o)}}i>0&&on(i)}function Qe(t){var e=t.n3f_1.s3o();return e.d3n(8),t.b3p(e),e}function tn(t,e,n,i){var r=t.p3f_1;if(null==r)t.o3f_1=e,t.u3f_1=0;else{r.d3q(e);var a=t.r3f_1;r.z3m(a),t.u3f_1=t.u3f_1+(a-t.t3f_1|0)|0}t.p3f_1=n,t.u3f_1=t.u3f_1+i|0,t.q3f_1=n.u3h_1,t.r3f_1=n.w3h_1,t.t3f_1=n.v3h_1,t.s3f_1=n.y3h_1}function en(t,e,n,i){e.z3m(t.r3f_1);var r=e.w3h_1-e.v3h_1|0,a=n.w3h_1-n.v3h_1|0,s=bi(),o=a<s&&a<=((e.z3h_1-e.y3h_1|0)+(e.y3h_1-e.w3h_1|0)|0)?a:-1,l=r<s&&r<=n.x3h_1&&1===n.o3o()?r:-1;if(-1===o&&-1===l)t.c3p(n);else if(-1===l||o<=l){Te(e,n,(e.y3h_1-e.w3h_1|0)+(e.z3h_1-e.y3h_1|0)|0),t.t3m();var u=n.u3o();null==u||t.c3p(u),n.v3o(i)}else{if(!(-1===o||l<o))throw U("prep = "+l+", app = "+o);!function(t,e,n){!function(t,e){var n=e.w3h_1-e.v3h_1|0,i=t.v3h_1;if(i<n)throw I("Not enough space in the beginning to prepend bytes");var r=i-n|0;e.u3h_1.n3n(t.u3h_1,e.v3h_1,n,r),e.x3m(n),t.i3n(r)}(e,n);var i=t.o3f_1;if(null==i)throw U(O("head should't be null since it is already handled in the fast-path"));var r=i;if(r===n)t.o3f_1=e;else{var a=r;t:for(;;){var s=A(a.xx());if(s===n)break t;a=s}a.d3q(e)}n.v3o(t.n3f_1),t.p3f_1=Ue(e)}(t,n,e)}}function nn(t){this.n3f_1=t,this.o3f_1=null,this.p3f_1=null,this.q3f_1=Zn().e3q_1,this.r3f_1=0,this.s3f_1=0,this.t3f_1=0,this.u3f_1=0}function rn(t,e,n){var i=0,r=n=n===B?e.w3h_1-e.v3h_1|0:n,a=kn(t,1,null);try{t:for(;;){var s=a,o=r,l=s.y3h_1-s.w3h_1|0,u=Math.min(o,l);if(Re(s,e,u),i=i+u|0,!((r=r-u|0)>0))break t;a=kn(t,1,a)}}finally{t.t3m()}}function an(t,e,n,i){var r=n=n===B?0:n,a=i=i===B?e.length-n|0:i,s=kn(t,1,null);try{t:for(;;){var o=s,l=a,u=o.y3h_1-o.w3h_1|0,c=Math.min(l,u);if(Ae(o,e,r,c),r=r+c|0,!((a=a-c|0)>0))break t;s=kn(t,1,s)}}finally{t.t3m()}}function sn(t,e){var n,i;if(e===B){var r=t.k3j();if(r.t8(k(lt.MAX_VALUE))>0)throw I("Unable to convert to a ByteArray: packet is too big");n=r.y8()}else n=e;if(0!==(e=n)){var a=new Int8Array(e);Je(t,a,0,e),i=a}else i=An();return i}function on(t){throw new xi("Premature end of stream: expected "+t+" bytes")}function ln(t,e,n){return function(t,e,n){if(0===n)return"";if((e.h3j_1-e.g3j_1|0)>=n){var i,r=Mi(di(t).h3q_1,!0),a=e.a3p(),s=e.f3j_1.w3m_1;t:try{var o=0===a.v3h_1&&n===s.byteLength?s:new DataView(s.buffer,s.byteOffset+a.v3h_1|0,n);i=r.t3t(o);break t}catch(t){if(t instanceof Error){var l=t.message;throw new si("Failed to decode bytes: "+(null==l?"no cause provided":l))}throw t}var u=i;return e.x3m(n),u}return function(t,e,n){var i=Mi(ii(di(t)),!0),r=n,a=ut(n);t:try{var s=!0,o=On(e,6);if(null!=o){var l=o,u=6;try{e:do{var c,h,f=l,_=f.w3h_1-f.v3h_1|0;if(_>=u)try{var d,p=l,m=p.w3h_1-p.v3h_1|0,g=r,v=Math.min(m,g);if(0===p.v3h_1&&p.u3h_1.w3m_1.byteLength===v){var y;n:{var w=p.u3h_1.w3m_1;try{y=i.p3t(w,Ti(!0));break n}catch(t){if(t instanceof Error){var b=t.message;throw new si("Failed to decode bytes: "+(null==b?"no cause provided":b))}throw t}}d=y}else{var x;n:{var S=new Int8Array(p.u3h_1.w3m_1.buffer,p.u3h_1.w3m_1.byteOffset+p.v3h_1|0,v);try{x=i.p3t(S,Ti(!0));break n}catch(t){if(t instanceof Error){var E=t.message;throw new si("Failed to decode bytes: "+(null==E?"no cause provided":E))}throw t}}d=x}var M=d;a.g5(M),p.x3m(v),u=(r=r-v|0)>0?6:0}finally{var T=l;c=T.w3h_1-T.v3h_1|0}else c=_;if(s=!1,0===c)h=In(e,l);else{var C;if(c<u)C=!0;else{var $=l;C=($.z3h_1-$.y3h_1|0)<8}C?(Rn(e,l),h=On(e,u)):h=l}var A=h;if(null==A)break e;l=A,s=!0}while(u>0)}finally{s&&Rn(e,l)}}if(r>0){var R=!0,O=On(e,1);if(null!=O){var I=O;try{e:for(;;){var k,U=I,P=U.w3h_1-U.v3h_1|0,D=r,N=Math.min(P,D);if(0===U.v3h_1&&U.u3h_1.w3m_1.byteLength===N)k=i.t3t(U.u3h_1.w3m_1);else{var L;n:{var z=new Int8Array(U.u3h_1.w3m_1.buffer,U.u3h_1.w3m_1.byteOffset+U.v3h_1|0,N);try{L=i.p3t(z,Ti(!0));break n}catch(t){if(t instanceof Error){var F=t.message;throw new si("Failed to decode bytes: "+(null==F?"no cause provided":F))}throw t}}k=L}var B=k;a.g5(B),U.x3m(N),r=r-N|0,R=!1;var H=In(e,I);if(null==H)break e;I=H,R=!0}}finally{R&&Rn(e,I)}}}a.g5(i.q3t());break t}catch(t){if(t instanceof Error){var V=t.message;throw new si("Failed to decode bytes: "+(null==V?"no cause provided":V))}throw t}if(r>0)throw new xi("Not enough bytes available: had only "+(n-r|0)+" instead of "+n);return a.toString()}(t,e,n)}((n=n===B?ai().f3q_1:n).i3q(),t,e)}function un(t,e,n,i,r){if(n=n===B?0:n,i=i===B?ct(e):i,(r=r===B?ai().f3q_1:r)===ai().f3q_1)return function(t,e,n,i){var r=n,a=kn(t,1,null);try{var s;t:for(;;){var o=a,l=Cn(o.u3h_1,e,r,i,o.w3h_1,o.y3h_1),u=vn(l),c=yn(l);r=r+(65535&wt(u))|0;var h=65535&wt(c);if(o.y3m(h),(s=0==(65535&wt(u))&&r<i?8:r<i?1:0)<=0)break t;a=kn(t,s,a)}}finally{t.t3m()}}(t,e,n,i);ye(r.j3q(),t,e,n,i)}function cn(){}function hn(){}function fn(){Hn.call(this)}function _n(){Hn.call(this)}function dn(){h=this,this.j3l_1=new cn,this.k3l_1=new hn,this.l3l_1=new mn(Zn().e3q_1,null,this.k3l_1),this.m3l_1=new fn,this.n3l_1=new _n}function pn(){return null==h&&new dn,h}function mn(t,e,n){if(pn(),be.call(this,t),this.h3o_1=n,e===this)throw I(O("A chunk couldn't be a view of itself."));this.i3o_1=H(null),this.j3o_1=q(1),this.k3o_1=e}function gn(t,e){return(65535&wt(t))<<16|65535&wt(e)}function vn(t){return function(t){var e=xt(t>>>16|0);return St(e)}(t)}function yn(t){return function(t){var e=xt(65535&t);return St(e)}(t)}function wn(t){dt(t,this),Y(this,wn)}function bn(t){throw new wn("Expected "+t+" more character bytes")}function xn(t){return 0==(t>>>16|0)}function Sn(t){return t<=1114111}function En(t){throw I("Malformed code-point "+t+" found")}function Mn(t){return 55232+(t>>>10|0)|0}function Tn(t){return 56320+(1023&t)|0}function Cn(t,e,n,i,r,a){Et();var s=St(-1),o=n+(65535&wt(s))|0,l=Math.min(i,o);Et();var u=St(-1),c=65535&wt(u),h=gt(a,c),f=r,_=n;t:for(;;){if(f>=h||_>=l)return gn(St(xt(_-n|0)),St(xt(f-r|0)));var d=_;_=d+1|0;var p=Mt(e,d),m=65535&vt(p);if(0!=(65408&m))break t;var g=f;f=g+1|0;var v=yt(m);t.w3m_1.setInt8(g,v)}return function(t,e,n,i,r,a,s,o){var l=n,u=a,c=s-3|0;for(;!((c-u|0)<=0||l>=i);){var h=l;l=h+1|0;var f,_=Mt(e,h);if(Ct(_)){var d;if(l!==i&&Tt(Mt(e,l))){var p=l;l=p+1|0,d=$n(_,Mt(e,p))}else d=63;f=d}else f=vt(_);var m,g=f,v=u;if(0<=g&&g<=127){var y=yt(g);t.w3m_1.setInt8(v,y),m=1}else if(128<=g&&g<=2047){var w=yt(192|g>>6&31);t.w3m_1.setInt8(v,w);var b=v+1|0,x=yt(128|63&g);t.w3m_1.setInt8(b,x),m=2}else if(2048<=g&&g<=65535){var S=yt(224|g>>12&15);t.w3m_1.setInt8(v,S);var E=v+1|0,M=yt(128|g>>6&63);t.w3m_1.setInt8(E,M);var T=v+2|0,C=yt(128|63&g);t.w3m_1.setInt8(T,C),m=3}else if(65536<=g&&g<=1114111){var $=yt(240|g>>18&7);t.w3m_1.setInt8(v,$);var A=v+1|0,R=yt(128|g>>12&63);t.w3m_1.setInt8(A,R);var O=v+2|0,I=yt(128|g>>6&63);t.w3m_1.setInt8(O,I);var k=v+3|0,U=yt(128|63&g);t.w3m_1.setInt8(k,U),m=4}else En(g);u=u+m|0}return u===c?function(t,e,n,i,r,a,s,o){var l=n,u=a;t:for(;;){var c=s-u|0;if(c<=0||l>=i)break t;var h=l;l=h+1|0;var f,_=Mt(e,h);if(Ct(_)){var d;if(l!==i&&Tt(Mt(e,l))){var p=l;l=p+1|0,d=$n(_,Mt(e,p))}else d=63;f=d}else f=vt(_);var m,g=f;if(1<=g&&g<=127?m=1:128<=g&&g<=2047?m=2:2048<=g&&g<=65535?m=3:65536<=g&&g<=1114111?m=4:En(g),m>c){l=l-1|0;break t}var v,y=u;if(0<=g&&g<=127){var w=yt(g);t.w3m_1.setInt8(y,w),v=1}else if(128<=g&&g<=2047){var b=yt(192|g>>6&31);t.w3m_1.setInt8(y,b);var x=y+1|0,S=yt(128|63&g);t.w3m_1.setInt8(x,S),v=2}else if(2048<=g&&g<=65535){var E=yt(224|g>>12&15);t.w3m_1.setInt8(y,E);var M=y+1|0,T=yt(128|g>>6&63);t.w3m_1.setInt8(M,T);var C=y+2|0,$=yt(128|63&g);t.w3m_1.setInt8(C,$),v=3}else if(65536<=g&&g<=1114111){var A=yt(240|g>>18&7);t.w3m_1.setInt8(y,A);var R=y+1|0,O=yt(128|g>>12&63);t.w3m_1.setInt8(R,O);var I=y+2|0,k=yt(128|g>>6&63);t.w3m_1.setInt8(I,k);var U=y+3|0,P=yt(128|63&g);t.w3m_1.setInt8(U,P),v=4}else En(g);u=u+v|0}return gn(St(xt(l-r|0)),St(xt(u-o|0)))}(t,e,l,i,r,u,s,o):gn(St(xt(l-r|0)),St(xt(u-o|0)))}(t,e,_=_-1|0,l,n,f,h,r)}function $n(t,e){return(vt(t)-55232|0)<<10|vt(e)-56320|0}function An(){return Un(),f}function Rn(t,e){if(Un(),e===t)return R;e.w3h_1>e.v3h_1?(e.z3h_1-e.y3h_1|0)<8?t.a3q(e):t.g3j_1=e.v3h_1:t.z3p(e)}function On(t,e){return Un(),t.x3p(e)}function In(t,e){return Un(),e===t?t.a3k()?t:null:t.y3p(e)}function kn(t,e,n){return Un(),null!=n&&t.t3m(),t.d3p(e)}function Un(){_||(_=!0,f=new Int8Array(0))}function Pn(t,e,n){P.call(this,n),this.h3r_1=t,this.i3r_1=e}function Dn(t,e,n){P.call(this,n),this.v3q_1=t,this.w3q_1=e}function Nn(){this.c3f_1=H(null)}function Ln(t,e,n,i){P.call(this,i),this.r3r_1=t,this.s3r_1=e,this.t3r_1=n}function zn(t,e,n,i){P.call(this,i),this.g3s_1=t,this.h3s_1=e,this.i3s_1=n}function Fn(){Oi.call(this,128)}function Bn(){}function Hn(){}function Vn(t){return function(e){return t.e3t_1=null,null!=e&&t.oq(function(t){for(var e=t;e instanceof W;){if(ot(e,e.cause))return t;var n=e.cause;if(null==n)return e;e=n}return e}(e)),R}}function qn(t,e){ce.call(this,t,e),this.e3t_1=null}function jn(){var t=new qn(pn().l3l_1,!1);return t.g12(null),t}function Gn(){m=this,this.p3s_1=Ot(jn)}function Wn(){return null==m&&new Gn,m}function Xn(){}function Yn(){}function Kn(t,e,n,i){return n=n===B?0:n,i=i===B?e.byteLength-n|0:i,new Qn(new DataView(e,n,i))}function Jn(){v=this,this.e3q_1=new Qn(new DataView(new ArrayBuffer(0)))}function Zn(){return null==v&&new Jn,v}function Qn(t){Zn(),this.w3m_1=t}function ti(t,e,n,i,r){!function(t,e,n,i,r){var a=new Int8Array(t,n,i);new Int8Array(e.w3m_1.buffer,e.w3m_1.byteOffset+r|0,i).set(a,0)}(t.buffer,e,n+t.byteOffset|0,i,r)}function ei(){}function ni(t){this.h3q_1=t}function ii(t){return t.h3q_1}function ri(){w=this,this.f3q_1=new ui("UTF-8"),this.g3q_1=new ui("ISO-8859-1")}function ai(){return null==w&&new ri,w}function si(t){zt(this,t),Y(this,si)}function oi(t){this.h3t_1=t}function li(t){this.i3t_1=t}function ui(t){ni.call(this,t),this.k3t_1=t}function ci(t){li.call(this,t),this.m3t_1=t}function hi(t){oi.call(this,t),this.o3t_1=t}function fi(t,e,n,i,r){if(!(n<=i))throw I(O("Failed requirement."));if(_i(t).equals(ai().g3q_1))return function(t,e,n,i){if(e>=n)return 0;var r=i.u3h_1,a=i.w3h_1,s=i.y3h_1,o=r.f3t(a,s-a|0).w3m_1,l=new Int8Array(o.buffer,o.byteOffset,o.byteLength),u=0,c=e;if(c<n)do{var h=c;c=c+1|0;var f=Mt(t,h),_=vt(f);_>255&&vi(_);var d=u;u=d+1|0,l[d]=yt(_)}while(c<n);var p=u;return i.y3m(p),n-e|0}(e,n,i,r);if(_i(t)!==ai().f3q_1)throw I(O("Only UTF-8 encoding is supported in JS"));var a=new TextEncoder,s=n,o=r.y3h_1-r.w3h_1|0;t:for(;s<i&&o>0;){var l=i-s|0,u=o/6|0,c=Math.min(l,u),h=mt(c,1),f=Ct(Mt(e,(s+h|0)-1|0)),_=f&&1===h?s+2|0:f?(s+h|0)-1|0:s+h|0,d=O(Ft(e,s,_)),p=a.encode(d);if(p.length>o)break t;yi(r,p),s=_,o=o-p.length|0}return s-n|0}function _i(t){return t.i3t_1}function di(t){return t.h3t_1}function pi(){return b}function mi(t,e){this.r3t_1=t,this.s3t_1=e}function gi(t,e,n){if(0===n)return new mi("",0);try{var i=gt(n,t.byteLength),r=e.t3t(t.subarray(0,i));if(r.length<=n)return new mi(r,i)}catch(t){}return function(t,e,n){for(var i=gt(n>=268435455?lt.MAX_VALUE:$(n,8),t.byteLength);i>8;){try{var r=e.t3t(t.subarray(0,i));if(r.length<=n)return new mi(r,i)}catch(t){}i=i/2|0}for(i=8;i>0;){try{var a=e.t3t(t.subarray(0,i));if(a.length<=n)return new mi(a,i)}catch(t){}i=i-1|0}t:try{e.t3t(t);break t}catch(t){if(t instanceof Error){var s=t.message;throw new si("Failed to decode bytes: "+(null==s?"no cause provided":s))}throw t}throw new si("Unable to decode buffer")}(t,e,n)}function vi(t){throw new si("The character with unicode point "+t+" couldn't be mapped to ISO-8859-1 character")}function yi(t,e,n,i){n=n===B?0:n,i=i===B?e.byteLength-n|0:i;var r=t.u3h_1,a=t.w3h_1;if((t.y3h_1-a|0)<i)throw new Me("Not enough free space to write "+i+" bytes");ti(e,r,n,i,a);var s=i;t.y3m(s)}function wi(){}function bi(){return x}function xi(t){Si(t,this),Y(this,xi)}function Si(t,e){return Ei.call(e,t,null),e}function Ei(t,e){Ht(t,e,this),Y(this,Ei)}function Mi(t,e){var n,i;e=e===B||e;try{i=new TextDecoder(t,function(t){t=t!==B&&t;var e=new Object;return e.fatal=t,e}(e)),n=new Ci(i)}catch(i){if(!(i instanceof Error))throw i;n=new $i(t,e)}return n}function Ti(t){var e=new Object;return e.stream=t,e}function Ci(t){this.u3t_1=t}function $i(t,e){this.v3t_1=e;var n=O(qt(Vt(t)?t:j())).toLowerCase();if(!(Ri(),S).x(n))throw U(O(t+" is not supported."))}function Ai(t){Ri();var e=255&t;return function(t){return Ri(),0<=t&&t<=127}(e)?e:(C||(C=!0,T=new Int32Array([8364,-1,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,-1,381,-1,-1,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,-1,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255])),T)[e-128|0]}function Ri(){M||(M=!0,S=Gt(["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"]),E=new Int8Array([-17,-65,-67]))}function Oi(t){this.x3n_1=t;var e=this.x3n_1;this.y3n_1=Wt(Array(e),null),this.z3n_1=0}return z(te,"$awaitAtLeastNBytesAvailableForWriteCOROUTINE$0",L,P),z(ee,"$awaitAtLeastNBytesAvailableForReadCOROUTINE$1",L,P),z(ne,"$writeFullyCOROUTINE$9",L,P),z(ie,"$writeFullyCOROUTINE$10",L,P),z(re,"$readRemainingCOROUTINE$26",L,P),z(ae,"$readRemainingSuspendCOROUTINE$27",L,P),z(se,"$readAvailableCOROUTINE$30",L,P),z(oe,"$readAvailableCOROUTINE$33",L,P),z(le,"$awaitInternalAtLeast1COROUTINE$38",L,P),z(ue,"$awaitSuspendCOROUTINE$39",L,P),z(Xn,"ByteReadChannel",Z,B,B,B,B,B,[3,1,2,0,5]),z(ce,"ByteChannelSequentialBase",L,B,[Xn],B,B,B,[1,3,0,2,5]),z(he,"ClosedWriteChannelException",L,W),z(_e,"CloseElement",L),z(de,"WriterScope",Z,B,[J]),z(pe,"ChannelJob",L,B,[et],B,B,B,[0]),z(me,"ChannelScope",L,B,[J,de]),z(ge,"launchChannel$slambda",L,P,B,B,B,B,[1]),z(we,"Companion",ht),z(be,"Buffer",L),z(Me,"InsufficientSpaceException",L,_t,B,Me),z(wi,"Closeable",Z),z(Bn,"ObjectPool",Z,B,[wi]),z(Oi,"DefaultPool",L,B,[Bn]),z($e,"DefaultBufferPool",L,Oi,B,$e),z(nn,"Output",L,B,[wi]),z(De,"BytePacketBuilder",L,nn,B,De),z(Le,"Companion",ht),z(Ke,"Input",L,B,[wi]),z(Fe,"ByteReadPacket",L,Ke),z(Ye,"Companion",ht),z(cn,B,L,B,[Bn]),z(hn,B,L,B,[Bn]),z(Hn,"NoPoolImpl",L,B,[Bn]),z(fn,B,L,Hn),z(_n,B,L,Hn),z(dn,"Companion",ht),z(mn,"ChunkBuffer",L,be),z(wn,"MalformedUTF8InputException",L,_t),z(Pn,"$sleepCOROUTINE$52",L,P),z(Dn,"$trySuspendCOROUTINE$53",L,P),z(Nn,"AwaitingSlot",L,B,B,Nn,B,B,[1]),z(Ln,"$copyToSequentialImplCOROUTINE$54",L,P),z(zn,"$copyToTailCOROUTINE$55",L,P),z(Fn,B,L,Oi),z(qn,"ByteChannelJS",L,ce,B,B,B,B,[3,1,0,2,5]),z(Gn,"Companion",ht),z(Yn,"DefaultAllocator",ht),z(Jn,"Companion",ht),z(Qn,"Memory",L),z(ei,"Companion",ht),z(ni,"Charset",L),z(ri,"Charsets",ht),z(si,"MalformedInputException",L,Error),z(oi,"CharsetDecoder",L),z(li,"CharsetEncoder",L),z(ui,"CharsetImpl",L,ni),z(ci,"CharsetEncoderImpl",L,li),z(hi,"CharsetDecoderImpl",L,oi),z(mi,"DecodeBufferResult",L),z(Ei,"IOException",L,_t),z(xi,"EOFException",L,Ei),z(Ci,B,L),z($i,"TextDecoderFallback",L),N(te).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.ta_1=1;continue t;case 1:if(!(this.w3g_1.m3g()<this.x3g_1)||this.w3g_1.y3f()){this.ta_1=5;continue t}if(Yt(this.w3g_1)){this.ta_1=3;continue t}if(this.ta_1=2,(t=this.w3g_1.y3e_1.y3g(Zt(this.w3g_1,this.x3g_1),this))===D())return t;continue t;case 2:this.ta_1=3;continue t;case 3:this.ta_1=1;continue t;case 4:throw this.wa_1;case 5:return R}}catch(t){var e=t;if(4===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},N(ee).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,this.ta_1=1;continue t;case 1:if(!(this.h3h_1.l3g()<this.i3h_1)||this.h3h_1.n3g()){this.ta_1=4;continue t}if(this.ta_1=2,(t=this.h3h_1.y3e_1.y3g(Qt(this.h3h_1,this.i3h_1),this))===D())return t;continue t;case 2:this.ta_1=1;continue t;case 3:throw this.wa_1;case 4:return R}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},N(ne).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.r3h_1.t3h(1,this))===D())return t;continue t;case 1:var e=this.s3h_1,n=e.w3h_1-e.v3h_1|0;return rn(this.r3h_1.u3e_1,this.s3h_1),this.r3h_1.a3i(n),R;case 2:throw this.wa_1}}catch(t){var i=t;if(2===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},N(ie).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=4,this.n3i_1=this.l3i_1,this.o3i_1=this.l3i_1+this.m3i_1|0,this.ta_1=1;continue t;case 1:if(!(this.n3i_1<this.o3i_1)){this.ta_1=3;continue t}if(this.ta_1=2,(t=this.j3i_1.t3h(1,this))===D())return t;continue t;case 2:var e=this.j3i_1.m3g(),n=this.o3i_1-this.n3i_1|0,i=Math.min(e,n);an(this.j3i_1.u3e_1,this.k3i_1,this.n3i_1,i),this.n3i_1=this.n3i_1+i|0,this.j3i_1.a3i(i),this.ta_1=1;continue t;case 3:return R;case 4:throw this.wa_1}}catch(t){var r=t;if(4===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},N(re).gb=function(){var t,e,n,i,r=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,Kt(this.x3i_1),this.z3i_1=new De;var a=this.y3i_1,s=this.x3i_1.v3e_1.k3j();this.a3j_1=a.t8(s)<=0?a:s,this.z3i_1.l3j(this.x3i_1.v3e_1,this.a3j_1),this.x3i_1.m3j(this.a3j_1.y8());var o=this.y3i_1,l=this.z3i_1.n();if(this.b3j_1=o.ca(k(l)),this.b3j_1.equals(new F(0,0))||this.x3i_1.n3g()){Jt(this.x3i_1,this.z3i_1),this.c3j_1=this.z3i_1.n3j(),this.ta_1=2;continue t}if(this.ta_1=1,t=this.x3i_1,e=this.z3i_1,n=this.y3i_1,i=void 0,(i=new ae(t,e,n,this)).va_1=R,i.wa_1=null,(r=i.gb())===D())return r;continue t;case 1:this.c3j_1=r,this.ta_1=2;continue t;case 2:return this.c3j_1;case 3:throw this.wa_1}}catch(t){var u=t;if(3===this.ua_1)throw u;this.ta_1=this.ua_1,this.wa_1=u}},N(ae).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=5,this.ta_1=1;continue t;case 1:if(!(k(this.i3g_1.n()).t8(this.j3g_1)<0)){this.ta_1=4;continue t}var e=this.j3g_1,n=this.i3g_1.n(),i=e.ca(k(n)),r=this.h3g_1.v3e_1.k3j();if(this.k3g_1=i.t8(r)<=0?i:r,this.i3g_1.l3j(this.h3g_1.v3e_1,this.k3g_1),this.h3g_1.m3j(this.k3g_1.y8()),Jt(this.h3g_1,this.i3g_1),this.h3g_1.n3g()||this.i3g_1.n()===this.j3g_1.y8()){this.ta_1=4;continue t}this.ta_1=2;continue t;case 2:if(this.ta_1=3,(t=this.h3g_1.o3j(1,this))===D())return t;continue t;case 3:this.ta_1=1;continue t;case 4:return Jt(this.h3g_1,this.i3g_1),this.i3g_1.n3j();case 5:throw this.wa_1}}catch(t){var a=t;if(5===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},N(se).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=this.x3j_1.x3f();if(null!=e)throw e;if(this.x3j_1.y3f()&&0===this.x3j_1.l3g())return-1;var n=this.y3j_1;if(0==(n.y3h_1-n.w3h_1|0))return 0;if(0===this.x3j_1.l3g()){if(this.ta_1=1,(t=this.x3j_1.o3j(1,this))===D())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:this.x3j_1.v3e_1.a3k()||this.x3j_1.z3j();var i=this.y3j_1,r=k(i.y3h_1-i.w3h_1|0),a=this.x3j_1.v3e_1.k3j(),s=(r.t8(a)<=0?r:a).y8();return Ze(this.x3j_1.v3e_1,this.y3j_1,s),this.x3j_1.m3j(s),s;case 3:throw this.wa_1}}catch(t){var o=t;if(3===this.ua_1)throw o;this.ta_1=this.ua_1,this.wa_1=o}},N(oe).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3;var e=this.j3k_1.x3f();if(null!=e)throw e;if(this.j3k_1.y3f()&&0===this.j3k_1.l3g())return-1;if(0===this.m3k_1)return 0;if(0===this.j3k_1.l3g()){if(this.ta_1=1,(t=this.j3k_1.o3j(1,this))===D())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:this.j3k_1.v3e_1.a3k()||this.j3k_1.z3j();var n=k(this.m3k_1),i=this.j3k_1.v3e_1.k3j(),r=(n.t8(i)<=0?n:i).y8();return Je(this.j3k_1.v3e_1,this.k3k_1,this.l3k_1,r),this.j3k_1.m3j(r),r;case 3:throw this.wa_1}}catch(t){var a=t;if(3===this.ua_1)throw a;this.ta_1=this.ua_1,this.wa_1=a}},N(le).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.v3k_1.v3e_1.x3k()){if(this.ta_1=1,(t=this.v3k_1.o3j(1,this))===D())return t;continue t}this.w3k_1=!0,this.ta_1=3;continue t;case 1:this.w3k_1=t,this.ta_1=3;continue t;case 2:throw this.wa_1;case 3:return this.w3k_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},N(ue).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,!(this.h3l_1>=0))throw I(O("Failed requirement."));if(this.ta_1=1,(t=this.g3l_1.i3l(this.h3l_1,this))===D())return t;continue t;case 1:this.g3l_1.z3j();var e=this.g3l_1.x3f();if(null!=e)throw e;return!this.g3l_1.n3g()&&this.g3l_1.l3g()>=this.h3l_1;case 2:throw this.wa_1}}catch(t){var n=t;if(2===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},N(ce).o3l=function(){return this.n3e_1},N(ce).y3f=function(){return!(null==this.t3e_1.kotlinx$atomicfu$value)},N(ce).l3g=function(){return this.r3e_1.kotlinx$atomicfu$value},N(ce).m3g=function(){var t=4088-this.s3e_1.kotlinx$atomicfu$value|0;return Math.max(0,t)},N(ce).n3g=function(){return!(t=this,e=t.t3e_1.kotlinx$atomicfu$value,null==(null==e?null:e.b3f_1)&&(!this.y3f()||0!==this.s3e_1.kotlinx$atomicfu$value));var t,e},N(ce).x3f=function(){var t=this.t3e_1.kotlinx$atomicfu$value;return null==t?null:t.b3f_1},N(ce).t3h=function(t,e){var n=new te(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ce).i3l=function(t,e){var n=new ee(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ce).y5=function(){Yt(this)},N(ce).z3j=function(){this.z3e_1,function(t,e){Un();var n=e.n(),i=e.v3f();if(null==i)return 0;var r=i;n<=bi()&&null==r.xx()&&t.t3p(r)?e.e3p():t.s3p(r)}(this.v3e_1,this.a3f_1)},N(ce).p3l=function(t,e){var n=new ne(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ce).q3l=function(t,e,n,i){var r=new ie(this,t,e,n,i);return r.va_1=R,r.wa_1=null,r.gb()},N(ce).m3j=function(t){(function(t,e){if(!(e>=0))throw I(O("Can't read negative amount of bytes: "+e));if(t.s3e_1.atomicfu$getAndAdd(0|-e),t.p3e_1.atomicfu$addAndGet$long(k(e)),t.r3e_1.atomicfu$getAndAdd(0|-e),!(t.s3e_1.kotlinx$atomicfu$value>=0)){var n="Readable bytes count is negative: "+t.l3g()+", "+e+" in "+t;throw U(O(n))}if(!(t.l3g()>=0)){var i="Readable bytes count is negative: "+t.l3g()+", "+e+" in "+t;throw U(O(i))}})(this,t),this.y3e_1.d3f()},N(ce).r3l=function(t,e){var n=new re(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ce).t3l=function(t,e){return this.u3l(t instanceof be?t:j(),e)},N(ce).u3l=function(t,e){var n=new se(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ce).v3l=function(t,e,n,i){var r=new oe(this,t,e,n,i);return r.va_1=R,r.wa_1=null,r.gb()},N(ce).w3l=function(t){var e=new le(this,t);return e.va_1=R,e.wa_1=null,e.gb()},N(ce).o3j=function(t,e){var n=new ue(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ce).oq=function(t){return null==this.x3f()&&!this.y3f()&&this.g12(null==t?G("Channel cancelled"):t)},N(ce).g12=function(t){var e=null==t?fe():new _e(t);return!!this.t3e_1.atomicfu$compareAndSet(null,e)&&(null!=t?(this.v3e_1.xr(),this.u3e_1.xr(),this.a3f_1.xr()):this.y5(),this.y3e_1.x3l(t),!0)},N(ce).y3l=function(t,e){var n,i=this.v3e_1.k3j();return i.t8(e)<=0?(t.u3e_1.z3l(this.v3e_1),t.a3i(i.y8()),this.m3j(i.y8()),n=i):n=new F(0,0),n},N(ce).a3i=function(t){(function(t,e){if(!(e>=0))throw I(O("Can't write negative amount of bytes: "+e));if(t.s3e_1.atomicfu$getAndAdd(e),t.q3e_1.atomicfu$addAndGet$long(k(e)),!(t.s3e_1.kotlinx$atomicfu$value>=0)){var n="Readable bytes count is negative: "+t.s3e_1.kotlinx$atomicfu$value+", "+e+" in "+t;throw U(O(n))}})(this,t),this.y3f()&&(this.u3e_1.xr(),function(t){if(t.y3f()){var e=t.x3f();throw null==e?new he("Channel "+t+" is already closed"):e}}(this)),(this.o3l()||0===this.m3g())&&this.y5()},N(pe).tw=function(){return this.c3m_1},N(pe).xl=function(){return this.b3m_1.xl()},N(pe).c2=function(){return this.b3m_1.c2()},N(pe).qm=function(){return this.b3m_1.qm()},N(pe).kn=function(t){return this.b3m_1.kn(t)},N(pe).dn=function(t){this.b3m_1.dn(t)},N(pe).fe=function(t,e){return this.b3m_1.fe(t,e)},N(pe).bb=function(t){return this.b3m_1.bb(t)},N(pe).vm=function(){return this.b3m_1.vm()},N(pe).zm=function(t,e,n){return this.b3m_1.zm(t,e,n)},N(pe).ym=function(t){return this.b3m_1.ym(t)},N(pe).ee=function(t){return this.b3m_1.ee(t)},N(pe).ge=function(t){return this.b3m_1.ge(t)},N(pe).tm=function(){return this.b3m_1.tm()},N(pe).toString=function(){return"ChannelJob["+this.b3m_1+"]"},N(me).tw=function(){return this.d3m_1},N(me).wl=function(){return this.e3m_1.wl()},N(ge).m1j=function(t,e){var n=this.n1j(t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(ge).tb=function(t,e){return this.m1j(null!=t&&rt(t,J)?t:j(),e)},N(ge).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=3,this.n3m_1&&this.o3m_1.a3m(A(this.r3m_1.wl().bb(at)));var e=new me(this.r3m_1,this.o3m_1);if(this.s3m_1=rt(e,J)?e:j(),this.ua_1=2,this.ta_1=1,(t=this.p3m_1(this.s3m_1,this))===D())return t;continue t;case 1:this.ua_1=3,this.ta_1=4;continue t;case 2:if(this.ua_1=3,this.wa_1 instanceof Error){var n=this.wa_1;if(!ot(this.q3m_1,st().dw_1)&&null!=this.q3m_1)throw n;this.o3m_1.oq(n),this.ta_1=4;continue t}throw this.wa_1;case 3:throw this.wa_1;case 4:return this.ua_1=3,R}}catch(t){var i=t;if(3===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},N(ge).n1j=function(t,e){var n=new ge(this.n3m_1,this.o3m_1,this.p3m_1,this.q3m_1,e);return n.r3m_1=t,n},N(we).v3m=function(){return pn().l3l_1},N(be).x3m=function(t){if(0===t)return R;var e=this.v3h_1+t|0;(t<0||e>this.w3h_1)&&xe(t,this.w3h_1-this.v3h_1|0),this.v3h_1=e},N(be).y3m=function(t){var e=this.w3h_1+t|0;(t<0||e>this.y3h_1)&&Se(t,this.y3h_1-this.w3h_1|0),this.w3h_1=e},N(be).z3m=function(t){var e=this.y3h_1;if(t<this.w3h_1&&Se(t-this.w3h_1|0,this.y3h_1-this.w3h_1|0),t>=e){if(t===e)return this.w3h_1=t,!1;Se(t-this.w3h_1|0,this.y3h_1-this.w3h_1|0)}return this.w3h_1=t,!0},N(be).a3n=function(t){(t<0||t>this.w3h_1)&&xe(t-this.v3h_1|0,this.w3h_1-this.v3h_1|0),this.v3h_1!==t&&(this.v3h_1=t)},N(be).b3n=function(t){var e=this.v3h_1-t|0;e<this.x3h_1&&function(t,e){throw I("Unable to rewind "+t+" bytes: only "+e+" could be rewinded")}(t,this.v3h_1-this.x3h_1|0),this.v3h_1=e},N(be).c3n=function(t){if(!(t>=0))throw I(O("startGap shouldn't be negative: "+t));return this.v3h_1>=t?(this.x3h_1=t,R):this.v3h_1===this.w3h_1?(t>this.y3h_1&&function(t,e){if(e>t.z3h_1)throw I("Start gap "+e+" is bigger than the capacity "+t.z3h_1);var n=t.z3h_1-t.y3h_1|0;throw U("Unable to reserve "+e+" start gap: there are already "+n+" bytes reserved in the end")}(this,t),this.w3h_1=t,this.v3h_1=t,this.x3h_1=t,R):void function(t,e){var n="Unable to reserve "+e+" start gap: ",i=t.w3h_1-t.v3h_1|0;throw U(n+"there are already "+i+" content bytes starting at offset "+t.v3h_1)}(this,t)},N(be).d3n=function(t){if(!(t>=0))throw I(O("endGap shouldn't be negative: "+t));var e=this.z3h_1-t|0;return e>=this.w3h_1?(this.y3h_1=e,R):(e<0&&function(t,e){throw I("End gap "+e+" is too big: capacity is "+t.z3h_1)}(this,t),e<this.x3h_1&&function(t,e){throw I("End gap "+e+" is too big: there are already "+t.x3h_1+" bytes reserved in the beginning")}(this,t),this.v3h_1===this.w3h_1?(this.y3h_1=e,this.v3h_1=e,this.w3h_1=e,R):void function(t,e){var n="Unable to reserve end gap "+e+":",i=t.w3h_1-t.v3h_1|0;throw I(n+" there are already "+i+" content bytes at offset "+t.v3h_1)}(this,t))},N(be).e3n=function(){this.x3h_1=0,this.v3h_1=0;var t=this.z3h_1;this.w3h_1=t},N(be).f3n=function(){this.g3n(this.z3h_1-this.x3h_1|0)},N(be).g3n=function(t){var e=this.x3h_1;this.v3h_1=e,this.w3h_1=e,this.y3h_1=t},N(be).h3n=function(){this.i3n(0),this.j3n()},N(be).j3n=function(){this.y3h_1=this.z3h_1},N(be).i3n=function(t){if(!(t>=0))throw I(O("newReadPosition shouldn't be negative: "+t));if(!(t<=this.v3h_1)){var e="newReadPosition shouldn't be ahead of the read position: "+t+" > "+this.v3h_1;throw I(O(e))}this.v3h_1=t,this.x3h_1>t&&(this.x3h_1=t)},N(be).k3n=function(t){t.y3h_1=this.y3h_1,t.x3h_1=this.x3h_1,t.v3h_1=this.v3h_1,t.w3h_1=this.w3h_1},N(be).ok=function(){var t=this.v3h_1;if(t===this.w3h_1)throw new xi("No readable bytes available.");return this.v3h_1=t+1|0,this.u3h_1.w3m_1.getInt8(t)},N(be).l3n=function(t){var e=this.w3h_1;if(e===this.y3h_1)throw new Me("No free space in the buffer to write a byte");this.u3h_1.w3m_1.setInt8(e,t),this.w3h_1=e+1|0},N(be).m3n=function(){this.h3n(),this.f3n()},N(be).toString=function(){return"Buffer("+(this.w3h_1-this.v3h_1|0)+" used, "+(this.y3h_1-this.w3h_1|0)+" free, "+(this.x3h_1+(this.z3h_1-this.y3h_1|0)|0)+" reserved of "+this.z3h_1+")"},N($e).t3n=function(){return new mn(this.s3n_1.u3n(this.r3n_1),null,this)},N($e).v3n=function(t){this.s3n_1.w3n(t.u3h_1),N(Oi).a3o.call(this,t),t.l3o()},N($e).a3o=function(t){return this.v3n(t instanceof mn?t:j())},N($e).m3o=function(t){N(Oi).n3o.call(this,t);var e=t.u3h_1;if(!k(e.w3m_1.byteLength).equals(k(this.r3n_1))){var n=t.u3h_1,i=k(n.w3m_1.byteLength),r="Buffer size mismatch. Expected: "+this.r3n_1+", actual: "+i.toString();throw U(O(r))}if(t===pn().l3l_1)throw U(O("ChunkBuffer.Empty couldn't be recycled"));if(t===s.v3m())throw U(O("Empty instance couldn't be recycled"));if(0!==t.o3o())throw U(O("Unable to clear buffer: it is still in use."));if(null!=t.xx())throw U(O("Recycled instance shouldn't be a part of a chain."));if(null!=t.k3o_1)throw U(O("Recycled instance shouldn't be a view or another buffer."))},N($e).n3o=function(t){return this.m3o(t instanceof mn?t:j())},N($e).p3o=function(t){var e=N(Oi).q3o.call(this,t);return e.r3o(),e.m3n(),e},N($e).q3o=function(t){return this.p3o(t instanceof mn?t:j())},N(De).n=function(){return this.w3o()},N(De).m3f=function(){return 0===this.w3o()},N(De).x3o=function(){},N(De).y3o=function(t,e,n){},N(De).h5=function(t){var e=N(nn).h5.call(this,t);return e instanceof De?e:j()},N(De).j7=function(t){var e=N(nn).j7.call(this,t);return e instanceof De?e:j()},N(De).k7=function(t,e,n){var i=N(nn).k7.call(this,t,e,n);return i instanceof De?i:j()},N(De).n3j=function(){var t=this.n(),e=this.v3f();return null==e?ze().z3o_1:new Fe(e,k(t),this.n3f_1)},N(De).toString=function(){return"BytePacketBuilder("+this.n()+" bytes written)"},N(Fe).n3p=function(){return null},N(Fe).o3p=function(t,e,n){return 0},N(Fe).p3p=function(){},N(Fe).toString=function(){return"ByteReadPacket("+this.k3j().toString()+" bytes remaining)"},N(Ke).x3k=function(){return!(0!=(this.h3j_1-this.g3j_1|0)||!this.i3j_1.equals(new F(0,0))||!this.j3j_1&&null!=je(this))},N(Ke).a3p=function(){var t=this.e3j_1;return t.a3n(this.g3j_1),t},N(Ke).q3p=function(t){if(!(t.t8(new F(0,0))>=0)){var e="tailRemaining shouldn't be negative: "+t.toString();throw I(O(e))}this.i3j_1=t},N(Ke).k3j=function(){var t=this.h3j_1-this.g3j_1|0;return k(t).ba(this.i3j_1)},N(Ke).a3k=function(){return this.g3j_1!==this.h3j_1||!this.i3j_1.equals(new F(0,0))},N(Ke).xr=function(){var t=this.a3p(),e=pn().l3l_1;t!==e&&(Be(this,e),this.q3p(new F(0,0)),Pe(t,this.d3j_1))},N(Ke).i15=function(){this.xr(),this.j3j_1||(this.j3j_1=!0),this.p3p()},N(Ke).v3f=function(){var t=this.a3p(),e=pn().l3l_1;return t===e?null:(Be(this,e),this.q3p(new F(0,0)),t)},N(Ke).r3p=function(){var t=this.a3p(),e=t.xx(),n=pn().l3l_1;if(t===n)return null;if(null==e)Be(this,n),this.q3p(new F(0,0));else{Be(this,e);var i=this.i3j_1,r=e.w3h_1-e.v3h_1|0,a=i.ca(k(r));this.q3p(a)}return t.d3q(null),t},N(Ke).s3p=function(t){if(t===pn().l3l_1)return R;var e=ke(t);if(this.e3j_1===pn().l3l_1){Be(this,t);var n=this.h3j_1-this.g3j_1|0,i=e.ca(k(n));this.q3p(i)}else Ue(this.e3j_1).d3q(t),this.q3p(this.i3j_1.ba(e))},N(Ke).t3p=function(t){var e=Ue(this.a3p()),n=t.w3h_1-t.v3h_1|0;if(0===n||(e.y3h_1-e.w3h_1|0)<n)return!1;if(Te(e,t,n),this.a3p()===e)this.h3j_1=e.w3h_1;else{var i=this.i3j_1.ba(k(n));this.q3p(i)}return!0},N(Ke).u3p=function(t){if(!(t>=0))throw I(O("Negative discard is not allowed: "+t));return function(t,e,n){for(var i=e,r=n;;){if(0===i)return r;var a=t.b3q(1);if(null==a)return r;var s=a,o=s.w3h_1-s.v3h_1|0,l=i,u=Math.min(o,l);s.x3m(u),t.g3j_1=t.g3j_1+u|0,Xe(t,s),i=i-u|0,r=r+u|0}}(this,t,0)},N(Ke).x3m=function(t){if(this.u3p(t)!==t)throw new xi("Unable to discard "+t+" bytes due to end of packet")},N(Ke).v3p=function(t,e){if(0===t&&(0===e||this.x3k()))return"";var n=this.k3j();if(n.t8(new F(0,0))>0&&k(e).t8(n)>=0)return ln(this,n.y8());var i=gt(mt(t,16),e),r=ut(i);return He(this,r,t,e),r.toString()},N(Ke).w3p=function(t,e,n){return t=t===B?0:t,e=e===B?lt.MAX_VALUE:e,n===B?this.v3p(t,e):n.v3p.call(this,t,e)},N(Ke).x3p=function(t){return Ge(this,t,this.a3p())},N(Ke).y3p=function(t){return this.z3p(t)},N(Ke).z3p=function(t){return function(t,e,n){for(var i=t,r=e,a=n;;){if(r===a)return je(i);var s=r.u3o();if(r.v3o(i.d3j_1),null!=s){if(s.w3h_1>s.v3h_1){Be(i,s);var o=i,l=o.i3j_1,u=s.w3h_1-s.v3h_1|0,c=l.ca(k(u));return o.q3p(c),s}r=s}else Be(i,a),i.q3p(new F(0,0)),r=a}}(this,t,pn().l3l_1)},N(Ke).a3q=function(t){var e=t.xx();if(null==e)return qe(this,t);var n,i,r=e,a=t.w3h_1-t.v3h_1|0,s=8-(t.z3h_1-t.y3h_1|0)|0,o=Math.min(a,s);if(r.x3h_1<o)return qe(this,t);if(i=o,(n=r).i3n(n.v3h_1-i|0),a>o){t.j3n(),this.h3j_1=t.w3h_1;var l=this.i3j_1.ba(k(o));this.q3p(l)}else{Be(this,r);var u=this.i3j_1,c=(r.w3h_1-r.v3h_1|0)-o|0,h=u.ca(k(c));this.q3p(h),t.u3o(),t.v3o(this.d3j_1)}},N(Ke).n3p=function(){var t=this.d3j_1.s3o();try{t.d3n(8);var e=t.w3h_1,n=t.y3h_1-t.w3h_1|0,i=this.o3p(t.u3h_1,e,n);return 0!==i||(this.j3j_1=!0,t.w3h_1>t.v3h_1)?(t.y3m(i),t):(t.v3o(this.d3j_1),null)}catch(e){if(e instanceof Error){var r=e;throw t.v3o(this.d3j_1),r}throw e}},N(Ke).f3p=function(){this.j3j_1||(this.j3j_1=!0)},N(Ke).b3q=function(t){var e=this.a3p();return(this.h3j_1-this.g3j_1|0)>=t?e:Ge(this,t,e)},N(Ke).c3q=function(t){var e=t.u3o(),n=null==e?pn().l3l_1:e;Be(this,n);var i=this.i3j_1,r=n.w3h_1-n.v3h_1|0,a=i.ca(k(r));return this.q3p(a),t.v3o(this.d3j_1),n},N(nn).w3o=function(){return this.u3f_1+(this.r3f_1-this.t3f_1|0)|0},N(nn).a3p=function(){var t=this.o3f_1;return null==t?pn().l3l_1:t},N(nn).y5=function(){!function(t){var e=t.v3f();if(null==e)return R;var n=e;try{var i=n;t:for(;;){var r=i,a=r.v3h_1,s=r.w3h_1-r.v3h_1|0;t.y3o(r.u3h_1,a,s);var o=i.xx();if(null==o)break t;i=o}}finally{Pe(n,t.n3f_1)}}(this)},N(nn).v3f=function(){var t=this.o3f_1;if(null==t)return null;var e=t,n=this.p3f_1;return null==n||n.z3m(this.r3f_1),this.o3f_1=null,this.p3f_1=null,this.r3f_1=0,this.s3f_1=0,this.t3f_1=0,this.u3f_1=0,this.q3f_1=Zn().e3q_1,e},N(nn).b3p=function(t){if(null!=t.xx())throw U(O("It should be a single buffer chunk."));tn(this,t,t,0)},N(nn).c3p=function(t){var e=Ue(t),n=ke(t),i=e.w3h_1-e.v3h_1|0,r=n.ca(k(i));r.t8(k(lt.MAX_VALUE))>=0&&function(t,e){throw I("Long value "+t.toString()+" of "+e+" doesn't fit into 32-bit integer")}(r,"total size increase"),tn(this,t,e,r.y8())},N(nn).l3n=function(t){var e=this.r3f_1;return e<this.s3f_1?(this.r3f_1=e+1|0,this.q3f_1.w3m_1.setInt8(e,t),R):function(t,e){Qe(t).l3n(e),t.r3f_1=t.r3f_1+1|0}(this,t)},N(nn).i15=function(){try{this.y5()}finally{this.x3o()}},N(nn).h5=function(t){var e=this.r3f_1;if((this.s3f_1-e|0)>=3){var n,i=this.q3f_1,r=vt(t);if(0<=r&&r<=127){var a=yt(r);i.w3m_1.setInt8(e,a),n=1}else if(128<=r&&r<=2047){var s=yt(192|r>>6&31);i.w3m_1.setInt8(e,s);var o=e+1|0,l=yt(128|63&r);i.w3m_1.setInt8(o,l),n=2}else if(2048<=r&&r<=65535){var u=yt(224|r>>12&15);i.w3m_1.setInt8(e,u);var c=e+1|0,h=yt(128|r>>6&63);i.w3m_1.setInt8(c,h);var f=e+2|0,_=yt(128|63&r);i.w3m_1.setInt8(f,_),n=3}else if(65536<=r&&r<=1114111){var d=yt(240|r>>18&7);i.w3m_1.setInt8(e,d);var p=e+1|0,m=yt(128|r>>12&63);i.w3m_1.setInt8(p,m);var g=e+2|0,v=yt(128|r>>6&63);i.w3m_1.setInt8(g,v);var y=e+3|0,w=yt(128|63&r);i.w3m_1.setInt8(y,w),n=4}else En(r);var b=n;return this.r3f_1=e+b|0,this}return function(t,e){t:{var n=t.d3p(3);try{var i,r=n.u3h_1,a=n.w3h_1,s=vt(e);if(0<=s&&s<=127){var o=yt(s);r.w3m_1.setInt8(a,o),i=1}else if(128<=s&&s<=2047){var l=yt(192|s>>6&31);r.w3m_1.setInt8(a,l);var u=a+1|0,c=yt(128|63&s);r.w3m_1.setInt8(u,c),i=2}else if(2048<=s&&s<=65535){var h=yt(224|s>>12&15);r.w3m_1.setInt8(a,h);var f=a+1|0,_=yt(128|s>>6&63);r.w3m_1.setInt8(f,_);var d=a+2|0,p=yt(128|63&s);r.w3m_1.setInt8(d,p),i=3}else if(65536<=s&&s<=1114111){var m=yt(240|s>>18&7);r.w3m_1.setInt8(a,m);var g=a+1|0,v=yt(128|s>>12&63);r.w3m_1.setInt8(g,v);var y=a+2|0,w=yt(128|s>>6&63);r.w3m_1.setInt8(y,w);var b=a+3|0,x=yt(128|63&s);r.w3m_1.setInt8(b,x),i=4}else En(s);var S=i;if(n.y3m(S),!(S>=0))throw U(O("The returned value shouldn't be negative"));break t}finally{t.t3m()}}}(this,t),this},N(nn).j7=function(t){return null==t?this.k7("null",0,4):this.k7(t,0,ct(t)),this},N(nn).k7=function(t,e,n){return null==t?this.k7("null",e,n):(un(this,t,e,n,ai().f3q_1),this)},N(nn).z3l=function(t){var e=t.v3f();if(null==e)return t.xr(),R;var n=this.p3f_1;if(null==n)return this.c3p(e),R;en(this,n,e,t.d3j_1)},N(nn).w3f=function(t){var e=this.p3f_1;if(null==e)return this.c3p(t),R;en(this,e,t,this.n3f_1)},N(nn).l3j=function(t,e){var n=e;t:for(;n.t8(new F(0,0))>0;){var i=t.h3j_1-t.g3j_1|0,r=k(i);if(!(r.t8(n)<=0)){var a,s=t.b3q(1);null==s?on(1):a=s;var o=a,l=o.v3h_1;try{rn(this,o,n.y8())}finally{var u=o.v3h_1;if(u<l)throw U("Buffer's position shouldn't be rewinded");u===o.w3h_1?t.z3p(o):t.g3j_1=u}break t}n=n.ca(r);var c,h=t.r3p();if(null==h)throw new xi("Unexpected end of packet");c=h,this.b3p(c)}},N(nn).xr=function(){this.i15()},N(nn).d3p=function(t){if((this.s3f_1-this.r3f_1|0)>=t){var e=this.p3f_1;if(null!=e)return e.z3m(this.r3f_1),e}return Qe(this)},N(nn).t3m=function(){var t=this.p3f_1;null==t||(this.r3f_1=t.w3h_1)},N(nn).e3p=function(){var t=this.a3p();if(t!==pn().l3l_1){if(null!=t.xx())throw U(O("Check failed."));t.f3n(),t.d3n(8),this.r3f_1=t.w3h_1,this.t3f_1=this.r3f_1,this.s3f_1=t.y3h_1}},N(cn).s3o=function(){return Ce().s3o()},N(cn).k3q=function(t){Ce().t3o(t)},N(cn).t3o=function(t){return this.k3q(t instanceof mn?t:j())},N(cn).xo=function(){Ce().xo()},N(hn).s3o=function(){return pn().l3l_1},N(hn).k3q=function(t){if(t!==pn().l3l_1)throw I(O("Only ChunkBuffer.Empty instance could be recycled."))},N(hn).t3o=function(t){return this.k3q(t instanceof mn?t:j())},N(hn).xo=function(){},N(fn).s3o=function(){return new mn(g.u3n(l),null,this)},N(fn).k3q=function(t){g.w3n(t.u3h_1)},N(fn).t3o=function(t){return this.k3q(t instanceof mn?t:j())},N(_n).s3o=function(){throw bt("This pool doesn't support borrow")},N(_n).k3q=function(t){},N(_n).t3o=function(t){return this.k3q(t instanceof mn?t:j())},N(mn).d3q=function(t){null==t?this.u3o():function(t,e){if(!t.i3o_1.atomicfu$compareAndSet(null,e))throw U("This chunk has already a next chunk.")}(this,t)},N(mn).xx=function(){return this.i3o_1.kotlinx$atomicfu$value},N(mn).o3o=function(){return this.j3o_1.kotlinx$atomicfu$value},N(mn).u3o=function(){return this.i3o_1.atomicfu$getAndSet(null)},N(mn).z27=function(){var t=this.k3o_1,e=null==t?this:t;e.l3q();var n=new mn(this.u3h_1,e,this.h3o_1);return this.k3n(n),n},N(mn).v3o=function(t){if(this.m3q()){var e=this.k3o_1;if(null!=e)this.l3o(),e.v3o(t);else{var n=this.h3o_1;(null==n?t:n).t3o(this)}}},N(mn).l3o=function(){if(!this.j3o_1.atomicfu$compareAndSet(0,-1))throw U("Unable to unlink: buffer is in use.");this.u3o(),this.k3o_1=null},N(mn).l3q=function(){t:for(var t=this.j3o_1;;){var e=t.kotlinx$atomicfu$value;if(e<=0)throw U("Unable to acquire chunk: it is already released.");var n=e+1|0;if(t.atomicfu$compareAndSet(e,n))break t}},N(mn).r3o=function(){t:for(var t=this.j3o_1;;){var e=t.kotlinx$atomicfu$value;if(e<0)throw U("This instance is already disposed and couldn't be borrowed.");if(e>0)throw U("This instance is already in use but somehow appeared in the pool.");if(t.atomicfu$compareAndSet(e,1))break t}},N(mn).m3q=function(){var t;t:for(var e=this.j3o_1;;){var n=e.kotlinx$atomicfu$value;if(n<=0)throw U("Unable to release: it is already released.");var i=n-1|0;if(e.atomicfu$compareAndSet(n,i)){t=i;break t}}return 0===t},N(mn).m3n=function(){if(null!=this.k3o_1)throw I(O("Unable to reset buffer with origin"));N(be).m3n.call(this),this.i3o_1.kotlinx$atomicfu$value=null},N(Pn).gb=function(){var t,e,n,i=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.ta_1=1,t=this.h3r_1,e=this.i3r_1,n=void 0,(n=new Dn(t,e,this)).va_1=R,n.wa_1=null,(i=n.gb())===D())return i;continue t;case 1:if(i)return R;this.ta_1=2;continue t;case 2:return this.h3r_1.d3f(),R;case 3:throw this.wa_1}}catch(t){var r=t;if(3===this.ua_1)throw r;this.ta_1=this.ua_1,this.wa_1=r}},N(Dn).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=3,this.x3q_1=!1,this.y3q_1=$t(),this.v3q_1.c3f_1.atomicfu$compareAndSet(null,this.y3q_1)&&this.w3q_1()){if(this.x3q_1=!0,this.ta_1=1,(t=this.y3q_1.rr(this))===D())return t;continue t}this.ta_1=2;continue t;case 1:this.ta_1=2;continue t;case 2:return this.x3q_1;case 3:throw this.wa_1}}catch(t){var e=t;if(3===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},N(Nn).y3g=function(t,e){var n=new Pn(this,t,e);return n.va_1=R,n.wa_1=null,n.gb()},N(Nn).d3f=function(){var t=this.c3f_1.atomicfu$getAndSet(null);null==t||t.qr()},N(Nn).x3l=function(t){var e=this.c3f_1.atomicfu$getAndSet(null);if(null==e)return R;var n=e;null!=t?n.pr(t):n.qr()},N(Ln).gb=function(){var t,e,n,i,r=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=10,this.r3r_1===this.s3r_1)throw I(O("Failed requirement."));if(null!=this.r3r_1.x3f())return this.s3r_1.g12(this.r3r_1.x3f()),new F(0,0);this.u3r_1=this.t3r_1,this.ta_1=1;continue t;case 1:if(!(this.u3r_1.t8(new F(0,0))>0)){this.ta_1=9;continue t}if(this.ta_1=2,(r=this.r3r_1.w3l(this))===D())return r;continue t;case 2:if(this.v3r_1=r,this.v3r_1){this.ta_1=3;continue t}this.ta_1=9;continue t;case 3:if(this.w3r_1=this.r3r_1.y3l(this.s3r_1,this.u3r_1),this.w3r_1.equals(new F(0,0))){if(this.ta_1=6,t=this.r3r_1,e=this.s3r_1,n=this.u3r_1,i=void 0,(i=new zn(t,e,n,this)).va_1=R,i.wa_1=null,(r=i.gb())===D())return r;continue t}if(0===this.s3r_1.m3g()){if(this.ta_1=4,(r=this.s3r_1.t3h(1,this))===D())return r;continue t}this.ta_1=5;continue t;case 4:this.ta_1=5;continue t;case 5:this.x3r_1=this.w3r_1,this.ta_1=8;continue t;case 6:var a=r;if(a.equals(new F(0,0))){this.ta_1=9;continue t}this.ta_1=7;continue t;case 7:this.x3r_1=a,this.ta_1=8;continue t;case 8:var s=this.x3r_1;this.u3r_1=this.u3r_1.ca(s),s.t8(new F(0,0))>0&&this.s3r_1.y5(),this.ta_1=1;continue t;case 9:return this.t3r_1.ca(this.u3r_1);case 10:throw this.wa_1}}catch(t){var o=t;if(10===this.ua_1)throw o;this.ta_1=this.ua_1,this.wa_1=o}},N(zn).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=9,this.j3s_1=pn().j3l_1.s3o(),this.ta_1=1;continue t;case 1:this.ta_1=2;continue t;case 2:if(this.ua_1=8,this.j3s_1.g3n(At(this.i3s_1,k(this.j3s_1.z3h_1)).y8()),this.ta_1=3,(t=this.g3s_1.t3l(this.j3s_1,this))===D())return t;continue t;case 3:if(this.l3s_1=t,-1===this.l3s_1){this.j3s_1.v3o(pn().j3l_1),this.k3s_1=new F(0,0),this.ua_1=9,this.ta_1=6;continue t}this.ta_1=4;continue t;case 4:if(this.ta_1=5,(t=this.h3s_1.p3l(this.j3s_1,this))===D())return t;continue t;case 5:this.k3s_1=k(this.l3s_1),this.ua_1=9,this.ta_1=6;continue t;case 6:var e=this.k3s_1;return this.j3s_1.v3o(pn().j3l_1),e;case 7:return this.j3s_1.v3o(pn().j3l_1),R;case 8:this.ua_1=9;var n=this.wa_1;throw this.j3s_1.v3o(pn().j3l_1),n;case 9:throw this.wa_1}}catch(t){var i=t;if(9===this.ua_1)throw i;this.ta_1=this.ua_1,this.wa_1=i}},N(Fn).t3n=function(){return new Int8Array(4096)},N(Hn).t3o=function(t){},N(Hn).xo=function(){},N(qn).a3m=function(t){var e=this.e3t_1;null==e||e.en(),this.e3t_1=t,t.an(!0,B,Vn(this))},N(qn).toString=function(){return"ByteChannel["+this.e3t_1+", "+Rt(this)+"]"},N(Gn).v3m=function(){var t=this.p3s_1;return Ut("Empty",1,kt,(function(t){return t.v3m()}),null),t.d2()},N(Yn).u3n=function(t){return new Qn(new DataView(new ArrayBuffer(t)))},N(Yn).w3n=function(t){},N(Qn).f3t=function(t,e){if(!(t>=0))throw I(O("offset shouldn't be negative: "+t));if(!(e>=0))throw I(O("length shouldn't be negative: "+e));var n=k(t+e|0),i=k(this.w3m_1.byteLength);if(n.t8(i)>0){var r=k(this.w3m_1.byteLength);throw Pt("offset + length > size: "+t+" + "+e+" > "+r.toString())}return new Qn(new DataView(this.w3m_1.buffer,this.w3m_1.byteOffset+t|0,e))},N(Qn).n3n=function(t,e,n,i){var r=new Int8Array(this.w3m_1.buffer,this.w3m_1.byteOffset+e|0,n);new Int8Array(t.w3m_1.buffer,t.w3m_1.byteOffset+i|0,n).set(r)},N(ei).g3t=function(t){switch(t){case"UTF-8":case"utf-8":case"UTF8":case"utf8":return ai().f3q_1}var e;switch(t){case"ISO-8859-1":case"iso-8859-1":e=!0;break;default:var n=Nt(t,Dt(95),Dt(45));e="iso-8859-1"===n||"iso-8859-1"===n.toLowerCase()}if(e||"latin1"===t||"Latin1"===t)return ai().g3q_1;throw I("Charset "+t+" is not supported")},N(ni).equals=function(t){return this===t||null!=t&&this.constructor==t.constructor&&(t instanceof ni||j(),this.h3q_1===t.h3q_1)},N(ni).hashCode=function(){return Lt(this.h3q_1)},N(ni).toString=function(){return this.h3q_1},N(ui).j3q=function(){return new ci(this)},N(ui).i3q=function(){return new hi(this)},N(ui).toString=function(){return"CharsetImpl(name="+this.k3t_1+")"},N(ui).hashCode=function(){return Lt(this.k3t_1)},N(ui).equals=function(t){if(this===t)return!0;if(!(t instanceof ui))return!1;var e=t instanceof ui?t:j();return this.k3t_1===e.k3t_1},N(ci).toString=function(){return"CharsetEncoderImpl(charset="+this.m3t_1+")"},N(ci).hashCode=function(){return this.m3t_1.hashCode()},N(ci).equals=function(t){if(this===t)return!0;if(!(t instanceof ci))return!1;var e=t instanceof ci?t:j();return!!this.m3t_1.equals(e.m3t_1)},N(hi).toString=function(){return"CharsetDecoderImpl(charset="+this.o3t_1+")"},N(hi).hashCode=function(){return this.o3t_1.hashCode()},N(hi).equals=function(t){if(this===t)return!0;if(!(t instanceof hi))return!1;var e=t instanceof hi?t:j();return!!this.o3t_1.equals(e.o3t_1)},N(mi).toString=function(){return"DecodeBufferResult(charactersDecoded="+this.r3t_1+", bytesConsumed="+this.s3t_1+")"},N(mi).hashCode=function(){var t=Lt(this.r3t_1);return $(t,31)+this.s3t_1|0},N(mi).equals=function(t){if(this===t)return!0;if(!(t instanceof mi))return!1;var e=t instanceof mi?t:j();return this.r3t_1===e.r3t_1&&this.s3t_1===e.s3t_1},N(Ci).q3t=function(){return this.u3t_1.decode()},N(Ci).t3t=function(t){return this.u3t_1.decode(t)},N(Ci).p3t=function(t,e){return this.u3t_1.decode(t,e)},N($i).q3t=function(){return""},N($i).t3t=function(t){var e;t:{var n=new De;try{var i=t instanceof Int8Array?t:j(),r=0,a=i.length;if(r<a)do{var s=r;r=r+1|0;var o=Ai(i[s]);if(o<0){if(this.v3t_1)throw U(O("Invalid character: "+o));an(n,(Ri(),E))}else o>255&&n.l3n(yt(o>>8)),n.l3n(yt(255&o))}while(r<a);e=n.n3j();break t}catch(t){if(t instanceof Error){var l=t;throw n.xr(),l}throw t}}return jt(sn(e))},N($i).p3t=function(t,e){return this.t3t(t)},N(Oi).a3o=function(t){},N(Oi).q3o=function(t){return t},N(Oi).n3o=function(t){},N(Oi).s3o=function(){if(0===this.z3n_1)return this.t3n();this.z3n_1=this.z3n_1-1|0;var t=this.z3n_1,e=this.y3n_1[t],n=null!=e?e:j();return this.y3n_1[t]=null,this.q3o(n)},N(Oi).t3o=function(t){if(this.n3o(t),this.z3n_1===this.x3n_1)this.a3o(t);else{var e=this.z3n_1;this.z3n_1=e+1|0,this.y3n_1[e]=t}},N(Oi).xo=function(){var t=0,e=this.z3n_1;if(t<e)do{var n=t;t=t+1|0;var i=this.y3n_1[n],r=null!=i?i:j();this.y3n_1[n]=null,this.a3o(r)}while(t<e);this.z3n_1=0},N(ce).s3l=function(t,e,n){var i;return t===B?(It(),i=new F(-1,2147483647)):i=t,t=i,n===B?this.r3l(t,e):n.r3l.call(this,t,e)},N(pe).en=Q,N(pe).an=tt,N(Oi).i15=Xt,N(cn).i15=Xt,N(hn).i15=Xt,N(Hn).i15=Xt,s=new we,l=4096,new Ye,g=new Yn,y=new ei,b=8,x=200,t.$_$=t.$_$||{},t.$_$.a=function(t,e,n,i){return function(t,e,n,i){var r=new Ln(t,e,n,i);return r.va_1=R,r.wa_1=null,r.gb()}(t instanceof ce?t:j(),e instanceof ce?e:j(),n,i)},t.$_$.b=function(t,e,n){return t.v3l(e,0,e.length,n)},t.$_$.c=function(t,e,n){return t.q3l(e,0,e.length,n)},t.$_$.d=Si,t.$_$.e=y,t.$_$.f=ai,t.$_$.g=Wn,t.$_$.h=si,t.$_$.i=ve,t.$_$.j=function(t,e,n,i){return function(t,e,n,i){var r=n=n===B?0:n;if(r>=(i=i===B?ct(e):i))return An();var a=pn().j3l_1.s3o();try{var s;if((r=r+fi(t,e,r,i,a)|0)===i){var o=a.w3h_1-a.v3h_1|0,l=new Int8Array(o),u=l.length-0|0;return Oe(a instanceof be?a:j(),l,0,u),l}t:{var c=new De;try{c.b3p(a.z27()),ye(t,c,e,r,i),s=c.n3j();break t}catch(t){if(t instanceof Error){var h=t;throw c.xr(),h}throw t}}return sn(s)}finally{a.v3o(pn().j3l_1)}}(t,e,n=n===B?0:n,i=i===B?ct(e):i)},t.$_$.k=function(t,e,n,i){var r;n=n===B?0:n,i=i===B?ct(e):i;t:{var a=new De;try{ye(t,a,e,n,i),r=a.n3j();break t}catch(t){if(t instanceof Error){var s=t;throw a.xr(),s}throw t}}return r},t.$_$.l=ii,t.$_$.m=Rn,t.$_$.n=On,t.$_$.o=In,t.$_$.p=De,t.$_$.q=Fe,t.$_$.r=wi,t.$_$.s=Ke,t.$_$.t=function(t,e,n,i){e=e===B?0:e,n=n===B?t.length:n,i=i===B?ai().f3q_1:i,(e<0||n<0||(e+n|0)>t.length)&&function(t,e,n){if(!(t>=0))throw Pt("offset ("+t+") shouldn't be negative");if(!(e>=0))throw Pt("length ("+e+") shouldn't be negative");if(!((t+e|0)<=n.length))throw Pt("offset ("+t+") + length ("+e+") > bytes.size ("+n.length+")");throw Bt()}(e,n,t);var r=t,a=r.byteOffset+e|0,s=r.buffer.slice(a,a+n|0),o=new mn(Kn(Zn(),s),null,pn().m3l_1);o.e3n();var l=Ne(o,pn().n3l_1);return ve(i.i3q(),l,lt.MAX_VALUE)},t.$_$.u=sn,t.$_$.v=function(t){var e;if((t.h3j_1-t.g3j_1|0)>2){var n=t.g3j_1;t.g3j_1=n+2|0,e=t.f3j_1.w3m_1.getInt16(n,!1)}else e=function(t){var e,n=On(t,2);null==n?on(2):e=n;var i=e,r=function(t){var e,n=t.u3h_1,i=t.v3h_1;if((t.w3h_1-i|0)<2)throw new xi("Not enough bytes to read a short integer of size 2.");return e=n.w3m_1.getInt16(i,!1),t.x3m(2),e}(i);return Rn(t,i),r}(t);return e},t.$_$.w=function(t,e,n){return e=e===B?ai().f3q_1:e,n=n===B?lt.MAX_VALUE:n,ve(e.i3q(),t,n)},t.$_$.x=an,t.$_$.y=function(t,e){var n,i=t.r3f_1;(t.s3f_1-i|0)>2?(t.r3f_1=i+2|0,t.q3f_1.w3m_1.setInt16(i,e,!1),n=!0):n=!1,n||function(t,e){(function(t,e){var n=t.u3h_1,i=t.w3h_1,r=t.y3h_1-i|0;if(r<2)throw Ee("short integer",2,r);n.w3m_1.setInt16(i,e,!1),t.y3m(2)})(t.d3p(2),e),t.t3m()}(t,e)},t.$_$.z=un,t.$_$.a1=Ei,t.$_$.b1=function(){return p||(p=!0,d=new Fn),d},t.$_$.c1=function(t){return function(t,e,n){if(0===t.length)return Wn().v3m();var i=pn().j3l_1.s3o(),r=i,a=e,s=a+n|0;t:for(;;){r.d3n(8);var o=s-a|0,l=r,u=l.y3h_1-l.w3h_1|0,c=Math.min(o,u);if(Ae(r instanceof be?r:j(),t,a,c),(a=a+c|0)===s)break t;var h=r;r=pn().j3l_1.s3o(),h.d3q(r)}var f=new qn(i,!1);return _=f,_.g12(null),f;var _}(t,0,t.length)},t.$_$.d1=Xn,t.$_$.e1=de,t.$_$.f1=function(t){return t.oq(null)},t.$_$.g1=function(t,e,n,i){return function(t,e,n,i,r){var a=t.wl().bb(nt()),s=it(t,e,B,(o=i,l=n,u=r,c=a,h=null,f=new ge(o,l,u,c,h),_=function(t,e){return f.m1j(t,e)},_.$arity=1,_));var o,l,u,c,h,f,_;return s.ym(function(t){return function(e){return t.g12(e),R}}(n)),new pe(s,n)}(t,e=e===B?K():e,function(t){return t=t!==B&&t,new qn(pn().l3l_1,t)}(n=n!==B&&n),!0,i)},t})?i.apply(e,r):i)||(t.exports=a)},754:function(t,e,n){var i,r,a;r=[e,n(675),n(229),n(646),n(868)],void 0===(a="function"==typeof(i=function(t,e,n,i,r){"use strict";var a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T,C,$,A,R,O,I,k,U,P,D,N,L,z=Math.imul,F=e.$_$.v6,B=e.$_$.i1,H=e.$_$.a8,V=e.$_$.b,q=e.$_$.ib,j=e.$_$.a3,G=e.$_$.j7,W=e.$_$.x6,X=e.$_$.b8,Y=e.$_$.m7,K=e.$_$.m6,J=e.$_$.d,Z=e.$_$.x5,Q=n.$_$.u,tt=e.$_$.l,et=e.$_$.b7,nt=e.$_$.k7,it=e.$_$.g3,rt=e.$_$.sb,at=e.$_$.f3,st=e.$_$.r7,ot=e.$_$.t6,lt=e.$_$.u6,ut=e.$_$.g2,ct=i.$_$.d1,ht=e.$_$.a6,ft=i.$_$.i,_t=e.$_$.k6,dt=e.$_$.n3,pt=e.$_$.g,mt=e.$_$.i3,gt=e.$_$.f8,vt=e.$_$.d3,yt=e.$_$.xa,wt=e.$_$.z7,bt=e.$_$.f4,xt=e.$_$.h,St=e.$_$.k,Et=e.$_$.b4,Mt=e.$_$.f7,Tt=e.$_$.cc,Ct=e.$_$.k3,$t=e.$_$.s,At=e.$_$.s9,Rt=e.$_$.y1,Ot=e.$_$.c2,It=e.$_$.i9,kt=r.$_$.d,Ut=e.$_$.db,Pt=e.$_$.wa,Dt=e.$_$.t7,Nt=e.$_$.h3,Lt=e.$_$.y7,zt=e.$_$.c3,Ft=e.$_$.a4,Bt=e.$_$.p4,Ht=e.$_$.r4,Vt=e.$_$.y4,qt=i.$_$.y,jt=e.$_$.c7,Gt=e.$_$.r6,Wt=i.$_$.r,Xt=(e.$_$.y2,e.$_$.h2),Yt=e.$_$.rb,Kt=e.$_$.i2,Jt=e.$_$.j2,Zt=e.$_$.u2,Qt=e.$_$.g6,te=e.$_$.d7,ee=e.$_$.z5,ne=e.$_$.n5,ie=e.$_$.tb,re=e.$_$.x7,ae=e.$_$.bb,se=e.$_$.h1;function oe(t){this.w3t_1=t;var e=this.w3t_1;if(0===F(e))throw B("Name can't be blank")}function le(){}function ue(t,e){K.call(this,e),this.m3u_1=t}function ce(t){return t.n3u_1}function he(t){return Ie(t)}function fe(t){return new pe(t.c2().n3u_1,t.d2())}function _e(t){return new pe(Ie(t.c2()),t.d2())}function de(){this.p3u_1=tt()}function pe(t,e){this.u3u_1=t,this.v3u_1=e}function me(){return new de}function ge(){ht.call(this,ft)}function ve(t){this.y3u_1=t,this.x3u_1=t.z3u_1.s()}function ye(t,e,n){this.z3u_1=t,this.a3v_1=e,this.b3v_1=n,this.c3v_1=this.z3u_1.n()}function we(){if(u)return j;u=!0,a=new be("Jvm",0),s=new be("Native",1),o=new be("Browser",2),l=new be("Node",3)}function be(t,e){yt.call(this,t,e)}function xe(){c=this,this.j3v_1=vn().equals(Se()),this.k3v_1=vn().equals(Ee()),this.l3v_1=vn().equals((we(),a)),this.m3v_1=vn().equals((we(),s)),this.n3v_1=!1,this.o3v_1=!0}function Se(){return we(),o}function Ee(){return we(),l}function Me(){}function Te(t,e){var n,i=t.v3v_1.k2(e);if(null==i){var r=xt();t.w3v(e),t.v3v_1.a2(e,r),n=r}else n=i;return n}function Ce(t,e){t=t!==J&&t,e=e===J?8:e,this.u3v_1=t,this.v3v_1=this.u3v_1?me():St(e)}function $e(t,e){return t.e3w_1.k2(e)}function Ae(t,e){t=t!==J&&t,e=e===J?Et():e,this.d3w_1=t;for(var n=this.d3w_1?me():tt(),i=e.z1().s();i.t();){var r=i.u(),a=r.c2(),s=r.d2(),o=s.n(),l=pt(o),u=0;if(u<o)do{var c=u;u=u+1|0;var h=s.d1(c);l.p(h)}while(u<o);n.a2(a,l)}this.e3w_1=n}function Re(t){var e;if(Rt(65)<=t&&t<=Rt(90))e=Ot(t,32);else if(Rt(0)<=t&&t<=Rt(127))e=t;else{var n=ut(t).toLowerCase();e=lt(n,0)}return e}function Oe(t){this.n3u_1=t;var e=this.n3u_1.toLowerCase();this.o3u_1=G(e)}function Ie(t){return new Oe(t)}function ke(){this.f3w_1=kt(Et())}function Ue(){h=this,this.h3w_1=yn(new Ut(0,0))}function Pe(t,e,n,i,r,a,s,o,l){null==h&&new Ue,this.i3w_1=t,this.j3w_1=e,this.k3w_1=n,this.l3w_1=i,this.m3w_1=r,this.n3w_1=a,this.o3w_1=s,this.p3w_1=o,this.q3w_1=l}function De(){}function Ne(){if(w)return j;w=!0,f=new Le("MONDAY",0,"Mon"),_=new Le("TUESDAY",1,"Tue"),d=new Le("WEDNESDAY",2,"Wed"),p=new Le("THURSDAY",3,"Thu"),m=new Le("FRIDAY",4,"Fri"),g=new Le("SATURDAY",5,"Sat"),v=new Le("SUNDAY",6,"Sun")}function Le(t,e,n){yt.call(this,t,e),this.v3w_1=n}function ze(){}function Fe(){if(U)return j;U=!0,b=new Be("JANUARY",0,"Jan"),x=new Be("FEBRUARY",1,"Feb"),S=new Be("MARCH",2,"Mar"),E=new Be("APRIL",3,"Apr"),M=new Be("MAY",4,"May"),T=new Be("JUNE",5,"Jun"),C=new Be("JULY",6,"Jul"),$=new Be("AUGUST",7,"Aug"),A=new Be("SEPTEMBER",8,"Sep"),R=new Be("OCTOBER",9,"Oct"),O=new Be("NOVEMBER",10,"Nov"),I=new Be("DECEMBER",11,"Dec")}function Be(t,e,n){yt.call(this,t,e),this.y3w_1=n}function He(t,e){K.call(this,e),this.h3x_1=t}function Ve(t,e,n,i){rn.call(this,t),this.m3x_1=e,this.n3x_1=i,this.o3x_1=n,this.p3x_1=0}function qe(t,e){return function(t,e,n){var i=Ge().u3x_1;if(We.call(n,t,e,st(i,Nt)?i:q()),!Ge().u3x_1.z())throw B(gt("The shared empty array list has been modified"));return n}(t,e,Lt(H(We)))}function je(){P=this,this.u3x_1=xt()}function Ge(){return null==P&&new je,P}function We(t,e,n){Ge(),this.v3x_1=t,this.w3x_1=e,this.x3x_1=n,this.y3x_1=!0}function Xe(t,e){t.i3y_1.kotlinx$atomicfu$value=e}function Ye(t){return t.i3y_1.kotlinx$atomicfu$value}function Ke(t,e,n,i){return function(t,e,n,i,r){return r=r!==J&&r,N||r?new Ve(t,e,n,i):new dn(n,t,e)}(e,function(t){return null==Ye(t)&&function(t){var e=t.h3y_1;if(0===e)return tn(t,Ft()),Ft();var n=t.g3y_1;if(1===e){var i=0,r=Bt(n);if(i<=r)do{var a=i;i=i+1|0;var s=n.d1(a),o=s instanceof We?s:null;if(null!=o){var l=o;if(!l.m3f()){var u=l.c3y();return en(t,l),u}}}while(a!==r)}var c=xt(),h=0,f=Bt(n);if(h<=f)do{var _=h;h=h+1|0;var d=n.d1(_),p=d instanceof We?d:null;null!=p&&p.b3y(c)}while(_!==f);tn(t,c)}(t),t.j3y_1=!0,rt(Ye(t))}(t),n,i,t.l3y())}function Je(t,e){var n=t.g3y_1,i=0,r=n.n();if(i<r)do{var a=i;i=i+1|0;var s=n.d1(a);if(s===e){var o=qe(e,(null==D&&new un,D));return n.o(a,o),o}if(s instanceof We&&s.v3x_1===e)return s instanceof We?s:q()}while(i<r);return null}function Ze(t,e){var n=t.g3y_1,i=0,r=n.n();if(i<r)do{var a=i;i=i+1|0;var s=n.d1(a);if(s===e||s instanceof We&&s.v3x_1===e)return a}while(i<r);return-1}function Qe(t,e){var n=t.g3y_1,i=0,r=n.n();if(i<r)do{var a=i;i=i+1|0;var s=n.d1(a);if(s===e||s instanceof We&&s.v3x_1===e)return!0}while(i<r);return!1}function tn(t,e){Xe(t,e),t.j3y_1=!1,t.k3y_1=null}function en(t,e){Xe(t,e.c3y()),t.j3y_1=!1,t.k3y_1=e.v3x_1}function nn(t){this.e3y_1=mn(!0),this.f3y_1=!1,this.g3y_1=Vt(t.slice()),this.h3y_1=0,this.i3y_1=kt(null),this.j3y_1=!1,this.k3y_1=null}function rn(t){this.n3y_1=t}function an(t){this.d3y_1=t}function sn(t){jt(this,t),Gt(this,sn)}function on(t){cn.call(this),this.p3y_1=t}function ln(t){cn.call(this),this.t3y_1=t}function un(){D=this,cn.call(this)}function cn(){}function hn(t,e){for(;;){var n=t.a3z_1;if(n===t.v3y_1.n()){if(!e){var i=t.x3y_1;return fn(t,Xt(i)),!1}return!0}t.a3z_1=n+1|0;var r=t.v3y_1.d1(n);try{if(r(t,t.x3y_1,t.w3y_1)===Z())return!1}catch(e){if(e instanceof Error)return fn(t,Xt(Yt(e))),!1;throw e}}}function fn(t,e){if(t.z3y_1<0)throw B(gt("No more continuations to resume"));var n=rt(t.y3y_1[t.z3y_1]),i=t.z3y_1;if(t.z3y_1=i-1|0,t.y3y_1[i]=null,Jt(e)){var r=function(t,e){var n,i;try{i=Wt(t,e),t.cause,n=i}catch(e){if(!(e instanceof Error))throw e;n=t}return n}(rt(Kt(e)),n),a=Xt(Yt(r));n.hb(a)}else n.hb(e)}function _n(t){this.c3z_1=t,this.b3z_1=Zt.MIN_VALUE}function dn(t,e,n){rn.call(this,e),this.v3y_1=n,this.w3y_1=new _n(this),this.x3y_1=t;var i=this.v3y_1.n();this.y3y_1=te(Array(i),null),this.z3y_1=-1,this.a3z_1=0}function pn(t,e,n){n=n===J?null:n,this.d3z_1=t,this.e3z_1=e,this.f3z_1=n}function mn(t){return t=t!==J&&t,new gn}function gn(){this.g3z_1=tt()}function vn(t){var e="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node||"undefined"!=typeof window&&void 0!==window.process&&null!=window.process.versions&&null!=window.process.versions.node;return(null!=e&&"boolean"==typeof e?e:q())?Ee():Se()}function yn(t){var e=null==(t=t===J?null:t)?null:t.w9(),n=null==e?null:new Date(e),i=null==n?new Date:n;if(ie(i.getTime()))throw new wn(rt(t));var r=y.s3w((i.getUTCDay()+6|0)%7|0),a=k.s3w(i.getUTCMonth());return new Pe(i.getUTCSeconds(),i.getUTCMinutes(),i.getUTCHours(),r,i.getUTCDate(),i.getUTCFullYear(),a,i.getUTCFullYear(),re(i.getTime()))}function wn(t){se("Invalid date timestamp exception: "+t.toString(),this),Gt(this,wn)}function bn(){}function xn(){}return X(oe,"AttributeKey",W),X(le,"Attributes",Y),X(ue,"$toByteArrayCOROUTINE$0",W,K),X(de,"CaseInsensitiveMap",W,J,[it],de),X(pe,"Entry",W,J,[at]),X(ge,J,W,ht,[ht,_t]),X(ve,J,W),X(ye,"DelegatingMutableSet",W,J,[vt,mt]),X(be,"Platform",W,yt),X(xe,"PlatformUtils",wt),X(Me,"StringValues",Y),X(Ce,"StringValuesBuilderImpl",W,J,J,Ce),X(Ae,"StringValuesImpl",W,J,[Me],Ae),X(Oe,"CaseInsensitiveString",W),X(ke,"CopyOnWriteHashMap",W,J,J,ke),X(Ue,"Companion",wt),X(Pe,"GMTDate",W,J,[Pt]),X(De,"Companion",wt),X(Le,"WeekDay",W,yt),X(ze,"Companion",wt),X(Be,"Month",W,yt),X(He,"$proceedLoopCOROUTINE$1",W,K),X(rn,"PipelineContext",W,J,[qt],J,J,J,[1,0]),X(Ve,"DebugPipelineContext",W,rn,J,J,J,J,[1,0]),X(je,"Companion",wt),X(We,"PhaseContent",W),X(nn,"Pipeline",W,J,J,J,J,J,[2]),X(an,"PipelinePhase",W),X(sn,"InvalidPhaseException",W,Error),X(cn,"PipelinePhaseRelation",W),X(on,"After",W,cn),X(ln,"Before",W,cn),X(un,"Last",wt,cn),X(_n,J,W,J,[Qt]),X(dn,"SuspendFunctionGun",W,rn,J,J,J,J,[0,1]),X(pn,"TypeInfo",W),X(gn,"AttributesJs",W,J,[le],gn),X(wn,"InvalidTimestampException",W,ae),X(bn,J,W),X(xn,"JsType",wt),H(oe).toString=function(){return"AttributeKey: "+this.w3t_1},H(oe).equals=function(t){return this===t||!(null==t||!V(this).equals(V(t)))&&(t instanceof oe||q(),this.w3t_1===t.w3t_1)},H(oe).hashCode=function(){return G(this.w3t_1)},H(ue).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:if(this.ua_1=2,this.ta_1=1,(t=this.m3u_1.s3l(J,this))===Z())return t;continue t;case 1:return Q(t);case 2:throw this.wa_1}}catch(t){var e=t;if(2===this.ua_1)throw e;this.ta_1=this.ua_1,this.wa_1=e}},H(de).n=function(){return this.p3u_1.n()},H(de).q3u=function(t){return this.p3u_1.h2(new Oe(t))},H(de).h2=function(t){return null!=t&&"string"==typeof t&&this.q3u(null!=t&&"string"==typeof t?t:q())},H(de).x1e=function(t){return this.p3u_1.k2(Ie(t))},H(de).k2=function(t){return null==t||"string"!=typeof t?null:this.x1e(null!=t&&"string"==typeof t?t:q())},H(de).z=function(){return this.p3u_1.z()},H(de).v=function(){this.p3u_1.v()},H(de).r3u=function(t,e){return this.p3u_1.a2(Ie(t),e)},H(de).a2=function(t,e){var n=null!=t&&"string"==typeof t?t:q();return this.r3u(n,null!=e?e:q())},H(de).s3u=function(t){for(var e=t.z1().s();e.t();){var n=e.u(),i=n.c2(),r=n.d2();this.r3u(i,r)}},H(de).b2=function(t){return this.s3u(t)},H(de).t3u=function(t){return this.p3u_1.e2(Ie(t))},H(de).e2=function(t){return null==t||"string"!=typeof t?null:this.t3u(null!=t&&"string"==typeof t?t:q())},H(de).x1=function(){return new ye(this.p3u_1.x1(),ce,he)},H(de).z1=function(){return new ye(this.p3u_1.z1(),fe,_e)},H(de).y1=function(){return this.p3u_1.y1()},H(de).equals=function(t){return!(null==t||!(t instanceof de))&&et(t.p3u_1,this.p3u_1)},H(de).hashCode=function(){return nt(this.p3u_1)},H(pe).c2=function(){return this.u3u_1},H(pe).d2=function(){return this.v3u_1},H(pe).hashCode=function(){return(527+nt(rt(this.u3u_1))|0)+nt(rt(this.v3u_1))|0},H(pe).equals=function(t){return!(null==t||null==t||!st(t,at))&&!!et(t.c2(),this.u3u_1)&&et(t.d2(),this.v3u_1)},H(pe).toString=function(){return this.u3u_1+"="+this.v3u_1},H(ge).yr=function(t,e){return j},H(ve).t=function(){return this.x3u_1.t()},H(ve).u=function(){return this.y3u_1.a3v_1(this.x3u_1.u())},H(ve).w=function(){return this.x3u_1.w()},H(ye).d3v=function(t){for(var e=pt(dt(t,10)),n=t.s();n.t();){var i=n.u(),r=this.b3v_1(i);e.p(r)}return e},H(ye).e3v=function(t){for(var e=pt(dt(t,10)),n=t.s();n.t();){var i=n.u(),r=this.a3v_1(i);e.p(r)}return e},H(ye).n=function(){return this.c3v_1},H(ye).f3v=function(t){return this.z3u_1.p(this.b3v_1(t))},H(ye).p=function(t){return this.f3v(null==t||null!=t?t:q())},H(ye).g3v=function(t){return this.z3u_1.q(this.d3v(t))},H(ye).q=function(t){return this.g3v(t)},H(ye).v=function(){this.z3u_1.v()},H(ye).h3v=function(t){return this.z3u_1.x(this.b3v_1(t))},H(ye).x=function(t){return(null==t||null!=t)&&this.h3v(null==t||null!=t?t:q())},H(ye).i3v=function(t){return this.z3u_1.y(this.d3v(t))},H(ye).y=function(t){return this.i3v(t)},H(ye).z=function(){return this.z3u_1.z()},H(ye).s=function(){return new ve(this)},H(ye).hashCode=function(){return nt(this.z3u_1)},H(ye).equals=function(t){if(null==t||null==t||!st(t,mt))return!1;var e=this.e3v(this.z3u_1);return!!t.y(e)&&e.y(t)},H(ye).toString=function(){return gt(this.e3v(this.z3u_1))},H(Ce).p3v=function(){return this.u3v_1},H(Ce).q3v=function(t){return this.v3v_1.k2(t)},H(Ce).r3v=function(){return this.v3v_1.x1()},H(Ce).z=function(){return this.v3v_1.z()},H(Ce).s3v=function(){return this.v3v_1.z1()},H(Ce).y3v=function(t,e){this.z3v(e);var n=Te(this,t);n.v(),n.p(e)},H(Ce).x1e=function(t){var e=this.q3v(t);return null==e?null:bt(e)},H(Ce).a3w=function(t,e){this.z3v(e),Te(this,t).p(e)},H(Ce).b3w=function(t){var e;t.t3v((e=this,function(t,n){return e.x3v(t,n),j}))},H(Ce).x3v=function(t,e){for(var n=Te(this,t),i=e.s();i.t();){var r=i.u();this.z3v(r),n.p(r)}},H(Ce).c3w=function(t){this.v3v_1.e2(t)},H(Ce).v=function(){this.v3v_1.v()},H(Ce).w3v=function(t){},H(Ce).z3v=function(t){},H(Ae).p3v=function(){return this.d3w_1},H(Ae).x1e=function(t){var e=$e(this,t);return null==e?null:bt(e)},H(Ae).q3v=function(t){return $e(this,t)},H(Ae).r3v=function(){return this.e3w_1.x1()},H(Ae).z=function(){return this.e3w_1.z()},H(Ae).s3v=function(){return this.e3w_1.z1()},H(Ae).t3v=function(t){for(var e=this.e3w_1.z1().s();e.t();){var n=e.u();t(n.c2(),n.d2())}},H(Ae).toString=function(){return"StringValues(case="+!this.d3w_1+") "+this.s3v()},H(Ae).equals=function(t){return this===t||!(null==t||!st(t,Me))&&this.d3w_1===t.p3v()&&(e=this.s3v(),n=t.s3v(),et(e,n));var e,n},H(Ae).hashCode=function(){return t=this.s3v(),e=z(31,Mt(this.d3w_1)),z(e,31)+nt(t)|0;var t,e},H(Oe).equals=function(t){var e=t instanceof Oe?t:null,n=null==e?null:e.n3u_1;return!0===(null==n?null:It(n,this.n3u_1,!0))},H(Oe).hashCode=function(){return this.o3u_1},H(Oe).toString=function(){return this.n3u_1},H(ke).g3w=function(t){return this.f3w_1.kotlinx$atomicfu$value.k2(t)},H(Pe).r3w=function(t){return this.q3w_1.t8(t.q3w_1)},H(Pe).d=function(t){return this.r3w(t instanceof Pe?t:q())},H(Pe).toString=function(){return"GMTDate(seconds="+this.i3w_1+", minutes="+this.j3w_1+", hours="+this.k3w_1+", dayOfWeek="+this.l3w_1+", dayOfMonth="+this.m3w_1+", dayOfYear="+this.n3w_1+", month="+this.o3w_1+", year="+this.p3w_1+", timestamp="+this.q3w_1.toString()+")"},H(Pe).hashCode=function(){var t=this.i3w_1;return t=z(t,31)+this.j3w_1|0,t=z(t,31)+this.k3w_1|0,t=z(t,31)+this.l3w_1.hashCode()|0,t=z(t,31)+this.m3w_1|0,t=z(t,31)+this.n3w_1|0,t=z(t,31)+this.o3w_1.hashCode()|0,t=z(t,31)+this.p3w_1|0,z(t,31)+this.q3w_1.hashCode()|0},H(Pe).equals=function(t){if(this===t)return!0;if(!(t instanceof Pe))return!1;var e=t instanceof Pe?t:q();return this.i3w_1===e.i3w_1&&this.j3w_1===e.j3w_1&&this.k3w_1===e.k3w_1&&!!this.l3w_1.equals(e.l3w_1)&&this.m3w_1===e.m3w_1&&this.n3w_1===e.n3w_1&&!!this.o3w_1.equals(e.o3w_1)&&this.p3w_1===e.p3w_1&&!!this.q3w_1.equals(e.q3w_1)},H(De).s3w=function(t){return[(Ne(),f),(Ne(),_),(Ne(),d),(Ne(),p),(Ne(),m),(Ne(),g),(Ne(),v)][t]},H(ze).s3w=function(t){return[(Fe(),b),(Fe(),x),(Fe(),S),(Fe(),E),(Fe(),M),(Fe(),T),(Fe(),C),(Fe(),$),(Fe(),A),(Fe(),R),(Fe(),O),(Fe(),I)][t]},H(He).gb=function(){var t=this.va_1;t:for(;;)try{switch(this.ta_1){case 0:this.ua_1=6,this.ta_1=1;continue t;case 1:if(this.i3x_1=this.h3x_1.p3x_1,-1===this.i3x_1){this.ta_1=5;continue t}this.ta_1=2;continue t;case 2:if(this.j3x_1=this.h3x_1.m3x_1,this.i3x_1>=this.j3x_1.n()){this.h3x_1.q3x(),this.ta_1=5;continue t}this.ta_1=3;continue t;case 3:this.k3x_1=this.j3x_1.d1(this.i3x_1),this.h3x_1.p3x_1=this.i3x_1+1|0,this.ta_1=4;var e=this.k3x_1;if((t=(Dt(e,2)?e:q())(this.h3x_1,this.h3x_1.o3x_1,this))===Z())return t;continue t;case 4:this.ta_1=1;continue t;case 5:return this.h3x_1.o3x_1;case 6:throw this.wa_1}}catch(t){var n=t;if(6===this.ua_1)throw n;this.ta_1=this.ua_1,this.wa_1=n}},H(Ve).wl=function(){return this.n3x_1},H(Ve).q3x=function(){this.p3x_1=-1},H(Ve).r3x=function(t,e){return this.o3x_1=t,this.s3x(e)},H(Ve).s3x=function(t){var e=this.p3x_1;return e<0?this.o3x_1:e>=this.m3x_1.n()?(this.q3x(),this.o3x_1):function(t,e){var n=new He(t,e);return n.va_1=j,n.wa_1=null,n.gb()}(this,t)},H(Ve).t3x=function(t,e){return this.p3x_1=0,this.o3x_1=t,this.s3x(e)},H(We).m3f=function(){return this.x3x_1.z()},H(We).n=function(){return this.x3x_1.n()},H(We).a3y=function(t){var e;this.y3x_1&&((e=this).x3x_1=e.z3x(),e.y3x_1=!1),this.x3x_1.p(t)},H(We).b3y=function(t){var e=this.x3x_1;t instanceof zt&&t.s2(t.n()+e.n()|0);var n=0,i=e.n();if(n<i)do{var r=n;n=n+1|0,t.p(e.d1(r))}while(n<i)},H(We).c3y=function(){return this.y3x_1=!0,this.x3x_1},H(We).z3x=function(){var t=xt();return t.q(this.x3x_1),t},H(We).toString=function(){return"Phase `"+this.v3x_1.d3y_1+"`, "+this.n()+" handlers"},H(nn).l3y=function(){return this.f3y_1},H(nn).m3y=function(t,e,n){return Ke(this,t,e,n.ab()).t3x(e,n)},H(nn).o3y=function(t,e){if(Qe(this,e))return j;var n=Ze(this,t);if(-1===n)throw new sn("Phase "+t+" was not registered for this pipeline");var i=n,r=n+1|0,a=Bt(this.g3y_1);if(r<=a)t:do{var s=r;r=r+1|0;var o,l=this.g3y_1.d1(s),u=l instanceof We?l:null,c=null==u?null:u.w3x_1;if(null==c)break t;var h=(o=c)instanceof on?o:null,f=null==h?null:h.p3y_1;null!=f&&(i=et(f,t)?s:i)}while(s!==a);this.g3y_1.l1(i+1|0,qe(e,new on(t)))},H(nn).q3y=function(t,e){if(Qe(this,e))return j;var n=Ze(this,t);if(-1===n)throw new sn("Phase "+t+" was not registered for this pipeline");this.g3y_1.l1(n,qe(e,new ln(t)))},H(nn).r3y=function(t,e){var n=Je(this,t);if(null==n)throw new sn("Phase "+t+" was not registered for this pipeline");var i,r=n;if("function"!=typeof e&&q(),function(t,e,n){var i=Ye(t);return!(t.g3y_1.z()||null==i||t.j3y_1||null==i||!st(i,Nt)||(et(t.k3y_1,e)?(i.p(n),0):!et(e,Ht(t.g3y_1))&&Ze(t,e)!==Bt(t.g3y_1)||(rt(Je(t,e)).a3y(n),i.p(n),0)))}(this,t,e))return this.h3y_1=this.h3y_1+1|0,j;r.a3y(e),this.h3y_1=this.h3y_1+1|0,Xe(i=this,null),i.j3y_1=!1,i.k3y_1=null,this.s3y()},H(nn).s3y=function(){},H(an).toString=function(){return"Phase('"+this.d3y_1+"')"},H(_n).ab=function(){var t=this.c3z_1.y3y_1[this.c3z_1.z3y_1],e=null==t?null:t.ab();if(null==e)throw B(gt("Not started"));return e},H(_n).nd=function(t){if(Jt(t)){var e=rt(Kt(t)),n=Xt(Yt(e));return fn(this.c3z_1,n),j}hn(this.c3z_1,!1)},H(_n).hb=function(t){return this.nd(t)},H(dn).wl=function(){return this.w3y_1.ab()},H(dn).s3x=function(t){var e,n,i;return this.a3z_1!==this.v3y_1.n()?(n=this,i=ee(t),n.z3y_1=n.z3y_1+1|0,n.y3y_1[n.z3y_1]=i,hn(this,!0)?(function(t){if(t.z3y_1<0)throw B("No more continuations to resume");var e=t.z3y_1;t.z3y_1=e-1|0,t.y3y_1[e]=null}(this),e=this.x3y_1):e=Z()):e=this.x3y_1,e},H(dn).r3x=function(t,e){return this.x3y_1=t,this.s3x(e)},H(dn).t3x=function(t,e){if(this.a3z_1=0,this.a3z_1===this.v3y_1.n())return t;if(this.x3y_1=t,this.z3y_1>=0)throw B("Already started");return this.s3x(e)},H(pn).toString=function(){return"TypeInfo(type="+this.d3z_1+", reifiedType="+this.e3z_1+", kotlinType="+this.f3z_1+")"},H(pn).hashCode=function(){var t=this.d3z_1.hashCode();return t=z(t,31)+nt(this.e3z_1)|0,z(t,31)+(null==this.f3z_1?0:nt(this.f3z_1))|0},H(pn).equals=function(t){if(this===t)return!0;if(!(t instanceof pn))return!1;var e=t instanceof pn?t:q();return!!this.d3z_1.equals(e.d3z_1)&&!!et(this.e3z_1,e.e3z_1)&&!!et(this.f3z_1,e.f3z_1)},H(gn).y3t=function(t){var e=this.g3z_1.k2(t);return null==e||null!=e?e:q()},H(gn).z3t=function(t){return this.g3z_1.h2(t)},H(gn).a3u=function(t,e){this.g3z_1.a2(t,e)},H(gn).b3u=function(t){this.g3z_1.e2(t)},H(gn).c3u=function(t,e){var n=this.g3z_1.k2(t);if(null!=n)return null!=n?n:q();var i=e();return this.g3z_1.a2(t,i),i},H(gn).d3u=function(){return ne(this.g3z_1.x1())},H(bn).h3z=function(t){console.debug("TRACE: "+t)},H(gn).x3t=function(t){var e=this.y3t(t);if(null==e)throw B("No instance for key "+t);return e},y=new De,k=new ze,N=!1,L=new xn,t.$_$=t.$_$||{},t.$_$.a=function(t,e){var n=new ue(t,e);return n.va_1=j,n.wa_1=null,n.gb()},t.$_$.b=L,t.$_$.c=function(){return null==c&&new xe,c},t.$_$.d=ke,t.$_$.e=yn,t.$_$.f=function(t){return new bn},t.$_$.g=rn,t.$_$.h=an,t.$_$.i=nn,t.$_$.j=function(t,e){return e.c6(t)},t.$_$.k=function(t,e,n){return new pn(e,t,n)},t.$_$.l=oe,t.$_$.m=mn,t.$_$.n=function(t){var e=ct(t=t===J?null:t),n=new ge;return e.ge(n)},t.$_$.o=function(t){for(var e=this.s3v().s();e.t();){var n=e.u();t(n.c2(),n.d2())}return j},t.$_$.p=function(t){var e=this.q3v(t);return null==e?null:bt(e)},t.$_$.q=Ce,t.$_$.r=Ae,t.$_$.s=Me,t.$_$.t=function(t,e){for(var n=e.s3v().s();n.t();){var i=n.u(),r=i.c2(),a=i.d2();t.x3v(r,a)}return t},t.$_$.u=function(t){for(var e=t.s3v(),n=xt(),i=e.s();i.t();){for(var r=i.u(),a=r.d2(),s=pt(dt(a,10)),o=a.s();o.t();){var l=o.u(),u=Tt(r.c2(),l);s.p(u)}Ct(n,s)}return n},t.$_$.v=function(t){var e=ut(t).toLowerCase();return lt(e,0)===t},t.$_$.w=vn,t.$_$.x=function(t,e){for(var n=e.d3u().s();n.t();){var i=n.u();t.a3u(i instanceof oe?i:q(),e.x3t(i))}},t.$_$.y=function(t){for(var e=0,n=t.length,i=ot(n);e<n;){var r=e;i[r]=lt(t,r),e=e+1|0}return i},t.$_$.z=function(t){var e;t:{var n=0,i=F(t)-1|0;if(n<=i)do{var r=n;n=n+1|0;var a=lt(t,r);if(Re(a)!==a){e=r;break t}}while(n<=i);e=-1}var s=e;if(-1===s)return t;var o=t,l=t.length,u=$t(l);u.k7(o,0,s);var c=s,h=At(o);if(c<=h)do{var f=c;c=c+1|0,u.h5(Re(lt(o,f)))}while(f!==h);return u.toString()},t})?i.apply(e,r):i)||(t.exports=a)},878:function(t,e,n){var i,r,a;r=[e,n(675),n(229)],void 0===(a="function"==typeof(i=function(t,e,n){"use strict";var i,r,a,s,o,l,u,c,h,f,_,d,p,m,g,v,y,w,b,x,S,E,M,T=Math.imul,C=e.$_$.u4,$=e.$_$.k8,A=e.$_$.k,R=e.$_$.a3,O=e.$_$.a8,I=e.$_$.z7,k=e.$_$.b8,U=e.$_$.xa,P=e.$_$.x6,D=e.$_$.f8,N=e.$_$.j7,L=e.$_$.ib,z=e.$_$.q4,F=e.$_$.y6,B=e.$_$.sb,H=e.$_$.d7,V=e.$_$.y7,q=n.$_$.f,j=e.$_$.g9,G=n.$_$.j,W=n.$_$.p,X=n.$_$.y,Y=n.$_$.z,K=n.$_$.u,J=e.$_$.d;function Z(){p=this;for(var t=[nt(),it(),rt(),at(),st(),ot(),lt(),ut(),ct(),ht(),ft(),_t()],e=$(C(t.length),16),n=A(e),i=0,r=t.length;i<r;){var a=t[i];i=i+1|0;var s=a.a4b_1;n.a2(s,a)}this.b4b_1=n,this.c4b_1=ht()}function Q(){return tt(),null==p&&new Z,p}function tt(){if(m)return R;m=!0,i=new et("NORMAL",0,1e3),r=new et("GOING_AWAY",1,1001),a=new et("PROTOCOL_ERROR",2,1002),s=new et("CANNOT_ACCEPT",3,1003),o=new et("CLOSED_ABNORMALLY",4,1006),l=new et("NOT_CONSISTENT",5,1007),u=new et("VIOLATED_POLICY",6,1008),c=new et("TOO_BIG",7,1009),h=new et("NO_EXTENSION",8,1010),f=new et("INTERNAL_ERROR",9,1011),_=new et("SERVICE_RESTART",10,1012),d=new et("TRY_AGAIN_LATER",11,1013),Q()}function et(t,e,n){U.call(this,t,e),this.a4b_1=n}function nt(){return tt(),i}function it(){return tt(),r}function rt(){return tt(),a}function at(){return tt(),s}function st(){return tt(),o}function ot(){return tt(),l}function lt(){return tt(),u}function ut(){return tt(),c}function ct(){return tt(),h}function ht(){return tt(),f}function ft(){return tt(),_}function _t(){return tt(),d}function dt(t,e){this.e4b_1=t,this.f4b_1=e}function pt(){}function mt(){S=this;var t,e=gt();if(0!==e.length){var n=e[0],i=z(e);if(0!==i){var r=n.k4b_1,a=1;if(a<=i)do{var s=a;a=a+1|0;var o=e[s],l=o.k4b_1;F(r,l)<0&&(n=o,r=l)}while(s!==i);t=n}else t=n}else t=null;this.l4b_1=B(t).k4b_1;for(var u=0,c=this.l4b_1+1|0,h=H(Array(c),null);u<c;){var f,_=u;t:{for(var d=null,p=!1,m=gt(),g=0,v=m.length;g<v;){var y=m[g];if(g=g+1|0,y.k4b_1===_){if(p){f=null;break t}d=y,p=!0}}f=p?d:null}h[_]=f,u=u+1|0}this.m4b_1=h}function gt(){return[wt(),bt(),xt(),(vt(),b),(vt(),x)]}function vt(){if(E)return R;E=!0,v=new yt("TEXT",0,!1,1),y=new yt("BINARY",1,!1,2),w=new yt("CLOSE",2,!0,8),b=new yt("PING",3,!0,9),x=new yt("PONG",4,!0,10),vt(),null==S&&new mt}function yt(t,e,n,i){U.call(this,t,e),this.j4b_1=n,this.k4b_1=i}function wt(){return vt(),v}function bt(){return vt(),y}function xt(){return vt(),w}function St(t,e){var n=q().f3q_1;return function(t,e,n){Tt.call(n,t,e,!1,!1,!1)}(!0,n.equals(q().f3q_1)?j(t):G(n.j3q(),t,0,t.length),e),e}function Et(t,e){var n;t:{var i=new W;try{X(i,t.e4b_1),Y(i,t.f4b_1),n=i.n3j();break t}catch(t){if(t instanceof Error){var r=t;throw i.xr(),r}throw t}}return function(t,e){Ct.call(e,K(t))}(n,e),e}function Mt(t,e,n,i,r){n=n!==J&&n,i=i!==J&&i,r=r!==J&&r,Rt.call(this,t,bt(),e,g,n,i,r)}function Tt(t,e,n,i,r){n=n!==J&&n,i=i!==J&&i,r=r!==J&&r,Rt.call(this,t,wt(),e,g,n,i,r)}function Ct(t){Rt.call(this,!0,xt(),t,g,!1,!1,!1)}function $t(){M=this,this.n4b_1=new Int8Array(0)}function At(){return null==M&&new $t,M}function Rt(t,e,n,i,r,a,s){At(),i=i===J?g:i,r=r!==J&&r,a=a!==J&&a,s=s!==J&&s,this.o4b_1=t,this.p4b_1=e,this.q4b_1=n,this.r4b_1=i,this.s4b_1=r,this.t4b_1=a,this.u4b_1=s}return k(Z,"Companion",I),k(et,"Codes",P,U),k(dt,"CloseReason",P),k(pt,"NonDisposableHandle",I),k(mt,"Companion",I),k(yt,"FrameType",P,U),k(Rt,"Frame",P),k(Mt,"Binary",P,Rt),k(Tt,"Text",P,Rt),k(Ct,"Close",P,Rt,J,(function(){return t=V(O(Ct)),Ct.call(t,At().n4b_1),t;var t})),k($t,"Companion",I),O(Z).d4b=function(t){return this.b4b_1.k2(t)},O(dt).g4b=function(){return Q().d4b(this.e4b_1)},O(dt).toString=function(){var t=this.g4b();return"CloseReason(reason="+D(null==t?this.e4b_1:t)+", message="+this.f4b_1+")"},O(dt).hashCode=function(){var t=this.e4b_1;return T(t,31)+N(this.f4b_1)|0},O(dt).equals=function(t){if(this===t)return!0;if(!(t instanceof dt))return!1;var e=t instanceof dt?t:L();return this.e4b_1===e.e4b_1&&this.f4b_1===e.f4b_1},O(pt).xo=function(){},O(pt).toString=function(){return"NonDisposableHandle"},O(Rt).toString=function(){return"Frame "+this.p4b_1+" (fin="+this.o4b_1+", buffer len = "+this.q4b_1.length+")"},g=new pt,t.$_$=t.$_$||{},t.$_$.a=st,t.$_$.b=nt,t.$_$.c=function(t,e){return function(t,e,n){return Mt.call(n,t,e,!1,!1,!1),n}(t,e,V(O(Mt)))},t.$_$.d=function(t){return Et(t,V(O(Ct)))},t.$_$.e=function(t){return St(t,V(O(Tt)))},t.$_$.f=Q,t.$_$.g=dt,t})?i.apply(e,r):i)||(t.exports=a)},115:function(t,e,n){var i,r,a;r=[e,n(675)],void 0===(a="function"==typeof(i=function(t,e){"use strict";var n,i,r,a,s,o,l,u,c,h,f,_,d,p=Math.imul,m=e.$_$.db,g=e.$_$.f8,v=e.$_$.e1,y=e.$_$.i1,w=e.$_$.sb,b=e.$_$.d8,x=e.$_$.a3,S=e.$_$.a8,E=e.$_$.x6,M=e.$_$.b8,T=e.$_$.y7,C=e.$_$.z7,$=e.$_$.l3,A=e.$_$.c1,R=e.$_$.d,O=e.$_$.y1,I=e.$_$.t6,k=e.$_$.v7,U=e.$_$.c9,P=e.$_$.f2,D=e.$_$.s6,N=e.$_$.b9,L=e.$_$.p3,z=e.$_$.ib,F=e.$_$.u3,B=e.$_$.x9,H=e.$_$.wa,V=e.$_$.e8,q=e.$_$.u2,j=e.$_$.x7,G=e.$_$.c8,W=e.$_$.v,X=e.$_$.d7,Y=e.$_$.n7,K=e.$_$.cb,J=e.$_$.m1,Z=e.$_$.r6,Q=e.$_$.za,tt=e.$_$.b1,et=e.$_$.u;function nt(t){return new Pt(t)}function it(t){this.gi_1=t,this.hi_1=this.gi_1.mi(),this.ii_1=this.hi_1.ni_1;var e=this.hi_1.ni_1,n=null==e?null:e.qi_1;this.ji_1=null==n?-1:n,this.ki_1=!1,this.li_1=new m(0,0)}function rt(){return t=T(S(ot)),ot.call(t),t.pi_1=new Int8Array(8192),t.ti_1=!0,t.si_1=!1,t;var t}function at(t,e,n,i,r){return function(t,e,n,i,r,a){return ot.call(a),a.pi_1=t,a.qi_1=e,a.ri_1=n,a.si_1=i,a.ti_1=r,a}(t,e,n,i,r,T(S(ot)))}function st(){this.zi_1=8192,this.aj_1=1024}function ot(){this.qi_1=0,this.ri_1=0,this.si_1=!1,this.ti_1=!1,this.ui_1=null,this.vi_1=null}function lt(){return n}function ut(){return i}function ct(){return r}function ht(){return a}function ft(){return s}function _t(){return o}function dt(){return l}function pt(t,e){return vt(),e===(vt(),u)?t.n():e}function mt(t,e,n,i,r){vt();var a=0;if(a<r)do{var s=a;if(a=a+1|0,t[s+e|0]!==n[s+i|0])return!1}while(a<r);return!0}function gt(t,e,n){if(vt(),e.pa(n).t8(new m(0,0))<0||e.t8(t)>0||t.ca(e).t8(n)<0)throw new Ot("size="+t.toString()+" offset="+e.toString()+" byteCount="+n.toString())}function vt(){c||(c=!0,new At,u=-1234567890)}function yt(t,e,n){if(e=e===R?0:e,n=n===R?t.length:n,e<0||n>t.length||e>n)throw new Ot("size="+t.length+" beginIndex="+e+" endIndex="+n);for(var i=I(n-e|0),r=0,a=e;a<n;){var s=t[a];if(s>=0){var o=r;for(r=o+1|0,i[o]=k(s),a=a+1|0;a<n&&t[a]>=0;){var l=a;a=l+1|0;var u=r;r=u+1|0,i[u]=k(t[l])}}else if(s>>5==-2){var c,h=a,f=a;if(n<=(f+1|0)){var _=lt(),d=r;r=d+1|0,i[d]=k(_),c=1}else{var p=t[f],m=t[f+1|0];if(128==(192&m)){var g=ft()^m^p<<6;if(g<128){var v=lt(),y=r;r=y+1|0,i[y]=k(v)}else{var w=r;r=w+1|0,i[w]=k(g)}c=2}else{var b=lt(),x=r;r=x+1|0,i[x]=k(b),c=1}}a=h+c|0}else if(s>>4==-2){var S,E=a;t:{var M=a;if(n<=(M+2|0)){var T=lt(),C=r;if(r=C+1|0,i[C]=k(T),n<=(M+1|0)||128!=(192&t[M+1|0])){S=1;break t}S=2}else{var $=t[M],A=t[M+1|0];if(128==(192&A)){var O=t[M+2|0];if(128==(192&O)){var P=_t()^O^A<<6^$<<12;if(P<2048){var D=lt(),N=r;r=N+1|0,i[N]=k(D)}else if(55296<=P&&P<=57343){var L=lt(),z=r;r=z+1|0,i[z]=k(L)}else{var F=r;r=F+1|0,i[F]=k(P)}S=3}else{var B=lt(),H=r;r=H+1|0,i[H]=k(B),S=2}}else{var V=lt(),q=r;r=q+1|0,i[q]=k(V),S=1}}}a=E+S|0}else if(s>>3==-2){var j,G=a;t:{var W=a;if(n<=(W+3|0)){var X=lt();if(X!==lt()){var Y=r;r=Y+1|0,i[Y]=k((X>>>10|0)+ut()|0);var K=r;r=K+1|0,i[K]=k((1023&X)+ct()|0)}else{var J=r;r=J+1|0,i[J]=ht()}if(n<=(W+1|0)||128!=(192&t[W+1|0])){j=1;break t}if(n<=(W+2|0)||128!=(192&t[W+2|0])){j=2;break t}j=3}else{var Z=t[W],Q=t[W+1|0];if(128==(192&Q)){var tt=t[W+2|0];if(128==(192&tt)){var et=t[W+3|0];if(128==(192&et)){var nt=dt()^et^tt<<6^Q<<12^Z<<18;if(nt>1114111){var it=lt();if(it!==lt()){var rt=r;r=rt+1|0,i[rt]=k((it>>>10|0)+ut()|0);var at=r;r=at+1|0,i[at]=k((1023&it)+ct()|0)}else{var st=r;r=st+1|0,i[st]=ht()}}else if(55296<=nt&&nt<=57343){var ot=lt();if(ot!==lt()){var pt=r;r=pt+1|0,i[pt]=k((ot>>>10|0)+ut()|0);var mt=r;r=mt+1|0,i[mt]=k((1023&ot)+ct()|0)}else{var gt=r;r=gt+1|0,i[gt]=ht()}}else if(nt<65536){var vt=lt();if(vt!==lt()){var yt=r;r=yt+1|0,i[yt]=k((vt>>>10|0)+ut()|0);var wt=r;r=wt+1|0,i[wt]=k((1023&vt)+ct()|0)}else{var bt=r;r=bt+1|0,i[bt]=ht()}}else if(nt!==lt()){var xt=r;r=xt+1|0,i[xt]=k((nt>>>10|0)+ut()|0);var St=r;r=St+1|0,i[St]=k((1023&nt)+ct()|0)}else{var Et=r;r=Et+1|0,i[Et]=ht()}j=4}else{var Mt=lt();if(Mt!==lt()){var Tt=r;r=Tt+1|0,i[Tt]=k((Mt>>>10|0)+ut()|0);var Ct=r;r=Ct+1|0,i[Ct]=k((1023&Mt)+ct()|0)}else{var $t=r;r=$t+1|0,i[$t]=ht()}j=3}}else{var At=lt();if(At!==lt()){var Rt=r;r=Rt+1|0,i[Rt]=k((At>>>10|0)+ut()|0);var It=r;r=It+1|0,i[It]=k((1023&At)+ct()|0)}else{var kt=r;r=kt+1|0,i[kt]=ht()}j=2}}else{var Ut=lt();if(Ut!==lt()){var Pt=r;r=Pt+1|0,i[Pt]=k((Ut>>>10|0)+ut()|0);var Dt=r;r=Dt+1|0,i[Dt]=k((1023&Ut)+ct()|0)}else{var Nt=r;r=Nt+1|0,i[Nt]=ht()}j=1}}}a=G+j|0}else{var Lt=r;r=Lt+1|0,i[Lt]=ht(),a=a+1|0}}return U(i,0,r)}function wt(){return xt(),h}function bt(t,e){return xt(),function(t,e){xt();for(var n=0,i=0,r=t.length,a=0;a<r;){var s=t[a];if(s>=0){var o,l=i;if(i=l+1|0,l===e)return n;var u=O(10);if(s!==P(u)){var c=O(13);o=!(s===P(c))}else o=!1;if(o&&(0<=s&&s<=31||127<=s&&s<=159)||s===lt())return-1;for(n=n+(s<65536?1:2)|0,a=a+1|0;a<r&&t[a]>=0;){var h=a;a=h+1|0;var f,_=t[h],d=i;if(i=d+1|0,d===e)return n;var p=O(10);if(_!==P(p)){var m=O(13);f=!(_===P(m))}else f=!1;if(f&&(0<=_&&_<=31||127<=_&&_<=159)||_===lt())return-1;n=n+(_<65536?1:2)|0}}else if(s>>5==-2){var g,v=a,y=a;if(r<=(y+1|0)){var w,b=lt(),x=i;if(i=x+1|0,x===e)return n;var S=O(10);if(b!==P(S)){var E=O(13);w=!(b===P(E))}else w=!1;if(w&&(0<=b&&b<=31||127<=b&&b<=159)||b===lt())return-1;n=n+(b<65536?1:2)|0,g=1}else{var M=t[y],T=t[y+1|0];if(128==(192&T)){var C=ft()^T^M<<6;if(C<128){var $,A=lt(),R=i;if(i=R+1|0,R===e)return n;var I=O(10);if(A!==P(I)){var k=O(13);$=!(A===P(k))}else $=!1;if($&&(0<=A&&A<=31||127<=A&&A<=159)||A===lt())return-1;n=n+(A<65536?1:2)|0}else{var U,D=i;if(i=D+1|0,D===e)return n;var N=O(10);if(C!==P(N)){var L=O(13);U=!(C===P(L))}else U=!1;if(U&&(0<=C&&C<=31||127<=C&&C<=159)||C===lt())return-1;n=n+(C<65536?1:2)|0}g=2}else{var z,F=lt(),B=i;if(i=B+1|0,B===e)return n;var H=O(10);if(F!==P(H)){var V=O(13);z=!(F===P(V))}else z=!1;if(z&&(0<=F&&F<=31||127<=F&&F<=159)||F===lt())return-1;n=n+(F<65536?1:2)|0,g=1}}a=v+g|0}else if(s>>4==-2){var q,j=a;t:{var G=a;if(r<=(G+2|0)){var W,X=lt(),Y=i;if(i=Y+1|0,Y===e)return n;var K=O(10);if(X!==P(K)){var J=O(13);W=!(X===P(J))}else W=!1;if(W&&(0<=X&&X<=31||127<=X&&X<=159)||X===lt())return-1;if(n=n+(X<65536?1:2)|0,r<=(G+1|0)||128!=(192&t[G+1|0])){q=1;break t}q=2}else{var Z=t[G],Q=t[G+1|0];if(128==(192&Q)){var tt=t[G+2|0];if(128==(192&tt)){var et=_t()^tt^Q<<6^Z<<12;if(et<2048){var nt,it=lt(),rt=i;if(i=rt+1|0,rt===e)return n;var at=O(10);if(it!==P(at)){var st=O(13);nt=!(it===P(st))}else nt=!1;if(nt&&(0<=it&&it<=31||127<=it&&it<=159)||it===lt())return-1;n=n+(it<65536?1:2)|0}else if(55296<=et&&et<=57343){var ot,ut=lt(),ct=i;if(i=ct+1|0,ct===e)return n;var ht=O(10);if(ut!==P(ht)){var pt=O(13);ot=!(ut===P(pt))}else ot=!1;if(ot&&(0<=ut&&ut<=31||127<=ut&&ut<=159)||ut===lt())return-1;n=n+(ut<65536?1:2)|0}else{var mt,gt=i;if(i=gt+1|0,gt===e)return n;var vt=O(10);if(et!==P(vt)){var yt=O(13);mt=!(et===P(yt))}else mt=!1;if(mt&&(0<=et&&et<=31||127<=et&&et<=159)||et===lt())return-1;n=n+(et<65536?1:2)|0}q=3}else{var wt,bt=lt(),St=i;if(i=St+1|0,St===e)return n;var Et=O(10);if(bt!==P(Et)){var Mt=O(13);wt=!(bt===P(Mt))}else wt=!1;if(wt&&(0<=bt&&bt<=31||127<=bt&&bt<=159)||bt===lt())return-1;n=n+(bt<65536?1:2)|0,q=2}}else{var Tt,Ct=lt(),$t=i;if(i=$t+1|0,$t===e)return n;var At=O(10);if(Ct!==P(At)){var Rt=O(13);Tt=!(Ct===P(Rt))}else Tt=!1;if(Tt&&(0<=Ct&&Ct<=31||127<=Ct&&Ct<=159)||Ct===lt())return-1;n=n+(Ct<65536?1:2)|0,q=1}}}a=j+q|0}else if(s>>3==-2){var Ot,It=a;t:{var kt=a;if(r<=(kt+3|0)){var Ut,Pt=lt(),Dt=i;if(i=Dt+1|0,Dt===e)return n;var Nt=O(10);if(Pt!==P(Nt)){var Lt=O(13);Ut=!(Pt===P(Lt))}else Ut=!1;if(Ut&&(0<=Pt&&Pt<=31||127<=Pt&&Pt<=159)||Pt===lt())return-1;if(n=n+(Pt<65536?1:2)|0,r<=(kt+1|0)||128!=(192&t[kt+1|0])){Ot=1;break t}if(r<=(kt+2|0)||128!=(192&t[kt+2|0])){Ot=2;break t}Ot=3}else{var zt=t[kt],Ft=t[kt+1|0];if(128==(192&Ft)){var Bt=t[kt+2|0];if(128==(192&Bt)){var Ht=t[kt+3|0];if(128==(192&Ht)){var Vt=dt()^Ht^Bt<<6^Ft<<12^zt<<18;if(Vt>1114111){var qt,jt=lt(),Gt=i;if(i=Gt+1|0,Gt===e)return n;var Wt=O(10);if(jt!==P(Wt)){var Xt=O(13);qt=!(jt===P(Xt))}else qt=!1;if(qt&&(0<=jt&&jt<=31||127<=jt&&jt<=159)||jt===lt())return-1;n=n+(jt<65536?1:2)|0}else if(55296<=Vt&&Vt<=57343){var Yt,Kt=lt(),Jt=i;if(i=Jt+1|0,Jt===e)return n;var Zt=O(10);if(Kt!==P(Zt)){var Qt=O(13);Yt=!(Kt===P(Qt))}else Yt=!1;if(Yt&&(0<=Kt&&Kt<=31||127<=Kt&&Kt<=159)||Kt===lt())return-1;n=n+(Kt<65536?1:2)|0}else if(Vt<65536){var te,ee=lt(),ne=i;if(i=ne+1|0,ne===e)return n;var ie=O(10);if(ee!==P(ie)){var re=O(13);te=!(ee===P(re))}else te=!1;if(te&&(0<=ee&&ee<=31||127<=ee&&ee<=159)||ee===lt())return-1;n=n+(ee<65536?1:2)|0}else{var ae,se=i;if(i=se+1|0,se===e)return n;var oe=O(10);if(Vt!==P(oe)){var le=O(13);ae=!(Vt===P(le))}else ae=!1;if(ae&&(0<=Vt&&Vt<=31||127<=Vt&&Vt<=159)||Vt===lt())return-1;n=n+(Vt<65536?1:2)|0}Ot=4}else{var ue,ce=lt(),he=i;if(i=he+1|0,he===e)return n;var fe=O(10);if(ce!==P(fe)){var _e=O(13);ue=!(ce===P(_e))}else ue=!1;if(ue&&(0<=ce&&ce<=31||127<=ce&&ce<=159)||ce===lt())return-1;n=n+(ce<65536?1:2)|0,Ot=3}}else{var de,pe=lt(),me=i;if(i=me+1|0,me===e)return n;var ge=O(10);if(pe!==P(ge)){var ve=O(13);de=!(pe===P(ve))}else de=!1;if(de&&(0<=pe&&pe<=31||127<=pe&&pe<=159)||pe===lt())return-1;n=n+(pe<65536?1:2)|0,Ot=2}}else{var ye,we=lt(),be=i;if(i=be+1|0,be===e)return n;var xe=O(10);if(we!==P(xe)){var Se=O(13);ye=!(we===P(Se))}else ye=!1;if(ye&&(0<=we&&we<=31||127<=we&&we<=159)||we===lt())return-1;n=n+(we<65536?1:2)|0,Ot=1}}}a=It+Ot|0}else{var Ee,Me=lt(),Te=i;if(i=Te+1|0,Te===e)return n;var Ce=O(10);if(Me!==P(Ce)){var $e=O(13);Ee=!(Me===P($e))}else Ee=!1;if(Ee&&(0<=Me&&Me<=31||127<=Me&&Me<=159)||Me===lt())return-1;n=n+(Me<65536?1:2)|0,a=a+1|0}}return n}(t,e)}function xt(){f||(f=!0,h=D([O(48),O(49),O(50),O(51),O(52),O(53),O(54),O(55),O(56),O(57),O(97),O(98),O(99),O(100),O(101),O(102)]))}function St(t,e){var n=function(t,e,n,i){for(var r=n,a=i-1|0;r<=a;){var s=(r+a|0)>>>1|0,o=t[s];if(o<e)r=s+1|0;else{if(!(o>e))return s;a=s-1|0}}return(0|-r)-1|0}(t.sj_1,e+1|0,0,t.rj_1.length);return n>=0?n:~n}function Et(){_=this;var t=new Int8Array([]);this.tj_1=new Tt(t)}function Mt(){return null==_&&new Et,_}function Tt(t){Mt(),this.lj_1=t,this.mj_1=0,this.nj_1=null}function Ct(t){return new Tt(t.dk())}function $t(t,e){Tt.call(this,Mt().tj_1.lj_1),this.rj_1=t,this.sj_1=e}function At(){this.fk_1=null,this.gk_1=!1,this.hk_1=null,this.ik_1=new m(-1,-1),this.jk_1=null,this.kk_1=-1,this.lk_1=-1}function Rt(){this.ni_1=null,this.oi_1=new m(0,0)}function Ot(t){J(t,this),Z(this,Ot)}function It(t){kt(t=t===R?null:t,this),Z(this,It)}function kt(t,e){return t=t===R?null:t,Ut.call(e,t,null),e}function Ut(t,e){tt(t,e,this),Z(this,Ut)}function Pt(t){this.fl_1=t,this.gl_1=!1,this.hl_1=new Rt}function Dt(){this.fj_1=0,this.gj_1=0}return M(it,"PeekSource",E),M(st,"Companion",C),M(ot,"Segment",E,R,R,rt),M(Et,"Companion",C),M(Tt,"ByteString",E,R,[H]),M($t,"SegmentedByteString",E,Tt),M(At,"UnsafeCursor",E,R,R,At),M(Rt,"Buffer",E,R,R,Rt),M(Ot,"ArrayIndexOutOfBoundsException",E,K),M(Ut,"IOException",E,Q,R,(function t(e){var n=kt(e,T(S(Ut)));return Z(n,t),n})),M(It,"EOFException",E,Ut,R,It),M(Pt,"RealBufferedSource",E),M(Dt,"SegmentPool",C),S(it).wi=function(t,e){if(!(e.t8(new m(0,0))>=0)){var n="byteCount < 0: "+e.toString();throw v(g(n))}if(this.ki_1)throw y(g("closed"));if(null!=this.ii_1&&(this.ii_1!==this.hi_1.ni_1||this.ji_1!==w(this.hi_1.ni_1).qi_1))throw y(g("Peek source is invalid because upstream source was used"));if(e.equals(new m(0,0)))return new m(0,0);var i=this.li_1.ba(b(1));if(!this.gi_1.xi(i))return new m(-1,-1);null==this.ii_1&&null!=this.hi_1.ni_1&&(this.ii_1=this.hi_1.ni_1,this.ji_1=w(this.hi_1.ni_1).qi_1);var r=this.hi_1.oi_1.ca(this.li_1),a=e.t8(r)<=0?e:r;return this.hi_1.yi(t,this.li_1,a),this.li_1=this.li_1.ba(a),a},S(ot).bj=function(){return this.si_1=!0,at(this.pi_1,this.qi_1,this.ri_1,!0,!1)},S(ot).cj=function(){var t=this.ui_1!==this?this.ui_1:null;return w(this.vi_1).ui_1=this.ui_1,w(this.ui_1).vi_1=this.vi_1,this.ui_1=null,this.vi_1=null,t},S(ot).dj=function(t){return t.vi_1=this,t.ui_1=this.ui_1,w(this.ui_1).vi_1=t,this.ui_1=t,t},S(ot).ej=function(t){var e;if(!(t>0&&t<=(this.ri_1-this.qi_1|0)))throw v(g("byteCount out of range"));if(t>=1024)e=this.bj();else{e=d.hj();var n=this.pi_1,i=e.pi_1,r=this.qi_1,a=this.qi_1+t|0;$(n,i,0,r,a)}return e.ri_1=e.qi_1+t|0,this.qi_1=this.qi_1+t|0,w(this.vi_1).dj(e),e},S(ot).ij=function(){if(this.vi_1===this)throw y(g("cannot compact"));if(!w(this.vi_1).ti_1)return x;var t=this.ri_1-this.qi_1|0;if(t>((8192-w(this.vi_1).ri_1|0)+(w(this.vi_1).si_1?0:w(this.vi_1).qi_1)|0))return x;this.jj(w(this.vi_1),t),this.cj(),d.kj(this)},S(ot).jj=function(t,e){if(!t.ti_1)throw y(g("only owner can write"));if((t.ri_1+e|0)>8192){if(t.si_1)throw A();if(((t.ri_1+e|0)-t.qi_1|0)>8192)throw A();var n=t.pi_1,i=t.pi_1,r=t.qi_1,a=t.ri_1;$(n,i,0,r,a),t.ri_1=t.ri_1-t.qi_1|0,t.qi_1=0}var s=this.pi_1,o=t.pi_1,l=t.ri_1,u=this.qi_1,c=this.qi_1+e|0;$(s,o,l,u,c),t.ri_1=t.ri_1+e|0,this.qi_1=this.qi_1+e|0},S(Tt).uj=function(t){},S(Tt).vj=function(t){},S(Tt).wj=function(){var t=this.nj_1;return null==t&&(t=yt(this.xj()),this.vj(t)),t},S(Tt).yj=function(){for(var t=I(p(this.lj_1.length,2)),e=0,n=this.lj_1,i=0,r=n.length;i<r;){var a=n[i];i=i+1|0;var s=e;e=s+1|0;var o=wt();t[s]=o[a>>4&15];var l=e;e=l+1|0;var u=wt();t[l]=u[15&a]}return N(t)},S(Tt).zj=function(t){if(t>=this.n()||t<0)throw new Ot("size="+this.n()+" pos="+t);return this.lj_1[t]},S(Tt).d1=function(t){return this.zj(t)},S(Tt).n=function(){return this.ak()},S(Tt).ak=function(){return this.lj_1.length},S(Tt).xj=function(){return this.lj_1},S(Tt).bk=function(t,e,n,i){return t>=0&&t<=(this.lj_1.length-i|0)&&n>=0&&n<=(e.length-i|0)&&mt(this.lj_1,t,e,n,i)},S(Tt).equals=function(t){return t===this||t instanceof Tt&&t.n()===this.lj_1.length&&t.bk(0,this.lj_1,0,this.lj_1.length)},S(Tt).hashCode=function(){var t,e=this.mj_1;if(0===e){var n=L(this.lj_1);this.uj(n),t=n}else t=e;return t},S(Tt).ck=function(t){var e;t:{for(var n=this.n(),i=t.n(),r=0,a=Math.min(n,i);r<a;){var s=255&this.d1(r),o=255&t.d1(r);if(s!==o){e=s<o?-1:1;break t}r=r+1|0}e=n!==i?n<i?-1:1:0}return e},S(Tt).d=function(t){return this.ck(t instanceof Tt?t:z())},S(Tt).toString=function(){var t;if(0!==this.lj_1.length){var e=bt(this.lj_1,64);if(-1!==e){var n=this.wj(),i=n.substring(0,e),r=B(B(B(i,"\\","\\\\"),"\n","\\n"),"\r","\\r");t=e<n.length?"[size="+this.lj_1.length+" text="+r+"…]":"[text="+r+"]"}else{var a;if(this.lj_1.length<=64)a="[hex="+this.yj()+"]";else{var s=this.lj_1.length,o=pt(this,64);if(!(o<=this.lj_1.length)){var l="endIndex > length("+this.lj_1.length+")";throw v(g(l))}if(!((o-0|0)>=0))throw v(g("endIndex < beginIndex"));a="[size="+s+" hex="+(o!==this.lj_1.length?new Tt(F(this.lj_1,0,o)):this).yj()+"…]"}t=a}}else t="[size=0]";return t},S($t).yj=function(){return Ct(this).yj()},S($t).zj=function(t){gt(b(this.sj_1[this.rj_1.length-1|0]),b(t),new m(1,0));var e=St(this,t),n=0===e?0:this.sj_1[e-1|0],i=this.sj_1[e+this.rj_1.length|0];return this.rj_1[e][(t-n|0)+i|0]},S($t).ak=function(){return this.sj_1[this.rj_1.length-1|0]},S($t).dk=function(){for(var t=new Int8Array(this.n()),e=0,n=this.rj_1.length,i=0,r=0;i<n;){var a=this.sj_1[n+i|0],s=this.sj_1[i],o=s-r|0,l=this.rj_1[i];$(l,t,e,a,a+o|0),e=e+o|0,r=s,i=i+1|0}return t},S($t).ek=function(t,e,n,i){var r;t:if(t<0||t>(this.n()-i|0))r=!1;else{for(var a=n,s=t+i|0,o=St(this,t),l=t;l<s;){var u=0===o?0:this.sj_1[o-1|0],c=this.sj_1[o]-u|0,h=this.sj_1[this.rj_1.length+o|0],f=u+c|0,_=Math.min(s,f)-l|0,d=h+(l-u|0)|0,p=this.rj_1[o];if(!e.bk(a,p,d,_)){r=!1;break t}a=a+_|0,l=l+_|0,o=o+1|0}r=!0}return r},S($t).bk=function(t,e,n,i){var r;t:if(t<0||t>(this.n()-i|0)||n<0||n>(e.length-i|0))r=!1;else{for(var a=n,s=t+i|0,o=St(this,t),l=t;l<s;){var u=0===o?0:this.sj_1[o-1|0],c=this.sj_1[o]-u|0,h=this.sj_1[this.rj_1.length+o|0],f=u+c|0,_=Math.min(s,f)-l|0,d=h+(l-u|0)|0;if(!mt(this.rj_1[o],d,e,a,_)){r=!1;break t}a=a+_|0,l=l+_|0,o=o+1|0}r=!0}return r},S($t).xj=function(){return this.dk()},S($t).equals=function(t){return t===this||t instanceof Tt&&t.n()===this.n()&&this.ek(0,t,0,this.n())},S($t).hashCode=function(){var t,e=this.mj_1;if(0===e){e=1;for(var n=this.rj_1.length,i=0,r=0;i<n;){for(var a=this.sj_1[n+i|0],s=this.sj_1[i],o=this.rj_1[i],l=a,u=a+(s-r|0)|0;l<u;)e=p(31,e)+o[l]|0,l=l+1|0;r=s,i=i+1|0}this.uj(e),t=e}else t=e;return t},S($t).toString=function(){return Ct(this).toString()},S(Rt).mi=function(){return this},S(Rt).mk=function(){return this.oi_1.equals(new m(0,0))},S(Rt).xi=function(t){return this.oi_1.t8(t)>=0},S(Rt).nk=function(){return nt(new it(this))},S(Rt).yi=function(t,e,n){var i,r=e,a=n;if(gt(this.oi_1,r,a),a.equals(new m(0,0)))i=this;else{t.oi_1=t.oi_1.ba(a);for(var s=this.ni_1;r.t8(b(w(s).ri_1-s.qi_1|0))>=0;)r=r.ca(b(s.ri_1-s.qi_1|0)),s=s.ui_1;for(;a.t8(new m(0,0))>0;){var o=w(s).bj();o.qi_1=o.qi_1+r.y8()|0;var l=o,u=o.qi_1+a.y8()|0,c=o.ri_1;l.ri_1=Math.min(u,c),null==t.ni_1?(o.vi_1=o,o.ui_1=o.vi_1,t.ni_1=o.ui_1):w(w(t.ni_1).vi_1).dj(o),a=a.ca(b(o.ri_1-o.qi_1|0)),r=new m(0,0),s=s.ui_1}i=this}return i},S(Rt).ok=function(){if(this.oi_1.equals(new m(0,0)))throw new It;var t=w(this.ni_1),e=t.qi_1,n=t.ri_1,i=e;e=i+1|0;var r=t.pi_1[i];return this.oi_1=this.oi_1.ca(new m(1,0)),e===n?(this.ni_1=t.cj(),d.kj(t)):t.qi_1=e,r},S(Rt).pk=function(){var t;if(this.oi_1.t8(new m(2,0))<0)throw new It;var e=w(this.ni_1),n=e.qi_1,i=e.ri_1;if((i-n|0)<2){var r=(255&this.ok())<<8|255&this.ok();t=V(r)}else{var a=e.pi_1,s=n,o=n=s+1|0;n=o+1|0;var l=(255&a[s])<<8|255&a[o];this.oi_1=this.oi_1.ca(new m(2,0)),n===i?(this.ni_1=e.cj(),d.kj(e)):e.qi_1=n,t=V(l)}return t},S(Rt).qk=function(){var t;if(this.oi_1.t8(new m(4,0))<0)throw new It;var e=w(this.ni_1),n=e.qi_1,i=e.ri_1;if(b(i-n|0).t8(new m(4,0))<0)t=(255&this.ok())<<24|(255&this.ok())<<16|(255&this.ok())<<8|255&this.ok();else{var r=e.pi_1,a=n,s=n=a+1|0,o=n=s+1|0,l=n=o+1|0;n=l+1|0;var u=(255&r[a])<<24|(255&r[s])<<16|(255&r[o])<<8|255&r[l];this.oi_1=this.oi_1.ca(new m(4,0)),n===i?(this.ni_1=e.cj(),d.kj(e)):e.qi_1=n,t=u}return t},S(Rt).rk=function(){var t;if(this.oi_1.t8(new m(8,0))<0)throw new It;var e=w(this.ni_1),n=e.qi_1,i=e.ri_1;if(b(i-n|0).t8(new m(8,0))<0){var r=this.qk(),a=new m(-1,0),s=b(r).oa(a).la(32),o=this.qk(),l=new m(-1,0),u=b(o).oa(l);t=s.pa(u)}else{var c=e.pi_1,h=n;n=h+1|0;var f=c[h],_=new m(255,0),p=b(f).oa(_).la(56),g=n;n=g+1|0;var v=c[g],y=new m(255,0),x=b(v).oa(y),S=p.pa(x.la(48)),E=n;n=E+1|0;var M=c[E],T=new m(255,0),C=b(M).oa(T),$=S.pa(C.la(40)),A=n;n=A+1|0;var R=c[A],O=new m(255,0),I=b(R).oa(O),k=$.pa(I.la(32)),U=n;n=U+1|0;var P=c[U],D=new m(255,0),N=b(P).oa(D),L=k.pa(N.la(24)),z=n;n=z+1|0;var F=c[z],B=new m(255,0),H=b(F).oa(B),V=L.pa(H.la(16)),q=n;n=q+1|0;var j=c[q],G=new m(255,0),W=b(j).oa(G),X=V.pa(W.la(8)),Y=n;n=Y+1|0;var K=c[Y],J=new m(255,0),Z=b(K).oa(J),Q=X.pa(Z);this.oi_1=this.oi_1.ca(new m(8,0)),n===i?(this.ni_1=e.cj(),d.kj(e)):e.qi_1=n,t=Q}return t},S(Rt).sk=function(t){var e;if(!(t.t8(new m(0,0))>=0&&t.t8(b(q.MAX_VALUE))<=0)){var n="byteCount: "+t.toString();throw v(g(n))}if(this.oi_1.t8(t)<0)throw new It;if(t.equals(new m(0,0)))e="";else{var i=w(this.ni_1);if(j(i.qi_1).ba(t).t8(b(i.ri_1))>0)e=yt(this.tk(t));else{var r=yt(i.pi_1,i.qi_1,i.qi_1+t.y8()|0);i.qi_1=i.qi_1+t.y8()|0,this.oi_1=this.oi_1.ca(t),i.qi_1===i.ri_1&&(this.ni_1=i.cj(),d.kj(i)),e=r}}return e},S(Rt).uk=function(){return this.tk(this.oi_1)},S(Rt).tk=function(t){if(!(t.t8(new m(0,0))>=0&&t.t8(b(q.MAX_VALUE))<=0)){var e="byteCount: "+t.toString();throw v(g(e))}if(this.oi_1.t8(t)<0)throw new It;var n=new Int8Array(t.y8());return this.vk(n),n},S(Rt).vk=function(t){for(var e=0;e<t.length;){var n=this.wk(t,e,t.length-e|0);if(-1===n)throw new It;e=e+n|0}return x},S(Rt).wk=function(t,e,n){var i;gt(b(t.length),b(e),b(n));var r=this.ni_1;if(null!=r){var a=r,s=a.ri_1-a.qi_1|0,o=Math.min(n,s),l=a.pi_1,u=a.qi_1,c=a.qi_1+o|0;$(l,t,e,u,c),a.qi_1=a.qi_1+o|0,this.oi_1=this.oi_1.ca(b(o)),a.qi_1===a.ri_1&&(this.ni_1=a.cj(),d.kj(a)),i=o}else i=-1;return i},S(Rt).xk=function(t){var e;if(!(t>=1&&t<=8192))throw v(g("unexpected capacity"));if(null!=this.ni_1){var n=w(this.ni_1).vi_1;((w(n).ri_1+t|0)>8192||!n.ti_1)&&(n=n.dj(d.hj())),e=n}else{var i=d.hj();this.ni_1=i,i.vi_1=i,i.ui_1=i,e=i}return e},S(Rt).yk=function(t){return this.zk(t,0,t.length)},S(Rt).zk=function(t,e,n){var i=e;gt(b(t.length),b(i),b(n));for(var r=i+n|0;i<r;){var a=this.xk(1),s=r-i|0,o=8192-a.ri_1|0,l=Math.min(s,o),u=a.pi_1,c=a.ri_1;$(t,u,c,i,i+l|0),i=i+l|0,a.ri_1=a.ri_1+l|0}return this.oi_1=this.oi_1.ba(b(n)),this},S(Rt).al=function(t){var e=new m(0,0);t:for(;;){var n=t.wi(this,b(8192));if(n.equals(new m(-1,-1)))break t;e=e.ba(n)}return e},S(Rt).bl=function(t){var e=this.xk(1),n=e.ri_1;return e.ri_1=n+1|0,e.pi_1[n]=G(t),this.oi_1=this.oi_1.ba(new m(1,0)),this},S(Rt).cl=function(t,e){var n;t:{var i=e;if(t===this)throw v(g("source == this"));for(gt(t.oi_1,new m(0,0),i);i.t8(new m(0,0))>0;){if(i.t8(b(w(t.ni_1).ri_1-w(t.ni_1).qi_1|0))<0){var r,a=null!=this.ni_1?w(this.ni_1).vi_1:null;if(null!=a&&a.ti_1){var s=i,o=a.ri_1,l=s.ba(b(o)),u=a.si_1?0:a.qi_1;r=l.ca(b(u)).t8(b(8192))<=0}else r=!1;if(r){w(t.ni_1).jj(a,i.y8()),t.oi_1=t.oi_1.ca(i),this.oi_1=this.oi_1.ba(i),n=x;break t}t.ni_1=w(t.ni_1).ej(i.y8())}var c=t.ni_1,h=b(w(c).ri_1-c.qi_1|0);if(t.ni_1=c.cj(),null==this.ni_1)this.ni_1=c,c.vi_1=c,c.ui_1=c.vi_1;else{var f=w(this.ni_1).vi_1;(f=w(f).dj(c)).ij()}t.oi_1=t.oi_1.ca(h),this.oi_1=this.oi_1.ba(h),i=i.ca(h)}}return n},S(Rt).wi=function(t,e){var n,i=e;if(!(i.t8(new m(0,0))>=0)){var r="byteCount < 0: "+i.toString();throw v(g(r))}return this.oi_1.equals(new m(0,0))?n=new m(-1,-1):(i.t8(this.oi_1)>0&&(i=this.oi_1),t.cl(this,i),n=i),n},S(Rt).equals=function(t){var e;t:if(this!==t)if(t instanceof Rt)if(this.oi_1.equals(t.oi_1))if(this.oi_1.equals(new m(0,0)))e=!0;else{for(var n,i=w(this.ni_1),r=w(t.ni_1),a=i.qi_1,s=r.qi_1,o=new m(0,0);o.t8(this.oi_1)<0;){var l=i.ri_1-a|0,u=r.ri_1-s|0,c=Math.min(l,u);n=b(c);var h=new m(0,0);if(h.t8(n)<0)do{h=h.ba(new m(1,0));var f=a;a=f+1|0;var _=s;if(s=_+1|0,i.pi_1[f]!==r.pi_1[_]){e=!1;break t}}while(h.t8(n)<0);a===i.ri_1&&(a=(i=w(i.ui_1)).qi_1),s===r.ri_1&&(s=(r=w(r.ui_1)).qi_1),o=o.ba(n)}e=!0}else e=!1;else e=!1;else e=!0;return e},S(Rt).hashCode=function(){var t,e=this.ni_1;if(null!=e){var n=e,i=1;do{for(var r=n.qi_1,a=n.ri_1;r<a;)i=p(31,i)+n.pi_1[r]|0,r=r+1|0;n=w(n.ui_1)}while(n!==this.ni_1);t=i}else t=0;return t},S(Rt).toString=function(){return this.dl().toString()},S(Rt).dl=function(){if(!(this.oi_1.t8(b(q.MAX_VALUE))<=0)){var t="size > Int.MAX_VALUE: "+this.oi_1.toString();throw y(g(t))}return this.el(this.oi_1.y8())},S(Rt).el=function(t){var e;if(0!==t){gt(this.oi_1,new m(0,0),b(t));for(var n=0,i=0,r=this.ni_1;n<t;){if(w(r).ri_1===r.qi_1)throw W("s.limit == s.pos");n=n+(r.ri_1-r.qi_1|0)|0,i=i+1|0,r=r.ui_1}var a=X(Array(i),null),s=new Int32Array(p(i,2));for(n=0,i=0,r=this.ni_1;n<t;){a[i]=w(r).pi_1;var o=n=n+(r.ri_1-r.qi_1|0)|0;s[i]=Math.min(o,t),s[i+a.length|0]=r.qi_1,r.si_1=!0,i=i+1|0,r=r.ui_1}e=new $t(Y(a)?a:z(),s)}else e=Mt().tj_1;return e},S(Pt).mi=function(){return this.hl_1},S(Pt).wi=function(t,e){var n;if(!(e.t8(new m(0,0))>=0)){var i="byteCount < 0: "+e.toString();throw v(g(i))}if(this.gl_1)throw y(g("closed"));if(this.hl_1.oi_1.equals(new m(0,0))&&this.fl_1.wi(this.hl_1,b(8192)).equals(new m(-1,-1)))n=new m(-1,-1);else{var r=this.hl_1.oi_1,a=e.t8(r)<=0?e:r;n=this.hl_1.wi(t,a)}return n},S(Pt).mk=function(){if(this.gl_1)throw y(g("closed"));return!!this.hl_1.mk()&&this.fl_1.wi(this.hl_1,b(8192)).equals(new m(-1,-1))},S(Pt).il=function(t){if(!this.xi(t))throw new It},S(Pt).xi=function(t){var e;t:{if(!(t.t8(new m(0,0))>=0)){var n="byteCount < 0: "+t.toString();throw v(g(n))}if(this.gl_1)throw y(g("closed"));for(;this.hl_1.oi_1.t8(t)<0;)if(this.fl_1.wi(this.hl_1,b(8192)).equals(new m(-1,-1))){e=!1;break t}e=!0}return e},S(Pt).ok=function(){return this.il(new m(1,0)),this.hl_1.ok()},S(Pt).uk=function(){return this.hl_1.al(this.fl_1),this.hl_1.uk()},S(Pt).tk=function(t){return this.il(t),this.hl_1.tk(t)},S(Pt).vk=function(t){try{this.il(b(t.length))}catch(r){if(r instanceof It){for(var e=r,n=0;this.hl_1.oi_1.t8(new m(0,0))>0;){var i=this.hl_1.wk(t,n,this.hl_1.oi_1.y8());if(-1===i)throw et();n=n+i|0}throw e}throw r}return this.hl_1.vk(t)},S(Pt).sk=function(t){return this.il(t),this.hl_1.sk(t)},S(Pt).pk=function(){return this.il(new m(2,0)),this.hl_1.pk()},S(Pt).qk=function(){return this.il(new m(4,0)),this.hl_1.qk()},S(Pt).rk=function(){return this.il(new m(8,0)),this.hl_1.rk()},S(Pt).toString=function(){return"buffer("+this.fl_1+")"},S(Dt).hj=function(){return rt()},S(Dt).kj=function(t){},new st,n=65533,i=55232,r=56320,a=O(65533),s=3968,o=-123008,l=3678080,d=new Dt,t.$_$=t.$_$||{},t.$_$.a=yt,t.$_$.b=Rt,t.$_$.c=It,t.$_$.d=nt,t})?i.apply(e,r):i)||(t.exports=a)},585:(t,e)=>{"use strict";const n="154",i=1,r=2,a=3,s=100,o=0,l=1,u=2,c=0,h=1,f=2,_=3,d=4,p=5,m=300,g=301,v=302,y=303,w=304,b=306,x=1e3,S=1001,E=1002,M=1003,T=1004,C=1005,$=1006,A=1007,R=1008,O=1009,I=1012,k=1013,U=1014,P=1015,D=1016,N=1017,L=1018,z=1020,F=1023,B=1026,H=1027,V=1029,q=1031,j=1033,G=33776,W=33777,X=33778,Y=33779,K=35840,J=35841,Z=35842,Q=35843,tt=37492,et=37496,nt=37808,it=37809,rt=37810,at=37811,st=37812,ot=37813,lt=37814,ut=37815,ct=37816,ht=37817,ft=37818,_t=37819,dt=37820,pt=37821,mt=36492,gt=36284,vt=36285,yt=36286,wt=2300,bt=2301,xt=2302,St=2400,Et=2401,Mt=2402,Tt=2501,Ct=3e3,$t=3001,At="",Rt="srgb",Ot="srgb-linear",It="display-p3",kt=7680,Ut=35044,Pt="300 es",Dt=1035,Nt=2e3,Lt=2001;class zt{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const Ft=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Bt=1234567;const Ht=Math.PI/180,Vt=180/Math.PI;function qt(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ft[255&t]+Ft[t>>8&255]+Ft[t>>16&255]+Ft[t>>24&255]+"-"+Ft[255&e]+Ft[e>>8&255]+"-"+Ft[e>>16&15|64]+Ft[e>>24&255]+"-"+Ft[63&n|128]+Ft[n>>8&255]+"-"+Ft[n>>16&255]+Ft[n>>24&255]+Ft[255&i]+Ft[i>>8&255]+Ft[i>>16&255]+Ft[i>>24&255]).toLowerCase()}function jt(t,e,n){return Math.max(e,Math.min(n,t))}function Gt(t,e){return(t%e+e)%e}function Wt(t,e,n){return(1-n)*t+n*e}function Xt(t){return 0==(t&t-1)&&0!==t}function Yt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Kt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Jt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Zt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Qt={DEG2RAD:Ht,RAD2DEG:Vt,generateUUID:qt,clamp:jt,euclideanModulo:Gt,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Wt,damp:function(t,e,n,i){return Wt(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(Gt(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Bt=t);let e=Bt+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*Ht},radToDeg:function(t){return t*Vt},isPowerOfTwo:Xt,ceilPowerOfTwo:Yt,floorPowerOfTwo:Kt,setQuaternionFromProperEuler:function(t,e,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),u=a((e+i)/2),c=s((e+i)/2),h=a((e-i)/2),f=s((e-i)/2),_=a((i-e)/2),d=s((i-e)/2);switch(r){case"XYX":t.set(o*c,l*h,l*f,o*u);break;case"YZY":t.set(l*f,o*c,l*h,o*u);break;case"ZXZ":t.set(l*h,l*f,o*c,o*u);break;case"XZX":t.set(o*c,l*d,l*_,o*u);break;case"YXY":t.set(l*_,o*c,l*d,o*u);break;case"ZYZ":t.set(l*d,l*_,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Zt,denormalize:Jt};class te{constructor(t=0,e=0){te.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(jt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ee{constructor(t,e,n,i,r,a,s,o,l){ee.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,a,s,o,l)}set(t,e,n,i,r,a,s,o,l){const u=this.elements;return u[0]=t,u[1]=i,u[2]=s,u[3]=e,u[4]=r,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],_=n[8],d=i[0],p=i[3],m=i[6],g=i[1],v=i[4],y=i[7],w=i[2],b=i[5],x=i[8];return r[0]=a*d+s*g+o*w,r[3]=a*p+s*v+o*b,r[6]=a*m+s*y+o*x,r[1]=l*d+u*g+c*w,r[4]=l*p+u*v+c*b,r[7]=l*m+u*y+c*x,r[2]=h*d+f*g+_*w,r[5]=h*p+f*v+_*b,r[8]=h*m+f*y+_*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8];return e*a*u-e*s*l-n*r*u+n*s*o+i*r*l-i*a*o}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=u*a-s*l,h=s*o-u*r,f=l*r-a*o,_=e*c+n*h+i*f;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const d=1/_;return t[0]=c*d,t[1]=(i*l-u*n)*d,t[2]=(s*n-i*a)*d,t[3]=h*d,t[4]=(u*e-i*o)*d,t[5]=(i*r-s*e)*d,t[6]=f*d,t[7]=(n*o-l*e)*d,t[8]=(a*e-n*r)*d,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+t,-i*l,i*o,-i*(-l*a+o*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(ne.makeScale(t,e)),this}rotate(t){return this.premultiply(ne.makeRotation(-t)),this}translate(t,e){return this.premultiply(ne.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ne=new ee;function ie(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const re={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ae(t,e){return new re[t](e)}function se(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const oe={};function le(t){t in oe||(oe[t]=!0,console.warn(t))}function ue(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ce(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const he=(new ee).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),fe=(new ee).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_e={[Ot]:t=>t,[Rt]:t=>t.convertSRGBToLinear(),[It]:function(t){return t.convertSRGBToLinear().applyMatrix3(fe)}},de={[Ot]:t=>t,[Rt]:t=>t.convertLinearToSRGB(),[It]:function(t){return t.applyMatrix3(he).convertLinearToSRGB()}},pe={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Ot},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const i=_e[e],r=de[n];if(void 0===i||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let me;class ge{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===me&&(me=se("canvas")),me.width=t.width,me.height=t.height;const n=me.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=me}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=se("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*ue(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ue(e[t]/255)):e[t]=ue(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let ve=0;class ye{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ve++}),this.uuid=qt(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(we(i[e].image)):t.push(we(i[e]))}else t=we(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function we(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?ge.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let be=0;class xe extends zt{constructor(t=xe.DEFAULT_IMAGE,e=xe.DEFAULT_MAPPING,n=1001,i=1001,r=1006,a=1008,s=1023,o=1009,l=xe.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:be++}),this.uuid=qt(),this.name="",this.source=new ye(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new te(0,0),this.repeat=new te(1,1),this.center=new te(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ee,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(le("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===$t?Rt:At),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==m)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case x:t.x=t.x-Math.floor(t.x);break;case S:t.x=t.x<0?0:1;break;case E:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case x:t.y=t.y-Math.floor(t.y);break;case S:t.y=t.y<0?0:1;break;case E:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return le("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Rt?$t:Ct}set encoding(t){le("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===$t?Rt:At}}xe.DEFAULT_IMAGE=null,xe.DEFAULT_MAPPING=m,xe.DEFAULT_ANISOTROPY=1;class Se{constructor(t=0,e=0,n=0,i=1){Se.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const a=.01,s=.1,o=t.elements,l=o[0],u=o[4],c=o[8],h=o[1],f=o[5],_=o[9],d=o[2],p=o[6],m=o[10];if(Math.abs(u-h)<a&&Math.abs(c-d)<a&&Math.abs(_-p)<a){if(Math.abs(u+h)<s&&Math.abs(c+d)<s&&Math.abs(_+p)<s&&Math.abs(l+f+m-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(f+1)/2,g=(m+1)/2,v=(u+h)/4,y=(c+d)/4,w=(_+p)/4;return t>o&&t>g?t<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=y/n):o>g?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=v/i,r=w/i):g<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=y/r,i=w/r),this.set(n,i,r,e),this}let g=Math.sqrt((p-_)*(p-_)+(c-d)*(c-d)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(p-_)/g,this.y=(c-d)/g,this.z=(h-u)/g,this.w=Math.acos((l+f+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ee extends zt{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Se(0,0,t,e),this.scissorTest=!1,this.viewport=new Se(0,0,t,e);const i={width:t,height:e,depth:1};void 0!==n.encoding&&(le("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===$t?Rt:At),this.texture=new xe(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:$,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new ye(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Me extends xe{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=M,this.minFilter=M,this.wrapR=S,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Te extends xe{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=M,this.minFilter=M,this.wrapR=S,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ce{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,a,s){let o=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3];const h=r[a+0],f=r[a+1],_=r[a+2],d=r[a+3];if(0===s)return t[e+0]=o,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===s)return t[e+0]=h,t[e+1]=f,t[e+2]=_,void(t[e+3]=d);if(c!==d||o!==h||l!==f||u!==_){let t=1-s;const e=o*h+l*f+u*_+c*d,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,e*n);t=Math.sin(t*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*t+h*r,l=l*t+f*r,u=u*t+_*r,c=c*t+d*r,t===1-s){const t=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=t,l*=t,u*=t,c*=t}}t[e]=o,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],u=n[i+3],c=r[a],h=r[a+1],f=r[a+2],_=r[a+3];return t[e]=s*_+u*c+o*f-l*h,t[e+1]=o*_+u*h+l*c-s*f,t[e+2]=l*_+u*f+s*h-o*c,t[e+3]=u*_-s*c-o*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,i=t._y,r=t._z,a=t._order,s=Math.cos,o=Math.sin,l=s(n/2),u=s(i/2),c=s(r/2),h=o(n/2),f=o(i/2),_=o(r/2);switch(a){case"XYZ":this._x=h*u*c+l*f*_,this._y=l*f*c-h*u*_,this._z=l*u*_+h*f*c,this._w=l*u*c-h*f*_;break;case"YXZ":this._x=h*u*c+l*f*_,this._y=l*f*c-h*u*_,this._z=l*u*_-h*f*c,this._w=l*u*c+h*f*_;break;case"ZXY":this._x=h*u*c-l*f*_,this._y=l*f*c+h*u*_,this._z=l*u*_+h*f*c,this._w=l*u*c-h*f*_;break;case"ZYX":this._x=h*u*c-l*f*_,this._y=l*f*c+h*u*_,this._z=l*u*_-h*f*c,this._w=l*u*c+h*f*_;break;case"YZX":this._x=h*u*c+l*f*_,this._y=l*f*c+h*u*_,this._z=l*u*_-h*f*c,this._w=l*u*c-h*f*_;break;case"XZY":this._x=h*u*c-l*f*_,this._y=l*f*c-h*u*_,this._z=l*u*_+h*f*c,this._w=l*u*c+h*f*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],s=e[5],o=e[9],l=e[2],u=e[6],c=e[10],h=n+s+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-o)*t,this._y=(r-l)*t,this._z=(a-i)*t}else if(n>s&&n>c){const t=2*Math.sqrt(1+n-s-c);this._w=(u-o)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(r+l)/t}else if(s>c){const t=2*Math.sqrt(1+s-n-c);this._w=(r-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(o+u)/t}else{const t=2*Math.sqrt(1+c-n-s);this._w=(a-i)/t,this._x=(r+l)/t,this._y=(o+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(jt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,a=t._w,s=e._x,o=e._y,l=e._z,u=e._w;return this._x=n*u+a*s+i*l-r*o,this._y=i*u+a*o+r*s-n*l,this._z=r*u+a*l+n*o-i*s,this._w=a*u-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),u=Math.atan2(l,s),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=a*c+this._w*h,this._x=n*c+this._x*h,this._y=i*c+this._y*h,this._z=r*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class $e{constructor(t=0,e=0,n=0){$e.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Re.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Re.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z,o=t.w,l=o*e+a*i-s*n,u=o*n+s*e-r*i,c=o*i+r*n-a*e,h=-r*e-a*n-s*i;return this.x=l*o+h*-r+u*-s-c*-a,this.y=u*o+h*-a+c*-r-l*-s,this.z=c*o+h*-s+l*-a-u*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,a=e.x,s=e.y,o=e.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Ae.copy(this).projectOnVector(t),this.sub(Ae)}reflect(t){return this.sub(Ae.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(jt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ae=new $e,Re=new Ce;class Oe{constructor(t=new $e(1/0,1/0,1/0),e=new $e(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(ke.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(ke.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ke.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Ue.copy(t.boundingBox),Ue.applyMatrix4(t.matrixWorld),this.union(Ue);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,i=e.count;n<i;n++)ke.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(ke)}else null===n.boundingBox&&n.computeBoundingBox(),Ue.copy(n.boundingBox),Ue.applyMatrix4(t.matrixWorld),this.union(Ue)}const n=t.children;for(let t=0,i=n.length;t<i;t++)this.expandByObject(n[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ke),ke.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Be),He.subVectors(this.max,Be),Pe.subVectors(t.a,Be),De.subVectors(t.b,Be),Ne.subVectors(t.c,Be),Le.subVectors(De,Pe),ze.subVectors(Ne,De),Fe.subVectors(Pe,Ne);let e=[0,-Le.z,Le.y,0,-ze.z,ze.y,0,-Fe.z,Fe.y,Le.z,0,-Le.x,ze.z,0,-ze.x,Fe.z,0,-Fe.x,-Le.y,Le.x,0,-ze.y,ze.x,0,-Fe.y,Fe.x,0];return!!je(e,Pe,De,Ne,He)&&(e=[1,0,0,0,1,0,0,0,1],!!je(e,Pe,De,Ne,He)&&(Ve.crossVectors(Le,ze),e=[Ve.x,Ve.y,Ve.z],je(e,Pe,De,Ne,He)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ke).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(ke).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ie[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ie[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ie[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ie[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ie[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ie[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ie[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ie[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ie)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ie=[new $e,new $e,new $e,new $e,new $e,new $e,new $e,new $e],ke=new $e,Ue=new Oe,Pe=new $e,De=new $e,Ne=new $e,Le=new $e,ze=new $e,Fe=new $e,Be=new $e,He=new $e,Ve=new $e,qe=new $e;function je(t,e,n,i,r){for(let a=0,s=t.length-3;a<=s;a+=3){qe.fromArray(t,a);const s=r.x*Math.abs(qe.x)+r.y*Math.abs(qe.y)+r.z*Math.abs(qe.z),o=e.dot(qe),l=n.dot(qe),u=i.dot(qe);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>s)return!1}return!0}const Ge=new Oe,We=new $e,Xe=new $e;class Ye{constructor(t=new $e,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Ge.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;We.subVectors(t,this.center);const e=We.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(We,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Xe.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(We.copy(t.center).add(Xe)),this.expandByPoint(We.copy(t.center).sub(Xe))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ke=new $e,Je=new $e,Ze=new $e,Qe=new $e,tn=new $e,en=new $e,nn=new $e;class rn{constructor(t=new $e,e=new $e(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ke)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Ke.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ke.copy(this.origin).addScaledVector(this.direction,e),Ke.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){Je.copy(t).add(e).multiplyScalar(.5),Ze.copy(e).sub(t).normalize(),Qe.copy(this.origin).sub(Je);const r=.5*t.distanceTo(e),a=-this.direction.dot(Ze),s=Qe.dot(this.direction),o=-Qe.dot(Ze),l=Qe.lengthSq(),u=Math.abs(1-a*a);let c,h,f,_;if(u>0)if(c=a*o-s,h=a*s-o,_=r*u,c>=0)if(h>=-_)if(h<=_){const t=1/u;c*=t,h*=t,f=c*(c+a*h+2*s)+h*(a*c+h+2*o)+l}else h=r,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*o)+l;else h=-r,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*o)+l;else h<=-_?(c=Math.max(0,-(-a*r+s)),h=c>0?-r:Math.min(Math.max(-r,-o),r),f=-c*c+h*(h+2*o)+l):h<=_?(c=0,h=Math.min(Math.max(-r,-o),r),f=h*(h+2*o)+l):(c=Math.max(0,-(a*r+s)),h=c>0?r:Math.min(Math.max(-r,-o),r),f=-c*c+h*(h+2*o)+l);else h=a>0?-r:r,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(Je).addScaledVector(Ze,h),f}intersectSphere(t,e){Ke.subVectors(t.center,this.origin);const n=Ke.dot(this.direction),i=Ke.dot(Ke)-n*n,r=t.radius*t.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,a,s,o;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),u>=0?(r=(t.min.y-h.y)*u,a=(t.max.y-h.y)*u):(r=(t.max.y-h.y)*u,a=(t.min.y-h.y)*u),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),c>=0?(s=(t.min.z-h.z)*c,o=(t.max.z-h.z)*c):(s=(t.max.z-h.z)*c,o=(t.min.z-h.z)*c),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,Ke)}intersectTriangle(t,e,n,i,r){tn.subVectors(e,t),en.subVectors(n,t),nn.crossVectors(tn,en);let a,s=this.direction.dot(nn);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Qe.subVectors(this.origin,t);const o=a*this.direction.dot(en.crossVectors(Qe,en));if(o<0)return null;const l=a*this.direction.dot(tn.cross(Qe));if(l<0)return null;if(o+l>s)return null;const u=-a*Qe.dot(nn);return u<0?null:this.at(u/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class an{constructor(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p){an.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p)}set(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p){const m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=s,m[13]=o,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=f,m[7]=_,m[11]=d,m[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new an).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/sn.setFromMatrixColumn(t,0).length(),r=1/sn.setFromMatrixColumn(t,1).length(),a=1/sn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=a*u,n=a*c,i=s*u,r=s*c;e[0]=o*u,e[4]=-o*c,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-s*o,e[2]=r-t*l,e[6]=i+n*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*u,n=o*c,i=l*u,r=l*c;e[0]=t+r*s,e[4]=i*s-n,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-s,e[2]=n*s-i,e[6]=r+t*s,e[10]=a*o}else if("ZXY"===t.order){const t=o*u,n=o*c,i=l*u,r=l*c;e[0]=t-r*s,e[4]=-a*c,e[8]=i+n*s,e[1]=n+i*s,e[5]=a*u,e[9]=r-t*s,e[2]=-a*l,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){const t=a*u,n=a*c,i=s*u,r=s*c;e[0]=o*u,e[4]=i*l-n,e[8]=t*l+r,e[1]=o*c,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,n=a*l,i=s*o,r=s*l;e[0]=o*u,e[4]=r-t*c,e[8]=i*c+n,e[1]=c,e[5]=a*u,e[9]=-s*u,e[2]=-l*u,e[6]=n*c+i,e[10]=t-r*c}else if("XZY"===t.order){const t=a*o,n=a*l,i=s*o,r=s*l;e[0]=o*u,e[4]=-c,e[8]=l*u,e[1]=t*c+r,e[5]=a*u,e[9]=n*c-i,e[2]=i*c-n,e[6]=s*u,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ln,t,un)}lookAt(t,e,n){const i=this.elements;return fn.subVectors(t,e),0===fn.lengthSq()&&(fn.z=1),fn.normalize(),cn.crossVectors(n,fn),0===cn.lengthSq()&&(1===Math.abs(n.z)?fn.x+=1e-4:fn.z+=1e-4,fn.normalize(),cn.crossVectors(n,fn)),cn.normalize(),hn.crossVectors(fn,cn),i[0]=cn.x,i[4]=hn.x,i[8]=fn.x,i[1]=cn.y,i[5]=hn.y,i[9]=fn.y,i[2]=cn.z,i[6]=hn.z,i[10]=fn.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],_=n[2],d=n[6],p=n[10],m=n[14],g=n[3],v=n[7],y=n[11],w=n[15],b=i[0],x=i[4],S=i[8],E=i[12],M=i[1],T=i[5],C=i[9],$=i[13],A=i[2],R=i[6],O=i[10],I=i[14],k=i[3],U=i[7],P=i[11],D=i[15];return r[0]=a*b+s*M+o*A+l*k,r[4]=a*x+s*T+o*R+l*U,r[8]=a*S+s*C+o*O+l*P,r[12]=a*E+s*$+o*I+l*D,r[1]=u*b+c*M+h*A+f*k,r[5]=u*x+c*T+h*R+f*U,r[9]=u*S+c*C+h*O+f*P,r[13]=u*E+c*$+h*I+f*D,r[2]=_*b+d*M+p*A+m*k,r[6]=_*x+d*T+p*R+m*U,r[10]=_*S+d*C+p*O+m*P,r[14]=_*E+d*$+p*I+m*D,r[3]=g*b+v*M+y*A+w*k,r[7]=g*x+v*T+y*R+w*U,r[11]=g*S+v*C+y*O+w*P,r[15]=g*E+v*$+y*I+w*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],s=t[5],o=t[9],l=t[13],u=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+r*o*c-i*l*c-r*s*h+n*l*h+i*s*f-n*o*f)+t[7]*(+e*o*f-e*l*h+r*a*h-i*a*f+i*l*u-r*o*u)+t[11]*(+e*l*c-e*s*f-r*a*c+n*a*f+r*s*u-n*l*u)+t[15]*(-i*s*u-e*o*c+e*s*h+i*a*c-n*a*h+n*o*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11],_=t[12],d=t[13],p=t[14],m=t[15],g=c*p*l-d*h*l+d*o*f-s*p*f-c*o*m+s*h*m,v=_*h*l-u*p*l-_*o*f+a*p*f+u*o*m-a*h*m,y=u*d*l-_*c*l+_*s*f-a*d*f-u*s*m+a*c*m,w=_*c*o-u*d*o-_*s*h+a*d*h+u*s*p-a*c*p,b=e*g+n*v+i*y+r*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return t[0]=g*x,t[1]=(d*h*r-c*p*r-d*i*f+n*p*f+c*i*m-n*h*m)*x,t[2]=(s*p*r-d*o*r+d*i*l-n*p*l-s*i*m+n*o*m)*x,t[3]=(c*o*r-s*h*r-c*i*l+n*h*l+s*i*f-n*o*f)*x,t[4]=v*x,t[5]=(u*p*r-_*h*r+_*i*f-e*p*f-u*i*m+e*h*m)*x,t[6]=(_*o*r-a*p*r-_*i*l+e*p*l+a*i*m-e*o*m)*x,t[7]=(a*h*r-u*o*r+u*i*l-e*h*l-a*i*f+e*o*f)*x,t[8]=y*x,t[9]=(_*c*r-u*d*r-_*n*f+e*d*f+u*n*m-e*c*m)*x,t[10]=(a*d*r-_*s*r+_*n*l-e*d*l-a*n*m+e*s*m)*x,t[11]=(u*s*r-a*c*r-u*n*l+e*c*l+a*n*f-e*s*f)*x,t[12]=w*x,t[13]=(u*d*i-_*c*i+_*n*h-e*d*h-u*n*p+e*c*p)*x,t[14]=(_*s*i-a*d*i-_*n*o+e*d*o+a*n*p-e*s*p)*x,t[15]=(a*c*i-u*s*i+u*n*o-e*c*o-a*n*h+e*s*h)*x,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,s=t.y,o=t.z,l=r*a,u=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+n,u*o-i*a,0,l*o-i*s,u*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,a){return this.set(1,n,r,0,t,1,a,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,a=e._y,s=e._z,o=e._w,l=r+r,u=a+a,c=s+s,h=r*l,f=r*u,_=r*c,d=a*u,p=a*c,m=s*c,g=o*l,v=o*u,y=o*c,w=n.x,b=n.y,x=n.z;return i[0]=(1-(d+m))*w,i[1]=(f+y)*w,i[2]=(_-v)*w,i[3]=0,i[4]=(f-y)*b,i[5]=(1-(h+m))*b,i[6]=(p+g)*b,i[7]=0,i[8]=(_+v)*x,i[9]=(p-g)*x,i[10]=(1-(h+d))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=sn.set(i[0],i[1],i[2]).length();const a=sn.set(i[4],i[5],i[6]).length(),s=sn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],on.copy(this);const o=1/r,l=1/a,u=1/s;return on.elements[0]*=o,on.elements[1]*=o,on.elements[2]*=o,on.elements[4]*=l,on.elements[5]*=l,on.elements[6]*=l,on.elements[8]*=u,on.elements[9]*=u,on.elements[10]*=u,e.setFromRotationMatrix(on),n.x=r,n.y=a,n.z=s,this}makePerspective(t,e,n,i,r,a,s=2e3){const o=this.elements,l=2*r/(e-t),u=2*r/(n-i),c=(e+t)/(e-t),h=(n+i)/(n-i);let f,_;if(s===Nt)f=-(a+r)/(a-r),_=-2*a*r/(a-r);else{if(s!==Lt)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);f=-a/(a-r),_=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=_,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,a,s=2e3){const o=this.elements,l=1/(e-t),u=1/(n-i),c=1/(a-r),h=(e+t)*l,f=(n+i)*u;let _,d;if(s===Nt)_=(a+r)*c,d=-2*c;else{if(s!==Lt)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);_=r*c,d=-1*c}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=d,o[14]=-_,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const sn=new $e,on=new an,ln=new $e(0,0,0),un=new $e(1,1,1),cn=new $e,hn=new $e,fn=new $e,_n=new an,dn=new Ce;class pn{constructor(t=0,e=0,n=0,i=pn.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],u=i[9],c=i[2],h=i[6],f=i[10];switch(e){case"XYZ":this._y=Math.asin(jt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-jt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(jt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(jt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return _n.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_n,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return dn.setFromEuler(this),this.setFromQuaternion(dn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}pn.DEFAULT_ORDER="XYZ";class mn{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let gn=0;const vn=new $e,yn=new Ce,wn=new an,bn=new $e,xn=new $e,Sn=new $e,En=new Ce,Mn=new $e(1,0,0),Tn=new $e(0,1,0),Cn=new $e(0,0,1),$n={type:"added"},An={type:"removed"};class Rn extends zt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gn++}),this.uuid=qt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rn.DEFAULT_UP.clone();const t=new $e,e=new pn,n=new Ce,i=new $e(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new an},normalMatrix:{value:new ee}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=Rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new mn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return yn.setFromAxisAngle(t,e),this.quaternion.multiply(yn),this}rotateOnWorldAxis(t,e){return yn.setFromAxisAngle(t,e),this.quaternion.premultiply(yn),this}rotateX(t){return this.rotateOnAxis(Mn,t)}rotateY(t){return this.rotateOnAxis(Tn,t)}rotateZ(t){return this.rotateOnAxis(Cn,t)}translateOnAxis(t,e){return vn.copy(t).applyQuaternion(this.quaternion),this.position.add(vn.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Mn,t)}translateY(t){return this.translateOnAxis(Tn,t)}translateZ(t){return this.translateOnAxis(Cn,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(wn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?bn.copy(t):bn.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),xn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wn.lookAt(xn,bn,this.up):wn.lookAt(bn,xn,this.up),this.quaternion.setFromRotationMatrix(wn),i&&(wn.extractRotation(i.matrixWorld),yn.setFromRotationMatrix(wn),this.quaternion.premultiply(yn.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent($n)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(An)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(An)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),wn.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),wn.multiply(t.parent.matrixWorld)),t.applyMatrix4(wn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(t,e);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xn,t,Sn),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xn,En,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){const i=e[n];!0!==i.matrixWorldAutoUpdate&&!0!==t||i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=a(t.geometries),i=a(t.materials),r=a(t.textures),s=a(t.images),o=a(t.shapes),l=a(t.skeletons),u=a(t.animations),c=a(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=i,n;function a(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Rn.DEFAULT_UP=new $e(0,1,0),Rn.DEFAULT_MATRIX_AUTO_UPDATE=!0,Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const On=new $e,In=new $e,kn=new $e,Un=new $e,Pn=new $e,Dn=new $e,Nn=new $e,Ln=new $e,zn=new $e,Fn=new $e;let Bn=!1;class Hn{constructor(t=new $e,e=new $e,n=new $e){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),On.subVectors(t,e),i.cross(On);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){On.subVectors(i,e),In.subVectors(n,e),kn.subVectors(t,e);const a=On.dot(On),s=On.dot(In),o=On.dot(kn),l=In.dot(In),u=In.dot(kn),c=a*l-s*s;if(0===c)return r.set(-2,-1,-1);const h=1/c,f=(l*o-s*u)*h,_=(a*u-s*o)*h;return r.set(1-f-_,_,f)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Un),Un.x>=0&&Un.y>=0&&Un.x+Un.y<=1}static getUV(t,e,n,i,r,a,s,o){return!1===Bn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Bn=!0),this.getInterpolation(t,e,n,i,r,a,s,o)}static getInterpolation(t,e,n,i,r,a,s,o){return this.getBarycoord(t,e,n,i,Un),o.setScalar(0),o.addScaledVector(r,Un.x),o.addScaledVector(a,Un.y),o.addScaledVector(s,Un.z),o}static isFrontFacing(t,e,n,i){return On.subVectors(n,e),In.subVectors(t,e),On.cross(In).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return On.subVectors(this.c,this.b),In.subVectors(this.a,this.b),.5*On.cross(In).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Hn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Hn.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return!1===Bn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Bn=!0),Hn.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}getInterpolation(t,e,n,i,r){return Hn.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Hn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Hn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let a,s;Pn.subVectors(i,n),Dn.subVectors(r,n),Ln.subVectors(t,n);const o=Pn.dot(Ln),l=Dn.dot(Ln);if(o<=0&&l<=0)return e.copy(n);zn.subVectors(t,i);const u=Pn.dot(zn),c=Dn.dot(zn);if(u>=0&&c<=u)return e.copy(i);const h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return a=o/(o-u),e.copy(n).addScaledVector(Pn,a);Fn.subVectors(t,r);const f=Pn.dot(Fn),_=Dn.dot(Fn);if(_>=0&&f<=_)return e.copy(r);const d=f*l-o*_;if(d<=0&&l>=0&&_<=0)return s=l/(l-_),e.copy(n).addScaledVector(Dn,s);const p=u*_-f*c;if(p<=0&&c-u>=0&&f-_>=0)return Nn.subVectors(r,i),s=(c-u)/(c-u+(f-_)),e.copy(i).addScaledVector(Nn,s);const m=1/(p+d+h);return a=d*m,s=h*m,e.copy(n).addScaledVector(Pn,a).addScaledVector(Dn,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Vn=0;class qn extends zt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Vn++}),this.uuid=qt(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=s,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=kt,this.stencilZFail=kt,this.stencilZPass=kt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gn={h:0,s:0,l:0},Wn={h:0,s:0,l:0};function Xn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Yn{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Rt){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,pe.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=pe.workingColorSpace){return this.r=t,this.g=e,this.b=n,pe.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=pe.workingColorSpace){if(t=Gt(t,1),e=jt(e,0,1),n=jt(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Xn(r,i,t+1/3),this.g=Xn(r,i,t),this.b=Xn(r,i,t-1/3)}return pe.toWorkingColorSpace(this,i),this}setStyle(t,e=Rt){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Rt){const n=jn[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ue(t.r),this.g=ue(t.g),this.b=ue(t.b),this}copyLinearToSRGB(t){return this.r=ce(t.r),this.g=ce(t.g),this.b=ce(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Rt){return pe.fromWorkingColorSpace(Kn.copy(this),t),65536*Math.round(jt(255*Kn.r,0,255))+256*Math.round(jt(255*Kn.g,0,255))+Math.round(jt(255*Kn.b,0,255))}getHexString(t=Rt){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=pe.workingColorSpace){pe.fromWorkingColorSpace(Kn.copy(this),e);const n=Kn.r,i=Kn.g,r=Kn.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const u=(s+a)/2;if(s===a)o=0,l=0;else{const t=a-s;switch(l=u<=.5?t/(a+s):t/(2-a-s),a){case n:o=(i-r)/t+(i<r?6:0);break;case i:o=(r-n)/t+2;break;case r:o=(n-i)/t+4}o/=6}return t.h=o,t.s=l,t.l=u,t}getRGB(t,e=pe.workingColorSpace){return pe.fromWorkingColorSpace(Kn.copy(this),e),t.r=Kn.r,t.g=Kn.g,t.b=Kn.b,t}getStyle(t=Rt){pe.fromWorkingColorSpace(Kn.copy(this),t);const e=Kn.r,n=Kn.g,i=Kn.b;return t!==Rt?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(t,e,n){return this.getHSL(Gn),Gn.h+=t,Gn.s+=e,Gn.l+=n,this.setHSL(Gn.h,Gn.s,Gn.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Gn),t.getHSL(Wn);const n=Wt(Gn.h,Wn.h,e),i=Wt(Gn.s,Wn.s,e),r=Wt(Gn.l,Wn.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Kn=new Yn;Yn.NAMES=jn;class Jn extends qn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Zn=Qn();function Qn(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(i[t]=0,i[256|t]=32768,r[t]=24,r[256|t]=24):e<-14?(i[t]=1024>>-e-14,i[256|t]=1024>>-e-14|32768,r[t]=-e-1,r[256|t]=-e-1):e<=15?(i[t]=e+15<<10,i[256|t]=e+15<<10|32768,r[t]=13,r[256|t]=13):e<128?(i[t]=31744,i[256|t]=64512,r[t]=24,r[256|t]=24):(i[t]=31744,i[256|t]=64512,r[t]=13,r[256|t]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;0==(8388608&e);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,a[t]=e|n}for(let t=1024;t<2048;++t)a[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)s[t]=t<<23;s[31]=1199570944,s[32]=2147483648;for(let t=33;t<63;++t)s[t]=2147483648+(t-32<<23);s[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(o[t]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function ti(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=jt(t,-65504,65504),Zn.floatView[0]=t;const e=Zn.uint32View[0],n=e>>23&511;return Zn.baseTable[n]+((8388607&e)>>Zn.shiftTable[n])}function ei(t){const e=t>>10;return Zn.uint32View[0]=Zn.mantissaTable[Zn.offsetTable[e]+(1023&t)]+Zn.exponentTable[e],Zn.floatView[0]}const ni={toHalfFloat:ti,fromHalfFloat:ei},ii=new $e,ri=new te;class ai{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Ut,this.updateRange={offset:0,count:-1},this.gpuType=P,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)ri.fromBufferAttribute(this,e),ri.applyMatrix3(t),this.setXY(e,ri.x,ri.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)ii.fromBufferAttribute(this,e),ii.applyMatrix3(t),this.setXYZ(e,ii.x,ii.y,ii.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ii.fromBufferAttribute(this,e),ii.applyMatrix4(t),this.setXYZ(e,ii.x,ii.y,ii.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ii.fromBufferAttribute(this,e),ii.applyNormalMatrix(t),this.setXYZ(e,ii.x,ii.y,ii.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ii.fromBufferAttribute(this,e),ii.transformDirection(t),this.setXYZ(e,ii.x,ii.y,ii.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Jt(e,this.array)),e}setX(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Jt(e,this.array)),e}setY(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Jt(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Jt(e,this.array)),e}setW(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array),i=Zt(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Ut&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class si extends ai{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class oi extends ai{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class li extends ai{constructor(t,e,n){super(new Float32Array(t),e,n)}}let ui=0;const ci=new an,hi=new Rn,fi=new $e,_i=new Oe,di=new Oe,pi=new $e;class mi extends zt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ui++}),this.uuid=qt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ie(t)?oi:si)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new ee).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ci.makeRotationFromQuaternion(t),this.applyMatrix4(ci),this}rotateX(t){return ci.makeRotationX(t),this.applyMatrix4(ci),this}rotateY(t){return ci.makeRotationY(t),this.applyMatrix4(ci),this}rotateZ(t){return ci.makeRotationZ(t),this.applyMatrix4(ci),this}translate(t,e,n){return ci.makeTranslation(t,e,n),this.applyMatrix4(ci),this}scale(t,e,n){return ci.makeScale(t,e,n),this.applyMatrix4(ci),this}lookAt(t){return hi.lookAt(t),hi.updateMatrix(),this.applyMatrix4(hi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fi).negate(),this.translate(fi.x,fi.y,fi.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new li(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Oe);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new $e(-1/0,-1/0,-1/0),new $e(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];_i.setFromBufferAttribute(n),this.morphTargetsRelative?(pi.addVectors(this.boundingBox.min,_i.min),this.boundingBox.expandByPoint(pi),pi.addVectors(this.boundingBox.max,_i.max),this.boundingBox.expandByPoint(pi)):(this.boundingBox.expandByPoint(_i.min),this.boundingBox.expandByPoint(_i.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ye);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new $e,1/0);if(t){const n=this.boundingSphere.center;if(_i.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];di.setFromBufferAttribute(n),this.morphTargetsRelative?(pi.addVectors(_i.min,di.min),_i.expandByPoint(pi),pi.addVectors(_i.max,di.max),_i.expandByPoint(pi)):(_i.expandByPoint(di.min),_i.expandByPoint(di.max))}_i.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)pi.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(pi));if(e)for(let r=0,a=e.length;r<a;r++){const a=e[r],s=this.morphTargetsRelative;for(let e=0,r=a.count;e<r;e++)pi.fromBufferAttribute(a,e),s&&(fi.fromBufferAttribute(t,e),pi.add(fi)),i=Math.max(i,n.distanceToSquared(pi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,a=e.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ai(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],u=[];for(let t=0;t<s;t++)l[t]=new $e,u[t]=new $e;const c=new $e,h=new $e,f=new $e,_=new te,d=new te,p=new te,m=new $e,g=new $e;function v(t,e,n){c.fromArray(i,3*t),h.fromArray(i,3*e),f.fromArray(i,3*n),_.fromArray(a,2*t),d.fromArray(a,2*e),p.fromArray(a,2*n),h.sub(c),f.sub(c),d.sub(_),p.sub(_);const r=1/(d.x*p.y-p.x*d.y);isFinite(r)&&(m.copy(h).multiplyScalar(p.y).addScaledVector(f,-d.y).multiplyScalar(r),g.copy(f).multiplyScalar(d.x).addScaledVector(h,-p.x).multiplyScalar(r),l[t].add(m),l[e].add(m),l[n].add(m),u[t].add(g),u[e].add(g),u[n].add(g))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let t=0,e=y.length;t<e;++t){const e=y[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)v(n[t+0],n[t+1],n[t+2])}const w=new $e,b=new $e,x=new $e,S=new $e;function E(t){x.fromArray(r,3*t),S.copy(x);const e=l[t];w.copy(e),w.sub(x.multiplyScalar(x.dot(e))).normalize(),b.crossVectors(S,e);const n=b.dot(u[t])<0?-1:1;o[4*t]=w.x,o[4*t+1]=w.y,o[4*t+2]=w.z,o[4*t+3]=n}for(let t=0,e=y.length;t<e;++t){const e=y[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)E(n[t+0]),E(n[t+1]),E(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new ai(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new $e,r=new $e,a=new $e,s=new $e,o=new $e,l=new $e,u=new $e,c=new $e;if(t)for(let h=0,f=t.count;h<f;h+=3){const f=t.getX(h+0),_=t.getX(h+1),d=t.getX(h+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,_),a.fromBufferAttribute(e,d),u.subVectors(a,r),c.subVectors(i,r),u.cross(c),s.fromBufferAttribute(n,f),o.fromBufferAttribute(n,_),l.fromBufferAttribute(n,d),s.add(u),o.add(u),l.add(u),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(_,o.x,o.y,o.z),n.setXYZ(d,l.x,l.y,l.z)}else for(let t=0,s=e.count;t<s;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),u.subVectors(a,r),c.subVectors(i,r),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)pi.fromBufferAttribute(t,e),pi.normalize(),t.setXYZ(e,pi.x,pi.y,pi.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i);let s=0,o=0;for(let r=0,l=e.length;r<l;r++){s=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)a[o++]=n[s++]}return new ai(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new mi,n=this.index.array,i=this.attributes;for(const r in i){const a=t(i[r],n);e.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],s=r[i];for(let e=0,i=s.length;e<i;e++){const i=t(s[e],n);a.push(i)}e.morphAttributes[i]=a}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],a=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];a.push(i.toJSON(t.data))}a.length>0&&(i[e]=a,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let t=0,e=a.length;t<e;t++){const e=a[t];this.addGroup(e.start,e.count,e.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gi=new an,vi=new rn,yi=new Ye,wi=new $e,bi=new $e,xi=new $e,Si=new $e,Ei=new $e,Mi=new $e,Ti=new te,Ci=new te,$i=new te,Ai=new $e,Ri=new $e,Oi=new $e,Ii=new $e,ki=new $e;class Ui extends Rn{constructor(t=new mi,e=new Jn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const s=this.morphTargetInfluences;if(r&&s){Mi.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(Ei.fromBufferAttribute(o,t),a?Mi.addScaledVector(Ei,i):Mi.addScaledVector(Ei.sub(e),i))}e.add(Mi)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),yi.copy(n.boundingSphere),yi.applyMatrix4(r),vi.copy(t.ray).recast(t.near),!1===yi.containsPoint(vi.origin)){if(null===vi.intersectSphere(yi,wi))return;if(vi.origin.distanceToSquared(wi)>(t.far-t.near)**2)return}gi.copy(r).invert(),vi.copy(t.ray).applyMatrix4(gi),null!==n.boundingBox&&!1===vi.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,vi)}}_computeIntersections(t,e,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv1,c=r.attributes.normal,h=r.groups,f=r.drawRange;if(null!==s)if(Array.isArray(a))for(let r=0,o=h.length;r<o;r++){const o=h[r],_=a[o.materialIndex];for(let r=Math.max(o.start,f.start),a=Math.min(s.count,Math.min(o.start+o.count,f.start+f.count));r<a;r+=3)i=Pi(this,_,t,n,l,u,c,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,e.push(i))}else for(let r=Math.max(0,f.start),o=Math.min(s.count,f.start+f.count);r<o;r+=3)i=Pi(this,a,t,n,l,u,c,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i));else if(void 0!==o)if(Array.isArray(a))for(let r=0,s=h.length;r<s;r++){const s=h[r],_=a[s.materialIndex];for(let r=Math.max(s.start,f.start),a=Math.min(o.count,Math.min(s.start+s.count,f.start+f.count));r<a;r+=3)i=Pi(this,_,t,n,l,u,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=s.materialIndex,e.push(i))}else for(let r=Math.max(0,f.start),s=Math.min(o.count,f.start+f.count);r<s;r+=3)i=Pi(this,a,t,n,l,u,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}function Pi(t,e,n,i,r,a,s,o,l,u){t.getVertexPosition(o,bi),t.getVertexPosition(l,xi),t.getVertexPosition(u,Si);const c=function(t,e,n,i,r,a,s,o){let l;if(l=1===e.side?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,0===e.side,o),null===l)return null;ki.copy(o),ki.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(ki);return u<n.near||u>n.far?null:{distance:u,point:ki.clone(),object:t}}(t,e,n,i,bi,xi,Si,Ii);if(c){r&&(Ti.fromBufferAttribute(r,o),Ci.fromBufferAttribute(r,l),$i.fromBufferAttribute(r,u),c.uv=Hn.getInterpolation(Ii,bi,xi,Si,Ti,Ci,$i,new te)),a&&(Ti.fromBufferAttribute(a,o),Ci.fromBufferAttribute(a,l),$i.fromBufferAttribute(a,u),c.uv1=Hn.getInterpolation(Ii,bi,xi,Si,Ti,Ci,$i,new te),c.uv2=c.uv1),s&&(Ai.fromBufferAttribute(s,o),Ri.fromBufferAttribute(s,l),Oi.fromBufferAttribute(s,u),c.normal=Hn.getInterpolation(Ii,bi,xi,Si,Ai,Ri,Oi,new $e),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const t={a:o,b:l,c:u,normal:new $e,materialIndex:0};Hn.getNormal(bi,xi,Si,t.normal),c.face=t}return c}class Di extends mi{constructor(t=1,e=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],u=[],c=[];let h=0,f=0;function _(t,e,n,i,r,a,_,d,p,m,g){const v=a/p,y=_/m,w=a/2,b=_/2,x=d/2,S=p+1,E=m+1;let M=0,T=0;const C=new $e;for(let a=0;a<E;a++){const s=a*y-b;for(let o=0;o<S;o++){const h=o*v-w;C[t]=h*i,C[e]=s*r,C[n]=x,l.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=d>0?1:-1,u.push(C.x,C.y,C.z),c.push(o/p),c.push(1-a/m),M+=1}}for(let t=0;t<m;t++)for(let e=0;e<p;e++){const n=h+e+S*t,i=h+e+S*(t+1),r=h+(e+1)+S*(t+1),a=h+(e+1)+S*t;o.push(n,i,a),o.push(i,r,a),T+=6}s.addGroup(f,T,g),f+=T,h+=M}_("z","y","x",-1,-1,n,e,t,a,r,0),_("z","y","x",1,-1,n,e,-t,a,r,1),_("x","z","y",1,1,t,n,e,i,a,2),_("x","z","y",1,-1,t,n,-e,i,a,3),_("x","y","z",1,-1,t,e,n,i,r,4),_("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new li(l,3)),this.setAttribute("normal",new li(u,3)),this.setAttribute("uv",new li(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Di(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ni(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Li(t){const e={};for(let n=0;n<t.length;n++){const i=Ni(t[n]);for(const t in i)e[t]=i[t]}return e}function zi(t){return null===t.getRenderTarget()?t.outputColorSpace:Ot}const Fi={clone:Ni,merge:Li};class Bi extends qn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ni(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Hi extends Rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an,this.coordinateSystem=Nt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Vi extends Hi{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Vt*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Ht*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Vt*Math.atan(Math.tan(.5*Ht*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Ht*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/t,e-=a.offsetY*n/s,i*=a.width/t,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const qi=-90;class ji extends Rn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const i=new Vi(qi,1,t,e);i.layers=this.layers,this.add(i);const r=new Vi(qi,1,t,e);r.layers=this.layers,this.add(r);const a=new Vi(qi,1,t,e);a.layers=this.layers,this.add(a);const s=new Vi(qi,1,t,e);s.layers=this.layers,this.add(s);const o=new Vi(qi,1,t,e);o.layers=this.layers,this.add(o);const l=new Vi(qi,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,a,s,o]=e;for(const t of e)this.remove(t);if(t===Nt)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(t!==Lt)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,r,a,s,o,l]=this.children,u=t.getRenderTarget(),h=t.toneMapping,f=t.xr.enabled;t.toneMapping=c,t.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,o),n.texture.generateMipmaps=_,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=h,t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class Gi extends xe{constructor(t,e,n,i,r,a,s,o,l,u){super(t=void 0!==t?t:[],e=void 0!==e?e:g,n,i,r,a,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Wi extends Ee{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];void 0!==e.encoding&&(le("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===$t?Rt:At),this.texture=new Gi(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:$}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Di(5,5,5),s=new Bi({name:"CubemapFromEquirect",uniforms:Ni(n),vertexShader:i,fragmentShader:r,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Ui(a,s),l=e.minFilter;return e.minFilter===R&&(e.minFilter=$),new ji(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}const Xi=new $e,Yi=new $e,Ki=new ee;class Ji{constructor(t=new $e(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Xi.subVectors(n,e).cross(Yi.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Xi),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Ki.getNormalMatrix(t),i=this.coplanarPoint(Xi).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Zi=new Ye,Qi=new $e;class tr{constructor(t=new Ji,e=new Ji,n=new Ji,i=new Ji,r=new Ji,a=new Ji){this.planes=[t,e,n,i,r,a]}set(t,e,n,i,r,a){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=2e3){const n=this.planes,i=t.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],_=i[9],d=i[10],p=i[11],m=i[12],g=i[13],v=i[14],y=i[15];if(n[0].setComponents(o-r,h-l,p-f,y-m).normalize(),n[1].setComponents(o+r,h+l,p+f,y+m).normalize(),n[2].setComponents(o+a,h+u,p+_,y+g).normalize(),n[3].setComponents(o-a,h-u,p-_,y-g).normalize(),n[4].setComponents(o-s,h-c,p-d,y-v).normalize(),e===Nt)n[5].setComponents(o+s,h+c,p+d,y+v).normalize();else{if(e!==Lt)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(s,c,d,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Zi.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Zi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Zi)}intersectsSprite(t){return Zi.center.set(0,0,0),Zi.radius=.7071067811865476,Zi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Zi)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Qi.x=i.normal.x>0?t.max.x:t.min.x,Qi.y=i.normal.y>0?t.max.y:t.min.y,Qi.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Qi)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function er(){let t=null,e=!1,n=null,i=null;function r(e,a){n(e,a),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function nr(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=i.get(e);void 0===a?i.set(e,function(e,i){const r=e.array,a=e.usage,s=t.createBuffer();let o;if(t.bindBuffer(i,s),t.bufferData(i,r,a),e.onUploadCallback(),r instanceof Float32Array)o=t.FLOAT;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=t.HALF_FLOAT}else o=t.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=t.SHORT;else if(r instanceof Uint32Array)o=t.UNSIGNED_INT;else if(r instanceof Int32Array)o=t.INT;else if(r instanceof Int8Array)o=t.BYTE;else if(r instanceof Uint8Array)o=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=t.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):a.version<e.version&&(function(e,i,r){const a=i.array,s=i.updateRange;t.bindBuffer(r,e),-1===s.count?t.bufferSubData(r,0,a):(n?t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}(a.buffer,e,r),a.version=e.version)}}}class ir extends mi{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,a=e/2,s=Math.floor(n),o=Math.floor(i),l=s+1,u=o+1,c=t/s,h=e/o,f=[],_=[],d=[],p=[];for(let t=0;t<u;t++){const e=t*h-a;for(let n=0;n<l;n++){const i=n*c-r;_.push(i,-e,0),d.push(0,0,1),p.push(n/s),p.push(1-t/o)}}for(let t=0;t<o;t++)for(let e=0;e<s;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),a=e+1+l*t;f.push(n,i,a),f.push(i,r,a)}this.setIndex(f),this.setAttribute("position",new li(_,3)),this.setAttribute("normal",new li(d,3)),this.setAttribute("uv",new li(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ir(t.width,t.height,t.widthSegments,t.heightSegments)}}const rr={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ar={common:{diffuse:{value:new Yn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ee},alphaMap:{value:null},alphaMapTransform:{value:new ee},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ee}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ee}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ee}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ee},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ee},normalScale:{value:new te(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ee},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ee}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ee}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ee}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ee},alphaTest:{value:0},uvTransform:{value:new ee}},sprite:{diffuse:{value:new Yn(16777215)},opacity:{value:1},center:{value:new te(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ee},alphaMap:{value:null},alphaMapTransform:{value:new ee},alphaTest:{value:0}}},sr={basic:{uniforms:Li([ar.common,ar.specularmap,ar.envmap,ar.aomap,ar.lightmap,ar.fog]),vertexShader:rr.meshbasic_vert,fragmentShader:rr.meshbasic_frag},lambert:{uniforms:Li([ar.common,ar.specularmap,ar.envmap,ar.aomap,ar.lightmap,ar.emissivemap,ar.bumpmap,ar.normalmap,ar.displacementmap,ar.fog,ar.lights,{emissive:{value:new Yn(0)}}]),vertexShader:rr.meshlambert_vert,fragmentShader:rr.meshlambert_frag},phong:{uniforms:Li([ar.common,ar.specularmap,ar.envmap,ar.aomap,ar.lightmap,ar.emissivemap,ar.bumpmap,ar.normalmap,ar.displacementmap,ar.fog,ar.lights,{emissive:{value:new Yn(0)},specular:{value:new Yn(1118481)},shininess:{value:30}}]),vertexShader:rr.meshphong_vert,fragmentShader:rr.meshphong_frag},standard:{uniforms:Li([ar.common,ar.envmap,ar.aomap,ar.lightmap,ar.emissivemap,ar.bumpmap,ar.normalmap,ar.displacementmap,ar.roughnessmap,ar.metalnessmap,ar.fog,ar.lights,{emissive:{value:new Yn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag},toon:{uniforms:Li([ar.common,ar.aomap,ar.lightmap,ar.emissivemap,ar.bumpmap,ar.normalmap,ar.displacementmap,ar.gradientmap,ar.fog,ar.lights,{emissive:{value:new Yn(0)}}]),vertexShader:rr.meshtoon_vert,fragmentShader:rr.meshtoon_frag},matcap:{uniforms:Li([ar.common,ar.bumpmap,ar.normalmap,ar.displacementmap,ar.fog,{matcap:{value:null}}]),vertexShader:rr.meshmatcap_vert,fragmentShader:rr.meshmatcap_frag},points:{uniforms:Li([ar.points,ar.fog]),vertexShader:rr.points_vert,fragmentShader:rr.points_frag},dashed:{uniforms:Li([ar.common,ar.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rr.linedashed_vert,fragmentShader:rr.linedashed_frag},depth:{uniforms:Li([ar.common,ar.displacementmap]),vertexShader:rr.depth_vert,fragmentShader:rr.depth_frag},normal:{uniforms:Li([ar.common,ar.bumpmap,ar.normalmap,ar.displacementmap,{opacity:{value:1}}]),vertexShader:rr.meshnormal_vert,fragmentShader:rr.meshnormal_frag},sprite:{uniforms:Li([ar.sprite,ar.fog]),vertexShader:rr.sprite_vert,fragmentShader:rr.sprite_frag},background:{uniforms:{uvTransform:{value:new ee},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rr.background_vert,fragmentShader:rr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:rr.backgroundCube_vert,fragmentShader:rr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rr.cube_vert,fragmentShader:rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rr.equirect_vert,fragmentShader:rr.equirect_frag},distanceRGBA:{uniforms:Li([ar.common,ar.displacementmap,{referencePosition:{value:new $e},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rr.distanceRGBA_vert,fragmentShader:rr.distanceRGBA_frag},shadow:{uniforms:Li([ar.lights,ar.fog,{color:{value:new Yn(0)},opacity:{value:1}}]),vertexShader:rr.shadow_vert,fragmentShader:rr.shadow_frag}};sr.physical={uniforms:Li([sr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ee},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ee},clearcoatNormalScale:{value:new te(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ee},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ee},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ee},sheen:{value:0},sheenColor:{value:new Yn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ee},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ee},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ee},transmissionSamplerSize:{value:new te},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ee},attenuationDistance:{value:0},attenuationColor:{value:new Yn(0)},specularColor:{value:new Yn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ee},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ee},anisotropyVector:{value:new te},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ee}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag};const or={r:0,b:0,g:0};function lr(t,e,n,i,r,a,s){const o=new Yn(0);let l,u,c=!0===a?0:1,h=null,f=0,_=null;function d(e,n){e.getRGB(or,zi(t)),i.buffers.color.setClear(or.r,or.g,or.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,d(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(o,c)},render:function(a,p){let m=!1,g=!0===p.isScene?p.background:null;switch(g&&g.isTexture&&(g=(p.backgroundBlurriness>0?n:e).get(g)),null===g?d(o,c):g&&g.isColor&&(d(g,1),m=!0),t.xr.getEnvironmentBlendMode()){case"opaque":m=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,s),m=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,s),m=!0}(t.autoClear||m)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===b)?(void 0===u&&(u=new Ui(new Di(1,1,1),new Bi({name:"BackgroundCubeMaterial",uniforms:Ni(sr.backgroundCube.uniforms),vertexShader:sr.backgroundCube.vertexShader,fragmentShader:sr.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=g,u.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=g.colorSpace!==Rt,h===g&&f===g.version&&_===t.toneMapping||(u.material.needsUpdate=!0,h=g,f=g.version,_=t.toneMapping),u.layers.enableAll(),a.unshift(u,u.geometry,u.material,0,0,null)):g&&g.isTexture&&(void 0===l&&(l=new Ui(new ir(2,2),new Bi({name:"BackgroundMaterial",uniforms:Ni(sr.background.uniforms),vertexShader:sr.background.vertexShader,fragmentShader:sr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=g,l.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,l.material.toneMapped=g.colorSpace!==Rt,!0===g.matrixAutoUpdate&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),h===g&&f===g.version&&_===t.toneMapping||(l.material.needsUpdate=!0,h=g,f=g.version,_=t.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function ur(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=_(null);let u=l,c=!1;function h(e){return i.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function f(e){return i.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function _(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function p(t){m(t,0)}function m(n,r){const a=u.newAttributes,s=u.enabledAttributes,o=u.attributeDivisors;a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),o[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r)}function g(){const e=u.newAttributes,n=u.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function v(e,n,i,r,a,s,o){!0===o?t.vertexAttribIPointer(e,n,i,a,s):t.vertexAttribPointer(e,n,i,r,a,s)}function y(){w(),c=!0,u!==l&&(u=l,h(u.object))}function w(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,f,y,w){let b=!1;if(s){const e=function(e,n,r){const s=!0===r.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[s];return void 0===c&&(c=_(i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),u[s]=c),c}(y,f,l);u!==e&&(u=e,h(u.object)),b=function(t,e,n,i){const r=u.attributes,a=e.attributes;let s=0;const o=n.getAttributes();for(const e in o)if(o[e].location>=0){const n=r[e];let i=a[e];if(void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;s++}return u.attributesNum!==s||u.index!==i}(r,y,f,w),b&&function(t,e,n,i){const r={},a=e.attributes;let s=0;const o=n.getAttributes();for(const e in o)if(o[e].location>=0){let n=a[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[e]=i,s++}u.attributes=r,u.attributesNum=s,u.index=i}(r,y,f,w)}else{const t=!0===l.wireframe;u.geometry===y.id&&u.program===f.id&&u.wireframe===t||(u.geometry=y.id,u.program=f.id,u.wireframe=t,b=!0)}null!==w&&n.update(w,t.ELEMENT_ARRAY_BUFFER),(b||c)&&(c=!1,function(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=o.attributes,u=s.getAttributes(),c=a.defaultAttributeValues;for(const e in u){const a=u[e];if(a.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,l=s.itemSize,u=n.get(s);if(void 0===u)continue;const c=u.buffer,h=u.type,f=u.bytesPerElement,_=!0===i.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||s.gpuType===k);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,u=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<a.locationSize;t++)m(a.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<a.locationSize;t++)p(a.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<a.locationSize;t++)v(a.location+t,l/a.locationSize,h,e,i*f,(u+l/a.locationSize*t)*f,_)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<a.locationSize;t++)m(a.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<a.locationSize;t++)p(a.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<a.locationSize;t++)v(a.location+t,l/a.locationSize,h,e,l*f,l/a.locationSize*t*f,_)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(a.location,n);break;case 3:t.vertexAttrib3fv(a.location,n);break;case 4:t.vertexAttrib4fv(a.location,n);break;default:t.vertexAttrib1fv(a.location,n)}}}}g()}(r,l,f,y),null!==w&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(w).buffer))},reset:y,resetDefaultState:w,dispose:function(){y();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)f(i[t].object),delete i[t];delete n[t.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:g}}function cr(t,e,n,i){const r=i.isWebGL2;let a;this.setMode=function(t){a=t},this.render=function(e,i){t.drawArrays(a,e,i),n.update(i,a,1)},this.renderInstances=function(i,s,o){if(0===o)return;let l,u;if(r)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](a,i,s,o),n.update(s,a,o)}}function hr(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),_=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,y=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:_,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?t.getParameter(t.MAX_SAMPLES):0}}function fr(t){const e=this;let n=null,i=0,r=!1,a=!1;const s=new Ji,o=new ee,l={value:null,needsUpdate:!1};function u(t,n,i,r){const a=null!==t?t.length:0;let u=null;if(0!==a){if(u=l.value,!0!==r||null===u){const e=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===u||u.length<e)&&(u=new Float32Array(e));for(let e=0,n=i;e!==a;++e,n+=4)s.copy(t[e]).applyMatrix4(r,o),s.normal.toArray(u,n),u[n+3]=s.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(s,o,c){const h=s.clippingPlanes,f=s.clipIntersection,_=s.clipShadows,d=t.get(s);if(!r||null===h||0===h.length||a&&!_)a?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0);else{const t=a?0:i,e=4*t;let r=d.clippingState||null;l.value=r,r=u(h,o,e,c);for(let t=0;t!==e;++t)r[t]=n[t];d.clippingState=r,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=t}}}function _r(t){let e=new WeakMap;function n(t,e){return e===y?t.mapping=g:e===w&&(t.mapping=v),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping;if(a===y||a===w){if(e.has(r))return n(e.get(r).texture,r.mapping);{const a=r.image;if(a&&a.height>0){const s=new Wi(a.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}class dr extends Hi{constructor(t=-1,e=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,a=n+t,s=i+e,o=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,a=r+t*this.view.width,s-=e*this.view.offsetY,o=s-e*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const pr=[.125,.215,.35,.446,.526,.582],mr=new dr,gr=new Yn;let vr=null;const yr=(1+Math.sqrt(5))/2,wr=1/yr,br=[new $e(1,1,1),new $e(-1,1,1),new $e(1,1,-1),new $e(-1,1,-1),new $e(0,yr,wr),new $e(0,yr,-wr),new $e(wr,0,yr),new $e(-wr,0,yr),new $e(yr,wr,0),new $e(-yr,wr,0)];class xr{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){vr=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Tr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Mr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(vr),t.scissorTest=!1,Er(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===g||t.mapping===v?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),vr=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:$,minFilter:$,generateMipmaps:!1,type:D,format:F,colorSpace:Ot,depthBuffer:!1},i=Sr(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Sr(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const a=t-4+1+pr.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);n.push(a);let o=1/a;s>t-4?o=pr[s-t+4-1]:0===s&&(o=0),i.push(o);const l=1/(a-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],f=6,_=6,d=3,p=2,m=1,g=new Float32Array(d*_*f),v=new Float32Array(p*_*f),y=new Float32Array(m*_*f);for(let t=0;t<f;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,d*_*t),v.set(h,p*_*t);const r=[t,t,t,t,t,t];y.set(r,m*_*t)}const w=new mi;w.setAttribute("position",new ai(g,d)),w.setAttribute("uv",new ai(v,p)),w.setAttribute("faceIndex",new ai(y,m)),e.push(w),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(20),r=new $e(0,1,0);return new Bi({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(i,t,e)}return i}_compileMaterial(t){const e=new Ui(this._lodPlanes[0],t);this._renderer.compile(e,mr)}_sceneToCubeUV(t,e,n,i){const r=new Vi(90,1,e,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(gr),o.toneMapping=c,o.autoClear=!1;const h=new Jn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),f=new Ui(new Di,h);let _=!1;const d=t.background;d?d.isColor&&(h.color.copy(d),t.background=null,_=!0):(h.color.copy(gr),_=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(r.up.set(0,a[e],0),r.lookAt(s[e],0,0)):1===n?(r.up.set(0,0,a[e]),r.lookAt(0,s[e],0)):(r.up.set(0,a[e],0),r.lookAt(0,0,s[e]));const l=this._cubeSize;Er(i,n*l,e>2?l:0,l,l),o.setRenderTarget(i),_&&o.render(f,r),o.render(t,r)}f.geometry.dispose(),f.material.dispose(),o.toneMapping=u,o.autoClear=l,t.background=d}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===g||t.mapping===v;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Tr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Mr());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new Ui(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const s=this._cubeSize;Er(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(a,mr)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),i=br[(e-1)%br.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Ui(this._lodPlanes[i],l),c=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,_=r/f,d=isFinite(r)?1+Math.floor(3*_):20;d>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`);const p=[];let m=0;for(let t=0;t<20;++t){const e=t/_,n=Math.exp(-e*e/2);p.push(n),0===t?m+=n:t<d&&(m+=2*n)}for(let t=0;t<p.length;t++)p[t]=p[t]/m;c.envMap.value=t.texture,c.samples.value=d,c.weights.value=p,c.latitudinal.value="latitudinal"===a,s&&(c.poleAxis.value=s);const{_lodMax:g}=this;c.dTheta.value=f,c.mipInt.value=g-n;const v=this._sizeLods[i];Er(e,3*v*(i>g-4?i-g+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(e),o.render(u,mr)}}function Sr(t,e,n){const i=new Ee(t,e,n);return i.texture.mapping=b,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Er(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Mr(){return new Bi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Tr(){return new Bi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Cr(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,s=a===y||a===w,o=a===g||a===v;if(s||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new xr(t)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||o&&a&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(a)){null===n&&(n=new xr(t));const a=s?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,a),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function $r(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Ar(t,e,n,i){const r={},a=new WeakMap;function s(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const t in o.attributes)e.remove(o.attributes[t]);for(const t in o.morphAttributes){const n=o.morphAttributes[t];for(let t=0,i=n.length;t<i;t++)e.remove(n[t])}o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(e.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],i=t.index,r=t.attributes.position;let s=0;if(null!==i){const t=i.array;s=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],a=t[e+2];n.push(i,r,r,a,a,i)}}else{const t=r.array;s=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const o=new(ie(n)?oi:si)(n,1);o.version=s;const l=a.get(t);l&&e.remove(l),a.set(t,o)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",s),r[e.id]=!0,n.memory.geometries++),e},update:function(n){const i=n.attributes;for(const n in i)e.update(i[n],t.ARRAY_BUFFER);const r=n.morphAttributes;for(const n in r){const i=r[n];for(let n=0,r=i.length;n<r;n++)e.update(i[n],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=a.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return a.get(t)}}}function Rr(t,e,n,i){const r=i.isWebGL2;let a,s,o;this.setMode=function(t){a=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(a,i,s,e*o),n.update(i,a,1)},this.renderInstances=function(i,l,u){if(0===u)return;let c,h;if(r)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](a,l,s,i*o,u),n.update(l,a,u)}}function Or(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Ir(t,e){return t[0]-e[0]}function kr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ur(t,e,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new Se,o=[];for(let t=0;t<8;t++)o[t]=[t,0];return{update:function(l,u,c){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=void 0!==f?f.length:0;let d=a.get(u);if(void 0===d||d.count!==_){void 0!==d&&d.texture.dispose();const g=void 0!==u.morphAttributes.position,v=void 0!==u.morphAttributes.normal,y=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let S=0;!0===g&&(S=1),!0===v&&(S=2),!0===y&&(S=3);let E=u.attributes.position.count*S,M=1;E>e.maxTextureSize&&(M=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*M*4*_),C=new Me(T,E,M,_);C.type=P,C.needsUpdate=!0;const $=4*S;for(let R=0;R<_;R++){const O=w[R],I=b[R],k=x[R],U=E*M*4*R;for(let D=0;D<O.count;D++){const N=D*$;!0===g&&(s.fromBufferAttribute(O,D),T[U+N+0]=s.x,T[U+N+1]=s.y,T[U+N+2]=s.z,T[U+N+3]=0),!0===v&&(s.fromBufferAttribute(I,D),T[U+N+4]=s.x,T[U+N+5]=s.y,T[U+N+6]=s.z,T[U+N+7]=0),!0===y&&(s.fromBufferAttribute(k,D),T[U+N+8]=s.x,T[U+N+9]=s.y,T[U+N+10]=s.z,T[U+N+11]=4===k.itemSize?s.w:1)}}function A(){C.dispose(),a.delete(u),u.removeEventListener("dispose",A)}d={count:_,texture:C,size:new te(E,M)},a.set(u,d),u.addEventListener("dispose",A)}let p=0;for(let L=0;L<h.length;L++)p+=h[L];const m=u.morphTargetsRelative?1:1-p;c.getUniforms().setValue(t,"morphTargetBaseInfluence",m),c.getUniforms().setValue(t,"morphTargetInfluences",h),c.getUniforms().setValue(t,"morphTargetsTexture",d.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",d.size)}else{const z=void 0===h?0:h.length;let F=i[u.id];if(void 0===F||F.length!==z){F=[];for(let j=0;j<z;j++)F[j]=[j,0];i[u.id]=F}for(let G=0;G<z;G++){const W=F[G];W[0]=G,W[1]=h[G]}F.sort(kr);for(let X=0;X<8;X++)X<z&&F[X][1]?(o[X][0]=F[X][0],o[X][1]=F[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(Ir);const B=u.morphAttributes.position,H=u.morphAttributes.normal;let V=0;for(let Y=0;Y<8;Y++){const K=o[Y],J=K[0],Z=K[1];J!==Number.MAX_SAFE_INTEGER&&Z?(B&&u.getAttribute("morphTarget"+Y)!==B[J]&&u.setAttribute("morphTarget"+Y,B[J]),H&&u.getAttribute("morphNormal"+Y)!==H[J]&&u.setAttribute("morphNormal"+Y,H[J]),r[Y]=Z,V+=Z):(B&&!0===u.hasAttribute("morphTarget"+Y)&&u.deleteAttribute("morphTarget"+Y),H&&!0===u.hasAttribute("morphNormal"+Y)&&u.deleteAttribute("morphNormal"+Y),r[Y]=0)}const q=u.morphTargetsRelative?1:1-V;c.getUniforms().setValue(t,"morphTargetBaseInfluence",q),c.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function Pr(t,e,n,i){let r=new WeakMap;function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(s){const o=i.render.frame,l=s.geometry,u=e.get(s,l);if(r.get(u)!==o&&(e.update(u),r.set(u,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),r.get(s)!==o&&(n.update(s.instanceMatrix,t.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,t.ARRAY_BUFFER),r.set(s,o))),s.isSkinnedMesh){const t=s.skeleton;r.get(t)!==o&&(t.update(),r.set(t,o))}return u},dispose:function(){r=new WeakMap}}}const Dr=new xe,Nr=new Me,Lr=new Te,zr=new Gi,Fr=[],Br=[],Hr=new Float32Array(16),Vr=new Float32Array(9),qr=new Float32Array(4);function jr(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=Fr[r];if(void 0===a&&(a=new Float32Array(r),Fr[r]=a),0!==e){i.toArray(a,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(a,r)}return a}function Gr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Wr(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Xr(t,e){let n=Br[e];void 0===n&&(n=new Int32Array(e),Br[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Yr(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Kr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gr(n,e))return;t.uniform2fv(this.addr,e),Wr(n,e)}}function Jr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Gr(n,e))return;t.uniform3fv(this.addr,e),Wr(n,e)}}function Zr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gr(n,e))return;t.uniform4fv(this.addr,e),Wr(n,e)}}function Qr(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Gr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Wr(n,e)}else{if(Gr(n,i))return;qr.set(i),t.uniformMatrix2fv(this.addr,!1,qr),Wr(n,i)}}function ta(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Gr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Wr(n,e)}else{if(Gr(n,i))return;Vr.set(i),t.uniformMatrix3fv(this.addr,!1,Vr),Wr(n,i)}}function ea(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Gr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Wr(n,e)}else{if(Gr(n,i))return;Hr.set(i),t.uniformMatrix4fv(this.addr,!1,Hr),Wr(n,i)}}function na(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ia(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gr(n,e))return;t.uniform2iv(this.addr,e),Wr(n,e)}}function ra(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gr(n,e))return;t.uniform3iv(this.addr,e),Wr(n,e)}}function aa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gr(n,e))return;t.uniform4iv(this.addr,e),Wr(n,e)}}function sa(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function oa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gr(n,e))return;t.uniform2uiv(this.addr,e),Wr(n,e)}}function la(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gr(n,e))return;t.uniform3uiv(this.addr,e),Wr(n,e)}}function ua(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gr(n,e))return;t.uniform4uiv(this.addr,e),Wr(n,e)}}function ca(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Dr,r)}function ha(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Lr,r)}function fa(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||zr,r)}function _a(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Nr,r)}function da(t,e){t.uniform1fv(this.addr,e)}function pa(t,e){const n=jr(e,this.size,2);t.uniform2fv(this.addr,n)}function ma(t,e){const n=jr(e,this.size,3);t.uniform3fv(this.addr,n)}function ga(t,e){const n=jr(e,this.size,4);t.uniform4fv(this.addr,n)}function va(t,e){const n=jr(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ya(t,e){const n=jr(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function wa(t,e){const n=jr(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ba(t,e){t.uniform1iv(this.addr,e)}function xa(t,e){t.uniform2iv(this.addr,e)}function Sa(t,e){t.uniform3iv(this.addr,e)}function Ea(t,e){t.uniform4iv(this.addr,e)}function Ma(t,e){t.uniform1uiv(this.addr,e)}function Ta(t,e){t.uniform2uiv(this.addr,e)}function Ca(t,e){t.uniform3uiv(this.addr,e)}function $a(t,e){t.uniform4uiv(this.addr,e)}function Aa(t,e,n){const i=this.cache,r=e.length,a=Xr(n,r);Gr(i,a)||(t.uniform1iv(this.addr,a),Wr(i,a));for(let t=0;t!==r;++t)n.setTexture2D(e[t]||Dr,a[t])}function Ra(t,e,n){const i=this.cache,r=e.length,a=Xr(n,r);Gr(i,a)||(t.uniform1iv(this.addr,a),Wr(i,a));for(let t=0;t!==r;++t)n.setTexture3D(e[t]||Lr,a[t])}function Oa(t,e,n){const i=this.cache,r=e.length,a=Xr(n,r);Gr(i,a)||(t.uniform1iv(this.addr,a),Wr(i,a));for(let t=0;t!==r;++t)n.setTextureCube(e[t]||zr,a[t])}function Ia(t,e,n){const i=this.cache,r=e.length,a=Xr(n,r);Gr(i,a)||(t.uniform1iv(this.addr,a),Wr(i,a));for(let t=0;t!==r;++t)n.setTexture2DArray(e[t]||Nr,a[t])}class ka{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Yr;case 35664:return Kr;case 35665:return Jr;case 35666:return Zr;case 35674:return Qr;case 35675:return ta;case 35676:return ea;case 5124:case 35670:return na;case 35667:case 35671:return ia;case 35668:case 35672:return ra;case 35669:case 35673:return aa;case 5125:return sa;case 36294:return oa;case 36295:return la;case 36296:return ua;case 35678:case 36198:case 36298:case 36306:case 35682:return ca;case 35679:case 36299:case 36307:return ha;case 35680:case 36300:case 36308:case 36293:return fa;case 36289:case 36303:case 36311:case 36292:return _a}}(e.type)}}class Ua{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return da;case 35664:return pa;case 35665:return ma;case 35666:return ga;case 35674:return va;case 35675:return ya;case 35676:return wa;case 5124:case 35670:return ba;case 35667:case 35671:return xa;case 35668:case 35672:return Sa;case 35669:case 35673:return Ea;case 5125:return Ma;case 36294:return Ta;case 36295:return Ca;case 36296:return $a;case 35678:case 36198:case 36298:case 36306:case 35682:return Aa;case 35679:case 36299:case 36307:return Ra;case 35680:case 36300:case 36308:case 36293:return Oa;case 36289:case 36303:case 36311:case 36292:return Ia}}(e.type)}}class Pa{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(t,e[a.id],n)}}}const Da=/(\w+)(\])?(\[|\.)?/g;function Na(t,e){t.seq.push(e),t.map[e.id]=e}function La(t,e,n){const i=t.name,r=i.length;for(Da.lastIndex=0;;){const a=Da.exec(i),s=Da.lastIndex;let o=a[1];const l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===r){Na(n,void 0===u?new ka(o,t,e):new Ua(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new Pa(o),Na(n,t)),n=t}}}class za{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);La(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,a=e.length;r!==a;++r){const a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function Fa(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let Ba=0;function Ha(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let t=r;t<a;t++){const r=t+1;i.push(`${r===e?">":" "} ${r}: ${n[t]}`)}return i.join("\n")}(t.getShaderSource(e),i)}return r}function Va(t,e){const n=function(t){switch(t){case Ot:return["Linear","( value )"];case Rt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qa(t,e){let n;switch(e){case h:n="Linear";break;case f:n="Reinhard";break;case _:n="OptimizedCineon";break;case d:n="ACESFilmic";break;case p:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ja(t){return""!==t}function Ga(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Wa(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Xa=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ya(t){return t.replace(Xa,Ja)}const Ka=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Ja(t,e){let n=rr[e];if(void 0===n){const t=Ka.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=rr[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return Ya(n)}const Za=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qa(t){return t.replace(Za,ts)}function ts(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function es(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ns(t,e,n,s){const h=t.getContext(),f=n.defines;let _=n.vertexShader,d=n.fragmentShader;const p=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===i?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===r?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===a&&(e="SHADOWMAP_TYPE_VSM"),e}(n),m=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case g:case v:e="ENVMAP_TYPE_CUBE";break;case b:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),y=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===v&&(e="ENVMAP_MODE_REFRACTION"),e}(n),w=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case o:e="ENVMAP_BLENDING_MULTIPLY";break;case l:e="ENVMAP_BLENDING_MIX";break;case u:e="ENVMAP_BLENDING_ADD"}return e}(n),x=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),S=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ja).join("\n")}(n),E=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(f),M=h.createProgram();let T,C,$=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(T=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E].filter(ja).join("\n"),T.length>0&&(T+="\n"),C=[S,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E].filter(ja).join("\n"),C.length>0&&(C+="\n")):(T=[es(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ja).join("\n"),C=[S,es(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+y:"",n.envMap?"#define "+w:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==c?"#define TONE_MAPPING":"",n.toneMapping!==c?rr.tonemapping_pars_fragment:"",n.toneMapping!==c?qa("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",rr.colorspace_pars_fragment,Va("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ja).join("\n")),_=Ya(_),_=Ga(_,n),_=Wa(_,n),d=Ya(d),d=Ga(d,n),d=Wa(d,n),_=Qa(_),d=Qa(d),n.isWebGL2&&!0!==n.isRawShaderMaterial&&($="#version 300 es\n",T=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+T,C=["#define varying in",n.glslVersion===Pt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Pt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+C);const A=$+T+_,R=$+C+d,O=Fa(h,h.VERTEX_SHADER,A),I=Fa(h,h.FRAGMENT_SHADER,R);if(h.attachShader(M,O),h.attachShader(M,I),void 0!==n.index0AttributeName?h.bindAttribLocation(M,0,n.index0AttributeName):!0===n.morphTargets&&h.bindAttribLocation(M,0,"position"),h.linkProgram(M),t.debug.checkShaderErrors){const e=h.getProgramInfoLog(M).trim(),n=h.getShaderInfoLog(O).trim(),i=h.getShaderInfoLog(I).trim();let r=!0,a=!0;if(!1===h.getProgramParameter(M,h.LINK_STATUS))if(r=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(h,M,O,I);else{const t=Ha(h,O,"vertex"),n=Ha(h,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(M,h.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==i||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:n,prefix:T},fragmentShader:{log:i,prefix:C}})}let k,U;return h.deleteShader(O),h.deleteShader(I),this.getUniforms=function(){return void 0===k&&(k=new za(h,M)),k},this.getAttributes=function(){return void 0===U&&(U=function(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),a=i.name;let s=1;i.type===t.FLOAT_MAT2&&(s=2),i.type===t.FLOAT_MAT3&&(s=3),i.type===t.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}(h,M)),U},this.destroy=function(){s.releaseStatesOfProgram(this),h.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Ba++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=O,this.fragmentShader=I,this}let is=0;class rs{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new as(t),e.set(t,n)),n}}class as{constructor(t){this.id=is++,this.code=t,this.usedTimes=0}}function ss(t,e,n,i,r,a,s){const o=new mn,l=new rs,u=[],h=r.isWebGL2,f=r.logarithmicDepthBuffer,_=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return 0===t?"uv":`uv${t}`}return{getParameters:function(a,o,u,g,v){const y=g.fog,w=v.geometry,x=a.isMeshStandardMaterial?g.environment:null,S=(a.isMeshStandardMaterial?n:e).get(a.envMap||x),E=S&&S.mapping===b?S.image.height:null,M=p[a.type];null!==a.precision&&(d=r.getMaxPrecision(a.precision),d!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead."));const T=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,C=void 0!==T?T.length:0;let $,A,R,O,I=0;if(void 0!==w.morphAttributes.position&&(I=1),void 0!==w.morphAttributes.normal&&(I=2),void 0!==w.morphAttributes.color&&(I=3),M){const t=sr[M];$=t.vertexShader,A=t.fragmentShader}else $=a.vertexShader,A=a.fragmentShader,l.update(a),R=l.getVertexShaderID(a),O=l.getFragmentShaderID(a);const k=t.getRenderTarget(),U=!0===v.isInstancedMesh,P=!!a.map,D=!!a.matcap,N=!!S,L=!!a.aoMap,z=!!a.lightMap,F=!!a.bumpMap,B=!!a.normalMap,H=!!a.displacementMap,V=!!a.emissiveMap,q=!!a.metalnessMap,j=!!a.roughnessMap,G=a.anisotropy>0,W=a.clearcoat>0,X=a.iridescence>0,Y=a.sheen>0,K=a.transmission>0,J=G&&!!a.anisotropyMap,Z=W&&!!a.clearcoatMap,Q=W&&!!a.clearcoatNormalMap,tt=W&&!!a.clearcoatRoughnessMap,et=X&&!!a.iridescenceMap,nt=X&&!!a.iridescenceThicknessMap,it=Y&&!!a.sheenColorMap,rt=Y&&!!a.sheenRoughnessMap,at=!!a.specularMap,st=!!a.specularColorMap,ot=!!a.specularIntensityMap,lt=K&&!!a.transmissionMap,ut=K&&!!a.thicknessMap,ct=!!a.gradientMap,ht=!!a.alphaMap,ft=a.alphaTest>0,_t=!!a.alphaHash,dt=!!a.extensions,pt=!!w.attributes.uv1,mt=!!w.attributes.uv2,gt=!!w.attributes.uv3;return{isWebGL2:h,shaderID:M,shaderType:a.type,shaderName:a.name,vertexShader:$,fragmentShader:A,defines:a.defines,customVertexShaderID:R,customFragmentShaderID:O,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:U,instancingColor:U&&null!==v.instanceColor,supportsVertexTextures:_,outputColorSpace:null===k?t.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:Ot,map:P,matcap:D,envMap:N,envMapMode:N&&S.mapping,envMapCubeUVHeight:E,aoMap:L,lightMap:z,bumpMap:F,normalMap:B,displacementMap:_&&H,emissiveMap:V,normalMapObjectSpace:B&&1===a.normalMapType,normalMapTangentSpace:B&&0===a.normalMapType,metalnessMap:q,roughnessMap:j,anisotropy:G,anisotropyMap:J,clearcoat:W,clearcoatMap:Z,clearcoatNormalMap:Q,clearcoatRoughnessMap:tt,iridescence:X,iridescenceMap:et,iridescenceThicknessMap:nt,sheen:Y,sheenColorMap:it,sheenRoughnessMap:rt,specularMap:at,specularColorMap:st,specularIntensityMap:ot,transmission:K,transmissionMap:lt,thicknessMap:ut,gradientMap:ct,opaque:!1===a.transparent&&1===a.blending,alphaMap:ht,alphaTest:ft,alphaHash:_t,combine:a.combine,mapUv:P&&m(a.map.channel),aoMapUv:L&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:F&&m(a.bumpMap.channel),normalMapUv:B&&m(a.normalMap.channel),displacementMapUv:H&&m(a.displacementMap.channel),emissiveMapUv:V&&m(a.emissiveMap.channel),metalnessMapUv:q&&m(a.metalnessMap.channel),roughnessMapUv:j&&m(a.roughnessMap.channel),anisotropyMapUv:J&&m(a.anisotropyMap.channel),clearcoatMapUv:Z&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:it&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:rt&&m(a.sheenRoughnessMap.channel),specularMapUv:at&&m(a.specularMap.channel),specularColorMapUv:st&&m(a.specularColorMap.channel),specularIntensityMapUv:ot&&m(a.specularIntensityMap.channel),transmissionMapUv:lt&&m(a.transmissionMap.channel),thicknessMapUv:ut&&m(a.thicknessMap.channel),alphaMapUv:ht&&m(a.alphaMap.channel),vertexTangents:!!w.attributes.tangent&&(B||G),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,vertexUv1s:pt,vertexUv2s:mt,vertexUv3s:gt,pointsUvs:!0===v.isPoints&&!!w.attributes.uv&&(P||ht),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:C,morphTextureStride:I,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:c,useLegacyLights:t.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:dt&&!0===a.extensions.derivatives,extensionFragDepth:dt&&!0===a.extensions.fragDepth,extensionDrawBuffers:dt&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:dt&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0),e.supportsVertexTextures&&o.enable(1),e.instancing&&o.enable(2),e.instancingColor&&o.enable(3),e.matcap&&o.enable(4),e.envMap&&o.enable(5),e.normalMapObjectSpace&&o.enable(6),e.normalMapTangentSpace&&o.enable(7),e.clearcoat&&o.enable(8),e.iridescence&&o.enable(9),e.alphaTest&&o.enable(10),e.vertexColors&&o.enable(11),e.vertexAlphas&&o.enable(12),e.vertexUv1s&&o.enable(13),e.vertexUv2s&&o.enable(14),e.vertexUv3s&&o.enable(15),e.vertexTangents&&o.enable(16),e.anisotropy&&o.enable(17),t.push(o.mask),o.disableAll(),e.fog&&o.enable(0),e.useFog&&o.enable(1),e.flatShading&&o.enable(2),e.logarithmicDepthBuffer&&o.enable(3),e.skinning&&o.enable(4),e.morphTargets&&o.enable(5),e.morphNormals&&o.enable(6),e.morphColors&&o.enable(7),e.premultipliedAlpha&&o.enable(8),e.shadowMapEnabled&&o.enable(9),e.useLegacyLights&&o.enable(10),e.doubleSided&&o.enable(11),e.flipSided&&o.enable(12),e.useDepthPacking&&o.enable(13),e.dithering&&o.enable(14),e.transmission&&o.enable(15),e.sheen&&o.enable(16),e.opaque&&o.enable(17),e.pointsUvs&&o.enable(18),t.push(o.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=sr[e];n=Fi.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=u.length;t<e;t++){const e=u[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new ns(t,n,e,a),u.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:u,dispose:function(){l.dispose()}}}function os(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function ls(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function us(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function cs(){const t=[];let e=0;const n=[],i=[],r=[];function a(n,i,r,a,s,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,s,o,l,u){const c=a(t,e,s,o,l,u);s.transmission>0?i.push(c):!0===s.transparent?r.push(c):n.push(c)},unshift:function(t,e,s,o,l,u){const c=a(t,e,s,o,l,u);s.transmission>0?i.unshift(c):!0===s.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||ls),i.length>1&&i.sort(e||us),r.length>1&&r.sort(e||us)}}}function hs(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new cs,t.set(e,[r])):n>=i.length?(r=new cs,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function fs(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new $e,color:new Yn};break;case"SpotLight":n={position:new $e,direction:new $e,color:new Yn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new $e,color:new Yn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new $e,skyColor:new Yn,groundColor:new Yn};break;case"RectAreaLight":n={color:new Yn,position:new $e,halfWidth:new $e,halfHeight:new $e}}return t[e.id]=n,n}}}let _s=0;function ds(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function ps(t,e){const n=new fs,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new te};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new te,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)r.probe.push(new $e);const a=new $e,s=new an,o=new an;return{setup:function(a,s){let o=0,l=0,u=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,h=0,f=0,_=0,d=0,p=0,m=0,g=0,v=0,y=0;a.sort(ds);const w=!0===s?Math.PI:1;for(let t=0,e=a.length;t<e;t++){const e=a[t],s=e.color,b=e.intensity,x=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=s.r*b*w,l+=s.g*b*w,u+=s.b*b*w;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*w),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=S,r.directionalShadowMatrix[c]=e.shadow.matrix,p++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(b*w),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[f]=t;const a=e.shadow;if(e.map&&(r.spotLightMap[v]=e.map,v++,a.updateMatrices(e),e.castShadow&&y++),r.spotLightMatrix[f]=a.matrix,e.castShadow){const t=i.get(e);t.shadowBias=a.bias,t.shadowNormalBias=a.normalBias,t.shadowRadius=a.radius,t.shadowMapSize=a.mapSize,r.spotShadow[f]=t,r.spotShadowMap[f]=S,g++}f++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[_]=t,_++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*w),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=S,r.pointShadowMatrix[h]=e.shadow.matrix,m++}r.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*w),t.groundColor.copy(e.groundColor).multiplyScalar(b*w),r.hemi[d]=t,d++}}_>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=ar.LTC_FLOAT_1,r.rectAreaLTC2=ar.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ar.LTC_HALF_1,r.rectAreaLTC2=ar.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=u;const b=r.hash;b.directionalLength===c&&b.pointLength===h&&b.spotLength===f&&b.rectAreaLength===_&&b.hemiLength===d&&b.numDirectionalShadows===p&&b.numPointShadows===m&&b.numSpotShadows===g&&b.numSpotMaps===v||(r.directional.length=c,r.spot.length=f,r.rectArea.length=_,r.point.length=h,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=g+v-y,r.spotLightMap.length=v,r.numSpotLightShadowsWithMaps=y,b.directionalLength=c,b.pointLength=h,b.spotLength=f,b.rectAreaLength=_,b.hemiLength=d,b.numDirectionalShadows=p,b.numPointShadows=m,b.numSpotShadows=g,b.numSpotMaps=v,r.version=_s++)},setupView:function(t,e){let n=0,i=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let e=0,f=t.length;e<f;e++){const f=t[e];if(f.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(f.matrixWorld),a.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),n++}else if(f.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(f.matrixWorld),a.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),l++}else if(f.isRectAreaLight){const t=r.rectArea[u];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),o.identity(),s.copy(f.matrixWorld),s.premultiply(h),o.extractRotation(s),t.halfWidth.set(.5*f.width,0,0),t.halfHeight.set(0,.5*f.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),u++}else if(f.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),i++}else if(f.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(f.matrixWorld),t.direction.transformDirection(h),c++}}},state:r}}function ms(t,e){const n=new ps(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function gs(t,e){let n=new WeakMap;return{get:function(i,r=0){const a=n.get(i);let s;return void 0===a?(s=new ms(t,e),n.set(i,[s])):r>=a.length?(s=new ms(t,e),a.push(s)):s=a[r],s},dispose:function(){n=new WeakMap}}}class vs extends qn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ys extends qn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function ws(t,e,n){let r=new tr;const s=new te,o=new te,l=new Se,u=new vs({depthPacking:3201}),c=new ys,h={},f=n.maxTextureSize,_={0:1,1:0,2:2},d=new Bi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new te},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const m=new mi;m.setAttribute("position",new ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Ui(m,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i;let y=this.type;function w(n,i){const r=e.update(g);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ee(s.x,s.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,d,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,p,g,null)}function b(e,n,i,r){let s=null;const o=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===i.isPointLight?c:u,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=s.uuid,e=n.uuid;let i=h[t];void 0===i&&(i={},h[t]=i);let r=i[e];void 0===r&&(r=s.clone(),i[e]=r),s=r}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=r===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:_[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial&&(t.properties.get(s).light=i),s}function x(n,i,s,o,l){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===a)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let a=0,u=e.length;a<u;a++){const u=e[a],c=r[u.materialIndex];if(c&&c.visible){const e=b(n,c,o,l);t.renderBufferDirect(s,null,i,e,n,u)}}}else if(r.visible){const e=b(n,r,o,l);t.renderBufferDirect(s,null,i,e,n,null)}}const u=n.children;for(let t=0,e=u.length;t<e;t++)x(u[t],i,s,o,l)}this.render=function(e,n,i){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===e.length)return;const u=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),_=t.state;_.setBlending(0),_.buffers.color.setClear(1,1,1,1),_.buffers.depth.setTest(!0),_.setScissorTest(!1);const d=y!==a&&this.type===a,p=y===a&&this.type!==a;for(let u=0,c=e.length;u<c;u++){const c=e[u],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;s.copy(h.mapSize);const m=h.getFrameExtents();if(s.multiply(m),o.copy(h.mapSize),(s.x>f||s.y>f)&&(s.x>f&&(o.x=Math.floor(f/m.x),s.x=o.x*m.x,h.mapSize.x=o.x),s.y>f&&(o.y=Math.floor(f/m.y),s.y=o.y*m.y,h.mapSize.y=o.y)),null===h.map||!0===d||!0===p){const t=this.type!==a?{minFilter:M,magFilter:M}:{};null!==h.map&&h.map.dispose(),h.map=new Ee(s.x,s.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const g=h.getViewportCount();for(let t=0;t<g;t++){const e=h.getViewport(t);l.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),_.viewport(l),h.updateMatrices(c,t),r=h.getFrustum(),x(n,i,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===a&&w(h,i),h.needsUpdate=!1}y=this.type,v.needsUpdate=!1,t.setRenderTarget(u,c,h)}}function bs(t,e,n){const i=n.isWebGL2,r=new function(){let e=!1;const n=new Se;let i=null;const r=new Se(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,s,o){!0===o&&(e*=s,i*=s,a*=s),n.set(e,i,a,s),!1===r.equals(n)&&(t.clearColor(e,i,a,s),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(e){e?B(t.DEPTH_TEST):H(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){let e=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(n){e||(n?B(t.STENCIL_TEST):H(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&a===s||(t.stencilFunc(e,n,s),i=e,r=n,a=s)},setOp:function(e,n,i){s===e&&o===n&&l===i||(t.stencilOp(e,n,i),s=e,o=n,l=i)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null}}},l=new WeakMap,u=new WeakMap;let c={},h={},f=new WeakMap,_=[],d=null,p=!1,m=null,g=null,v=null,y=null,w=null,b=null,x=null,S=!1,E=null,M=null,T=null,C=null,$=null;const A=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,O=0;const I=t.getParameter(t.VERSION);-1!==I.indexOf("WebGL")?(O=parseFloat(/^WebGL (\d)/.exec(I)[1]),R=O>=1):-1!==I.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),R=O>=2);let k=null,U={};const P=t.getParameter(t.SCISSOR_BOX),D=t.getParameter(t.VIEWPORT),N=(new Se).fromArray(P),L=(new Se).fromArray(D);function z(e,n,r,a){const s=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<r;o++)!i||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage3D(n,0,t.RGBA,1,1,a,0,t.RGBA,t.UNSIGNED_BYTE,s);return o}const F={};function B(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function H(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}F[t.TEXTURE_2D]=z(t.TEXTURE_2D,t.TEXTURE_2D,1),F[t.TEXTURE_CUBE_MAP]=z(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(F[t.TEXTURE_2D_ARRAY]=z(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),F[t.TEXTURE_3D]=z(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),B(t.DEPTH_TEST),a.setFunc(3),G(!1),W(1),B(t.CULL_FACE),j(0);const V={[s]:t.FUNC_ADD,101:t.FUNC_SUBTRACT,102:t.FUNC_REVERSE_SUBTRACT};if(i)V[103]=t.MIN,V[104]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(V[103]=t.MIN_EXT,V[104]=t.MAX_EXT)}const q={200:t.ZERO,201:t.ONE,202:t.SRC_COLOR,204:t.SRC_ALPHA,210:t.SRC_ALPHA_SATURATE,208:t.DST_COLOR,206:t.DST_ALPHA,203:t.ONE_MINUS_SRC_COLOR,205:t.ONE_MINUS_SRC_ALPHA,209:t.ONE_MINUS_DST_COLOR,207:t.ONE_MINUS_DST_ALPHA};function j(e,n,i,r,a,o,l,u){if(0!==e){if(!1===p&&(B(t.BLEND),p=!0),5===e)a=a||n,o=o||i,l=l||r,n===g&&a===w||(t.blendEquationSeparate(V[n],V[a]),g=n,w=a),i===v&&r===y&&o===b&&l===x||(t.blendFuncSeparate(q[i],q[r],q[o],q[l]),v=i,y=r,b=o,x=l),m=e,S=!1;else if(e!==m||u!==S){if(g===s&&w===s||(t.blendEquation(t.FUNC_ADD),g=s,w=s),u)switch(e){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,b=null,x=null,m=e,S=u}}else!0===p&&(H(t.BLEND),p=!1)}function G(e){E!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),E=e)}function W(e){0!==e?(B(t.CULL_FACE),e!==M&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):H(t.CULL_FACE),M=e}function X(e,n,i){e?(B(t.POLYGON_OFFSET_FILL),C===n&&$===i||(t.polygonOffset(n,i),C=n,$=i)):H(t.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:a,stencil:o},enable:B,disable:H,bindFramebuffer:function(e,n){return h[e]!==n&&(t.bindFramebuffer(e,n),h[e]=n,i&&(e===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let a=_,s=!1;if(i)if(a=f.get(r),void 0===a&&(a=[],f.set(r,a)),i.isWebGLMultipleRenderTargets){const e=i.texture;if(a.length!==e.length||a[0]!==t.COLOR_ATTACHMENT0){for(let n=0,i=e.length;n<i;n++)a[n]=t.COLOR_ATTACHMENT0+n;a.length=e.length,s=!0}}else a[0]!==t.COLOR_ATTACHMENT0&&(a[0]=t.COLOR_ATTACHMENT0,s=!0);else a[0]!==t.BACK&&(a[0]=t.BACK,s=!0);s&&(n.isWebGL2?t.drawBuffers(a):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:j,setMaterial:function(e,n){2===e.side?H(t.CULL_FACE):B(t.CULL_FACE);let i=1===e.side;n&&(i=!i),G(i),1===e.blending&&!1===e.transparent?j(0):j(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);const s=e.stencilWrite;o.setTest(s),s&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(t.SAMPLE_ALPHA_TO_COVERAGE):H(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:W,setLineWidth:function(e){e!==T&&(R&&t.lineWidth(e),T=e)},setPolygonOffset:X,setScissorTest:function(e){e?B(t.SCISSOR_TEST):H(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+A-1),k!==e&&(t.activeTexture(e),k=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===k?t.TEXTURE0+A-1:k);let r=U[i];void 0===r&&(r={type:void 0,texture:void 0},U[i]=r),r.type===e&&r.texture===n||(k!==i&&(t.activeTexture(i),k=i),t.bindTexture(e,n||F[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=U[k];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let i=u.get(n);void 0===i&&(i=new WeakMap,u.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=u.get(n).get(e);l.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),l.set(n,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===L.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),L.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===i&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},k=null,U={},h={},f=new WeakMap,_=[],d=null,p=!1,m=null,g=null,v=null,y=null,w=null,b=null,x=null,S=!1,E=null,M=null,T=null,C=null,$=null,N.set(0,0,t.canvas.width,t.canvas.height),L.set(0,0,t.canvas.width,t.canvas.height),r.reset(),a.reset(),o.reset()}}}function xs(t,e,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,h=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,_="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function v(t,e){return g?new OffscreenCanvas(t,e):se("canvas")}function y(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Kt:Math.floor,a=i(r*t.width),s=i(r*t.height);void 0===p&&(p=v(a,s));const o=n?v(a,s):p;return o.width=a,o.height=s,o.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function w(t){return Xt(t.width)&&Xt(t.height)}function b(t,e){return t.generateMipmaps&&e&&t.minFilter!==M&&t.minFilter!==$}function k(e){t.generateMipmap(e)}function N(n,i,r,a,s=!1){if(!1===o)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return i===t.RED&&(r===t.FLOAT&&(l=t.R32F),r===t.HALF_FLOAT&&(l=t.R16F),r===t.UNSIGNED_BYTE&&(l=t.R8)),i===t.RG&&(r===t.FLOAT&&(l=t.RG32F),r===t.HALF_FLOAT&&(l=t.RG16F),r===t.UNSIGNED_BYTE&&(l=t.RG8)),i===t.RGBA&&(r===t.FLOAT&&(l=t.RGBA32F),r===t.HALF_FLOAT&&(l=t.RGBA16F),r===t.UNSIGNED_BYTE&&(l=a===Rt&&!1===s?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)),l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function L(t,e,n){return!0===b(t,n)||t.isFramebufferTexture&&t.minFilter!==M&&t.minFilter!==$?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function V(e){return e===M||e===T||e===C?t.NEAREST:t.LINEAR}function q(t){const e=t.target;e.removeEventListener("dispose",q),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=m.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&G(t),0===Object.keys(r).length&&m.delete(n)}i.remove(t)}(e),e.isVideoTexture&&d.delete(e)}function j(e){const n=e.target;n.removeEventListener("dispose",j),function(e){const n=e.texture,r=i.get(e),a=i.get(n);if(void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),s.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}(n)}function G(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete m.get(r)[n.__cacheKey],s.memory.textures--}let W=0;function X(e,r){const a=i.get(e);if(e.isVideoTexture&&function(t){const e=s.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void tt(a,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,a.__webglTexture,t.TEXTURE0+r)}const Y={[x]:t.REPEAT,[S]:t.CLAMP_TO_EDGE,[E]:t.MIRRORED_REPEAT},K={[M]:t.NEAREST,[T]:t.NEAREST_MIPMAP_NEAREST,[C]:t.NEAREST_MIPMAP_LINEAR,[$]:t.LINEAR,[A]:t.LINEAR_MIPMAP_NEAREST,[R]:t.LINEAR_MIPMAP_LINEAR},J={512:t.NEVER,519:t.ALWAYS,513:t.LESS,515:t.LEQUAL,514:t.EQUAL,518:t.GEQUAL,516:t.GREATER,517:t.NOTEQUAL};function Z(n,a,s){if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,Y[a.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,Y[a.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,Y[a.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,K[a.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,K[a.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),a.wrapS===S&&a.wrapT===S||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,V(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,V(a.minFilter)),a.minFilter!==M&&a.minFilter!==$&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,J[a.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(a.magFilter===M)return;if(a.minFilter!==C&&a.minFilter!==R)return;if(a.type===P&&!1===e.has("OES_texture_float_linear"))return;if(!1===o&&a.type===D&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function Q(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",q));const r=n.source;let a=m.get(r);void 0===a&&(a={},m.set(r,a));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(o!==e.__cacheKey){void 0===a[o]&&(a[o]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[e.__cacheKey];void 0!==r&&(a[e.__cacheKey].usedTimes--,0===r.usedTimes&&G(n)),e.__cacheKey=o,e.__webglTexture=a[o].texture}return i}function tt(e,r,s){let l=t.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=t.TEXTURE_3D);const u=Q(e,r),h=r.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+s);const f=i.get(h);if(h.version!==f.__version||!0===u){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=function(t){return!o&&(t.wrapS!==S||t.wrapT!==S||t.minFilter!==M&&t.minFilter!==$)}(r)&&!1===w(r.image);let i=y(r.image,e,!1,c);i=st(r,i);const _=w(i)||o,d=a.convert(r.format,r.colorSpace);let p,m=a.convert(r.type),g=N(r.internalFormat,d,m,r.colorSpace);Z(l,r,_);const v=r.mipmaps,x=o&&!0!==r.isVideoTexture,E=void 0===f.__version||!0===u,T=L(r,i,_);if(r.isDepthTexture)g=t.DEPTH_COMPONENT,o?g=r.type===P?t.DEPTH_COMPONENT32F:r.type===U?t.DEPTH_COMPONENT24:r.type===z?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:r.type===P&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===B&&g===t.DEPTH_COMPONENT&&r.type!==I&&r.type!==U&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=U,m=a.convert(r.type)),r.format===H&&g===t.DEPTH_COMPONENT&&(g=t.DEPTH_STENCIL,r.type!==z&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=z,m=a.convert(r.type))),E&&(x?n.texStorage2D(t.TEXTURE_2D,1,g,i.width,i.height):n.texImage2D(t.TEXTURE_2D,0,g,i.width,i.height,0,d,m,null));else if(r.isDataTexture)if(v.length>0&&_){x&&E&&n.texStorage2D(t.TEXTURE_2D,T,g,v[0].width,v[0].height);for(let e=0,i=v.length;e<i;e++)p=v[e],x?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p.width,p.height,d,m,p.data):n.texImage2D(t.TEXTURE_2D,e,g,p.width,p.height,0,d,m,p.data);r.generateMipmaps=!1}else x?(E&&n.texStorage2D(t.TEXTURE_2D,T,g,i.width,i.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,i.width,i.height,d,m,i.data)):n.texImage2D(t.TEXTURE_2D,0,g,i.width,i.height,0,d,m,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){x&&E&&n.texStorage3D(t.TEXTURE_2D_ARRAY,T,g,v[0].width,v[0].height,i.depth);for(let e=0,a=v.length;e<a;e++)p=v[e],r.format!==F?null!==d?x?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,p.width,p.height,i.depth,d,p.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,g,p.width,p.height,i.depth,0,p.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,p.width,p.height,i.depth,d,m,p.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,g,p.width,p.height,i.depth,0,d,m,p.data)}else{x&&E&&n.texStorage2D(t.TEXTURE_2D,T,g,v[0].width,v[0].height);for(let e=0,i=v.length;e<i;e++)p=v[e],r.format!==F?null!==d?x?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(t.TEXTURE_2D,e,g,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p.width,p.height,d,m,p.data):n.texImage2D(t.TEXTURE_2D,e,g,p.width,p.height,0,d,m,p.data)}else if(r.isDataArrayTexture)x?(E&&n.texStorage3D(t.TEXTURE_2D_ARRAY,T,g,i.width,i.height,i.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,i.width,i.height,i.depth,d,m,i.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,g,i.width,i.height,i.depth,0,d,m,i.data);else if(r.isData3DTexture)x?(E&&n.texStorage3D(t.TEXTURE_3D,T,g,i.width,i.height,i.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,i.width,i.height,i.depth,d,m,i.data)):n.texImage3D(t.TEXTURE_3D,0,g,i.width,i.height,i.depth,0,d,m,i.data);else if(r.isFramebufferTexture){if(E)if(x)n.texStorage2D(t.TEXTURE_2D,T,g,i.width,i.height);else{let e=i.width,r=i.height;for(let i=0;i<T;i++)n.texImage2D(t.TEXTURE_2D,i,g,e,r,0,d,m,null),e>>=1,r>>=1}}else if(v.length>0&&_){x&&E&&n.texStorage2D(t.TEXTURE_2D,T,g,v[0].width,v[0].height);for(let e=0,i=v.length;e<i;e++)p=v[e],x?n.texSubImage2D(t.TEXTURE_2D,e,0,0,d,m,p):n.texImage2D(t.TEXTURE_2D,e,g,d,m,p);r.generateMipmaps=!1}else x?(E&&n.texStorage2D(t.TEXTURE_2D,T,g,i.width,i.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,d,m,i)):n.texImage2D(t.TEXTURE_2D,0,g,d,m,i);b(r,_)&&k(l),f.__version=h.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function et(e,r,s,o,l){const u=a.convert(s.format,s.colorSpace),c=a.convert(s.type),h=N(s.internalFormat,u,c,s.colorSpace);i.get(r).__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,h,r.width,r.height,0,u,c,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),at(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0,rt(r)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function nt(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let r=t.DEPTH_COMPONENT16;if(i||at(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===P?r=t.DEPTH_COMPONENT32F:e.type===U&&(r=t.DEPTH_COMPONENT24));const i=rt(n);at(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,r,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,i,r,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,r,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=rt(n);i&&!1===at(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):at(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<e.length;r++){const s=e[r],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),u=N(s.internalFormat,o,l,s.colorSpace),c=rt(n);i&&!1===at(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,u,n.width,n.height):at(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function it(e){const r=i.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),X(r.depthTexture,0);const a=i.get(r.depthTexture).__webglTexture,s=rt(r);if(r.depthTexture.format===B)at(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0,s):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==H)throw new Error("Unknown depthTexture format");at(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0,s):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,e)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),nt(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),nt(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function rt(t){return Math.min(h,t.samples)}function at(t){const n=i.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function st(t,n){const i=t.colorSpace,r=t.format,a=t.type;return!0===t.isCompressedTexture||t.format===Dt||i!==Ot&&i!==At&&(i===Rt?!1===o?!0===e.has("EXT_sRGB")&&r===F?(t.format=Dt,t.minFilter=$,t.generateMipmaps=!1):n=ge.sRGBToLinear(n):r===F&&a===O||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const t=W;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),W+=1,t},this.resetTextureUnits=function(){W=0},this.setTexture2D=X,this.setTexture2DArray=function(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?tt(a,e,r):n.bindTexture(t.TEXTURE_2D_ARRAY,a.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?tt(a,e,r):n.bindTexture(t.TEXTURE_3D,a.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?function(e,r,s){if(6!==r.image.length)return;const l=Q(e,r),c=r.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+s);const h=i.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,f=[];for(let t=0;t<6;t++)f[t]=e||i?i?r.image[t].image:r.image[t]:y(r.image[t],!1,!0,u),f[t]=st(r,f[t]);const _=f[0],d=w(_)||o,p=a.convert(r.format,r.colorSpace),m=a.convert(r.type),g=N(r.internalFormat,p,m,r.colorSpace),v=o&&!0!==r.isVideoTexture,x=void 0===h.__version||!0===l;let S,E=L(r,_,d);if(Z(t.TEXTURE_CUBE_MAP,r,d),e){v&&x&&n.texStorage2D(t.TEXTURE_CUBE_MAP,E,g,_.width,_.height);for(let e=0;e<6;e++){S=f[e].mipmaps;for(let i=0;i<S.length;i++){const a=S[i];r.format!==F?null!==p?v?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,a.width,a.height,p,a.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,g,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,a.width,a.height,p,m,a.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,g,a.width,a.height,0,p,m,a.data)}}}else{S=r.mipmaps,v&&x&&(S.length>0&&E++,n.texStorage2D(t.TEXTURE_CUBE_MAP,E,g,f[0].width,f[0].height));for(let e=0;e<6;e++)if(i){v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,f[e].width,f[e].height,p,m,f[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,g,f[e].width,f[e].height,0,p,m,f[e].data);for(let i=0;i<S.length;i++){const r=S[i].image[e].image;v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,r.width,r.height,p,m,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,g,r.width,r.height,0,p,m,r.data)}}else{v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,p,m,f[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,g,p,m,f[e]);for(let i=0;i<S.length;i++){const r=S[i];v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,p,m,r.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,g,p,m,r.image[e])}}}b(r,d)&&k(t.TEXTURE_CUBE_MAP),h.__version=c.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(s,e,r):n.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture,t.TEXTURE0+r)},this.rebindTextures=function(e,n,r){const a=i.get(e);void 0!==n&&et(a.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==r&&it(e)},this.setupRenderTarget=function(e){const l=e.texture,u=i.get(e),c=i.get(l);e.addEventListener("dispose",j),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,f=!0===e.isWebGLMultipleRenderTargets,_=w(e)||o;if(h){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(u.__webglFramebuffer=t.createFramebuffer(),f)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===at(e)){const i=f?l:[l];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];u.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=N(r.internalFormat,s,o,r.colorSpace,!0===e.isXRRenderTarget),c=rt(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,c,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,u.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),nt(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture),Z(t.TEXTURE_CUBE_MAP,l,_);for(let n=0;n<6;n++)et(u.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n);b(l,_)&&k(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(f){const r=e.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i.get(s);n.bindTexture(t.TEXTURE_2D,o.__webglTexture),Z(t.TEXTURE_2D,s,_),et(u.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+a,t.TEXTURE_2D),b(s,_)&&k(t.TEXTURE_2D)}n.unbindTexture()}else{let i=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?i=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,c.__webglTexture),Z(i,l,_),et(u.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,i),b(l,_)&&k(i),n.unbindTexture()}e.depthBuffer&&it(e)},this.updateRenderTargetMipmap=function(e){const r=w(e)||o,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(b(o,r)){const r=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),k(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===at(e)){const r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=e.width,s=e.height;let o=t.COLOR_BUFFER_BIT;const l=[],u=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=i.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<r.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(u);const f=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===f&&(e.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(o|=t.STENCIL_BUFFER_BIT)),h&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,c.__webglColorRenderbuffer[n]),!0===f&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[u]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[u])),h){const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,a,s,0,0,a,s,o,t.NEAREST),_&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<r.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,c.__webglColorRenderbuffer[e]);const a=i.get(r[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,a,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=it,this.setupFrameBufferTexture=et,this.useMultisampledRTT=at}function Ss(t,e,n){const i=n.isWebGL2;return{convert:function(n,r=""){let a;if(n===O)return t.UNSIGNED_BYTE;if(n===N)return t.UNSIGNED_SHORT_4_4_4_4;if(n===L)return t.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return t.BYTE;if(1011===n)return t.SHORT;if(n===I)return t.UNSIGNED_SHORT;if(n===k)return t.INT;if(n===U)return t.UNSIGNED_INT;if(n===P)return t.FLOAT;if(n===D)return i?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return t.ALPHA;if(n===F)return t.RGBA;if(1024===n)return t.LUMINANCE;if(1025===n)return t.LUMINANCE_ALPHA;if(n===B)return t.DEPTH_COMPONENT;if(n===H)return t.DEPTH_STENCIL;if(n===Dt)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===n)return t.RED;if(n===V)return t.RED_INTEGER;if(1030===n)return t.RG;if(n===q)return t.RG_INTEGER;if(n===j)return t.RGBA_INTEGER;if(n===G||n===W||n===X||n===Y)if(r===Rt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===G)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===W)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===X)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Y)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===G)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===W)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===X)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Y)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===K||n===J||n===Z||n===Q){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===K)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===J)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Z)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Q)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===tt||n===et){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===tt)return r===Rt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===et)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===nt||n===it||n===rt||n===at||n===st||n===ot||n===lt||n===ut||n===ct||n===ht||n===ft||n===_t||n===dt||n===pt){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===nt)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===it)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===rt)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===at)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===st)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ot)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===lt)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ut)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ct)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ht)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ft)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===_t)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===dt)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===pt)return r===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===mt){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(n===mt)return r===Rt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===n||n===gt||n===vt||n===yt){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===mt)return a.COMPRESSED_RED_RGTC1_EXT;if(n===gt)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===vt)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===yt)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===z?i?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class Es extends Vi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Ms extends Rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ts={type:"move"};class Cs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ms,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ms,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $e,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $e),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ms,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $e,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $e),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){a=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n),r=this._getHandJoint(l,i);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,u=.005;l.inputState.pinching&&s>o+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=o-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Ts)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Ms;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class $s extends xe{constructor(t,e,n,i,r,a,s,o,l,u){if((u=void 0!==u?u:B)!==B&&u!==H)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===B&&(n=U),void 0===n&&u===H&&(n=z),super(null,i,r,a,s,o,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:M,this.minFilter=void 0!==o?o:M,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class As extends zt{constructor(t,e){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,u=null,c=null,h=null,f=null,_=null;const d=e.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new Vi;y.layers.enable(1),y.viewport=new Se;const w=new Vi;w.layers.enable(2),w.viewport=new Se;const b=[y,w],x=new Es;x.layers.enable(1),x.layers.enable(2);let S=null,E=null;function M(t){const e=v.indexOf(t.inputSource);if(-1===e)return;const n=g[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||a),n.dispatchEvent({type:t.type,data:t.inputSource}))}function T(){i.removeEventListener("select",M),i.removeEventListener("selectstart",M),i.removeEventListener("selectend",M),i.removeEventListener("squeeze",M),i.removeEventListener("squeezestart",M),i.removeEventListener("squeezeend",M),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",C);for(let t=0;t<g.length;t++){const e=v[t];null!==e&&(v[t]=null,g[t].disconnect(e))}S=null,E=null,t.setRenderTarget(p),f=null,h=null,c=null,i=null,m=null,k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=v.indexOf(n);i>=0&&(v[i]=null,g[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=v.indexOf(n);if(-1===i){for(let t=0;t<g.length;t++){if(t>=v.length){v.push(n),i=t;break}if(null===v[t]){v[t]=n,i=t;break}}if(-1===i)break}const r=g[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new Cs,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new Cs,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new Cs,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return c},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(u){if(i=u,null!==i){if(p=t.getRenderTarget(),i.addEventListener("select",M),i.addEventListener("selectstart",M),i.addEventListener("selectend",M),i.addEventListener("squeeze",M),i.addEventListener("squeezestart",M),i.addEventListener("squeezeend",M),i.addEventListener("end",T),i.addEventListener("inputsourceschange",C),!0!==d.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||d.antialias,alpha:!0,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:f}),m=new Ee(f.framebufferWidth,f.framebufferHeight,{format:F,type:O,colorSpace:t.outputColorSpace,stencilBuffer:d.stencil})}else{let n=null,a=null,s=null;d.depth&&(s=d.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=d.stencil?H:B,a=d.stencil?z:U);const o={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:r};c=new XRWebGLBinding(i,e),h=c.createProjectionLayer(o),i.updateRenderState({layers:[h]}),m=new Ee(h.textureWidth,h.textureHeight,{format:F,type:O,depthTexture:new $s(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:d.stencil,colorSpace:t.outputColorSpace,samples:d.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=h.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),k.setContext(i),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const $=new $e,A=new $e;function R(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;x.near=w.near=y.near=t.near,x.far=w.far=y.far=t.far,S===x.near&&E===x.far||(i.updateRenderState({depthNear:x.near,depthFar:x.far}),S=x.near,E=x.far);const e=t.parent,n=x.cameras;R(x,e);for(let t=0;t<n.length;t++)R(n[t],e);2===n.length?function(t,e,n){$.setFromMatrixPosition(e.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const i=$.distanceTo(A),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],f=s*c,_=s*h,d=i/(-c+h),p=d*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(p),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const m=s+d,g=o+d,v=f-p,y=_+(i-p),w=l*o/g*m,b=u*o/g*m;t.projectionMatrix.makePerspective(v,y,w,b,m,g),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(x,y,w):x.projectionMatrix.copy(y.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*Vt*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,x,e)},this.getCamera=function(){return x},this.getFoveation=function(){if(null!==h||null!==f)return o},this.setFoveation=function(t){o=t,null!==h&&(h.fixedFoveation=t),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=t)};let I=null;const k=new er;k.setAnimationLoop((function(e,i){if(u=i.getViewerPose(l||a),_=i,null!==u){const e=u.views;null!==f&&(t.setRenderTargetFramebuffer(m,f.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let a=null;if(null!==f)a=f.getViewport(r);else{const e=c.getViewSubImage(h,r);a=e.viewport,0===i&&(t.setRenderTargetTextures(m,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let s=b[i];void 0===s&&(s=new Vi,s.layers.enable(i),s.viewport=new Se,b[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&(x.matrix.copy(s.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),!0===n&&x.cameras.push(s)}}for(let t=0;t<g.length;t++){const e=v[t],n=g[t];null!==e&&void 0!==n&&n.update(e,i,l||a)}I&&I(e,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),_=null})),this.setAnimationLoop=function(t){I=t},this.dispose=function(){}}}function Rs(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,1===r.side&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),1===r.side&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const a=e.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*e,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,zi(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,a,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(t,r):r.isMeshToonMaterial?(i(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(i(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(i(t,r),function(t,i){t.metalness.value=i.metalness,i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,t.metalnessMapTransform)),t.roughness.value=i.roughness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,t.roughnessMapTransform));e.get(i).envMap&&(t.envMapIntensity.value=i.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,o)):r.isMeshMatcapMaterial?(i(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?i(t,r):r.isMeshDistanceMaterial?(i(t,r),function(t,n){const i=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(i.matrixWorld),t.nearDistance.value=i.shadow.camera.near,t.farDistance.value=i.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?i(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,a,s):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Os(t,e,n,i){let r={},a={},s=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e,n){const i=t.value;if(void 0===n[e]){if("number"==typeof i)n[e]=i;else{const t=Array.isArray(i)?i:[i],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());n[e]=r}return!0}if("number"==typeof i){if(n[e]!==i)return n[e]=i,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],r=Array.isArray(i)?i:[i];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(r[e]))return n.copy(r[e]),!0}}return!1}function u(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const n=e.target;n.removeEventListener("dispose",c);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,h){let f=r[n.id];void 0===f&&(function(t){const e=t.uniforms;let n=0;let i=0;for(let t=0,r=e.length;t<r;t++){const r=e[t],a={boundary:0,storage:0},s=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=s.length;t<e;t++){const e=u(s[t]);a.boundary+=e.boundary,a.storage+=e.storage}r.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,t>0&&(i=n%16,0!==i&&16-i-a.boundary<0&&(n+=16-i,r.__offset=n)),n+=a.storage}i=n%16,i>0&&(n+=16-i),t.__size=n,t.__cache={}}(n),f=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,a=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,r,a),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=f,n.addEventListener("dispose",c));const _=h.program;i.updateUBOMapping(n,_);const d=e.render.frame;a[n.id]!==d&&(function(e){const n=r[e.id],i=e.uniforms,a=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let e=0,n=i.length;e<n;e++){const n=i[e];if(!0===l(n,e,a)){const e=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let r=0;for(let a=0;a<i.length;a++){const s=i[a],o=u(s);"number"==typeof s?(n.__data[0]=s,t.bufferSubData(t.UNIFORM_BUFFER,e+r,n.__data)):s.isMatrix3?(n.__data[0]=s.elements[0],n.__data[1]=s.elements[1],n.__data[2]=s.elements[2],n.__data[3]=s.elements[0],n.__data[4]=s.elements[3],n.__data[5]=s.elements[4],n.__data[6]=s.elements[5],n.__data[7]=s.elements[0],n.__data[8]=s.elements[6],n.__data[9]=s.elements[7],n.__data[10]=s.elements[8],n.__data[11]=s.elements[0]):(s.toArray(n.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,n.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),a[n.id]=d)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);s=[],r={},a={}}}}function Is(){const t=se("canvas");return t.style.display="block",t}class ks{constructor(t={}){const{canvas:e=Is(),context:i=null,depth:r=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1}=t;let _;this.isWebGLRenderer=!0,_=null!==i?i.getContextAttributes().alpha:s;const d=new Uint32Array(4),p=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Rt,this.useLegacyLights=!0,this.toneMapping=c,this.toneMappingExposure=1;const w=this;let b=!1,x=0,S=0,E=null,M=-1,T=null;const C=new Se,$=new Se;let A=null;const k=new Yn(0);let B=0,H=e.width,G=e.height,W=1,X=null,Y=null;const K=new Se(0,0,H,G),J=new Se(0,0,H,G);let Z=!1;const Q=new tr;let tt=!1,et=!1,nt=null;const it=new an,rt=new te,at=new $e,st={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ot(){return null===E?W:1}let lt,ut,ct,ht,ft,_t,dt,pt,mt,gt,vt,yt,wt,bt,xt,St,Et,Mt,Tt,Ct,$t,At,It,kt,Ut=i;function Pt(t,n){for(let i=0;i<t.length;i++){const r=t[i],a=e.getContext(r,n);if(null!==a)return a}return null}try{const t={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${n}`),e.addEventListener("webglcontextlost",Lt,!1),e.addEventListener("webglcontextrestored",zt,!1),e.addEventListener("webglcontextcreationerror",Ft,!1),null===Ut){const e=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&e.shift(),Ut=Pt(e,t),null===Ut)throw Pt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&Ut instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Ut.getShaderPrecisionFormat&&(Ut.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Dt(){lt=new $r(Ut),ut=new hr(Ut,lt,t),lt.init(ut),At=new Ss(Ut,lt,ut),ct=new bs(Ut,lt,ut),ht=new Or(Ut),ft=new os,_t=new xs(Ut,lt,ct,ft,ut,At,ht),dt=new _r(w),pt=new Cr(w),mt=new nr(Ut,ut),It=new ur(Ut,lt,mt,ut),gt=new Ar(Ut,mt,ht,It),vt=new Pr(Ut,gt,mt,ht),Tt=new Ur(Ut,ut,_t),St=new fr(ft),yt=new ss(w,dt,pt,lt,ut,It,St),wt=new Rs(w,ft),bt=new hs,xt=new gs(lt,ut),Mt=new lr(w,dt,pt,ct,vt,_,l),Et=new ws(w,vt,ut),kt=new Os(Ut,ht,ut,ct),Ct=new cr(Ut,lt,ht,ut),$t=new Rr(Ut,lt,ht,ut),ht.programs=yt.programs,w.capabilities=ut,w.extensions=lt,w.properties=ft,w.renderLists=bt,w.shadowMap=Et,w.state=ct,w.info=ht}Dt();const Nt=new As(w,Ut);function Lt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function zt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=ht.autoReset,e=Et.enabled,n=Et.autoUpdate,i=Et.needsUpdate,r=Et.type;Dt(),ht.autoReset=t,Et.enabled=e,Et.autoUpdate=n,Et.needsUpdate=i,Et.type=r}function Ft(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Bt(t){const e=t.target;e.removeEventListener("dispose",Bt),function(t){(function(t){const e=ft.get(t).programs;void 0!==e&&(e.forEach((function(t){yt.releaseProgram(t)})),t.isShaderMaterial&&yt.releaseShaderCache(t))})(t),ft.remove(t)}(e)}this.xr=Nt,this.getContext=function(){return Ut},this.getContextAttributes=function(){return Ut.getContextAttributes()},this.forceContextLoss=function(){const t=lt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=lt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(t){void 0!==t&&(W=t,this.setSize(H,G,!1))},this.getSize=function(t){return t.set(H,G)},this.setSize=function(t,n,i=!0){Nt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=t,G=n,e.width=Math.floor(t*W),e.height=Math.floor(n*W),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(H*W,G*W).floor()},this.setDrawingBufferSize=function(t,n,i){H=t,G=n,W=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(C)},this.getViewport=function(t){return t.copy(K)},this.setViewport=function(t,e,n,i){t.isVector4?K.set(t.x,t.y,t.z,t.w):K.set(t,e,n,i),ct.viewport(C.copy(K).multiplyScalar(W).floor())},this.getScissor=function(t){return t.copy(J)},this.setScissor=function(t,e,n,i){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,n,i),ct.scissor($.copy(J).multiplyScalar(W).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(t){ct.setScissorTest(Z=t)},this.setOpaqueSort=function(t){X=t},this.setTransparentSort=function(t){Y=t},this.getClearColor=function(t){return t.copy(Mt.getClearColor())},this.setClearColor=function(){Mt.setClearColor.apply(Mt,arguments)},this.getClearAlpha=function(){return Mt.getClearAlpha()},this.setClearAlpha=function(){Mt.setClearAlpha.apply(Mt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let i=0;if(t){let t=!1;if(null!==E){const e=E.texture.format;t=e===j||e===q||e===V}if(t){const t=E.texture.type,e=t===O||t===U||t===I||t===z||t===N||t===L,n=Mt.getClearColor(),i=Mt.getClearAlpha(),r=n.r,a=n.g,s=n.b;e?(d[0]=r,d[1]=a,d[2]=s,d[3]=i,Ut.clearBufferuiv(Ut.COLOR,0,d)):(p[0]=r,p[1]=a,p[2]=s,p[3]=i,Ut.clearBufferiv(Ut.COLOR,0,p))}else i|=Ut.COLOR_BUFFER_BIT}e&&(i|=Ut.DEPTH_BUFFER_BIT),n&&(i|=Ut.STENCIL_BUFFER_BIT),Ut.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Lt,!1),e.removeEventListener("webglcontextrestored",zt,!1),e.removeEventListener("webglcontextcreationerror",Ft,!1),bt.dispose(),xt.dispose(),ft.dispose(),dt.dispose(),pt.dispose(),vt.dispose(),It.dispose(),kt.dispose(),yt.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",Vt),Nt.removeEventListener("sessionend",qt),nt&&(nt.dispose(),nt=null),jt.stop()},this.renderBufferDirect=function(t,e,n,i,r,a){null===e&&(e=st);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,n,i,r){!0!==e.isScene&&(e=st),_t.resetTextureUnits();const a=e.fog,s=i.isMeshStandardMaterial?e.environment:null,o=null===E?w.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:Ot,l=(i.isMeshStandardMaterial?pt:dt).get(i.envMap||s),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,h=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),f=!!n.morphAttributes.position,_=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,p=i.toneMapped?w.toneMapping:c,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=ft.get(i),b=g.state.lights;if(!0===tt&&(!0===et||t!==T)){const e=t===T&&i.id===M;St.setState(i,t,e)}let x=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==o||r.isInstancedMesh&&!1===y.instancing?x=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?x=!0:r.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===i.fog&&y.fog!==a?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===St.numPlanes&&y.numIntersection===St.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==h||y.morphTargets!==f||y.morphNormals!==_||y.morphColors!==d||y.toneMapping!==p||!0===ut.isWebGL2&&y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,y.__version=i.version);let S=y.currentProgram;!0===x&&(S=Jt(i,e,r));let C=!1,$=!1,A=!1;const R=S.getUniforms(),O=y.uniforms;if(ct.useProgram(S.program)&&(C=!0,$=!0,A=!0),i.id!==M&&(M=i.id,$=!0),C||T!==t){if(R.setValue(Ut,"projectionMatrix",t.projectionMatrix),ut.logarithmicDepthBuffer&&R.setValue(Ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),T!==t&&(T=t,$=!0,A=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=R.map.cameraPosition;void 0!==e&&e.setValue(Ut,at.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(Ut,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&R.setValue(Ut,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){R.setOptional(Ut,r,"bindMatrix"),R.setOptional(Ut,r,"bindMatrixInverse");const t=r.skeleton;t&&(ut.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(Ut,"boneTexture",t.boneTexture,_t),R.setValue(Ut,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=n.morphAttributes;var k,U;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===ut.isWebGL2)&&Tt.update(r,n,S),($||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,R.setValue(Ut,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),$&&(R.setValue(Ut,"toneMappingExposure",w.toneMappingExposure),y.needsLights&&(U=A,(k=O).ambientLightColor.needsUpdate=U,k.lightProbe.needsUpdate=U,k.directionalLights.needsUpdate=U,k.directionalLightShadows.needsUpdate=U,k.pointLights.needsUpdate=U,k.pointLightShadows.needsUpdate=U,k.spotLights.needsUpdate=U,k.spotLightShadows.needsUpdate=U,k.rectAreaLights.needsUpdate=U,k.hemisphereLights.needsUpdate=U),a&&!0===i.fog&&wt.refreshFogUniforms(O,a),wt.refreshMaterialUniforms(O,i,W,G,nt),za.upload(Ut,y.uniformsList,O,_t)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(za.upload(Ut,y.uniformsList,O,_t),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&R.setValue(Ut,"center",r.center),R.setValue(Ut,"modelViewMatrix",r.modelViewMatrix),R.setValue(Ut,"normalMatrix",r.normalMatrix),R.setValue(Ut,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(ut.isWebGL2){const n=t[e];kt.update(n,S),kt.bind(n,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}(t,e,n,i,r);ct.setMaterial(i,s);let l=n.index,u=1;!0===i.wireframe&&(l=gt.getWireframeAttribute(n),u=2);const h=n.drawRange,f=n.attributes.position;let _=h.start*u,d=(h.start+h.count)*u;null!==a&&(_=Math.max(_,a.start*u),d=Math.min(d,(a.start+a.count)*u)),null!==l?(_=Math.max(_,0),d=Math.min(d,l.count)):null!=f&&(_=Math.max(_,0),d=Math.min(d,f.count));const p=d-_;if(p<0||p===1/0)return;let m;It.setup(r,i,o,n,l);let v=Ct;if(null!==l&&(m=mt.get(l),v=$t,v.setIndex(m)),r.isMesh)!0===i.wireframe?(ct.setLineWidth(i.wireframeLinewidth*ot()),v.setMode(Ut.LINES)):v.setMode(Ut.TRIANGLES);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),ct.setLineWidth(t*ot()),r.isLineSegments?v.setMode(Ut.LINES):r.isLineLoop?v.setMode(Ut.LINE_LOOP):v.setMode(Ut.LINE_STRIP)}else r.isPoints?v.setMode(Ut.POINTS):r.isSprite&&v.setMode(Ut.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(_,p,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);v.renderInstances(_,p,e)}else v.render(_,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=1,t.needsUpdate=!0,Jt(t,e,n),t.side=0,t.needsUpdate=!0,Jt(t,e,n),t.side=2):Jt(t,e,n)}g=xt.get(t),g.init(),y.push(g),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights(w.useLegacyLights),t.traverse((function(e){const i=e.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++)n(i[r],t,e);else n(i,t,e)})),y.pop(),g=null};let Ht=null;function Vt(){jt.stop()}function qt(){jt.start()}const jt=new er;function Gt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)g.pushLight(t),t.castShadow&&g.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Q.intersectsSprite(t)){i&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(it);const e=vt.update(t),r=t.material;r.visible&&m.push(t,e,r,n,at.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||Q.intersectsObject(t))){const e=vt.update(t),r=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),at.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),at.copy(e.boundingSphere.center)),at.applyMatrix4(t.matrixWorld).applyMatrix4(it)),Array.isArray(r)){const i=e.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&m.push(t,e,o,n,at.z,s)}}else r.visible&&m.push(t,e,r,n,at.z,null)}const r=t.children;for(let t=0,a=r.length;t<a;t++)Gt(r[t],e,n,i)}function Wt(t,e,n,i){const r=t.opaque,a=t.transmissive,s=t.transparent;g.setupLightsView(n),!0===tt&&St.setGlobalState(w.clippingPlanes,n),a.length>0&&function(t,e,n,i){const r=ut.isWebGL2;null===nt&&(nt=new Ee(1,1,{generateMipmaps:!0,type:lt.has("EXT_color_buffer_half_float")?D:O,minFilter:R,samples:r?4:0})),w.getDrawingBufferSize(rt),r?nt.setSize(rt.x,rt.y):nt.setSize(Kt(rt.x),Kt(rt.y));const a=w.getRenderTarget();w.setRenderTarget(nt),w.getClearColor(k),B=w.getClearAlpha(),B<1&&w.setClearColor(16777215,.5),w.clear();const s=w.toneMapping;w.toneMapping=c,Xt(t,n,i),_t.updateMultisampleRenderTarget(nt),_t.updateRenderTargetMipmap(nt);let o=!1;for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.object,s=r.geometry,l=r.material,u=r.group;if(2===l.side&&a.layers.test(i.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Yt(a,n,i,s,l,u),l.side=t,l.needsUpdate=!0,o=!0}}!0===o&&(_t.updateMultisampleRenderTarget(nt),_t.updateRenderTargetMipmap(nt)),w.setRenderTarget(a),w.setClearColor(k,B),w.toneMapping=s}(r,a,e,n),i&&ct.viewport(C.copy(i)),r.length>0&&Xt(r,e,n),a.length>0&&Xt(a,e,n),s.length>0&&Xt(s,e,n),ct.buffers.depth.setTest(!0),ct.buffers.depth.setMask(!0),ct.buffers.color.setMask(!0),ct.setPolygonOffset(!1)}function Xt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,a=t.length;r<a;r++){const a=t[r],s=a.object,o=a.geometry,l=null===i?a.material:i,u=a.group;s.layers.test(n.layers)&&Yt(s,e,n,o,l,u)}}function Yt(t,e,n,i,r,a){t.onBeforeRender(w,e,n,i,r,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(w,e,n,i,t,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,a),r.side=0,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,a),r.side=2):w.renderBufferDirect(n,e,i,r,t,a),t.onAfterRender(w,e,n,i,r,a)}function Jt(t,e,n){!0!==e.isScene&&(e=st);const i=ft.get(t),r=g.state.lights,a=g.state.shadowsArray,s=r.state.version,o=yt.getParameters(t,r.state,a,e,n),l=yt.getProgramCacheKey(o);let u=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?pt:dt).get(t.envMap||i.environment),void 0===u&&(t.addEventListener("dispose",Bt),u=new Map,i.programs=u);let c=u.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===s)return Zt(t,o),c}else o.uniforms=yt.getUniforms(t),t.onBuild(n,o,w),t.onBeforeCompile(o,w),c=yt.acquireProgram(o,l),u.set(l,c),i.uniforms=o.uniforms;const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=St.uniform),Zt(t,o),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=s,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const f=c.getUniforms(),_=za.seqWithValue(f.seq,h);return i.currentProgram=c,i.uniformsList=_,c}function Zt(t,e){const n=ft.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}jt.setAnimationLoop((function(t){Ht&&Ht(t)})),"undefined"!=typeof self&&jt.setContext(self),this.setAnimationLoop=function(t){Ht=t,Nt.setAnimationLoop(t),null===t?jt.stop():jt.start()},Nt.addEventListener("sessionstart",Vt),Nt.addEventListener("sessionend",qt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Nt.enabled&&!0===Nt.isPresenting&&(!0===Nt.cameraAutoUpdate&&Nt.updateCamera(e),e=Nt.getCamera()),!0===t.isScene&&t.onBeforeRender(w,t,e,E),g=xt.get(t,y.length),g.init(),y.push(g),it.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Q.setFromProjectionMatrix(it),et=this.localClippingEnabled,tt=St.init(this.clippingPlanes,et),m=bt.get(t,v.length),m.init(),v.push(m),Gt(t,e,0,w.sortObjects),m.finish(),!0===w.sortObjects&&m.sort(X,Y),this.info.render.frame++,!0===tt&&St.beginShadows();const n=g.state.shadowsArray;if(Et.render(n,t,e),!0===tt&&St.endShadows(),!0===this.info.autoReset&&this.info.reset(),Mt.render(m,t),g.setupLights(w.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Wt(m,t,i,i.viewport)}}else Wt(m,t,e);null!==E&&(_t.updateMultisampleRenderTarget(E),_t.updateRenderTargetMipmap(E)),!0===t.isScene&&t.onAfterRender(w,t,e),It.resetDefaultState(),M=-1,T=null,y.pop(),g=y.length>0?y[y.length-1]:null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(t,e,n){ft.get(t.texture).__webglTexture=e,ft.get(t.depthTexture).__webglTexture=n;const i=ft.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===lt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=ft.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){E=t,x=e,S=n;let i=!0,r=null,a=!1,s=!1;if(t){const n=ft.get(t);void 0!==n.__useDefaultFramebuffer?(ct.bindFramebuffer(Ut.FRAMEBUFFER,null),i=!1):void 0===n.__webglFramebuffer?_t.setupRenderTarget(t):n.__hasExternalTextures&&_t.rebindTextures(t,ft.get(t.texture).__webglTexture,ft.get(t.depthTexture).__webglTexture);const o=t.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0);const l=ft.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],a=!0):r=ut.isWebGL2&&t.samples>0&&!1===_t.useMultisampledRTT(t)?ft.get(t).__webglMultisampledFramebuffer:l,C.copy(t.viewport),$.copy(t.scissor),A=t.scissorTest}else C.copy(K).multiplyScalar(W).floor(),$.copy(J).multiplyScalar(W).floor(),A=Z;if(ct.bindFramebuffer(Ut.FRAMEBUFFER,r)&&ut.drawBuffers&&i&&ct.drawBuffers(t,r),ct.viewport(C),ct.scissor($),ct.setScissorTest(A),a){const i=ft.get(t.texture);Ut.framebufferTexture2D(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_CUBE_MAP_POSITIVE_X+e,i.__webglTexture,n)}else if(s){const i=ft.get(t.texture),r=e||0;Ut.framebufferTextureLayer(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}M=-1},this.readRenderTargetPixels=function(t,e,n,i,r,a,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=ft.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){ct.bindFramebuffer(Ut.FRAMEBUFFER,o);try{const s=t.texture,o=s.format,l=s.type;if(o!==F&&At.convert(o)!==Ut.getParameter(Ut.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===D&&(lt.has("EXT_color_buffer_half_float")||ut.isWebGL2&&lt.has("EXT_color_buffer_float"));if(!(l===O||At.convert(l)===Ut.getParameter(Ut.IMPLEMENTATION_COLOR_READ_TYPE)||l===P&&(ut.isWebGL2||lt.has("OES_texture_float")||lt.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&Ut.readPixels(e,n,i,r,At.convert(o),At.convert(l),a)}finally{const t=null!==E?ft.get(E).__webglFramebuffer:null;ct.bindFramebuffer(Ut.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i);_t.setTexture2D(e,0),Ut.copyTexSubImage2D(Ut.TEXTURE_2D,n,0,0,t.x,t.y,r,a),ct.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,a=e.image.height,s=At.convert(n.format),o=At.convert(n.type);_t.setTexture2D(n,0),Ut.pixelStorei(Ut.UNPACK_FLIP_Y_WEBGL,n.flipY),Ut.pixelStorei(Ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Ut.pixelStorei(Ut.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?Ut.texSubImage2D(Ut.TEXTURE_2D,i,t.x,t.y,r,a,s,o,e.image.data):e.isCompressedTexture?Ut.compressedTexSubImage2D(Ut.TEXTURE_2D,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):Ut.texSubImage2D(Ut.TEXTURE_2D,i,t.x,t.y,s,o,e.image),0===i&&n.generateMipmaps&&Ut.generateMipmap(Ut.TEXTURE_2D),ct.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=At.convert(i.format),u=At.convert(i.type);let c;if(i.isData3DTexture)_t.setTexture3D(i,0),c=Ut.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");_t.setTexture2DArray(i,0),c=Ut.TEXTURE_2D_ARRAY}Ut.pixelStorei(Ut.UNPACK_FLIP_Y_WEBGL,i.flipY),Ut.pixelStorei(Ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Ut.pixelStorei(Ut.UNPACK_ALIGNMENT,i.unpackAlignment);const h=Ut.getParameter(Ut.UNPACK_ROW_LENGTH),f=Ut.getParameter(Ut.UNPACK_IMAGE_HEIGHT),_=Ut.getParameter(Ut.UNPACK_SKIP_PIXELS),d=Ut.getParameter(Ut.UNPACK_SKIP_ROWS),p=Ut.getParameter(Ut.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[0]:n.image;Ut.pixelStorei(Ut.UNPACK_ROW_LENGTH,m.width),Ut.pixelStorei(Ut.UNPACK_IMAGE_HEIGHT,m.height),Ut.pixelStorei(Ut.UNPACK_SKIP_PIXELS,t.min.x),Ut.pixelStorei(Ut.UNPACK_SKIP_ROWS,t.min.y),Ut.pixelStorei(Ut.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?Ut.texSubImage3D(c,r,e.x,e.y,e.z,a,s,o,l,u,m.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ut.compressedTexSubImage3D(c,r,e.x,e.y,e.z,a,s,o,l,m.data)):Ut.texSubImage3D(c,r,e.x,e.y,e.z,a,s,o,l,u,m),Ut.pixelStorei(Ut.UNPACK_ROW_LENGTH,h),Ut.pixelStorei(Ut.UNPACK_IMAGE_HEIGHT,f),Ut.pixelStorei(Ut.UNPACK_SKIP_PIXELS,_),Ut.pixelStorei(Ut.UNPACK_SKIP_ROWS,d),Ut.pixelStorei(Ut.UNPACK_SKIP_IMAGES,p),0===r&&i.generateMipmaps&&Ut.generateMipmap(c),ct.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?_t.setTextureCube(t,0):t.isData3DTexture?_t.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?_t.setTexture2DArray(t,0):_t.setTexture2D(t,0),ct.unbindTexture()},this.resetState=function(){x=0,S=0,E=null,ct.reset(),It.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Nt}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Rt?$t:Ct}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===$t?Rt:Ot}}class Us extends ks{}Us.prototype.isWebGL1Renderer=!0;class Ps{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Yn(t),this.density=e}clone(){return new Ps(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Ds{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Yn(t),this.near=e,this.far=n}clone(){return new Ds(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ns extends Rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}}class Ls{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Ut,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=qt()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zs=new $e;class Fs{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)zs.fromBufferAttribute(this,e),zs.applyMatrix4(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)zs.fromBufferAttribute(this,e),zs.applyNormalMatrix(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)zs.fromBufferAttribute(this,e),zs.transformDirection(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this}setX(t,e){return this.normalized&&(e=Zt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Zt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Zt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Zt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Jt(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Jt(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Jt(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Jt(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array),i=Zt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new ai(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Fs(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Bs extends qn{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Hs;const Vs=new $e,qs=new $e,js=new $e,Gs=new te,Ws=new te,Xs=new an,Ys=new $e,Ks=new $e,Js=new $e,Zs=new te,Qs=new te,to=new te;class eo extends Rn{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Hs){Hs=new mi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Ls(t,5);Hs.setIndex([0,1,2,0,2,3]),Hs.setAttribute("position",new Fs(e,3,0,!1)),Hs.setAttribute("uv",new Fs(e,2,3,!1))}this.geometry=Hs,this.material=void 0!==t?t:new Bs,this.center=new te(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),qs.setFromMatrixScale(this.matrixWorld),Xs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),js.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&qs.multiplyScalar(-js.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;no(Ys.set(-.5,-.5,0),js,a,qs,i,r),no(Ks.set(.5,-.5,0),js,a,qs,i,r),no(Js.set(.5,.5,0),js,a,qs,i,r),Zs.set(0,0),Qs.set(1,0),to.set(1,1);let s=t.ray.intersectTriangle(Ys,Ks,Js,!1,Vs);if(null===s&&(no(Ks.set(-.5,.5,0),js,a,qs,i,r),Qs.set(0,1),s=t.ray.intersectTriangle(Ys,Js,Ks,!1,Vs),null===s))return;const o=t.ray.origin.distanceTo(Vs);o<t.near||o>t.far||e.push({distance:o,point:Vs.clone(),uv:Hn.getInterpolation(Vs,Ys,Ks,Js,Zs,Qs,to,new te),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function no(t,e,n,i,r,a){Gs.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Ws.x=a*Gs.x-r*Gs.y,Ws.y=r*Gs.x+a*Gs.y):Ws.copy(Gs),t.copy(e),t.x+=Ws.x,t.y+=Ws.y,t.applyMatrix4(Xs)}const io=new $e,ro=new $e;class ao extends Rn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const i=this.levels;let r;for(r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i;n++){let i=e[n].distance;if(e[n].object.visible&&(i-=i*e[n].hysteresis),t<i)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){io.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(io);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){io.setFromMatrixPosition(t.matrixWorld),ro.setFromMatrixPosition(this.matrixWorld);const n=io.distanceTo(ro)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){let t=e[i].distance;if(e[i].object.visible&&(t-=t*e[i].hysteresis),!(n>=t))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.object.levels.push({object:i.object.uuid,distance:i.distance,hysteresis:i.hysteresis})}return e}}const so=new $e,oo=new Se,lo=new Se,uo=new $e,co=new an,ho=new $e,fo=new Ye,_o=new an,po=new rn;class mo extends Ui{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new an,this.bindMatrixInverse=new an,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Oe),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let t=0;t<e.count;t++)ho.fromBufferAttribute(e,t),this.applyBoneTransform(t,ho),this.boundingBox.expandByPoint(ho)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ye),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let t=0;t<e.count;t++)ho.fromBufferAttribute(e,t),this.applyBoneTransform(t,ho),this.boundingSphere.expandByPoint(ho)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),fo.copy(this.boundingSphere),fo.applyMatrix4(i),!1!==t.ray.intersectsSphere(fo)&&(_o.copy(i).invert(),po.copy(t.ray).applyMatrix4(_o),null!==this.boundingBox&&!1===po.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,po)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Se,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,i=this.geometry;oo.fromBufferAttribute(i.attributes.skinIndex,t),lo.fromBufferAttribute(i.attributes.skinWeight,t),so.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=lo.getComponent(t);if(0!==i){const r=oo.getComponent(t);co.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(uo.copy(so).applyMatrix4(co),i)}}return e.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,e){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,e)}}class go extends Rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vo extends xe{constructor(t=null,e=1,n=1,i,r,a,s,o,l=1003,u=1003,c,h){super(null,a,s,o,l,u,i,r,c,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const yo=new an,wo=new an;class bo{constructor(t=[],e=[]){this.uuid=qt(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new an)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new an;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:wo;yo.multiplyMatrices(r,e[i]),yo.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new bo(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=Yt(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new vo(e,t,t,F,P);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new go),this.bones.push(r),this.boneInverses.push((new an).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const a=n[i];t.boneInverses.push(a.toArray())}return t}}class xo extends ai{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const So=new an,Eo=new an,Mo=[],To=new Oe,Co=new an,$o=new Ui,Ao=new Ye;class Ro extends Ui{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new xo(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<n;t++)this.setMatrixAt(t,Co)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Oe),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,So),To.copy(t.boundingBox).applyMatrix4(So),this.boundingBox.union(To)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ye),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,So),Ao.copy(t.boundingSphere).applyMatrix4(So),this.boundingSphere.union(Ao)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if($o.geometry=this.geometry,$o.material=this.material,void 0!==$o.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ao.copy(this.boundingSphere),Ao.applyMatrix4(n),!1!==t.ray.intersectsSphere(Ao)))for(let r=0;r<i;r++){this.getMatrixAt(r,So),Eo.multiplyMatrices(n,So),$o.matrixWorld=Eo,$o.raycast(t,Mo);for(let t=0,n=Mo.length;t<n;t++){const n=Mo[t];n.instanceId=r,n.object=this,e.push(n)}Mo.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new xo(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Oo extends qn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Io=new $e,ko=new $e,Uo=new an,Po=new rn,Do=new Ye;class No extends Rn{constructor(t=new mi,e=new Oo){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)Io.fromBufferAttribute(e,t-1),ko.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Io.distanceTo(ko);t.setAttribute("lineDistance",new li(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Do.copy(n.boundingSphere),Do.applyMatrix4(i),Do.radius+=r,!1===t.ray.intersectsSphere(Do))return;Uo.copy(i).invert(),Po.copy(t.ray).applyMatrix4(Uo);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new $e,u=new $e,c=new $e,h=new $e,f=this.isLineSegments?2:1,_=n.index,d=n.attributes.position;if(null!==_)for(let n=Math.max(0,a.start),i=Math.min(_.count,a.start+a.count)-1;n<i;n+=f){const i=_.getX(n),r=_.getX(n+1);if(l.fromBufferAttribute(d,i),u.fromBufferAttribute(d,r),Po.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const a=t.ray.origin.distanceTo(h);a<t.near||a>t.far||e.push({distance:a,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,a.start),i=Math.min(d.count,a.start+a.count)-1;n<i;n+=f){if(l.fromBufferAttribute(d,n),u.fromBufferAttribute(d,n+1),Po.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(h);i<t.near||i>t.far||e.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const Lo=new $e,zo=new $e;class Fo extends No{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Lo.fromBufferAttribute(e,t),zo.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Lo.distanceTo(zo);t.setAttribute("lineDistance",new li(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Bo extends No{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Ho extends qn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Vo=new an,qo=new rn,jo=new Ye,Go=new $e;class Wo extends Rn{constructor(t=new mi,e=new Ho){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),jo.copy(n.boundingSphere),jo.applyMatrix4(i),jo.radius+=r,!1===t.ray.intersectsSphere(jo))return;Vo.copy(i).invert(),qo.copy(t.ray).applyMatrix4(Vo);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,u=n.attributes.position;if(null!==l)for(let n=Math.max(0,a.start),r=Math.min(l.count,a.start+a.count);n<r;n++){const r=l.getX(n);Go.fromBufferAttribute(u,r),Xo(Go,r,o,i,t,e,this)}else for(let n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);n<r;n++)Go.fromBufferAttribute(u,n),Xo(Go,n,o,i,t,e,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Xo(t,e,n,i,r,a,s){const o=qo.distanceSqToPoint(t);if(o<n){const n=new $e;qo.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:e,face:null,object:s})}}class Yo extends xe{constructor(t,e,n,i,r,a,s,o,l,u,c,h){super(null,a,s,o,l,u,i,r,c,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class Ko{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let a;a=e||t*n[r-1];let s,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),s=n[i]-a,s<0)o=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const u=n[i];return(i+(a-u)/(n[i+1]-u))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),s=this.getPoint(r),o=e||(a.isVector2?new te:new $e);return o.copy(s).sub(a).normalize(),o}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new $e,i=[],r=[],a=[],s=new $e,o=new an;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new $e)}r[0]=new $e,a[0]=new $e;let l=Number.MAX_VALUE;const u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),a[e]=a[e-1].clone(),s.crossVectors(i[e-1],i[e]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(jt(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(o.makeRotationAxis(s,t))}a[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(jt(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(s.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],e*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Jo extends Ko{constructor(t=0,e=0,n=1,i=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(t,e){const n=e||new te,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const s=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Zo extends Jo{constructor(t,e,n,i,r,a){super(t,e,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Qo(){let t=0,e=0,n=0,i=0;function r(r,a,s,o){t=r,e=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(t,e,n,i,a){r(e,n,a*(n-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,a,s,o){let l=(e-t)/a-(n-t)/(a+s)+(n-e)/s,u=(n-e)/s-(i-e)/(s+o)+(i-n)/o;l*=s,u*=s,r(e,n,l,u)},calc:function(r){const a=r*r;return t+e*r+n*a+i*(a*r)}}}const tl=new $e,el=new Qo,nl=new Qo,il=new Qo;class rl extends Ko{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new $e){const n=e,i=this.points,r=i.length,a=(r-(this.closed?0:1))*t;let s,o,l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===u&&l===r-1&&(l=r-2,u=1),this.closed||l>0?s=i[(l-1)%r]:(tl.subVectors(i[0],i[1]).add(i[0]),s=tl);const c=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(tl.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=tl),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(o),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),el.initNonuniformCatmullRom(s.x,c.x,h.x,o.x,e,n,i),nl.initNonuniformCatmullRom(s.y,c.y,h.y,o.y,e,n,i),il.initNonuniformCatmullRom(s.z,c.z,h.z,o.z,e,n,i)}else"catmullrom"===this.curveType&&(el.initCatmullRom(s.x,c.x,h.x,o.x,this.tension),nl.initCatmullRom(s.y,c.y,h.y,o.y,this.tension),il.initCatmullRom(s.z,c.z,h.z,o.z,this.tension));return n.set(el.calc(u),nl.calc(u),il.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new $e).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function al(t,e,n,i,r){const a=.5*(i-e),s=.5*(r-n),o=t*t;return(2*n-2*i+a+s)*(t*o)+(-3*n+3*i-2*a-s)*o+a*t+n}function sl(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function ol(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}class ll extends Ko{constructor(t=new te,e=new te,n=new te,i=new te){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new te){const n=e,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(ol(t,i.x,r.x,a.x,s.x),ol(t,i.y,r.y,a.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ul extends Ko{constructor(t=new $e,e=new $e,n=new $e,i=new $e){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new $e){const n=e,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(ol(t,i.x,r.x,a.x,s.x),ol(t,i.y,r.y,a.y,s.y),ol(t,i.z,r.z,a.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class cl extends Ko{constructor(t=new te,e=new te){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new te){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new te){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class hl extends Ko{constructor(t=new $e,e=new $e){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new $e){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new $e){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class fl extends Ko{constructor(t=new te,e=new te,n=new te){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new te){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(sl(t,i.x,r.x,a.x),sl(t,i.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class _l extends Ko{constructor(t=new $e,e=new $e,n=new $e){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new $e){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(sl(t,i.x,r.x,a.x),sl(t,i.y,r.y,a.y),sl(t,i.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class dl extends Ko{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new te){const n=e,i=this.points,r=(i.length-1)*t,a=Math.floor(r),s=r-a,o=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(al(s,o.x,l.x,u.x,c.x),al(s,o.y,l.y,u.y,c.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new te).fromArray(n))}return this}}var pl=Object.freeze({__proto__:null,ArcCurve:Zo,CatmullRomCurve3:rl,CubicBezierCurve:ll,CubicBezierCurve3:ul,EllipseCurve:Jo,LineCurve:cl,LineCurve3:hl,QuadraticBezierCurve:fl,QuadraticBezierCurve3:_l,SplineCurve:dl});class ml extends Ko{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new cl(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,a=this.curves[r],s=a.getLength(),o=0===s?0:1-t/s;return a.getPointAt(o,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],s=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,o=a.getPoints(s);for(let t=0;t<o.length;t++){const i=o[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new pl[n.type]).fromJSON(n))}return this}}class gl extends ml{constructor(t){super(),this.type="Path",this.currentPoint=new te,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new cl(this.currentPoint.clone(),new te(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new fl(this.currentPoint.clone(),new te(t,e),new te(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,a){const s=new ll(this.currentPoint.clone(),new te(t,e),new te(n,i),new te(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new dl(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+s,e+o,n,i,r,a),this}absarc(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this}ellipse(t,e,n,i,r,a,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,n,i,r,a,s,o),this}absellipse(t,e,n,i,r,a,s,o){const l=new Jo(t,e,n,i,r,a,s,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class vl extends mi{constructor(t=[new te(0,-.5),new te(.5,0),new te(0,.5)],e=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=jt(i,0,2*Math.PI);const r=[],a=[],s=[],o=[],l=[],u=1/e,c=new $e,h=new te,f=new $e,_=new $e,d=new $e;let p=0,m=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:p=t[e+1].x-t[e].x,m=t[e+1].y-t[e].y,f.x=1*m,f.y=-p,f.z=0*m,d.copy(f),f.normalize(),o.push(f.x,f.y,f.z);break;case t.length-1:o.push(d.x,d.y,d.z);break;default:p=t[e+1].x-t[e].x,m=t[e+1].y-t[e].y,f.x=1*m,f.y=-p,f.z=0*m,_.copy(f),f.x+=d.x,f.y+=d.y,f.z+=d.z,f.normalize(),o.push(f.x,f.y,f.z),d.copy(_)}for(let r=0;r<=e;r++){const f=n+r*u*i,_=Math.sin(f),d=Math.cos(f);for(let n=0;n<=t.length-1;n++){c.x=t[n].x*_,c.y=t[n].y,c.z=t[n].x*d,a.push(c.x,c.y,c.z),h.x=r/e,h.y=n/(t.length-1),s.push(h.x,h.y);const i=o[3*n+0]*_,u=o[3*n+1],f=o[3*n+0]*d;l.push(i,u,f)}}for(let n=0;n<e;n++)for(let e=0;e<t.length-1;e++){const i=e+n*t.length,a=i,s=i+t.length,o=i+t.length+1,l=i+1;r.push(a,s,l),r.push(o,l,s)}this.setIndex(r),this.setAttribute("position",new li(a,3)),this.setAttribute("uv",new li(s,2)),this.setAttribute("normal",new li(l,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new vl(t.points,t.segments,t.phiStart,t.phiLength)}}class yl extends vl{constructor(t=1,e=1,n=4,i=8){const r=new gl;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:i}}static fromJSON(t){return new yl(t.radius,t.length,t.capSegments,t.radialSegments)}}class wl extends mi{constructor(t=1,e=32,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],a=[],s=[],o=[],l=new $e,u=new te;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let r=0,c=3;r<=e;r++,c+=3){const h=n+r/e*i;l.x=t*Math.cos(h),l.y=t*Math.sin(h),a.push(l.x,l.y,l.z),s.push(0,0,1),u.x=(a[c]/t+1)/2,u.y=(a[c+1]/t+1)/2,o.push(u.x,u.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new li(a,3)),this.setAttribute("normal",new li(s,3)),this.setAttribute("uv",new li(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new wl(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class bl extends mi{constructor(t=1,e=1,n=1,i=32,r=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const u=[],c=[],h=[],f=[];let _=0;const d=[],p=n/2;let m=0;function g(n){const r=_,a=new te,d=new $e;let g=0;const v=!0===n?t:e,y=!0===n?1:-1;for(let t=1;t<=i;t++)c.push(0,p*y,0),h.push(0,y,0),f.push(.5,.5),_++;const w=_;for(let t=0;t<=i;t++){const e=t/i*o+s,n=Math.cos(e),r=Math.sin(e);d.x=v*r,d.y=p*y,d.z=v*n,c.push(d.x,d.y,d.z),h.push(0,y,0),a.x=.5*n+.5,a.y=.5*r*y+.5,f.push(a.x,a.y),_++}for(let t=0;t<i;t++){const e=r+t,i=w+t;!0===n?u.push(i,i+1,e):u.push(i+1,i,e),g+=3}l.addGroup(m,g,!0===n?1:2),m+=g}!function(){const a=new $e,g=new $e;let v=0;const y=(e-t)/n;for(let l=0;l<=r;l++){const u=[],m=l/r,v=m*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*o+s,l=Math.sin(r),d=Math.cos(r);g.x=v*l,g.y=-m*n+p,g.z=v*d,c.push(g.x,g.y,g.z),a.set(l,y,d).normalize(),h.push(a.x,a.y,a.z),f.push(e,1-m),u.push(_++)}d.push(u)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=d[e][t],i=d[e+1][t],r=d[e+1][t+1],a=d[e][t+1];u.push(n,i,a),u.push(i,r,a),v+=6}l.addGroup(m,v,0),m+=v}(),!1===a&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(u),this.setAttribute("position",new li(c,3)),this.setAttribute("normal",new li(h,3)),this.setAttribute("uv",new li(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new bl(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class xl extends bl{constructor(t=1,e=1,n=32,i=1,r=!1,a=0,s=2*Math.PI){super(0,t,e,n,i,r,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}static fromJSON(t){return new xl(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Sl extends mi{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],a=[];function s(t,e,n,i){const r=i+1,a=[];for(let i=0;i<=r;i++){a[i]=[];const s=t.clone().lerp(n,i/r),o=e.clone().lerp(n,i/r),l=r-i;for(let t=0;t<=l;t++)a[i][t]=0===t&&i===r?s:s.clone().lerp(o,t/l)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const n=Math.floor(e/2);e%2==0?(o(a[t][n+1]),o(a[t+1][n]),o(a[t][n])):(o(a[t][n+1]),o(a[t+1][n+1]),o(a[t+1][n]))}}function o(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function u(t,e,n,i){i<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=i/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new $e,i=new $e,r=new $e;for(let a=0;a<e.length;a+=3)l(e[a+0],n),l(e[a+1],i),l(e[a+2],r),s(n,i,r,t)}(i),function(t){const e=new $e;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new $e;for(let n=0;n<r.length;n+=3){t.x=r[n+0],t.y=r[n+1],t.z=r[n+2];const i=c(t)/2/Math.PI+.5,s=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);a.push(i,1-s)}var e;(function(){const t=new $e,e=new $e,n=new $e,i=new $e,s=new te,o=new te,l=new te;for(let h=0,f=0;h<r.length;h+=9,f+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),s.set(a[f+0],a[f+1]),o.set(a[f+2],a[f+3]),l.set(a[f+4],a[f+5]),i.copy(t).add(e).add(n).divideScalar(3);const _=c(i);u(s,f+0,t,_),u(o,f+2,e,_),u(l,f+4,n,_)}})(),function(){for(let t=0;t<a.length;t+=6){const e=a[t+0],n=a[t+2],i=a[t+4],r=Math.max(e,n,i),s=Math.min(e,n,i);r>.9&&s<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),i<.2&&(a[t+4]+=1))}}()}(),this.setAttribute("position",new li(r,3)),this.setAttribute("normal",new li(r.slice(),3)),this.setAttribute("uv",new li(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Sl(t.vertices,t.indices,t.radius,t.details)}}class El extends Sl{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new El(t.radius,t.detail)}}const Ml=new $e,Tl=new $e,Cl=new $e,$l=new Hn;class Al extends mi{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(Ht*e),a=t.getIndex(),s=t.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},f=[];for(let t=0;t<o;t+=3){a?(l[0]=a.getX(t),l[1]=a.getX(t+1),l[2]=a.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:o}=$l;if(e.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),$l.getNormal(Cl),c[0]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,c[1]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,c[2]=`${Math.round(o.x*i)},${Math.round(o.y*i)},${Math.round(o.z*i)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],i=c[e],a=$l[u[t]],s=$l[u[e]],o=`${n}_${i}`,_=`${i}_${n}`;_ in h&&h[_]?(Cl.dot(h[_].normal)<=r&&(f.push(a.x,a.y,a.z),f.push(s.x,s.y,s.z)),h[_]=null):o in h||(h[o]={index0:l[t],index1:l[e],normal:Cl.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:n}=h[t];Ml.fromBufferAttribute(s,e),Tl.fromBufferAttribute(s,n),f.push(Ml.x,Ml.y,Ml.z),f.push(Tl.x,Tl.y,Tl.z)}this.setAttribute("position",new li(f,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Rl extends gl{constructor(t){super(t),this.uuid=qt(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new gl).fromJSON(n))}return this}}function Ol(t,e,n,i,r){let a,s;if(r===function(t,e,n,i){let r=0;for(let a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}(t,e,n,i)>0)for(a=e;a<n;a+=i)s=Zl(a,t[a],t[a+1],s);else for(a=n-i;a>=e;a-=i)s=Zl(a,t[a],t[a+1],s);return s&&Gl(s,s.next)&&(Ql(s),s=s.next),s}function Il(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!Gl(i,i.next)&&0!==jl(i.prev,i,i.next))i=i.next;else{if(Ql(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function kl(t,e,n,i,r,a,s){if(!t)return;!s&&a&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=Bl(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,a,s,o,l,u=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,i=n,o=0,e=0;e<u&&(o++,i=i.nextZ,i);e++);for(l=u;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(s>1)}(r)}(t,i,r,a);let o,l,u=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,a?Pl(t,i,r,a):Ul(t))e.push(o.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),Ql(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?kl(t=Dl(Il(t),e,n),e,n,i,r,a,2):2===s&&Nl(t,e,n,i,r,a):kl(Il(t),e,n,i,r,a,1);break}}function Ul(t){const e=t.prev,n=t,i=t.next;if(jl(e,n,i)>=0)return!1;const r=e.x,a=n.x,s=i.x,o=e.y,l=n.y,u=i.y,c=r<a?r<s?r:s:a<s?a:s,h=o<l?o<u?o:u:l<u?l:u,f=r>a?r>s?r:s:a>s?a:s,_=o>l?o>u?o:u:l>u?l:u;let d=i.next;for(;d!==e;){if(d.x>=c&&d.x<=f&&d.y>=h&&d.y<=_&&Vl(r,o,a,l,s,u,d.x,d.y)&&jl(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Pl(t,e,n,i){const r=t.prev,a=t,s=t.next;if(jl(r,a,s)>=0)return!1;const o=r.x,l=a.x,u=s.x,c=r.y,h=a.y,f=s.y,_=o<l?o<u?o:u:l<u?l:u,d=c<h?c<f?c:f:h<f?h:f,p=o>l?o>u?o:u:l>u?l:u,m=c>h?c>f?c:f:h>f?h:f,g=Bl(_,d,e,n,i),v=Bl(p,m,e,n,i);let y=t.prevZ,w=t.nextZ;for(;y&&y.z>=g&&w&&w.z<=v;){if(y.x>=_&&y.x<=p&&y.y>=d&&y.y<=m&&y!==r&&y!==s&&Vl(o,c,l,h,u,f,y.x,y.y)&&jl(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,w.x>=_&&w.x<=p&&w.y>=d&&w.y<=m&&w!==r&&w!==s&&Vl(o,c,l,h,u,f,w.x,w.y)&&jl(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;y&&y.z>=g;){if(y.x>=_&&y.x<=p&&y.y>=d&&y.y<=m&&y!==r&&y!==s&&Vl(o,c,l,h,u,f,y.x,y.y)&&jl(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=v;){if(w.x>=_&&w.x<=p&&w.y>=d&&w.y<=m&&w!==r&&w!==s&&Vl(o,c,l,h,u,f,w.x,w.y)&&jl(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Dl(t,e,n){let i=t;do{const r=i.prev,a=i.next.next;!Gl(r,a)&&Wl(r,i,i.next,a)&&Kl(r,a)&&Kl(a,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),Ql(i),Ql(i.next),i=t=a),i=i.next}while(i!==t);return Il(i)}function Nl(t,e,n,i,r,a){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&ql(s,t)){let o=Jl(s,t);return s=Il(s,s.next),o=Il(o,o.next),kl(s,e,n,i,r,a,0),void kl(o,e,n,i,r,a,0)}t=t.next}s=s.next}while(s!==t)}function Ll(t,e){return t.x-e.x}function zl(t,e){const n=function(t,e){let n,i=e,r=-1/0;const a=t.x,s=t.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const t=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=a&&t>r&&(r=t,n=i.x<i.next.x?i:i.next,t===a))return n}i=i.next}while(i!==e);if(!n)return null;const o=n,l=n.x,u=n.y;let c,h=1/0;i=n;do{a>=i.x&&i.x>=l&&a!==i.x&&Vl(s<u?a:r,s,l,u,s<u?r:a,s,i.x,i.y)&&(c=Math.abs(s-i.y)/(a-i.x),Kl(i,t)&&(c<h||c===h&&(i.x>n.x||i.x===n.x&&Fl(n,i)))&&(n=i,h=c)),i=i.next}while(i!==o);return n}(t,e);if(!n)return e;const i=Jl(n,t);return Il(i,i.next),Il(n,n.next)}function Fl(t,e){return jl(t.prev,t,e.prev)<0&&jl(e.next,t,t.next)<0}function Bl(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Hl(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Vl(t,e,n,i,r,a,s,o){return(r-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(i-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function ql(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Wl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Kl(t,e)&&Kl(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(jl(t.prev,t,e.prev)||jl(t,e.prev,e))||Gl(t,e)&&jl(t.prev,t,t.next)>0&&jl(e.prev,e,e.next)>0)}function jl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Gl(t,e){return t.x===e.x&&t.y===e.y}function Wl(t,e,n,i){const r=Yl(jl(t,e,n)),a=Yl(jl(t,e,i)),s=Yl(jl(n,i,t)),o=Yl(jl(n,i,e));return r!==a&&s!==o||!(0!==r||!Xl(t,n,e))||!(0!==a||!Xl(t,i,e))||!(0!==s||!Xl(n,t,i))||!(0!==o||!Xl(n,e,i))}function Xl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Yl(t){return t>0?1:t<0?-1:0}function Kl(t,e){return jl(t.prev,t,t.next)<0?jl(t,e,t.next)>=0&&jl(t,t.prev,e)>=0:jl(t,e,t.prev)<0||jl(t,t.next,e)<0}function Jl(t,e){const n=new tu(t.i,t.x,t.y),i=new tu(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Zl(t,e,n,i){const r=new tu(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ql(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function tu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class eu{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return eu.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];nu(t),iu(n,t);let a=t.length;e.forEach(nu);for(let t=0;t<e.length;t++)i.push(a),a+=e[t].length,iu(n,e[t]);const s=function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let a=Ol(t,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u,c,h,f,_;if(i&&(a=function(t,e,n,i){const r=[];let a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*i,l=a<s-1?e[a+1]*i:t.length,u=Ol(t,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(Hl(u));for(r.sort(Ll),a=0;a<r.length;a++)n=zl(r[a],n);return n}(t,e,a,n)),t.length>80*n){o=u=t[0],l=c=t[1];for(let e=n;e<r;e+=n)h=t[e],f=t[e+1],h<o&&(o=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);_=Math.max(u-o,c-l),_=0!==_?32767/_:0}return kl(a,s,n,o,l,_,0),s}(n,i);for(let t=0;t<s.length;t+=3)r.push(s.slice(t,t+3));return r}}function nu(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function iu(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class ru extends mi{constructor(t=new Rl([new te(.5,.5),new te(-.5,.5),new te(-.5,-.5),new te(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let e=0,n=t.length;e<n;e++)a(t[e]);function a(t){const a=[],s=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let u=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:c-.1,f=void 0!==e.bevelOffset?e.bevelOffset:0,_=void 0!==e.bevelSegments?e.bevelSegments:3;const d=e.extrudePath,p=void 0!==e.UVGenerator?e.UVGenerator:au;let m,g,v,y,w,b=!1;d&&(m=d.getSpacedPoints(o),b=!0,u=!1,g=d.computeFrenetFrames(o,!1),v=new $e,y=new $e,w=new $e),u||(_=0,c=0,h=0,f=0);const x=t.extractPoints(s);let S=x.shape;const E=x.holes;if(!eu.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];eu.isClockWise(e)&&(E[t]=e.reverse())}}const M=eu.triangulateShape(S,E),T=S;for(let t=0,e=E.length;t<e;t++){const e=E[t];S=S.concat(e)}function C(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const $=S.length,A=M.length;function R(t,e,n){let i,r,a;const s=t.x-e.x,o=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=s*s+o*o,h=s*u-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),f=Math.sqrt(l*l+u*u),_=e.x-o/h,d=e.y+s/h,p=((n.x-u/f-_)*u-(n.y+l/f-d)*l)/(s*u-o*l);i=_+s*p-t.x,r=d+o*p-t.y;const m=i*i+r*r;if(m<=2)return new te(i,r);a=Math.sqrt(m/2)}else{let t=!1;s>Number.EPSILON?l>Number.EPSILON&&(t=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(u)&&(t=!0),t?(i=-o,r=s,a=Math.sqrt(c)):(i=s,r=o,a=Math.sqrt(c/2))}return new te(i/a,r/a)}const O=[];for(let t=0,e=T.length,n=e-1,i=t+1;t<e;t++,n++,i++)n===e&&(n=0),i===e&&(i=0),O[t]=R(T[t],T[n],T[i]);const I=[];let k,U=O.concat();for(let t=0,e=E.length;t<e;t++){const e=E[t];k=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),k[t]=R(e[t],e[i],e[r]);I.push(k),U=U.concat(k)}for(let t=0;t<_;t++){const e=t/_,n=c*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+f;for(let t=0,e=T.length;t<e;t++){const e=C(T[t],O[t],i);N(e.x,e.y,-n)}for(let t=0,e=E.length;t<e;t++){const e=E[t];k=I[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],k[t],i);N(r.x,r.y,-n)}}}const P=h+f;for(let t=0;t<$;t++){const e=u?C(S[t],U[t],P):S[t];b?(y.copy(g.normals[0]).multiplyScalar(e.x),v.copy(g.binormals[0]).multiplyScalar(e.y),w.copy(m[0]).add(y).add(v),N(w.x,w.y,w.z)):N(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<$;e++){const n=u?C(S[e],U[e],P):S[e];b?(y.copy(g.normals[t]).multiplyScalar(n.x),v.copy(g.binormals[t]).multiplyScalar(n.y),w.copy(m[t]).add(y).add(v),N(w.x,w.y,w.z)):N(n.x,n.y,l/o*t)}for(let t=_-1;t>=0;t--){const e=t/_,n=c*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+f;for(let t=0,e=T.length;t<e;t++){const e=C(T[t],O[t],i);N(e.x,e.y,l+n)}for(let t=0,e=E.length;t<e;t++){const e=E[t];k=I[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],k[t],i);b?N(r.x,r.y+m[o-1].y,m[o-1].x+n):N(r.x,r.y,l+n)}}}function D(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=o+2*_;t<n;t++){const n=$*t,a=$*(t+1);z(e+i+n,e+r+n,e+r+a,e+i+a)}}}function N(t,e,n){a.push(t),a.push(e),a.push(n)}function L(t,e,r){F(t),F(e),F(r);const a=i.length/3,s=p.generateTopUV(n,i,a-3,a-2,a-1);B(s[0]),B(s[1]),B(s[2])}function z(t,e,r,a){F(t),F(e),F(a),F(e),F(r),F(a);const s=i.length/3,o=p.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);B(o[0]),B(o[1]),B(o[3]),B(o[1]),B(o[2]),B(o[3])}function F(t){i.push(a[3*t+0]),i.push(a[3*t+1]),i.push(a[3*t+2])}function B(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(u){let t=0,e=$*t;for(let t=0;t<A;t++){const n=M[t];L(n[2]+e,n[1]+e,n[0]+e)}t=o+2*_,e=$*t;for(let t=0;t<A;t++){const n=M[t];L(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<A;t++){const e=M[t];L(e[2],e[1],e[0])}for(let t=0;t<A;t++){const e=M[t];L(e[0]+$*o,e[1]+$*o,e[2]+$*o)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;D(T,e),e+=T.length;for(let t=0,n=E.length;t<n;t++){const n=E[t];D(n,e),e+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new li(i,3)),this.setAttribute("uv",new li(r,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new pl[i.type]).fromJSON(i)),new ru(n,t.options)}}const au={generateTopUV:function(t,e,n,i,r){const a=e[3*n],s=e[3*n+1],o=e[3*i],l=e[3*i+1],u=e[3*r],c=e[3*r+1];return[new te(a,s),new te(o,l),new te(u,c)]},generateSideWallUV:function(t,e,n,i,r,a){const s=e[3*n],o=e[3*n+1],l=e[3*n+2],u=e[3*i],c=e[3*i+1],h=e[3*i+2],f=e[3*r],_=e[3*r+1],d=e[3*r+2],p=e[3*a],m=e[3*a+1],g=e[3*a+2];return Math.abs(o-c)<Math.abs(s-u)?[new te(s,1-l),new te(u,1-h),new te(f,1-d),new te(p,1-g)]:[new te(o,1-l),new te(c,1-h),new te(_,1-d),new te(m,1-g)]}};class su extends Sl{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new su(t.radius,t.detail)}}class ou extends Sl{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ou(t.radius,t.detail)}}class lu extends mi{constructor(t=.5,e=1,n=32,i=1,r=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n);const s=[],o=[],l=[],u=[];let c=t;const h=(e-t)/(i=Math.max(1,i)),f=new $e,_=new te;for(let t=0;t<=i;t++){for(let t=0;t<=n;t++){const i=r+t/n*a;f.x=c*Math.cos(i),f.y=c*Math.sin(i),o.push(f.x,f.y,f.z),l.push(0,0,1),_.x=(f.x/e+1)/2,_.y=(f.y/e+1)/2,u.push(_.x,_.y)}c+=h}for(let t=0;t<i;t++){const e=t*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,a=i+n+1,o=i+n+2,l=i+1;s.push(r,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new li(o,3)),this.setAttribute("normal",new li(l,3)),this.setAttribute("uv",new li(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lu(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class uu extends mi{constructor(t=new Rl([new te(0,.5),new te(-.5,-.5),new te(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(s,o,e),s+=o,o=0;function l(t){const s=i.length/3,l=t.extractPoints(e);let u=l.shape;const c=l.holes;!1===eu.isClockWise(u)&&(u=u.reverse());for(let t=0,e=c.length;t<e;t++){const e=c[t];!0===eu.isClockWise(e)&&(c[t]=e.reverse())}const h=eu.triangulateShape(u,c);for(let t=0,e=c.length;t<e;t++){const e=c[t];u=u.concat(e)}for(let t=0,e=u.length;t<e;t++){const e=u[t];i.push(e.x,e.y,0),r.push(0,0,1),a.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],i=e[0]+s,r=e[1]+s,a=e[2]+s;n.push(i,r,a),o+=3}}this.setIndex(n),this.setAttribute("position",new li(i,3)),this.setAttribute("normal",new li(r,3)),this.setAttribute("uv",new li(a,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new uu(n,t.curveSegments)}}class cu extends mi{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const u=[],c=new $e,h=new $e,f=[],_=[],d=[],p=[];for(let f=0;f<=n;f++){const m=[],g=f/n;let v=0;0===f&&0===a?v=.5/e:f===n&&o===Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const o=n/e;c.x=-t*Math.cos(i+o*r)*Math.sin(a+g*s),c.y=t*Math.cos(a+g*s),c.z=t*Math.sin(i+o*r)*Math.sin(a+g*s),_.push(c.x,c.y,c.z),h.copy(c).normalize(),d.push(h.x,h.y,h.z),p.push(o+v,1-g),m.push(l++)}u.push(m)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=u[t][i+1],r=u[t][i],s=u[t+1][i],l=u[t+1][i+1];(0!==t||a>0)&&f.push(e,r,l),(t!==n-1||o<Math.PI)&&f.push(r,s,l)}this.setIndex(f),this.setAttribute("position",new li(_,3)),this.setAttribute("normal",new li(d,3)),this.setAttribute("uv",new li(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cu(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class hu extends Sl{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new hu(t.radius,t.detail)}}class fu extends mi{constructor(t=1,e=.4,n=12,i=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],o=[],l=[],u=new $e,c=new $e,h=new $e;for(let a=0;a<=n;a++)for(let f=0;f<=i;f++){const _=f/i*r,d=a/n*Math.PI*2;c.x=(t+e*Math.cos(d))*Math.cos(_),c.y=(t+e*Math.cos(d))*Math.sin(_),c.z=e*Math.sin(d),s.push(c.x,c.y,c.z),u.x=t*Math.cos(_),u.y=t*Math.sin(_),h.subVectors(c,u).normalize(),o.push(h.x,h.y,h.z),l.push(f/i),l.push(a/n)}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*t+e-1,r=(i+1)*(t-1)+e-1,s=(i+1)*(t-1)+e,o=(i+1)*t+e;a.push(n,r,o),a.push(r,s,o)}this.setIndex(a),this.setAttribute("position",new li(s,3)),this.setAttribute("normal",new li(o,3)),this.setAttribute("uv",new li(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fu(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class _u extends mi{constructor(t=1,e=.4,n=64,i=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],l=[],u=[],c=new $e,h=new $e,f=new $e,_=new $e,d=new $e,p=new $e,m=new $e;for(let s=0;s<=n;++s){const v=s/n*r*Math.PI*2;g(v,r,a,t,f),g(v+.01,r,a,t,_),p.subVectors(_,f),m.addVectors(_,f),d.crossVectors(p,m),m.crossVectors(d,p),d.normalize(),m.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,a=-e*Math.cos(r),_=e*Math.sin(r);c.x=f.x+(a*m.x+_*d.x),c.y=f.y+(a*m.y+_*d.y),c.z=f.z+(a*m.z+_*d.z),o.push(c.x,c.y,c.z),h.subVectors(c,f).normalize(),l.push(h.x,h.y,h.z),u.push(s/n),u.push(t/i)}}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),a=(i+1)*t+e,o=(i+1)*(t-1)+e;s.push(n,r,o),s.push(r,a,o)}function g(t,e,n,i,r){const a=Math.cos(t),s=Math.sin(t),o=n/e*t,l=Math.cos(o);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new li(o,3)),this.setAttribute("normal",new li(l,3)),this.setAttribute("uv",new li(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _u(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class du extends mi{constructor(t=new _l(new $e(-1,-1,0),new $e(-1,1,0),new $e(1,1,0)),e=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new $e,o=new $e,l=new te;let u=new $e;const c=[],h=[],f=[],_=[];function d(r){u=t.getPointAt(r/e,u);const l=a.normals[r],f=a.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),a=-Math.cos(e);o.x=a*l.x+r*f.x,o.y=a*l.y+r*f.y,o.z=a*l.z+r*f.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=u.x+n*o.x,s.y=u.y+n*o.y,s.z=u.z+n*o.z,c.push(s.x,s.y,s.z)}}!function(){for(let t=0;t<e;t++)d(t);d(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,f.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),a=(i+1)*t+e,s=(i+1)*(t-1)+e;_.push(n,r,s),_.push(r,a,s)}}()}(),this.setIndex(_),this.setAttribute("position",new li(c,3)),this.setAttribute("normal",new li(h,3)),this.setAttribute("uv",new li(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new du((new pl[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class pu extends mi{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new $e,r=new $e;if(null!==t.index){const a=t.attributes.position,s=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let t=0,l=o.length;t<l;++t){const l=o[t],u=l.start;for(let t=u,o=u+l.count;t<o;t+=3)for(let o=0;o<3;o++){const l=s.getX(t+o),u=s.getX(t+(o+1)%3);i.fromBufferAttribute(a,l),r.fromBufferAttribute(a,u),!0===mu(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const a=t.attributes.position;for(let t=0,s=a.count/3;t<s;t++)for(let s=0;s<3;s++){const o=3*t+s,l=3*t+(s+1)%3;i.fromBufferAttribute(a,o),r.fromBufferAttribute(a,l),!0===mu(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new li(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function mu(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var gu=Object.freeze({__proto__:null,BoxGeometry:Di,CapsuleGeometry:yl,CircleGeometry:wl,ConeGeometry:xl,CylinderGeometry:bl,DodecahedronGeometry:El,EdgesGeometry:Al,ExtrudeGeometry:ru,IcosahedronGeometry:su,LatheGeometry:vl,OctahedronGeometry:ou,PlaneGeometry:ir,PolyhedronGeometry:Sl,RingGeometry:lu,ShapeGeometry:uu,SphereGeometry:cu,TetrahedronGeometry:hu,TorusGeometry:fu,TorusKnotGeometry:_u,TubeGeometry:du,WireframeGeometry:pu});class vu extends qn{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Yn(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class yu extends Bi{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class wu extends qn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Yn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class bu extends wu{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new te(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class xu extends qn{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Yn(16777215),this.specular=new Yn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Su extends qn{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Yn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Eu extends qn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Mu extends qn{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Tu extends qn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Yn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Cu extends Oo{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function $u(t,e,n){return Ru(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Au(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Ru(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ou(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n}function Iu(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,s=0;s!==i;++a){const i=n[a]*e;for(let n=0;n!==e;++n)r[s++]=t[i+n]}return r}function ku(t,e,n,i){let r=1,a=t[0];for(;void 0!==a&&void 0===a[i];)a=t[r++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do{s=a[i],void 0!==s&&(e.push(a.time),n.push.apply(n,s)),a=t[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[i],void 0!==s&&(e.push(a.time),s.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{s=a[i],void 0!==s&&(e.push(a.time),n.push(s)),a=t[r++]}while(void 0!==a)}const Uu={arraySlice:$u,convertArray:Au,isTypedArray:Ru,getKeyframeOrder:Ou,sortedArray:Iu,flattenJSON:ku,subclip:function(t,e,n,i,r=30){const a=t.clone();a.name=e;const s=[];for(let t=0;t<a.tracks.length;++t){const e=a.tracks[t],o=e.getValueSize(),l=[],u=[];for(let t=0;t<e.times.length;++t){const a=e.times[t]*r;if(!(a<n||a>=i)){l.push(e.times[t]);for(let n=0;n<o;++n)u.push(e.values[t*o+n])}}0!==l.length&&(e.times=Au(l,e.times.constructor),e.values=Au(u,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let t=0;t<a.tracks.length;++t)o>a.tracks[t].times[0]&&(o=a.tracks[t].times[0]);for(let t=0;t<a.tracks.length;++t)a.tracks[t].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let e=0;e<r;++e){const i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const s=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===s)continue;let o=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let u=0;const c=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=i.times.length-1;let f;if(a<=i.times[0]){const t=o,e=l-o;f=$u(i.values,t,e)}else if(a>=i.times[h]){const t=h*l+o,e=t+l-o;f=$u(i.values,t,e)}else{const t=i.createInterpolant(),e=o,n=l-o;t.evaluate(a),f=$u(t.resultBuffer,e,n)}"quaternion"===r&&(new Ce).fromArray(f).normalize().conjugate().toArray(f);const _=s.times.length;for(let t=0;t<_;++t){const e=t*c+u;if("quaternion"===r)Ce.multiplyQuaternionsFlat(s.values,e,f,0,s.values,e);else{const t=c-2*u;for(let n=0;n<t;++n)s.values[e+n]-=f[n]}}}return t.blendMode=Tt,t}};class Pu{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<i)){for(let a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}if(t>=r)break t;{const s=e[1];t<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0}}for(;n<a;){const i=n+a>>>1;t<e[i]?a=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Du extends Pu{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:St,endingEnd:St}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,a=t+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case Et:r=t,s=2*e-n;break;case Mt:r=i.length-2,s=e+i[r]-i[r+1];break;default:r=t,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Et:a=t,o=2*n-e;break;case Mt:a=1,o=n+i[1]-i[0];break;default:a=t-1,o=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(o-n),this._offsetPrev=r*u,this._offsetNext=a*u}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,_=(n-e)/(i-e),d=_*_,p=d*_,m=-h*p+2*h*d-h*_,g=(1+h)*p+(-1.5-2*h)*d+(-.5+h)*_+1,v=(-1-f)*p+(1.5+f)*d+.5*_,y=f*p-f*d;for(let t=0;t!==s;++t)r[t]=m*a[u+t]+g*a[l+t]+v*a[o+t]+y*a[c+t];return r}}class Nu extends Pu{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,u=(n-e)/(i-e),c=1-u;for(let t=0;t!==s;++t)r[t]=a[l+t]*c+a[o+t]*u;return r}}class Lu extends Pu{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class zu{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Au(e,this.TimeBufferType),this.values=Au(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Au(t.times,Array),values:Au(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Lu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Nu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Du(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case wt:e=this.InterpolantFactoryMethodDiscrete;break;case bt:e=this.InterpolantFactoryMethodLinear;break;case xt:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wt;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return xt}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const t=this.getValueSize();this.times=$u(n,r,a),this.values=$u(this.values,r*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,a),t=!1;break}a=i}if(void 0!==i&&Ru(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=$u(this.times),e=$u(this.values),n=this.getValueSize(),i=this.getInterpolation()===xt,r=t.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=t[s];if(o!==t[s+1]&&(1!==s||o!==t[0]))if(i)r=!0;else{const t=s*n,i=t-n,a=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[i+s]||n!==e[a+s]){r=!0;break}}}if(r){if(s!==a){t[a]=t[s];const i=s*n,r=a*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++a}}if(r>0){t[a]=t[r];for(let t=r*n,i=a*n,s=0;s!==n;++s)e[i+s]=e[t+s];++a}return a!==t.length?(this.times=$u(t,0,a),this.values=$u(e,0,a*n)):(this.times=t,this.values=e),this}clone(){const t=$u(this.times,0),e=$u(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}zu.prototype.TimeBufferType=Float32Array,zu.prototype.ValueBufferType=Float32Array,zu.prototype.DefaultInterpolation=bt;class Fu extends zu{}Fu.prototype.ValueTypeName="bool",Fu.prototype.ValueBufferType=Array,Fu.prototype.DefaultInterpolation=wt,Fu.prototype.InterpolantFactoryMethodLinear=void 0,Fu.prototype.InterpolantFactoryMethodSmooth=void 0;class Bu extends zu{}Bu.prototype.ValueTypeName="color";class Hu extends zu{}Hu.prototype.ValueTypeName="number";class Vu extends Pu{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-e)/(i-e);let l=t*s;for(let t=l+s;l!==t;l+=4)Ce.slerpFlat(r,0,a,l-s,a,l,o);return r}}class qu extends zu{InterpolantFactoryMethodLinear(t){return new Vu(this.times,this.values,this.getValueSize(),t)}}qu.prototype.ValueTypeName="quaternion",qu.prototype.DefaultInterpolation=bt,qu.prototype.InterpolantFactoryMethodSmooth=void 0;class ju extends zu{}ju.prototype.ValueTypeName="string",ju.prototype.ValueBufferType=Array,ju.prototype.DefaultInterpolation=wt,ju.prototype.InterpolantFactoryMethodLinear=void 0,ju.prototype.InterpolantFactoryMethodSmooth=void 0;class Gu extends zu{}Gu.prototype.ValueTypeName="vector";class Wu{constructor(t,e=-1,n,i=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=qt(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(Xu(n[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(zu.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,a=[];for(let t=0;t<r;t++){let s=[],o=[];s.push((t+r-1)%r,t,(t+1)%r),o.push(0,1,0);const l=Ou(s);s=Iu(s,1,l),o=Iu(o,1,l),i||0!==s[0]||(s.push(r),o.push(o[0])),a.push(new Hu(".morphTargetInfluences["+e[t].name+"]",s,o).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],a=n.name.match(r);if(a&&a.length>1){const t=a[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const a=[];for(const t in i)a.push(this.CreateFromMorphTargetSequence(t,i[t],e,n));return a}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const a=[],s=[];ku(n,a,s,i),0!==a.length&&r.push(new t(e,a,s))}},i=[],r=t.name||"default",a=t.fps||30,s=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],a=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),a.push(i.morphTarget===n?1:0)}i.push(new Hu(".morphTargetInfluence["+n+"]",t,a))}o=t.length*a}else{const a=".bones["+e[t].name+"]";n(Gu,a+".position",r,"pos",i),n(qu,a+".quaternion",r,"rot",i),n(Gu,a+".scale",r,"scl",i)}}return 0===i.length?null:new this(r,o,i,s)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Xu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hu;case"vector":case"vector2":case"vector3":case"vector4":return Gu;case"color":return Bu;case"quaternion":return qu;case"bool":case"boolean":return Fu;case"string":return ju}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];ku(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Yu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Ku{constructor(t,e,n){const i=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===a&&void 0!==i.onStart&&i.onStart(t,s,o),a=!0},this.itemEnd=function(t){s++,void 0!==i.onProgress&&i.onProgress(t,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Ju=new Ku;class Zu{constructor(t){this.manager=void 0!==t?t:Ju,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Zu.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qu={};class tc extends Error{constructor(t,e){super(t),this.response=e}}class ec extends Zu{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Yu.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==Qu[t])return void Qu[t].push({onLoad:e,onProgress:n,onError:i});Qu[t]=[],Qu[t].push({onLoad:e,onProgress:n,onError:i});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Qu[t],i=e.body.getReader(),r=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),a=r?parseInt(r):0,s=0!==a;let o=0;const l=new ReadableStream({start(t){!function e(){i.read().then((({done:i,value:r})=>{if(i)t.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}}))}()}});return new Response(l)}throw new tc(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,s)));case"json":return t.json();default:if(void 0===s)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(s),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{Yu.add(t,e);const n=Qu[t];delete Qu[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}})).catch((e=>{const n=Qu[t];if(void 0===n)throw this.manager.itemError(t),e;delete Qu[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class nc extends Zu{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Yu.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;const s=se("img");function o(){u(),Yu.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){u(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function u(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s}}class ic extends Rn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Yn(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class rc extends ic{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Yn(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const ac=new an,sc=new $e,oc=new $e;class lc{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new te(512,512),this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tr,this._frameExtents=new te(1,1),this._viewportCount=1,this._viewports=[new Se(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;sc.setFromMatrixPosition(t.matrixWorld),e.position.copy(sc),oc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(oc),e.updateMatrixWorld(),ac.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ac),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ac)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class uc extends lc{constructor(){super(new Vi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*Vt*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class cc extends ic{constructor(t,e,n=0,i=Math.PI/3,r=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new uc}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const hc=new an,fc=new $e,_c=new $e;class dc extends lc{constructor(){super(new Vi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new te(4,2),this._viewportCount=6,this._viewports=[new Se(2,1,1,1),new Se(0,1,1,1),new Se(3,1,1,1),new Se(1,1,1,1),new Se(3,0,1,1),new Se(1,0,1,1)],this._cubeDirections=[new $e(1,0,0),new $e(-1,0,0),new $e(0,0,1),new $e(0,0,-1),new $e(0,1,0),new $e(0,-1,0)],this._cubeUps=[new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,0,1),new $e(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),fc.setFromMatrixPosition(t.matrixWorld),n.position.copy(fc),_c.copy(n.position),_c.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(_c),n.updateMatrixWorld(),i.makeTranslation(-fc.x,-fc.y,-fc.z),hc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hc)}}class pc extends ic{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new dc}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class mc extends lc{constructor(){super(new dr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gc extends ic{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.shadow=new mc}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class vc extends ic{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class yc extends ic{constructor(t,e,n=10,i=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class wc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new $e)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*i*1.092548),e.addScaledVector(a[5],i*r*1.092548),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],n*r*1.092548),e.addScaledVector(a[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*i),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*i),e.addScaledVector(a[5],.858086*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}class bc extends ic{constructor(t=new wc,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class xc extends Zu{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,a=new ec(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=xc.createMaterialFromType(t.type);if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new Yn).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.iridescence&&(i.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(i.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(i.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(i.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(i.alphaHash=t.alphaHash),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(i.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(i.uniforms[e]={},r.type){case"t":i.uniforms[e].value=n(r.value);break;case"c":i.uniforms[e].value=(new Yn).setHex(r.value);break;case"v2":i.uniforms[e].value=(new te).fromArray(r.value);break;case"v3":i.uniforms[e].value=(new $e).fromArray(r.value);break;case"v4":i.uniforms[e].value=(new Se).fromArray(r.value);break;case"m3":i.uniforms[e].value=(new ee).fromArray(r.value);break;case"m4":i.uniforms[e].value=(new an).fromArray(r.value);break;default:i.uniforms[e].value=r.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(i.glslVersion=t.glslVersion),void 0!==t.extensions)for(const e in t.extensions)i.extensions[e]=t.extensions[e];if(void 0!==t.lights&&(i.lights=t.lights),void 0!==t.clipping&&(i.clipping=t.clipping),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new te).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new te).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(i.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(i.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:vu,SpriteMaterial:Bs,RawShaderMaterial:yu,ShaderMaterial:Bi,PointsMaterial:Ho,MeshPhysicalMaterial:bu,MeshStandardMaterial:wu,MeshPhongMaterial:xu,MeshToonMaterial:Su,MeshNormalMaterial:Eu,MeshLambertMaterial:Mu,MeshDepthMaterial:vs,MeshDistanceMaterial:ys,MeshBasicMaterial:Jn,MeshMatcapMaterial:Tu,LineDashedMaterial:Cu,LineBasicMaterial:Oo,Material:qn}[t]}}class Sc{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Ec extends mi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class Mc extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new ec(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],a=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers[e],r=new Uint32Array(i).buffer;return n[e]=r,r}(t,r.buffer),s=ae(r.type,a),o=new Ls(s,r.stride);return o.uuid=r.uuid,e[i]=o,o}const r=t.isInstancedBufferGeometry?new Ec:new mi,a=t.data.index;if(void 0!==a){const t=ae(a.type,a.array);r.setIndex(new ai(t,1))}const s=t.data.attributes;for(const e in s){const n=s[e];let a;if(n.isInterleavedBufferAttribute){const e=i(t.data,n.data);a=new Fs(e,n.itemSize,n.offset,n.normalized)}else{const t=ae(n.type,n.array);a=new(n.isInstancedBufferAttribute?xo:ai)(t,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),void 0!==n.usage&&a.setUsage(n.usage),void 0!==n.updateRange&&(a.updateRange.offset=n.updateRange.offset,a.updateRange.count=n.updateRange.count),r.setAttribute(e,a)}const o=t.data.morphAttributes;if(o)for(const e in o){const n=o[e],a=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];let s;if(r.isInterleavedBufferAttribute){const e=i(t.data,r.data);s=new Fs(e,r.itemSize,r.offset,r.normalized)}else{const t=ae(r.type,r.array);s=new ai(t,r.itemSize,r.normalized)}void 0!==r.name&&(s.name=r.name),a.push(s)}r.morphAttributes[e]=a}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let t=0,e=l.length;t!==e;++t){const e=l[t];r.addGroup(e.start,e.count,e.materialIndex)}const u=t.data.boundingSphere;if(void 0!==u){const t=new $e;void 0!==u.center&&t.fromArray(u.center),r.boundingSphere=new Ye(t,u.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}const Tc={UVMapping:m,CubeReflectionMapping:g,CubeRefractionMapping:v,EquirectangularReflectionMapping:y,EquirectangularRefractionMapping:w,CubeUVReflectionMapping:b},Cc={RepeatWrapping:x,ClampToEdgeWrapping:S,MirroredRepeatWrapping:E},$c={NearestFilter:M,NearestMipmapNearestFilter:T,NearestMipmapLinearFilter:C,LinearFilter:$,LinearMipmapNearestFilter:A,LinearMipmapLinearFilter:R};let Ac;class Rc{static getContext(){return void 0===Ac&&(Ac=new(window.AudioContext||window.webkitAudioContext)),Ac}static setContext(t){Ac=t}}const Oc=new an,Ic=new an,kc=new an;class Uc{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Pc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Pc();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Pc(){return("undefined"==typeof performance?Date:performance).now()}const Dc=new $e,Nc=new Ce,Lc=new $e,zc=new $e;class Fc extends Rn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Bc=new $e,Hc=new Ce,Vc=new $e,qc=new $e;class jc{constructor(t,e,n){let i,r,a;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let a=this.cumulativeWeight;if(0===a){for(let t=0;t!==i;++t)n[r+t]=n[t];a=e}else{a+=e;const t=e/a;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(n[t]!==n[t+e]){s.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let t=n,r=i;t!==r;++t)e[t]=e[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[n+i]}_slerp(t,e,n,i){Ce.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const a=this._workIndex*r;Ce.multiplyQuaternionsFlat(t,a,t,e,t,n),Ce.slerpFlat(t,e,t,e,t,a,i)}_lerp(t,e,n,i,r){const a=1-i;for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]*a+t[n+s]*i}}_lerpAdditive(t,e,n,i,r){for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]+t[n+a]*i}}}const Gc="\\[\\]\\.:\\/",Wc=new RegExp("["+Gc+"]","g"),Xc="[^"+Gc+"]",Yc="[^"+Gc.replace("\\.","")+"]",Kc=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Xc)+/(WCOD+)?/.source.replace("WCOD",Yc)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xc)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xc)+"$"),Jc=["material","materials","bones","map"];class Zc{constructor(t,e,n){this.path=e,this.parsedPath=n||Zc.parseTrackName(e),this.node=Zc.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Zc.Composite(t,e,n):new Zc(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Wc,"")}static parseTrackName(t){const e=Kc.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==Jc.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const a=n(r.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Zc.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const a=t[i];if(void 0===a){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zc.Composite=class{constructor(t,e,n){const i=n||Zc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Zc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Zc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Zc.prototype.GetterByBindingType=[Zc.prototype._getValue_direct,Zc.prototype._getValue_array,Zc.prototype._getValue_arrayElement,Zc.prototype._getValue_toArray],Zc.prototype.SetterByBindingTypeAndVersioning=[[Zc.prototype._setValue_direct,Zc.prototype._setValue_direct_setNeedsUpdate,Zc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zc.prototype._setValue_array,Zc.prototype._setValue_array_setNeedsUpdate,Zc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zc.prototype._setValue_arrayElement,Zc.prototype._setValue_arrayElement_setNeedsUpdate,Zc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zc.prototype._setValue_fromArray,Zc.prototype._setValue_fromArray_setNeedsUpdate,Zc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Qc{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,a=r.length,s=new Array(a),o={endingStart:St,endingEnd:St};for(let t=0;t!==a;++t){const e=r[t].createInterpolant(null);s[t]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,a=n/i;t.warp(1,r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+n,l[0]=t/a,l[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;i<0||0===n?e=0:(this._startTime=null,e=n*i)}e*=this._updateTimeScale(t);const a=this._updateTime(e),s=this._updateWeight(t);if(s>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===Tt)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(a),e[n].accumulateAdditive(s);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(a),e[n].accumulate(i,s)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const a=2202===n;if(0===t)return-1===r?i:a&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){const e=t<0;this._setEndings(e,!e,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1==(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Et,i.endingEnd=Et):(i.endingStart=t?this.zeroSlopeAtStart?Et:St:Mt,i.endingEnd=e?this.zeroSlopeAtEnd?Et:St:Mt)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=e,s[1]=r+t,o[1]=n,this}}const th=new Float32Array(1);class eh{constructor(t){this.value=t}clone(){return new eh(void 0===this.value.clone?this.value:this.value.clone())}}let nh=0;function ih(t,e){return t.distance-e.distance}function rh(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)rh(i[t],e,n,!0)}}const ah=new te,sh=new $e,oh=new $e,lh=new $e,uh=new $e,ch=new an,hh=new an;function fh(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,fh(t.children[n]));return e}const _h=new $e,dh=new Yn,ph=new Yn,mh=new $e,gh=new $e,vh=new $e,yh=new $e,wh=new Hi;function bh(t,e,n,i,r,a,s){yh.set(r,a,s).unproject(i);const o=e[t];if(void 0!==o){const t=n.getAttribute("position");for(let e=0,n=o.length;e<n;e++)t.setXYZ(o[e],yh.x,yh.y,yh.z)}}const xh=new Oe,Sh=new $e;let Eh,Mh;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n),e.ACESFilmicToneMapping=d,e.AddEquation=s,e.AddOperation=u,e.AdditiveAnimationBlendMode=Tt,e.AdditiveBlending=2,e.AlphaFormat=1021,e.AlwaysCompare=519,e.AlwaysDepth=1,e.AlwaysStencilFunc=519,e.AmbientLight=vc,e.AmbientLightProbe=class extends bc{constructor(t,e=1){super(void 0,e),this.isAmbientLightProbe=!0;const n=(new Yn).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}},e.AnimationAction=Qc,e.AnimationClip=Wu,e.AnimationLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new ec(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e=[];for(let n=0;n<t.length;n++){const i=Wu.parse(t[n]);e.push(i)}return e}},e.AnimationMixer=class extends zt{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,s=t._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let u=l[o];void 0===u&&(u={},l[o]=u);for(let t=0;t!==r;++t){const r=i[t],l=r.name;let c=u[l];if(void 0!==c)++c.referenceCount,a[t]=c;else{if(c=a[t],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,o,l));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;c=new jc(Zc.create(n,l,i),r.ValueTypeName,r.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,o,l),a[t]=c}s[t].resultBuffer=c.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const e=a.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[e];void 0===a&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete s[r],0===Object.keys(s).length&&delete a[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Nu(new Float32Array(2),new Float32Array(2),1,th),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let a="string"==typeof t?Wu.findByName(i,t):t;const s=null!==a?a.uuid:t,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:2500),void 0!==o){const t=o.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const u=new Qc(this,a,e,n);return this._bindAction(u,l),this._addInactiveAction(u,s,r),u}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?Wu.findByName(n,t):t,a=r?r.uuid:t,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let s=0;s!==n;++s)e[s]._update(i,t,r,a);const s=this._bindings,o=this._nActiveBindings;for(let t=0;t!==o;++t)s[t].apply(a);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,a=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,e[r]=a,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},e.AnimationObjectGroup=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let s,o=t.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const c=arguments[u],h=c.uuid;let f=e[h];if(void 0===f){f=o++,e[h]=f,t.push(c);for(let t=0,e=a;t!==e;++t)r[t].push(new Zc(c,n[t],i[t]))}else if(f<l){s=t[f];const o=--l,u=t[o];e[u.uuid]=f,t[f]=u,e[h]=o,t[o]=c;for(let t=0,e=a;t!==e;++t){const e=r[t],a=e[o];let s=e[f];e[f]=a,void 0===s&&(s=new Zc(c,n[t],i[t])),e[o]=s}}else t[f]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=e[o];if(void 0!==l&&l>=r){const a=r++,u=t[a];e[u.uuid]=l,t[l]=u,e[o]=a,t[a]=s;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[l];e[l]=i,e[a]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=t.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=e[o];if(void 0!==l)if(delete e[o],l<r){const s=--r,o=t[s],u=--a,c=t[u];e[o.uuid]=l,t[l]=o,e[c.uuid]=s,t[s]=c,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[s],r=e[u];e[l]=i,e[s]=r,e.pop()}}else{const r=--a,s=t[r];r>0&&(e[s.uuid]=l),t[l]=s,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[t]=i,a.push(t),s.push(e),r.push(c);for(let n=u,i=o.length;n!==i;++n){const i=o[n];c[n]=new Zc(i,t,e)}return c}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];e[t[s]]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}},e.AnimationUtils=Uu,e.ArcCurve=Zo,e.ArrayCamera=Es,e.ArrowHelper=class extends Rn{constructor(t=new $e(0,0,1),e=new $e(0,0,0),n=1,i=16776960,r=.2*n,a=.2*r){super(),this.type="ArrowHelper",void 0===Eh&&(Eh=new mi,Eh.setAttribute("position",new li([0,0,0,0,1,0],3)),Mh=new bl(0,.5,1,5,1),Mh.translate(0,-.5,0)),this.position.copy(e),this.line=new No(Eh,new Oo({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ui(Mh,new Jn({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Sh.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Sh,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},e.Audio=Fc,e.AudioAnalyser=class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}},e.AudioContext=Rc,e.AudioListener=class extends Rn{constructor(){super(),this.type="AudioListener",this.context=Rc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Uc}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dc,Nc,Lc),zc.set(0,0,-1).applyQuaternion(Nc),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Dc.x,t),e.positionY.linearRampToValueAtTime(Dc.y,t),e.positionZ.linearRampToValueAtTime(Dc.z,t),e.forwardX.linearRampToValueAtTime(zc.x,t),e.forwardY.linearRampToValueAtTime(zc.y,t),e.forwardZ.linearRampToValueAtTime(zc.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Dc.x,Dc.y,Dc.z),e.setOrientation(zc.x,zc.y,zc.z,n.x,n.y,n.z)}},e.AudioLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new ec(this.manager);function s(e){i?i(e):console.error(e),r.manager.itemError(t)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(t){try{const n=t.slice(0);Rc.getContext().decodeAudioData(n,(function(t){e(t)}),s)}catch(t){s(t)}}),n,i)}},e.AxesHelper=class extends Fo{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new mi;n.setAttribute("position",new li(e,3)),n.setAttribute("color",new li([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Oo({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const i=new Yn,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},e.BackSide=1,e.BasicDepthPacking=3200,e.BasicShadowMap=0,e.Bone=go,e.BooleanKeyframeTrack=Fu,e.Box2=class{constructor(t=new te(1/0,1/0),e=new te(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ah.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ah).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},e.Box3=Oe,e.Box3Helper=class extends Fo{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new mi;i.setIndex(new ai(n,1)),i.setAttribute("position",new li([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new Oo({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},e.BoxGeometry=Di,e.BoxHelper=class extends Fo{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new mi;r.setIndex(new ai(n,1)),r.setAttribute("position",new ai(i,3)),super(r,new Oo({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&xh.setFromObject(this.object),xh.isEmpty())return;const e=xh.min,n=xh.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},e.BufferAttribute=ai,e.BufferGeometry=mi,e.BufferGeometryLoader=Mc,e.ByteType=1010,e.Cache=Yu,e.Camera=Hi,e.CameraHelper=class extends Fo{constructor(t){const e=new mi,n=new Oo({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};function s(t,e){o(t),o(e)}function o(t){i.push(0,0,0),r.push(0,0,0),void 0===a[t]&&(a[t]=[]),a[t].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),e.setAttribute("position",new li(i,3)),e.setAttribute("color",new li(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Yn(16755200),u=new Yn(16711680),c=new Yn(43775),h=new Yn(16777215),f=new Yn(3355443);this.setColors(l,u,c,h,f)}setColors(t,e,n,i,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,t.r,t.g,t.b),a.setXYZ(1,t.r,t.g,t.b),a.setXYZ(2,t.r,t.g,t.b),a.setXYZ(3,t.r,t.g,t.b),a.setXYZ(4,t.r,t.g,t.b),a.setXYZ(5,t.r,t.g,t.b),a.setXYZ(6,t.r,t.g,t.b),a.setXYZ(7,t.r,t.g,t.b),a.setXYZ(8,t.r,t.g,t.b),a.setXYZ(9,t.r,t.g,t.b),a.setXYZ(10,t.r,t.g,t.b),a.setXYZ(11,t.r,t.g,t.b),a.setXYZ(12,t.r,t.g,t.b),a.setXYZ(13,t.r,t.g,t.b),a.setXYZ(14,t.r,t.g,t.b),a.setXYZ(15,t.r,t.g,t.b),a.setXYZ(16,t.r,t.g,t.b),a.setXYZ(17,t.r,t.g,t.b),a.setXYZ(18,t.r,t.g,t.b),a.setXYZ(19,t.r,t.g,t.b),a.setXYZ(20,t.r,t.g,t.b),a.setXYZ(21,t.r,t.g,t.b),a.setXYZ(22,t.r,t.g,t.b),a.setXYZ(23,t.r,t.g,t.b),a.setXYZ(24,e.r,e.g,e.b),a.setXYZ(25,e.r,e.g,e.b),a.setXYZ(26,e.r,e.g,e.b),a.setXYZ(27,e.r,e.g,e.b),a.setXYZ(28,e.r,e.g,e.b),a.setXYZ(29,e.r,e.g,e.b),a.setXYZ(30,e.r,e.g,e.b),a.setXYZ(31,e.r,e.g,e.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;wh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),bh("c",e,t,wh,0,0,-1),bh("t",e,t,wh,0,0,1),bh("n1",e,t,wh,-1,-1,-1),bh("n2",e,t,wh,1,-1,-1),bh("n3",e,t,wh,-1,1,-1),bh("n4",e,t,wh,1,1,-1),bh("f1",e,t,wh,-1,-1,1),bh("f2",e,t,wh,1,-1,1),bh("f3",e,t,wh,-1,1,1),bh("f4",e,t,wh,1,1,1),bh("u1",e,t,wh,.7,1.1,-1),bh("u2",e,t,wh,-.7,1.1,-1),bh("u3",e,t,wh,0,2,-1),bh("cf1",e,t,wh,-1,0,1),bh("cf2",e,t,wh,1,0,1),bh("cf3",e,t,wh,0,-1,1),bh("cf4",e,t,wh,0,1,1),bh("cn1",e,t,wh,-1,0,-1),bh("cn2",e,t,wh,1,0,-1),bh("cn3",e,t,wh,0,-1,-1),bh("cn4",e,t,wh,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},e.CanvasTexture=class extends xe{constructor(t,e,n,i,r,a,s,o,l){super(t,e,n,i,r,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},e.CapsuleGeometry=yl,e.CatmullRomCurve3=rl,e.CineonToneMapping=_,e.CircleGeometry=wl,e.ClampToEdgeWrapping=S,e.Clock=Uc,e.Color=Yn,e.ColorKeyframeTrack=Bu,e.ColorManagement=pe,e.CompressedArrayTexture=class extends Yo{constructor(t,e,n,i,r,a){super(t,e,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=S}},e.CompressedTexture=Yo,e.CompressedTextureLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=this,a=[],s=new Yo,o=new ec(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function u(u){o.load(t[u],(function(t){const n=r.parse(t,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=$),s.image=a,s.format=n.format,s.needsUpdate=!0,e&&e(s))}),n,i)}if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)u(e);else o.load(t,(function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){a[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)a[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),a[e].format=n.format,a[e].width=n.width,a[e].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=$),s.format=n.format,s.needsUpdate=!0,e&&e(s)}),n,i);return s}},e.ConeGeometry=xl,e.CubeCamera=ji,e.CubeReflectionMapping=g,e.CubeRefractionMapping=v,e.CubeTexture=Gi,e.CubeTextureLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=new Gi;r.colorSpace=Rt;const a=new nc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(t[n],(function(t){r.images[n]=t,s++,6===s&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let e=0;e<t.length;++e)o(e);return r}},e.CubeUVReflectionMapping=b,e.CubicBezierCurve=ll,e.CubicBezierCurve3=ul,e.CubicInterpolant=Du,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.CullFaceNone=0,e.Curve=Ko,e.CurvePath=ml,e.CustomBlending=5,e.CustomToneMapping=p,e.CylinderGeometry=bl,e.Cylindrical=class{constructor(t=1,e=0,n=0){return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}},e.Data3DTexture=Te,e.DataArrayTexture=Me,e.DataTexture=vo,e.DataTextureLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new vo,s=new ec(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(t,(function(t){const n=r.parse(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:S,a.wrapT=void 0!==n.wrapT?n.wrapT:S,a.magFilter=void 0!==n.magFilter?n.magFilter:$,a.minFilter=void 0!==n.minFilter?n.minFilter:$,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=R),1===n.mipmapCount&&(a.minFilter=$),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,e&&e(a,n))}),n,i),a}},e.DataUtils=ni,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=Ju,e.DepthFormat=B,e.DepthStencilFormat=H,e.DepthTexture=$s,e.DirectionalLight=gc,e.DirectionalLightHelper=class extends Rn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let i=new mi;i.setAttribute("position",new li([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new Oo({fog:!1,toneMapped:!1});this.lightPlane=new No(i,r),this.add(this.lightPlane),i=new mi,i.setAttribute("position",new li([0,0,0,0,0,1],3)),this.targetLine=new No(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),mh.setFromMatrixPosition(this.light.matrixWorld),gh.setFromMatrixPosition(this.light.target.matrixWorld),vh.subVectors(gh,mh),this.lightPlane.lookAt(gh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gh),this.targetLine.scale.z=vh.length()}},e.DiscreteInterpolant=Lu,e.DisplayP3ColorSpace=It,e.DodecahedronGeometry=El,e.DoubleSide=2,e.DstAlphaFactor=206,e.DstColorFactor=208,e.DynamicCopyUsage=35050,e.DynamicDrawUsage=35048,e.DynamicReadUsage=35049,e.EdgesGeometry=Al,e.EllipseCurve=Jo,e.EqualCompare=514,e.EqualDepth=4,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=y,e.EquirectangularRefractionMapping=w,e.Euler=pn,e.EventDispatcher=zt,e.ExtrudeGeometry=ru,e.FileLoader=ec,e.Float16BufferAttribute=class extends ai{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=ei(this.array[t*this.itemSize]);return this.normalized&&(e=Jt(e,this.array)),e}setX(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize]=ti(e),this}getY(t){let e=ei(this.array[t*this.itemSize+1]);return this.normalized&&(e=Jt(e,this.array)),e}setY(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+1]=ti(e),this}getZ(t){let e=ei(this.array[t*this.itemSize+2]);return this.normalized&&(e=Jt(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+2]=ti(e),this}getW(t){let e=ei(this.array[t*this.itemSize+3]);return this.normalized&&(e=Jt(e,this.array)),e}setW(t,e){return this.normalized&&(e=Zt(e,this.array)),this.array[t*this.itemSize+3]=ti(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array)),this.array[t+0]=ti(e),this.array[t+1]=ti(n),this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array),i=Zt(i,this.array)),this.array[t+0]=ti(e),this.array[t+1]=ti(n),this.array[t+2]=ti(i),this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Zt(e,this.array),n=Zt(n,this.array),i=Zt(i,this.array),r=Zt(r,this.array)),this.array[t+0]=ti(e),this.array[t+1]=ti(n),this.array[t+2]=ti(i),this.array[t+3]=ti(r),this}},e.Float32BufferAttribute=li,e.Float64BufferAttribute=class extends ai{constructor(t,e,n){super(new Float64Array(t),e,n)}},e.FloatType=P,e.Fog=Ds,e.FogExp2=Ps,e.FramebufferTexture=class extends xe{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=M,this.minFilter=M,this.generateMipmaps=!1,this.needsUpdate=!0}},e.FrontSide=0,e.Frustum=tr,e.GLBufferAttribute=class{constructor(t,e,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}},e.GLSL1="100",e.GLSL3=Pt,e.GreaterCompare=516,e.GreaterDepth=6,e.GreaterEqualCompare=518,e.GreaterEqualDepth=5,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=class extends Fo{constructor(t=10,e=10,n=4473924,i=8947848){n=new Yn(n),i=new Yn(i);const r=e/2,a=t/e,s=t/2,o=[],l=[];for(let t=0,u=0,c=-s;t<=e;t++,c+=a){o.push(-s,0,c,s,0,c),o.push(c,0,-s,c,0,s);const e=t===r?n:i;e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3}const u=new mi;u.setAttribute("position",new li(o,3)),u.setAttribute("color",new li(l,3)),super(u,new Oo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},e.Group=Ms,e.HalfFloatType=D,e.HemisphereLight=rc,e.HemisphereLightHelper=class extends Rn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new ou(e);i.rotateY(.5*Math.PI),this.material=new Jn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new ai(a,3)),this.add(new Ui(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");dh.copy(this.light.color),ph.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?dh:ph;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(_h.setFromMatrixPosition(this.light.matrixWorld).negate())}},e.HemisphereLightProbe=class extends bc{constructor(t,e,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const i=(new Yn).set(t),r=(new Yn).set(e),a=new $e(i.r,i.g,i.b),s=new $e(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}},e.IcosahedronGeometry=su,e.ImageBitmapLoader=class extends Zu{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Yu.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Yu.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}},e.ImageLoader=nc,e.ImageUtils=ge,e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=xo,e.InstancedBufferGeometry=Ec,e.InstancedInterleavedBuffer=class extends Ls{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}},e.InstancedMesh=Ro,e.Int16BufferAttribute=class extends ai{constructor(t,e,n){super(new Int16Array(t),e,n)}},e.Int32BufferAttribute=class extends ai{constructor(t,e,n){super(new Int32Array(t),e,n)}},e.Int8BufferAttribute=class extends ai{constructor(t,e,n){super(new Int8Array(t),e,n)}},e.IntType=k,e.InterleavedBuffer=Ls,e.InterleavedBufferAttribute=Fs,e.Interpolant=Pu,e.InterpolateDiscrete=wt,e.InterpolateLinear=bt,e.InterpolateSmooth=xt,e.InvertStencilOp=5386,e.KeepStencilOp=kt,e.KeyframeTrack=zu,e.LOD=ao,e.LatheGeometry=vl,e.Layers=mn,e.LessCompare=513,e.LessDepth=2,e.LessEqualCompare=515,e.LessEqualDepth=3,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=ic,e.LightProbe=bc,e.Line=No,e.Line3=class{constructor(t=new $e,e=new $e){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){sh.subVectors(t,this.start),oh.subVectors(this.end,this.start);const n=oh.dot(oh);let i=oh.dot(sh)/n;return e&&(i=jt(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},e.LineBasicMaterial=Oo,e.LineCurve=cl,e.LineCurve3=hl,e.LineDashedMaterial=Cu,e.LineLoop=Bo,e.LineSegments=Fo,e.LinearEncoding=Ct,e.LinearFilter=$,e.LinearInterpolant=Nu,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=R,e.LinearMipmapNearestFilter=A,e.LinearSRGBColorSpace=Ot,e.LinearToneMapping=h,e.Loader=Zu,e.LoaderUtils=Sc,e.LoadingManager=Ku,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=1025,e.LuminanceFormat=1024,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=qn,e.MaterialLoader=xc,e.MathUtils=Qt,e.Matrix3=ee,e.Matrix4=an,e.MaxEquation=104,e.Mesh=Ui,e.MeshBasicMaterial=Jn,e.MeshDepthMaterial=vs,e.MeshDistanceMaterial=ys,e.MeshLambertMaterial=Mu,e.MeshMatcapMaterial=Tu,e.MeshNormalMaterial=Eu,e.MeshPhongMaterial=xu,e.MeshPhysicalMaterial=bu,e.MeshStandardMaterial=wu,e.MeshToonMaterial=Su,e.MinEquation=103,e.MirroredRepeatWrapping=E,e.MixOperation=l,e.MultiplyBlending=4,e.MultiplyOperation=o,e.NearestFilter=M,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=C,e.NearestMipmapNearestFilter=T,e.NeverCompare=512,e.NeverDepth=0,e.NeverStencilFunc=512,e.NoBlending=0,e.NoColorSpace=At,e.NoToneMapping=c,e.NormalAnimationBlendMode=2500,e.NormalBlending=1,e.NotEqualCompare=517,e.NotEqualDepth=7,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Hu,e.Object3D=Rn,e.ObjectLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=this,a=""===this.path?Sc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const s=new ec(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){let a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);r.parse(a,e)}),n,i)}async loadAsync(t,e){const n=""===this.path?Sc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new ec(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),a=JSON.parse(r),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(a)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),a=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),s=this.parseTextures(t.textures,a),o=this.parseMaterials(t.materials,s),l=this.parseObject(t.object,r,o,s,n),u=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,u),void 0!==e){let t=!1;for(const e in a)if(a[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,r),s=this.parseMaterials(t.materials,a),o=this.parseObject(t.object,i,s,a,e),l=this.parseSkeletons(t.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new Rl).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let e=0,r=t.length;e<r;e++){const r=(new bo).fromJSON(t[e],i);n[r.uuid]=r}return n}parseGeometries(t,e){const n={};if(void 0!==t){const i=new Mc;for(let r=0,a=t.length;r<a;r++){let a;const s=t[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;default:s.type in gu?a=gu[s.type].fromJSON(s,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new xc;r.setTextures(e);for(let e=0,a=t.length;e<a;e++){const a=t[e];void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=Wu.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function a(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),r.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:ae(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Ku(e);r=new nc(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=n.url;if(Array.isArray(r)){const t=[];for(let e=0,n=r.length;e<n;e++){const n=a(r[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new vo(n.data,n.width,n.height)))}i[n.uuid]=new ye(t)}else{const t=a(n.url);i[n.uuid]=new ye(t)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(t){if("string"==typeof t){const n=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await i.loadAsync(r)}return t.data?{data:ae(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new nc(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],a=i.url;if(Array.isArray(a)){const t=[];for(let e=0,n=a.length;e<n;e++){const n=a[e],i=await r(n);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new vo(i.data,i.width,i.height)))}n[i.uuid]=new ye(t)}else{const t=await r(i.url);n[i.uuid]=new ye(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,a=t.length;r<a;r++){const a=t[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=e[a.image],o=s.data;let l;Array.isArray(o)?(l=new Gi,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new vo:new xe,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,Tc)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Cc),l.wrapT=n(a.wrap[1],Cc)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,$c)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,$c)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),i[a.uuid]=l}return i}parseObject(t,e,n,i,r){let a,s,o;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function u(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function c(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":a=new Ns,void 0!==t.background&&(Number.isInteger(t.background)?a.background=new Yn(t.background):a.background=c(t.background)),void 0!==t.environment&&(a.environment=c(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Ds(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new Ps(t.fog.color,t.fog.density))),void 0!==t.backgroundBlurriness&&(a.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(a.backgroundIntensity=t.backgroundIntensity);break;case"PerspectiveCamera":a=new Vi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new dr(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new vc(t.color,t.intensity);break;case"DirectionalLight":a=new gc(t.color,t.intensity);break;case"PointLight":a=new pc(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new yc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new cc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new rc(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=(new bc).fromJSON(t);break;case"SkinnedMesh":s=l(t.geometry),o=u(t.material),a=new mo(s,o),void 0!==t.bindMode&&(a.bindMode=t.bindMode),void 0!==t.bindMatrix&&a.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(a.skeleton=t.skeleton);break;case"Mesh":s=l(t.geometry),o=u(t.material),a=new Ui(s,o);break;case"InstancedMesh":s=l(t.geometry),o=u(t.material);const e=t.count,n=t.instanceMatrix,i=t.instanceColor;a=new Ro(s,o,e),a.instanceMatrix=new xo(new Float32Array(n.array),16),void 0!==i&&(a.instanceColor=new xo(new Float32Array(i.array),i.itemSize));break;case"LOD":a=new ao;break;case"Line":a=new No(l(t.geometry),u(t.material));break;case"LineLoop":a=new Bo(l(t.geometry),u(t.material));break;case"LineSegments":a=new Fo(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":a=new Wo(l(t.geometry),u(t.material));break;case"Sprite":a=new eo(u(t.material));break;case"Group":a=new Ms;break;case"Bone":a=new go;break;default:a=new Rn}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.up&&a.up.fromArray(t.up),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(a.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children){const s=t.children;for(let t=0;t<s.length;t++)a.add(this.parseObject(s[t],e,n,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];a.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=a.getObjectByProperty("uuid",n.object);void 0!==i&&a.addLevel(i,n.distance,n.hysteresis)}}return a}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}},e.ObjectSpaceNormalMap=1,e.OctahedronGeometry=ou,e.OneFactor=201,e.OneMinusDstAlphaFactor=207,e.OneMinusDstColorFactor=209,e.OneMinusSrcAlphaFactor=205,e.OneMinusSrcColorFactor=203,e.OrthographicCamera=dr,e.PCFShadowMap=i,e.PCFSoftShadowMap=r,e.PMREMGenerator=xr,e.Path=gl,e.PerspectiveCamera=Vi,e.Plane=Ji,e.PlaneGeometry=ir,e.PlaneHelper=class extends No{constructor(t,e=1,n=16776960){const i=n,r=new mi;r.setAttribute("position",new li([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new Oo({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const a=new mi;a.setAttribute("position",new li([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new Ui(a,new Jn({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},e.PointLight=pc,e.PointLightHelper=class extends Ui{constructor(t,e,n){super(new cu(e,4,2),new Jn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},e.Points=Wo,e.PointsMaterial=Ho,e.PolarGridHelper=class extends Fo{constructor(t=10,e=16,n=8,i=64,r=4473924,a=8947848){r=new Yn(r),a=new Yn(a);const s=[],o=[];if(e>1)for(let n=0;n<e;n++){const i=n/e*(2*Math.PI),l=Math.sin(i)*t,u=Math.cos(i)*t;s.push(0,0,0),s.push(l,0,u);const c=1&n?r:a;o.push(c.r,c.g,c.b),o.push(c.r,c.g,c.b)}for(let e=0;e<n;e++){const l=1&e?r:a,u=t-t/n*e;for(let t=0;t<i;t++){let e=t/i*(2*Math.PI),n=Math.sin(e)*u,r=Math.cos(e)*u;s.push(n,0,r),o.push(l.r,l.g,l.b),e=(t+1)/i*(2*Math.PI),n=Math.sin(e)*u,r=Math.cos(e)*u,s.push(n,0,r),o.push(l.r,l.g,l.b)}}const l=new mi;l.setAttribute("position",new li(s,3)),l.setAttribute("color",new li(o,3)),super(l,new Oo({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},e.PolyhedronGeometry=Sl,e.PositionalAudio=class extends Fc{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Bc,Hc,Vc),qc.set(0,0,1).applyQuaternion(Hc);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Bc.x,t),e.positionY.linearRampToValueAtTime(Bc.y,t),e.positionZ.linearRampToValueAtTime(Bc.z,t),e.orientationX.linearRampToValueAtTime(qc.x,t),e.orientationY.linearRampToValueAtTime(qc.y,t),e.orientationZ.linearRampToValueAtTime(qc.z,t)}else e.setPosition(Bc.x,Bc.y,Bc.z),e.setOrientation(qc.x,qc.y,qc.z)}},e.PropertyBinding=Zc,e.PropertyMixer=jc,e.QuadraticBezierCurve=fl,e.QuadraticBezierCurve3=_l,e.Quaternion=Ce,e.QuaternionKeyframeTrack=qu,e.QuaternionLinearInterpolant=Vu,e.RED_GREEN_RGTC2_Format=vt,e.RED_RGTC1_Format=36283,e.REVISION=n,e.RGBADepthPacking=3201,e.RGBAFormat=F,e.RGBAIntegerFormat=j,e.RGBA_ASTC_10x10_Format=_t,e.RGBA_ASTC_10x5_Format=ct,e.RGBA_ASTC_10x6_Format=ht,e.RGBA_ASTC_10x8_Format=ft,e.RGBA_ASTC_12x10_Format=dt,e.RGBA_ASTC_12x12_Format=pt,e.RGBA_ASTC_4x4_Format=nt,e.RGBA_ASTC_5x4_Format=it,e.RGBA_ASTC_5x5_Format=rt,e.RGBA_ASTC_6x5_Format=at,e.RGBA_ASTC_6x6_Format=st,e.RGBA_ASTC_8x5_Format=ot,e.RGBA_ASTC_8x6_Format=lt,e.RGBA_ASTC_8x8_Format=ut,e.RGBA_BPTC_Format=mt,e.RGBA_ETC2_EAC_Format=et,e.RGBA_PVRTC_2BPPV1_Format=Q,e.RGBA_PVRTC_4BPPV1_Format=Z,e.RGBA_S3TC_DXT1_Format=W,e.RGBA_S3TC_DXT3_Format=X,e.RGBA_S3TC_DXT5_Format=Y,e.RGB_ETC1_Format=36196,e.RGB_ETC2_Format=tt,e.RGB_PVRTC_2BPPV1_Format=J,e.RGB_PVRTC_4BPPV1_Format=K,e.RGB_S3TC_DXT1_Format=G,e.RGFormat=1030,e.RGIntegerFormat=q,e.RawShaderMaterial=yu,e.Ray=rn,e.Raycaster=class{constructor(t,e,n=0,i=1/0){this.ray=new rn(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new mn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return rh(t,this,n,e),n.sort(ih),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)rh(t[i],this,n,e);return n.sort(ih),n}},e.RectAreaLight=yc,e.RedFormat=1028,e.RedIntegerFormat=V,e.ReinhardToneMapping=f,e.RepeatWrapping=x,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=102,e.RingGeometry=lu,e.SIGNED_RED_GREEN_RGTC2_Format=yt,e.SIGNED_RED_RGTC1_Format=gt,e.SRGBColorSpace=Rt,e.Scene=Ns,e.ShaderChunk=rr,e.ShaderLib=sr,e.ShaderMaterial=Bi,e.ShadowMaterial=vu,e.Shape=Rl,e.ShapeGeometry=uu,e.ShapePath=class{constructor(){this.type="ShapePath",this.color=new Yn,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new gl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=e[r],s=e[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[a],o=-o,s=e[r],l=-l),t.y<n.y||t.y>s.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-o*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(s.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=s.x)return!0}}return i}const n=eu.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,a,s;const o=[];if(1===i.length)return a=i[0],s=new Rl,s.curves=a.curves,o.push(s),o;let l=!n(i[0].getPoints());l=t?!l:l;const u=[],c=[];let h,f,_=[],d=0;c[d]=void 0,_[d]=[];for(let e=0,s=i.length;e<s;e++)a=i[e],h=a.getPoints(),r=n(h),r=t?!r:r,r?(!l&&c[d]&&d++,c[d]={s:new Rl,p:h},c[d].s.curves=a.curves,l&&d++,_[d]=[]):_[d].push({h:a,p:h[0]});if(!c[0])return function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new Rl;r.curves=i.curves,e.push(r)}return e}(i);if(c.length>1){let t=!1,n=0;for(let t=0,e=c.length;t<e;t++)u[t]=[];for(let i=0,r=c.length;i<r;i++){const r=_[i];for(let a=0;a<r.length;a++){const s=r[a];let o=!0;for(let r=0;r<c.length;r++)e(s.p,c[r].p)&&(i!==r&&n++,o?(o=!1,u[r].push(s)):t=!0);o&&u[i].push(s)}}n>0&&!1===t&&(_=u)}for(let t=0,e=c.length;t<e;t++){s=c[t].s,o.push(s),f=_[t];for(let t=0,e=f.length;t<e;t++)s.holes.push(f[t].h)}return o}},e.ShapeUtils=eu,e.ShortType=1011,e.Skeleton=bo,e.SkeletonHelper=class extends Fo{constructor(t){const e=fh(t),n=new mi,i=[],r=[],a=new Yn(0,0,1),s=new Yn(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.setAttribute("position",new li(i,3)),n.setAttribute("color",new li(r,3)),super(n,new Oo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");hh.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(ch.multiplyMatrices(hh,r.matrixWorld),uh.setFromMatrixPosition(ch),i.setXYZ(n,uh.x,uh.y,uh.z),ch.multiplyMatrices(hh,r.parent.matrixWorld),uh.setFromMatrixPosition(ch),i.setXYZ(n+1,uh.x,uh.y,uh.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}},e.SkinnedMesh=mo,e.Source=ye,e.Sphere=Ye,e.SphereGeometry=cu,e.Spherical=class{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(jt(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},e.SphericalHarmonics3=wc,e.SplineCurve=dl,e.SpotLight=cc,e.SpotLightHelper=class extends Rn{constructor(t,e){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new mi,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,n=32;t<n;t++,e++){const r=t/n*Math.PI*2,a=e/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}n.setAttribute("position",new li(i,3));const r=new Oo({fog:!1,toneMapped:!1});this.cone=new Fo(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),lh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},e.Sprite=eo,e.SpriteMaterial=Bs,e.SrcAlphaFactor=204,e.SrcAlphaSaturateFactor=210,e.SrcColorFactor=202,e.StaticCopyUsage=35046,e.StaticDrawUsage=Ut,e.StaticReadUsage=35045,e.StereoCamera=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,kc.copy(t.projectionMatrix);const n=e.eyeSep/2,i=n*e.near/e.focus,r=e.near*Math.tan(Ht*e.fov*.5)/e.zoom;let a,s;Ic.elements[12]=-n,Oc.elements[12]=n,a=-r*e.aspect+i,s=r*e.aspect+i,kc.elements[0]=2*e.near/(s-a),kc.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(kc),a=-r*e.aspect-i,s=r*e.aspect-i,kc.elements[0]=2*e.near/(s-a),kc.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(kc)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Ic),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Oc)}},e.StreamCopyUsage=35042,e.StreamDrawUsage=35040,e.StreamReadUsage=35041,e.StringKeyframeTrack=ju,e.SubtractEquation=101,e.SubtractiveBlending=3,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=0,e.TetrahedronGeometry=hu,e.Texture=xe,e.TextureLoader=class extends Zu{constructor(t){super(t)}load(t,e,n,i){const r=new xe,a=new nc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}},e.TorusGeometry=fu,e.TorusKnotGeometry=_u,e.Triangle=Hn,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=0,e.TubeGeometry=du,e.TwoPassDoubleSide=2,e.UVMapping=m,e.Uint16BufferAttribute=si,e.Uint32BufferAttribute=oi,e.Uint8BufferAttribute=class extends ai{constructor(t,e,n){super(new Uint8Array(t),e,n)}},e.Uint8ClampedBufferAttribute=class extends ai{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}},e.Uniform=eh,e.UniformsGroup=class extends zt{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:nh++}),this.name="",this.usage=Ut,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let t=0,n=e.length;t<n;t++)this.uniforms.push(e[t].clone());return this}clone(){return(new this.constructor).copy(this)}},e.UniformsLib=ar,e.UniformsUtils=Fi,e.UnsignedByteType=O,e.UnsignedInt248Type=z,e.UnsignedIntType=U,e.UnsignedShort4444Type=N,e.UnsignedShort5551Type=L,e.UnsignedShortType=I,e.VSMShadowMap=a,e.Vector2=te,e.Vector3=$e,e.Vector4=Se,e.VectorKeyframeTrack=Gu,e.VideoTexture=class extends xe{constructor(t,e,n,i,r,a,s,o,l){super(t,e,n,i,r,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:$,this.magFilter=void 0!==r?r:$,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){u.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},e.WebGL1Renderer=Us,e.WebGL3DRenderTarget=class extends Ee{constructor(t=1,e=1,n=1){super(t,e),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Te(null,t,e,n),this.texture.isRenderTargetTexture=!0}},e.WebGLArrayRenderTarget=class extends Ee{constructor(t=1,e=1,n=1){super(t,e),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Me(null,t,e,n),this.texture.isRenderTargetTexture=!0}},e.WebGLCoordinateSystem=Nt,e.WebGLCubeRenderTarget=Wi,e.WebGLMultipleRenderTargets=class extends Ee{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let t=0;t<n;t++)this.texture[t]=r.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}},e.WebGLRenderTarget=Ee,e.WebGLRenderer=ks,e.WebGLUtils=Ss,e.WebGPUCoordinateSystem=Lt,e.WireframeGeometry=pu,e.WrapAroundEnding=Mt,e.ZeroCurvatureEnding=St,e.ZeroFactor=200,e.ZeroSlopeEnding=Et,e.ZeroStencilOp=0,e._SRGBAFormat=Dt,e.sRGBEncoding=$t},6:(t,e,n)=>{"use strict";n.r(e),n.d(e,{OrbitControls:()=>ss});const i="154",r=1,a=2,s=3,o=100,l=0,u=1,c=2,h=0,f=1,_=2,d=3,p=4,m=5,g=301,v=302,y=306,w=1e3,b=1001,x=1002,S=1003,E=1005,M=1006,T=1008,C=1009,$=1012,A=1014,R=1015,O=1016,I=1020,k=1023,U=1026,P=1027,D=33776,N=33777,L=33778,z=33779,F=36492,B=2300,H=2301,V=2302,q=3001,j="srgb",G="srgb-linear",W="display-p3",X=7680,Y="300 es",K=1035,J=2e3,Z=2001;class Q{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const tt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],et=Math.PI/180,nt=180/Math.PI;function it(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(tt[255&t]+tt[t>>8&255]+tt[t>>16&255]+tt[t>>24&255]+"-"+tt[255&e]+tt[e>>8&255]+"-"+tt[e>>16&15|64]+tt[e>>24&255]+"-"+tt[63&n|128]+tt[n>>8&255]+"-"+tt[n>>16&255]+tt[n>>24&255]+tt[255&i]+tt[i>>8&255]+tt[i>>16&255]+tt[i>>24&255]).toLowerCase()}function rt(t,e,n){return Math.max(e,Math.min(n,t))}function at(t,e,n){return(1-n)*t+n*e}function st(t){return 0==(t&t-1)&&0!==t}function ot(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function lt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ut(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class ct{constructor(t=0,e=0){ct.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(rt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ht{constructor(t,e,n,i,r,a,s,o,l){ht.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,a,s,o,l)}set(t,e,n,i,r,a,s,o,l){const u=this.elements;return u[0]=t,u[1]=i,u[2]=s,u[3]=e,u[4]=r,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],_=n[8],d=i[0],p=i[3],m=i[6],g=i[1],v=i[4],y=i[7],w=i[2],b=i[5],x=i[8];return r[0]=a*d+s*g+o*w,r[3]=a*p+s*v+o*b,r[6]=a*m+s*y+o*x,r[1]=l*d+u*g+c*w,r[4]=l*p+u*v+c*b,r[7]=l*m+u*y+c*x,r[2]=h*d+f*g+_*w,r[5]=h*p+f*v+_*b,r[8]=h*m+f*y+_*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8];return e*a*u-e*s*l-n*r*u+n*s*o+i*r*l-i*a*o}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=u*a-s*l,h=s*o-u*r,f=l*r-a*o,_=e*c+n*h+i*f;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const d=1/_;return t[0]=c*d,t[1]=(i*l-u*n)*d,t[2]=(s*n-i*a)*d,t[3]=h*d,t[4]=(u*e-i*o)*d,t[5]=(i*r-s*e)*d,t[6]=f*d,t[7]=(n*o-l*e)*d,t[8]=(a*e-n*r)*d,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+t,-i*l,i*o,-i*(-l*a+o*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(ft.makeScale(t,e)),this}rotate(t){return this.premultiply(ft.makeRotation(-t)),this}translate(t,e){return this.premultiply(ft.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ft=new ht;function _t(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function dt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const pt={};function mt(t){t in pt||(pt[t]=!0,console.warn(t))}function gt(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function vt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const yt=(new ht).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),wt=(new ht).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),bt={[G]:t=>t,[j]:t=>t.convertSRGBToLinear(),[W]:function(t){return t.convertSRGBToLinear().applyMatrix3(wt)}},xt={[G]:t=>t,[j]:t=>t.convertLinearToSRGB(),[W]:function(t){return t.applyMatrix3(yt).convertLinearToSRGB()}},St={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return G},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const i=bt[e],r=xt[n];if(void 0===i||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Et;class Mt{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Et&&(Et=dt("canvas")),Et.width=t.width,Et.height=t.height;const n=Et.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Et}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=dt("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*gt(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*gt(e[t]/255)):e[t]=gt(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Tt=0;class Ct{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Tt++}),this.uuid=it(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push($t(i[e].image)):t.push($t(i[e]))}else t=$t(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function $t(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Mt.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let At=0;class Rt extends Q{constructor(t=Rt.DEFAULT_IMAGE,e=Rt.DEFAULT_MAPPING,n=1001,i=1001,r=1006,a=1008,s=1023,o=1009,l=Rt.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:At++}),this.uuid=it(),this.name="",this.source=new Ct(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new ct(0,0),this.repeat=new ct(1,1),this.center=new ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(mt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===q?j:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case w:t.x=t.x-Math.floor(t.x);break;case b:t.x=t.x<0?0:1;break;case x:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case w:t.y=t.y-Math.floor(t.y);break;case b:t.y=t.y<0?0:1;break;case x:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return mt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===j?q:3e3}set encoding(t){mt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===q?j:""}}Rt.DEFAULT_IMAGE=null,Rt.DEFAULT_MAPPING=300,Rt.DEFAULT_ANISOTROPY=1;class Ot{constructor(t=0,e=0,n=0,i=1){Ot.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const a=.01,s=.1,o=t.elements,l=o[0],u=o[4],c=o[8],h=o[1],f=o[5],_=o[9],d=o[2],p=o[6],m=o[10];if(Math.abs(u-h)<a&&Math.abs(c-d)<a&&Math.abs(_-p)<a){if(Math.abs(u+h)<s&&Math.abs(c+d)<s&&Math.abs(_+p)<s&&Math.abs(l+f+m-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(f+1)/2,g=(m+1)/2,v=(u+h)/4,y=(c+d)/4,w=(_+p)/4;return t>o&&t>g?t<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=y/n):o>g?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=v/i,r=w/i):g<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=y/r,i=w/r),this.set(n,i,r,e),this}let g=Math.sqrt((p-_)*(p-_)+(c-d)*(c-d)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(p-_)/g,this.y=(c-d)/g,this.z=(h-u)/g,this.w=Math.acos((l+f+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class It extends Q{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Ot(0,0,t,e),this.scissorTest=!1,this.viewport=new Ot(0,0,t,e);const i={width:t,height:e,depth:1};void 0!==n.encoding&&(mt("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===q?j:""),this.texture=new Rt(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:M,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Ct(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class kt extends Rt{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=S,this.minFilter=S,this.wrapR=b,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ut extends Rt{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=S,this.minFilter=S,this.wrapR=b,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pt{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,a,s){let o=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3];const h=r[a+0],f=r[a+1],_=r[a+2],d=r[a+3];if(0===s)return t[e+0]=o,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===s)return t[e+0]=h,t[e+1]=f,t[e+2]=_,void(t[e+3]=d);if(c!==d||o!==h||l!==f||u!==_){let t=1-s;const e=o*h+l*f+u*_+c*d,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,e*n);t=Math.sin(t*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*t+h*r,l=l*t+f*r,u=u*t+_*r,c=c*t+d*r,t===1-s){const t=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=t,l*=t,u*=t,c*=t}}t[e]=o,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],u=n[i+3],c=r[a],h=r[a+1],f=r[a+2],_=r[a+3];return t[e]=s*_+u*c+o*f-l*h,t[e+1]=o*_+u*h+l*c-s*f,t[e+2]=l*_+u*f+s*h-o*c,t[e+3]=u*_-s*c-o*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,i=t._y,r=t._z,a=t._order,s=Math.cos,o=Math.sin,l=s(n/2),u=s(i/2),c=s(r/2),h=o(n/2),f=o(i/2),_=o(r/2);switch(a){case"XYZ":this._x=h*u*c+l*f*_,this._y=l*f*c-h*u*_,this._z=l*u*_+h*f*c,this._w=l*u*c-h*f*_;break;case"YXZ":this._x=h*u*c+l*f*_,this._y=l*f*c-h*u*_,this._z=l*u*_-h*f*c,this._w=l*u*c+h*f*_;break;case"ZXY":this._x=h*u*c-l*f*_,this._y=l*f*c+h*u*_,this._z=l*u*_+h*f*c,this._w=l*u*c-h*f*_;break;case"ZYX":this._x=h*u*c-l*f*_,this._y=l*f*c+h*u*_,this._z=l*u*_-h*f*c,this._w=l*u*c+h*f*_;break;case"YZX":this._x=h*u*c+l*f*_,this._y=l*f*c+h*u*_,this._z=l*u*_-h*f*c,this._w=l*u*c-h*f*_;break;case"XZY":this._x=h*u*c-l*f*_,this._y=l*f*c-h*u*_,this._z=l*u*_+h*f*c,this._w=l*u*c+h*f*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],s=e[5],o=e[9],l=e[2],u=e[6],c=e[10],h=n+s+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-o)*t,this._y=(r-l)*t,this._z=(a-i)*t}else if(n>s&&n>c){const t=2*Math.sqrt(1+n-s-c);this._w=(u-o)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(r+l)/t}else if(s>c){const t=2*Math.sqrt(1+s-n-c);this._w=(r-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(o+u)/t}else{const t=2*Math.sqrt(1+c-n-s);this._w=(a-i)/t,this._x=(r+l)/t,this._y=(o+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(rt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,a=t._w,s=e._x,o=e._y,l=e._z,u=e._w;return this._x=n*u+a*s+i*l-r*o,this._y=i*u+a*o+r*s-n*l,this._z=r*u+a*l+n*o-i*s,this._w=a*u-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),u=Math.atan2(l,s),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=a*c+this._w*h,this._x=n*c+this._x*h,this._y=i*c+this._y*h,this._z=r*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Dt{constructor(t=0,e=0,n=0){Dt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Lt.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Lt.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z,o=t.w,l=o*e+a*i-s*n,u=o*n+s*e-r*i,c=o*i+r*n-a*e,h=-r*e-a*n-s*i;return this.x=l*o+h*-r+u*-s-c*-a,this.y=u*o+h*-a+c*-r-l*-s,this.z=c*o+h*-s+l*-a-u*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,a=e.x,s=e.y,o=e.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Nt.copy(this).projectOnVector(t),this.sub(Nt)}reflect(t){return this.sub(Nt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(rt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nt=new Dt,Lt=new Pt;class zt{constructor(t=new Dt(1/0,1/0,1/0),e=new Dt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Bt.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Bt.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Bt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Ht.copy(t.boundingBox),Ht.applyMatrix4(t.matrixWorld),this.union(Ht);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,i=e.count;n<i;n++)Bt.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Bt)}else null===n.boundingBox&&n.computeBoundingBox(),Ht.copy(n.boundingBox),Ht.applyMatrix4(t.matrixWorld),this.union(Ht)}const n=t.children;for(let t=0,i=n.length;t<i;t++)this.expandByObject(n[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Bt),Bt.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Yt),Kt.subVectors(this.max,Yt),Vt.subVectors(t.a,Yt),qt.subVectors(t.b,Yt),jt.subVectors(t.c,Yt),Gt.subVectors(qt,Vt),Wt.subVectors(jt,qt),Xt.subVectors(Vt,jt);let e=[0,-Gt.z,Gt.y,0,-Wt.z,Wt.y,0,-Xt.z,Xt.y,Gt.z,0,-Gt.x,Wt.z,0,-Wt.x,Xt.z,0,-Xt.x,-Gt.y,Gt.x,0,-Wt.y,Wt.x,0,-Xt.y,Xt.x,0];return!!Qt(e,Vt,qt,jt,Kt)&&(e=[1,0,0,0,1,0,0,0,1],!!Qt(e,Vt,qt,jt,Kt)&&(Jt.crossVectors(Gt,Wt),e=[Jt.x,Jt.y,Jt.z],Qt(e,Vt,qt,jt,Kt)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Bt).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Bt).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ft[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ft[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ft[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ft[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ft[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ft[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ft[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ft[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ft)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ft=[new Dt,new Dt,new Dt,new Dt,new Dt,new Dt,new Dt,new Dt],Bt=new Dt,Ht=new zt,Vt=new Dt,qt=new Dt,jt=new Dt,Gt=new Dt,Wt=new Dt,Xt=new Dt,Yt=new Dt,Kt=new Dt,Jt=new Dt,Zt=new Dt;function Qt(t,e,n,i,r){for(let a=0,s=t.length-3;a<=s;a+=3){Zt.fromArray(t,a);const s=r.x*Math.abs(Zt.x)+r.y*Math.abs(Zt.y)+r.z*Math.abs(Zt.z),o=e.dot(Zt),l=n.dot(Zt),u=i.dot(Zt);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>s)return!1}return!0}const te=new zt,ee=new Dt,ne=new Dt;class ie{constructor(t=new Dt,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):te.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ee.subVectors(t,this.center);const e=ee.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(ee,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(ne.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ee.copy(t.center).add(ne)),this.expandByPoint(ee.copy(t.center).sub(ne))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const re=new Dt,ae=new Dt,se=new Dt,oe=new Dt,le=new Dt,ue=new Dt,ce=new Dt;class he{constructor(t=new Dt,e=new Dt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,re)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=re.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(re.copy(this.origin).addScaledVector(this.direction,e),re.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){ae.copy(t).add(e).multiplyScalar(.5),se.copy(e).sub(t).normalize(),oe.copy(this.origin).sub(ae);const r=.5*t.distanceTo(e),a=-this.direction.dot(se),s=oe.dot(this.direction),o=-oe.dot(se),l=oe.lengthSq(),u=Math.abs(1-a*a);let c,h,f,_;if(u>0)if(c=a*o-s,h=a*s-o,_=r*u,c>=0)if(h>=-_)if(h<=_){const t=1/u;c*=t,h*=t,f=c*(c+a*h+2*s)+h*(a*c+h+2*o)+l}else h=r,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*o)+l;else h=-r,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*o)+l;else h<=-_?(c=Math.max(0,-(-a*r+s)),h=c>0?-r:Math.min(Math.max(-r,-o),r),f=-c*c+h*(h+2*o)+l):h<=_?(c=0,h=Math.min(Math.max(-r,-o),r),f=h*(h+2*o)+l):(c=Math.max(0,-(a*r+s)),h=c>0?r:Math.min(Math.max(-r,-o),r),f=-c*c+h*(h+2*o)+l);else h=a>0?-r:r,c=Math.max(0,-(a*h+s)),f=-c*c+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(ae).addScaledVector(se,h),f}intersectSphere(t,e){re.subVectors(t.center,this.origin);const n=re.dot(this.direction),i=re.dot(re)-n*n,r=t.radius*t.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,a,s,o;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),u>=0?(r=(t.min.y-h.y)*u,a=(t.max.y-h.y)*u):(r=(t.max.y-h.y)*u,a=(t.min.y-h.y)*u),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),c>=0?(s=(t.min.z-h.z)*c,o=(t.max.z-h.z)*c):(s=(t.max.z-h.z)*c,o=(t.min.z-h.z)*c),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,re)}intersectTriangle(t,e,n,i,r){le.subVectors(e,t),ue.subVectors(n,t),ce.crossVectors(le,ue);let a,s=this.direction.dot(ce);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}oe.subVectors(this.origin,t);const o=a*this.direction.dot(ue.crossVectors(oe,ue));if(o<0)return null;const l=a*this.direction.dot(le.cross(oe));if(l<0)return null;if(o+l>s)return null;const u=-a*oe.dot(ce);return u<0?null:this.at(u/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class fe{constructor(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p){fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p)}set(t,e,n,i,r,a,s,o,l,u,c,h,f,_,d,p){const m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=s,m[13]=o,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=f,m[7]=_,m[11]=d,m[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new fe).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/_e.setFromMatrixColumn(t,0).length(),r=1/_e.setFromMatrixColumn(t,1).length(),a=1/_e.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=a*u,n=a*c,i=s*u,r=s*c;e[0]=o*u,e[4]=-o*c,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-s*o,e[2]=r-t*l,e[6]=i+n*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*u,n=o*c,i=l*u,r=l*c;e[0]=t+r*s,e[4]=i*s-n,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-s,e[2]=n*s-i,e[6]=r+t*s,e[10]=a*o}else if("ZXY"===t.order){const t=o*u,n=o*c,i=l*u,r=l*c;e[0]=t-r*s,e[4]=-a*c,e[8]=i+n*s,e[1]=n+i*s,e[5]=a*u,e[9]=r-t*s,e[2]=-a*l,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){const t=a*u,n=a*c,i=s*u,r=s*c;e[0]=o*u,e[4]=i*l-n,e[8]=t*l+r,e[1]=o*c,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,n=a*l,i=s*o,r=s*l;e[0]=o*u,e[4]=r-t*c,e[8]=i*c+n,e[1]=c,e[5]=a*u,e[9]=-s*u,e[2]=-l*u,e[6]=n*c+i,e[10]=t-r*c}else if("XZY"===t.order){const t=a*o,n=a*l,i=s*o,r=s*l;e[0]=o*u,e[4]=-c,e[8]=l*u,e[1]=t*c+r,e[5]=a*u,e[9]=n*c-i,e[2]=i*c-n,e[6]=s*u,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(pe,t,me)}lookAt(t,e,n){const i=this.elements;return ye.subVectors(t,e),0===ye.lengthSq()&&(ye.z=1),ye.normalize(),ge.crossVectors(n,ye),0===ge.lengthSq()&&(1===Math.abs(n.z)?ye.x+=1e-4:ye.z+=1e-4,ye.normalize(),ge.crossVectors(n,ye)),ge.normalize(),ve.crossVectors(ye,ge),i[0]=ge.x,i[4]=ve.x,i[8]=ye.x,i[1]=ge.y,i[5]=ve.y,i[9]=ye.y,i[2]=ge.z,i[6]=ve.z,i[10]=ye.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],_=n[2],d=n[6],p=n[10],m=n[14],g=n[3],v=n[7],y=n[11],w=n[15],b=i[0],x=i[4],S=i[8],E=i[12],M=i[1],T=i[5],C=i[9],$=i[13],A=i[2],R=i[6],O=i[10],I=i[14],k=i[3],U=i[7],P=i[11],D=i[15];return r[0]=a*b+s*M+o*A+l*k,r[4]=a*x+s*T+o*R+l*U,r[8]=a*S+s*C+o*O+l*P,r[12]=a*E+s*$+o*I+l*D,r[1]=u*b+c*M+h*A+f*k,r[5]=u*x+c*T+h*R+f*U,r[9]=u*S+c*C+h*O+f*P,r[13]=u*E+c*$+h*I+f*D,r[2]=_*b+d*M+p*A+m*k,r[6]=_*x+d*T+p*R+m*U,r[10]=_*S+d*C+p*O+m*P,r[14]=_*E+d*$+p*I+m*D,r[3]=g*b+v*M+y*A+w*k,r[7]=g*x+v*T+y*R+w*U,r[11]=g*S+v*C+y*O+w*P,r[15]=g*E+v*$+y*I+w*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],s=t[5],o=t[9],l=t[13],u=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+r*o*c-i*l*c-r*s*h+n*l*h+i*s*f-n*o*f)+t[7]*(+e*o*f-e*l*h+r*a*h-i*a*f+i*l*u-r*o*u)+t[11]*(+e*l*c-e*s*f-r*a*c+n*a*f+r*s*u-n*l*u)+t[15]*(-i*s*u-e*o*c+e*s*h+i*a*c-n*a*h+n*o*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11],_=t[12],d=t[13],p=t[14],m=t[15],g=c*p*l-d*h*l+d*o*f-s*p*f-c*o*m+s*h*m,v=_*h*l-u*p*l-_*o*f+a*p*f+u*o*m-a*h*m,y=u*d*l-_*c*l+_*s*f-a*d*f-u*s*m+a*c*m,w=_*c*o-u*d*o-_*s*h+a*d*h+u*s*p-a*c*p,b=e*g+n*v+i*y+r*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return t[0]=g*x,t[1]=(d*h*r-c*p*r-d*i*f+n*p*f+c*i*m-n*h*m)*x,t[2]=(s*p*r-d*o*r+d*i*l-n*p*l-s*i*m+n*o*m)*x,t[3]=(c*o*r-s*h*r-c*i*l+n*h*l+s*i*f-n*o*f)*x,t[4]=v*x,t[5]=(u*p*r-_*h*r+_*i*f-e*p*f-u*i*m+e*h*m)*x,t[6]=(_*o*r-a*p*r-_*i*l+e*p*l+a*i*m-e*o*m)*x,t[7]=(a*h*r-u*o*r+u*i*l-e*h*l-a*i*f+e*o*f)*x,t[8]=y*x,t[9]=(_*c*r-u*d*r-_*n*f+e*d*f+u*n*m-e*c*m)*x,t[10]=(a*d*r-_*s*r+_*n*l-e*d*l-a*n*m+e*s*m)*x,t[11]=(u*s*r-a*c*r-u*n*l+e*c*l+a*n*f-e*s*f)*x,t[12]=w*x,t[13]=(u*d*i-_*c*i+_*n*h-e*d*h-u*n*p+e*c*p)*x,t[14]=(_*s*i-a*d*i-_*n*o+e*d*o+a*n*p-e*s*p)*x,t[15]=(a*c*i-u*s*i+u*n*o-e*c*o-a*n*h+e*s*h)*x,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,s=t.y,o=t.z,l=r*a,u=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+n,u*o-i*a,0,l*o-i*s,u*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,a){return this.set(1,n,r,0,t,1,a,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,a=e._y,s=e._z,o=e._w,l=r+r,u=a+a,c=s+s,h=r*l,f=r*u,_=r*c,d=a*u,p=a*c,m=s*c,g=o*l,v=o*u,y=o*c,w=n.x,b=n.y,x=n.z;return i[0]=(1-(d+m))*w,i[1]=(f+y)*w,i[2]=(_-v)*w,i[3]=0,i[4]=(f-y)*b,i[5]=(1-(h+m))*b,i[6]=(p+g)*b,i[7]=0,i[8]=(_+v)*x,i[9]=(p-g)*x,i[10]=(1-(h+d))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=_e.set(i[0],i[1],i[2]).length();const a=_e.set(i[4],i[5],i[6]).length(),s=_e.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],de.copy(this);const o=1/r,l=1/a,u=1/s;return de.elements[0]*=o,de.elements[1]*=o,de.elements[2]*=o,de.elements[4]*=l,de.elements[5]*=l,de.elements[6]*=l,de.elements[8]*=u,de.elements[9]*=u,de.elements[10]*=u,e.setFromRotationMatrix(de),n.x=r,n.y=a,n.z=s,this}makePerspective(t,e,n,i,r,a,s=2e3){const o=this.elements,l=2*r/(e-t),u=2*r/(n-i),c=(e+t)/(e-t),h=(n+i)/(n-i);let f,_;if(s===J)f=-(a+r)/(a-r),_=-2*a*r/(a-r);else{if(s!==Z)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);f=-a/(a-r),_=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=_,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,a,s=2e3){const o=this.elements,l=1/(e-t),u=1/(n-i),c=1/(a-r),h=(e+t)*l,f=(n+i)*u;let _,d;if(s===J)_=(a+r)*c,d=-2*c;else{if(s!==Z)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);_=r*c,d=-1*c}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=d,o[14]=-_,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const _e=new Dt,de=new fe,pe=new Dt(0,0,0),me=new Dt(1,1,1),ge=new Dt,ve=new Dt,ye=new Dt,we=new fe,be=new Pt;class xe{constructor(t=0,e=0,n=0,i=xe.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],u=i[9],c=i[2],h=i[6],f=i[10];switch(e){case"XYZ":this._y=Math.asin(rt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-rt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(rt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-rt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(rt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-rt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return we.makeRotationFromQuaternion(t),this.setFromRotationMatrix(we,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return be.setFromEuler(this),this.setFromQuaternion(be,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xe.DEFAULT_ORDER="XYZ";class Se{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Ee=0;const Me=new Dt,Te=new Pt,Ce=new fe,$e=new Dt,Ae=new Dt,Re=new Dt,Oe=new Pt,Ie=new Dt(1,0,0),ke=new Dt(0,1,0),Ue=new Dt(0,0,1),Pe={type:"added"},De={type:"removed"};class Ne extends Q{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ee++}),this.uuid=it(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ne.DEFAULT_UP.clone();const t=new Dt,e=new xe,n=new Pt,i=new Dt(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new fe},normalMatrix:{value:new ht}}),this.matrix=new fe,this.matrixWorld=new fe,this.matrixAutoUpdate=Ne.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ne.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Se,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Te.setFromAxisAngle(t,e),this.quaternion.multiply(Te),this}rotateOnWorldAxis(t,e){return Te.setFromAxisAngle(t,e),this.quaternion.premultiply(Te),this}rotateX(t){return this.rotateOnAxis(Ie,t)}rotateY(t){return this.rotateOnAxis(ke,t)}rotateZ(t){return this.rotateOnAxis(Ue,t)}translateOnAxis(t,e){return Me.copy(t).applyQuaternion(this.quaternion),this.position.add(Me.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ie,t)}translateY(t){return this.translateOnAxis(ke,t)}translateZ(t){return this.translateOnAxis(Ue,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ce.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?$e.copy(t):$e.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ae.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ce.lookAt(Ae,$e,this.up):Ce.lookAt($e,Ae,this.up),this.quaternion.setFromRotationMatrix(Ce),i&&(Ce.extractRotation(i.matrixWorld),Te.setFromRotationMatrix(Ce),this.quaternion.premultiply(Te.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Pe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(De)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(De)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ce.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ce.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ce),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(t,e);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ae,t,Re),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ae,Oe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){const i=e[n];!0!==i.matrixWorldAutoUpdate&&!0!==t||i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=a(t.geometries),i=a(t.materials),r=a(t.textures),s=a(t.images),o=a(t.shapes),l=a(t.skeletons),u=a(t.animations),c=a(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=i,n;function a(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Ne.DEFAULT_UP=new Dt(0,1,0),Ne.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ne.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Le=new Dt,ze=new Dt,Fe=new Dt,Be=new Dt,He=new Dt,Ve=new Dt,qe=new Dt,je=new Dt,Ge=new Dt,We=new Dt;let Xe=!1;class Ye{constructor(t=new Dt,e=new Dt,n=new Dt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Le.subVectors(t,e),i.cross(Le);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Le.subVectors(i,e),ze.subVectors(n,e),Fe.subVectors(t,e);const a=Le.dot(Le),s=Le.dot(ze),o=Le.dot(Fe),l=ze.dot(ze),u=ze.dot(Fe),c=a*l-s*s;if(0===c)return r.set(-2,-1,-1);const h=1/c,f=(l*o-s*u)*h,_=(a*u-s*o)*h;return r.set(1-f-_,_,f)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Be),Be.x>=0&&Be.y>=0&&Be.x+Be.y<=1}static getUV(t,e,n,i,r,a,s,o){return!1===Xe&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Xe=!0),this.getInterpolation(t,e,n,i,r,a,s,o)}static getInterpolation(t,e,n,i,r,a,s,o){return this.getBarycoord(t,e,n,i,Be),o.setScalar(0),o.addScaledVector(r,Be.x),o.addScaledVector(a,Be.y),o.addScaledVector(s,Be.z),o}static isFrontFacing(t,e,n,i){return Le.subVectors(n,e),ze.subVectors(t,e),Le.cross(ze).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Le.subVectors(this.c,this.b),ze.subVectors(this.a,this.b),.5*Le.cross(ze).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ye.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ye.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return!1===Xe&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Xe=!0),Ye.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}getInterpolation(t,e,n,i,r){return Ye.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Ye.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ye.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let a,s;He.subVectors(i,n),Ve.subVectors(r,n),je.subVectors(t,n);const o=He.dot(je),l=Ve.dot(je);if(o<=0&&l<=0)return e.copy(n);Ge.subVectors(t,i);const u=He.dot(Ge),c=Ve.dot(Ge);if(u>=0&&c<=u)return e.copy(i);const h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return a=o/(o-u),e.copy(n).addScaledVector(He,a);We.subVectors(t,r);const f=He.dot(We),_=Ve.dot(We);if(_>=0&&f<=_)return e.copy(r);const d=f*l-o*_;if(d<=0&&l>=0&&_<=0)return s=l/(l-_),e.copy(n).addScaledVector(Ve,s);const p=u*_-f*c;if(p<=0&&c-u>=0&&f-_>=0)return qe.subVectors(r,i),s=(c-u)/(c-u+(f-_)),e.copy(i).addScaledVector(qe,s);const m=1/(p+d+h);return a=d*m,s=h*m,e.copy(n).addScaledVector(He,a).addScaledVector(Ve,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Ke=0;class Je extends Q{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ke++}),this.uuid=it(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=o,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=X,this.stencilZFail=X,this.stencilZPass=X,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const Ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qe={h:0,s:0,l:0},tn={h:0,s:0,l:0};function en(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class nn{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=j){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,St.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=St.workingColorSpace){return this.r=t,this.g=e,this.b=n,St.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=St.workingColorSpace){if(t=(t%(r=1)+r)%r,e=rt(e,0,1),n=rt(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=en(r,i,t+1/3),this.g=en(r,i,t),this.b=en(r,i,t-1/3)}var r;return St.toWorkingColorSpace(this,i),this}setStyle(t,e=j){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=j){const n=Ze[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=gt(t.r),this.g=gt(t.g),this.b=gt(t.b),this}copyLinearToSRGB(t){return this.r=vt(t.r),this.g=vt(t.g),this.b=vt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=j){return St.fromWorkingColorSpace(rn.copy(this),t),65536*Math.round(rt(255*rn.r,0,255))+256*Math.round(rt(255*rn.g,0,255))+Math.round(rt(255*rn.b,0,255))}getHexString(t=j){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=St.workingColorSpace){St.fromWorkingColorSpace(rn.copy(this),e);const n=rn.r,i=rn.g,r=rn.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const u=(s+a)/2;if(s===a)o=0,l=0;else{const t=a-s;switch(l=u<=.5?t/(a+s):t/(2-a-s),a){case n:o=(i-r)/t+(i<r?6:0);break;case i:o=(r-n)/t+2;break;case r:o=(n-i)/t+4}o/=6}return t.h=o,t.s=l,t.l=u,t}getRGB(t,e=St.workingColorSpace){return St.fromWorkingColorSpace(rn.copy(this),e),t.r=rn.r,t.g=rn.g,t.b=rn.b,t}getStyle(t=j){St.fromWorkingColorSpace(rn.copy(this),t);const e=rn.r,n=rn.g,i=rn.b;return t!==j?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(t,e,n){return this.getHSL(Qe),Qe.h+=t,Qe.s+=e,Qe.l+=n,this.setHSL(Qe.h,Qe.s,Qe.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Qe),t.getHSL(tn);const n=at(Qe.h,tn.h,e),i=at(Qe.s,tn.s,e),r=at(Qe.l,tn.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const rn=new nn;nn.NAMES=Ze;class an extends Je{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=l,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const sn=new Dt,on=new ct;class ln{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=R,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)on.fromBufferAttribute(this,e),on.applyMatrix3(t),this.setXY(e,on.x,on.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)sn.fromBufferAttribute(this,e),sn.applyMatrix3(t),this.setXYZ(e,sn.x,sn.y,sn.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)sn.fromBufferAttribute(this,e),sn.applyMatrix4(t),this.setXYZ(e,sn.x,sn.y,sn.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)sn.fromBufferAttribute(this,e),sn.applyNormalMatrix(t),this.setXYZ(e,sn.x,sn.y,sn.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)sn.fromBufferAttribute(this,e),sn.transformDirection(t),this.setXYZ(e,sn.x,sn.y,sn.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=lt(e,this.array)),e}setX(t,e){return this.normalized&&(e=ut(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=lt(e,this.array)),e}setY(t,e){return this.normalized&&(e=ut(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=lt(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ut(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=lt(e,this.array)),e}setW(t,e){return this.normalized&&(e=ut(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=ut(e,this.array),n=ut(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=ut(e,this.array),n=ut(n,this.array),i=ut(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=ut(e,this.array),n=ut(n,this.array),i=ut(i,this.array),r=ut(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class un extends ln{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class cn extends ln{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class hn extends ln{constructor(t,e,n){super(new Float32Array(t),e,n)}}let fn=0;const _n=new fe,dn=new Ne,pn=new Dt,mn=new zt,gn=new zt,vn=new Dt;class yn extends Q{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fn++}),this.uuid=it(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(_t(t)?cn:un)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new ht).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return _n.makeRotationFromQuaternion(t),this.applyMatrix4(_n),this}rotateX(t){return _n.makeRotationX(t),this.applyMatrix4(_n),this}rotateY(t){return _n.makeRotationY(t),this.applyMatrix4(_n),this}rotateZ(t){return _n.makeRotationZ(t),this.applyMatrix4(_n),this}translate(t,e,n){return _n.makeTranslation(t,e,n),this.applyMatrix4(_n),this}scale(t,e,n){return _n.makeScale(t,e,n),this.applyMatrix4(_n),this}lookAt(t){return dn.lookAt(t),dn.updateMatrix(),this.applyMatrix4(dn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pn).negate(),this.translate(pn.x,pn.y,pn.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new hn(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Dt(-1/0,-1/0,-1/0),new Dt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];mn.setFromBufferAttribute(n),this.morphTargetsRelative?(vn.addVectors(this.boundingBox.min,mn.min),this.boundingBox.expandByPoint(vn),vn.addVectors(this.boundingBox.max,mn.max),this.boundingBox.expandByPoint(vn)):(this.boundingBox.expandByPoint(mn.min),this.boundingBox.expandByPoint(mn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ie);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Dt,1/0);if(t){const n=this.boundingSphere.center;if(mn.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];gn.setFromBufferAttribute(n),this.morphTargetsRelative?(vn.addVectors(mn.min,gn.min),mn.expandByPoint(vn),vn.addVectors(mn.max,gn.max),mn.expandByPoint(vn)):(mn.expandByPoint(gn.min),mn.expandByPoint(gn.max))}mn.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)vn.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(vn));if(e)for(let r=0,a=e.length;r<a;r++){const a=e[r],s=this.morphTargetsRelative;for(let e=0,r=a.count;e<r;e++)vn.fromBufferAttribute(a,e),s&&(pn.fromBufferAttribute(t,e),vn.add(pn)),i=Math.max(i,n.distanceToSquared(vn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,a=e.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ln(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],u=[];for(let t=0;t<s;t++)l[t]=new Dt,u[t]=new Dt;const c=new Dt,h=new Dt,f=new Dt,_=new ct,d=new ct,p=new ct,m=new Dt,g=new Dt;function v(t,e,n){c.fromArray(i,3*t),h.fromArray(i,3*e),f.fromArray(i,3*n),_.fromArray(a,2*t),d.fromArray(a,2*e),p.fromArray(a,2*n),h.sub(c),f.sub(c),d.sub(_),p.sub(_);const r=1/(d.x*p.y-p.x*d.y);isFinite(r)&&(m.copy(h).multiplyScalar(p.y).addScaledVector(f,-d.y).multiplyScalar(r),g.copy(f).multiplyScalar(d.x).addScaledVector(h,-p.x).multiplyScalar(r),l[t].add(m),l[e].add(m),l[n].add(m),u[t].add(g),u[e].add(g),u[n].add(g))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let t=0,e=y.length;t<e;++t){const e=y[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)v(n[t+0],n[t+1],n[t+2])}const w=new Dt,b=new Dt,x=new Dt,S=new Dt;function E(t){x.fromArray(r,3*t),S.copy(x);const e=l[t];w.copy(e),w.sub(x.multiplyScalar(x.dot(e))).normalize(),b.crossVectors(S,e);const n=b.dot(u[t])<0?-1:1;o[4*t]=w.x,o[4*t+1]=w.y,o[4*t+2]=w.z,o[4*t+3]=n}for(let t=0,e=y.length;t<e;++t){const e=y[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)E(n[t+0]),E(n[t+1]),E(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new ln(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Dt,r=new Dt,a=new Dt,s=new Dt,o=new Dt,l=new Dt,u=new Dt,c=new Dt;if(t)for(let h=0,f=t.count;h<f;h+=3){const f=t.getX(h+0),_=t.getX(h+1),d=t.getX(h+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,_),a.fromBufferAttribute(e,d),u.subVectors(a,r),c.subVectors(i,r),u.cross(c),s.fromBufferAttribute(n,f),o.fromBufferAttribute(n,_),l.fromBufferAttribute(n,d),s.add(u),o.add(u),l.add(u),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(_,o.x,o.y,o.z),n.setXYZ(d,l.x,l.y,l.z)}else for(let t=0,s=e.count;t<s;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),u.subVectors(a,r),c.subVectors(i,r),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)vn.fromBufferAttribute(t,e),vn.normalize(),t.setXYZ(e,vn.x,vn.y,vn.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i);let s=0,o=0;for(let r=0,l=e.length;r<l;r++){s=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)a[o++]=n[s++]}return new ln(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new yn,n=this.index.array,i=this.attributes;for(const r in i){const a=t(i[r],n);e.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],s=r[i];for(let e=0,i=s.length;e<i;e++){const i=t(s[e],n);a.push(i)}e.morphAttributes[i]=a}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],a=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];a.push(i.toJSON(t.data))}a.length>0&&(i[e]=a,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let t=0,e=a.length;t<e;t++){const e=a[t];this.addGroup(e.start,e.count,e.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wn=new fe,bn=new he,xn=new ie,Sn=new Dt,En=new Dt,Mn=new Dt,Tn=new Dt,Cn=new Dt,$n=new Dt,An=new ct,Rn=new ct,On=new ct,In=new Dt,kn=new Dt,Un=new Dt,Pn=new Dt,Dn=new Dt;class Nn extends Ne{constructor(t=new yn,e=new an){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const s=this.morphTargetInfluences;if(r&&s){$n.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(Cn.fromBufferAttribute(o,t),a?$n.addScaledVector(Cn,i):$n.addScaledVector(Cn.sub(e),i))}e.add($n)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),xn.copy(n.boundingSphere),xn.applyMatrix4(r),bn.copy(t.ray).recast(t.near),!1===xn.containsPoint(bn.origin)){if(null===bn.intersectSphere(xn,Sn))return;if(bn.origin.distanceToSquared(Sn)>(t.far-t.near)**2)return}wn.copy(r).invert(),bn.copy(t.ray).applyMatrix4(wn),null!==n.boundingBox&&!1===bn.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,bn)}}_computeIntersections(t,e,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv1,c=r.attributes.normal,h=r.groups,f=r.drawRange;if(null!==s)if(Array.isArray(a))for(let r=0,o=h.length;r<o;r++){const o=h[r],_=a[o.materialIndex];for(let r=Math.max(o.start,f.start),a=Math.min(s.count,Math.min(o.start+o.count,f.start+f.count));r<a;r+=3)i=Ln(this,_,t,n,l,u,c,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,e.push(i))}else for(let r=Math.max(0,f.start),o=Math.min(s.count,f.start+f.count);r<o;r+=3)i=Ln(this,a,t,n,l,u,c,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i));else if(void 0!==o)if(Array.isArray(a))for(let r=0,s=h.length;r<s;r++){const s=h[r],_=a[s.materialIndex];for(let r=Math.max(s.start,f.start),a=Math.min(o.count,Math.min(s.start+s.count,f.start+f.count));r<a;r+=3)i=Ln(this,_,t,n,l,u,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=s.materialIndex,e.push(i))}else for(let r=Math.max(0,f.start),s=Math.min(o.count,f.start+f.count);r<s;r+=3)i=Ln(this,a,t,n,l,u,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}function Ln(t,e,n,i,r,a,s,o,l,u){t.getVertexPosition(o,En),t.getVertexPosition(l,Mn),t.getVertexPosition(u,Tn);const c=function(t,e,n,i,r,a,s,o){let l;if(l=1===e.side?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,0===e.side,o),null===l)return null;Dn.copy(o),Dn.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Dn);return u<n.near||u>n.far?null:{distance:u,point:Dn.clone(),object:t}}(t,e,n,i,En,Mn,Tn,Pn);if(c){r&&(An.fromBufferAttribute(r,o),Rn.fromBufferAttribute(r,l),On.fromBufferAttribute(r,u),c.uv=Ye.getInterpolation(Pn,En,Mn,Tn,An,Rn,On,new ct)),a&&(An.fromBufferAttribute(a,o),Rn.fromBufferAttribute(a,l),On.fromBufferAttribute(a,u),c.uv1=Ye.getInterpolation(Pn,En,Mn,Tn,An,Rn,On,new ct),c.uv2=c.uv1),s&&(In.fromBufferAttribute(s,o),kn.fromBufferAttribute(s,l),Un.fromBufferAttribute(s,u),c.normal=Ye.getInterpolation(Pn,En,Mn,Tn,In,kn,Un,new Dt),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const t={a:o,b:l,c:u,normal:new Dt,materialIndex:0};Ye.getNormal(En,Mn,Tn,t.normal),c.face=t}return c}class zn extends yn{constructor(t=1,e=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],u=[],c=[];let h=0,f=0;function _(t,e,n,i,r,a,_,d,p,m,g){const v=a/p,y=_/m,w=a/2,b=_/2,x=d/2,S=p+1,E=m+1;let M=0,T=0;const C=new Dt;for(let a=0;a<E;a++){const s=a*y-b;for(let o=0;o<S;o++){const h=o*v-w;C[t]=h*i,C[e]=s*r,C[n]=x,l.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=d>0?1:-1,u.push(C.x,C.y,C.z),c.push(o/p),c.push(1-a/m),M+=1}}for(let t=0;t<m;t++)for(let e=0;e<p;e++){const n=h+e+S*t,i=h+e+S*(t+1),r=h+(e+1)+S*(t+1),a=h+(e+1)+S*t;o.push(n,i,a),o.push(i,r,a),T+=6}s.addGroup(f,T,g),f+=T,h+=M}_("z","y","x",-1,-1,n,e,t,a,r,0),_("z","y","x",1,-1,n,e,-t,a,r,1),_("x","z","y",1,1,t,n,e,i,a,2),_("x","z","y",1,-1,t,n,-e,i,a,3),_("x","y","z",1,-1,t,e,n,i,r,4),_("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new hn(l,3)),this.setAttribute("normal",new hn(u,3)),this.setAttribute("uv",new hn(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zn(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Fn(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Bn(t){const e={};for(let n=0;n<t.length;n++){const i=Fn(t[n]);for(const t in i)e[t]=i[t]}return e}function Hn(t){return null===t.getRenderTarget()?t.outputColorSpace:G}const Vn={clone:Fn,merge:Bn};class qn extends Je{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Fn(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class jn extends Ne{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fe,this.projectionMatrix=new fe,this.projectionMatrixInverse=new fe,this.coordinateSystem=J}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Gn extends jn{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*nt*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*et*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*nt*Math.atan(Math.tan(.5*et*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*et*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/t,e-=a.offsetY*n/s,i*=a.width/t,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Wn=-90;class Xn extends Ne{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const i=new Gn(Wn,1,t,e);i.layers=this.layers,this.add(i);const r=new Gn(Wn,1,t,e);r.layers=this.layers,this.add(r);const a=new Gn(Wn,1,t,e);a.layers=this.layers,this.add(a);const s=new Gn(Wn,1,t,e);s.layers=this.layers,this.add(s);const o=new Gn(Wn,1,t,e);o.layers=this.layers,this.add(o);const l=new Gn(Wn,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,a,s,o]=e;for(const t of e)this.remove(t);if(t===J)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(t!==Z)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,r,a,s,o,l]=this.children,u=t.getRenderTarget(),c=t.toneMapping,f=t.xr.enabled;t.toneMapping=h,t.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,o),n.texture.generateMipmaps=_,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=c,t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class Yn extends Rt{constructor(t,e,n,i,r,a,s,o,l,u){super(t=void 0!==t?t:[],e=void 0!==e?e:g,n,i,r,a,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Kn extends It{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];void 0!==e.encoding&&(mt("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===q?j:""),this.texture=new Yn(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:M}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new zn(5,5,5),s=new qn({name:"CubemapFromEquirect",uniforms:Fn(n),vertexShader:i,fragmentShader:r,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Nn(a,s),l=e.minFilter;return e.minFilter===T&&(e.minFilter=M),new Xn(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}const Jn=new Dt,Zn=new Dt,Qn=new ht;class ti{constructor(t=new Dt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Jn.subVectors(n,e).cross(Zn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Jn),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Qn.getNormalMatrix(t),i=this.coplanarPoint(Jn).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ei=new ie,ni=new Dt;class ii{constructor(t=new ti,e=new ti,n=new ti,i=new ti,r=new ti,a=new ti){this.planes=[t,e,n,i,r,a]}set(t,e,n,i,r,a){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=2e3){const n=this.planes,i=t.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],_=i[9],d=i[10],p=i[11],m=i[12],g=i[13],v=i[14],y=i[15];if(n[0].setComponents(o-r,h-l,p-f,y-m).normalize(),n[1].setComponents(o+r,h+l,p+f,y+m).normalize(),n[2].setComponents(o+a,h+u,p+_,y+g).normalize(),n[3].setComponents(o-a,h-u,p-_,y-g).normalize(),n[4].setComponents(o-s,h-c,p-d,y-v).normalize(),e===J)n[5].setComponents(o+s,h+c,p+d,y+v).normalize();else{if(e!==Z)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(s,c,d,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),ei.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),ei.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(ei)}intersectsSprite(t){return ei.center.set(0,0,0),ei.radius=.7071067811865476,ei.applyMatrix4(t.matrixWorld),this.intersectsSphere(ei)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(ni.x=i.normal.x>0?t.max.x:t.min.x,ni.y=i.normal.y>0?t.max.y:t.min.y,ni.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ni)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ri(){let t=null,e=!1,n=null,i=null;function r(e,a){n(e,a),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ai(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=i.get(e);void 0===a?i.set(e,function(e,i){const r=e.array,a=e.usage,s=t.createBuffer();let o;if(t.bindBuffer(i,s),t.bufferData(i,r,a),e.onUploadCallback(),r instanceof Float32Array)o=t.FLOAT;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=t.HALF_FLOAT}else o=t.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=t.SHORT;else if(r instanceof Uint32Array)o=t.UNSIGNED_INT;else if(r instanceof Int32Array)o=t.INT;else if(r instanceof Int8Array)o=t.BYTE;else if(r instanceof Uint8Array)o=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=t.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):a.version<e.version&&(function(e,i,r){const a=i.array,s=i.updateRange;t.bindBuffer(r,e),-1===s.count?t.bufferSubData(r,0,a):(n?t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}(a.buffer,e,r),a.version=e.version)}}}class si extends yn{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,a=e/2,s=Math.floor(n),o=Math.floor(i),l=s+1,u=o+1,c=t/s,h=e/o,f=[],_=[],d=[],p=[];for(let t=0;t<u;t++){const e=t*h-a;for(let n=0;n<l;n++){const i=n*c-r;_.push(i,-e,0),d.push(0,0,1),p.push(n/s),p.push(1-t/o)}}for(let t=0;t<o;t++)for(let e=0;e<s;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),a=e+1+l*t;f.push(n,i,a),f.push(i,r,a)}this.setIndex(f),this.setAttribute("position",new hn(_,3)),this.setAttribute("normal",new hn(d,3)),this.setAttribute("uv",new hn(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new si(t.width,t.height,t.widthSegments,t.heightSegments)}}const oi={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},li={common:{diffuse:{value:new nn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ht},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ht}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ht}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ht}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ht},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ht},normalScale:{value:new ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ht},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ht}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ht}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ht}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0},uvTransform:{value:new ht}},sprite:{diffuse:{value:new nn(16777215)},opacity:{value:1},center:{value:new ct(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ht},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0}}},ui={basic:{uniforms:Bn([li.common,li.specularmap,li.envmap,li.aomap,li.lightmap,li.fog]),vertexShader:oi.meshbasic_vert,fragmentShader:oi.meshbasic_frag},lambert:{uniforms:Bn([li.common,li.specularmap,li.envmap,li.aomap,li.lightmap,li.emissivemap,li.bumpmap,li.normalmap,li.displacementmap,li.fog,li.lights,{emissive:{value:new nn(0)}}]),vertexShader:oi.meshlambert_vert,fragmentShader:oi.meshlambert_frag},phong:{uniforms:Bn([li.common,li.specularmap,li.envmap,li.aomap,li.lightmap,li.emissivemap,li.bumpmap,li.normalmap,li.displacementmap,li.fog,li.lights,{emissive:{value:new nn(0)},specular:{value:new nn(1118481)},shininess:{value:30}}]),vertexShader:oi.meshphong_vert,fragmentShader:oi.meshphong_frag},standard:{uniforms:Bn([li.common,li.envmap,li.aomap,li.lightmap,li.emissivemap,li.bumpmap,li.normalmap,li.displacementmap,li.roughnessmap,li.metalnessmap,li.fog,li.lights,{emissive:{value:new nn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:oi.meshphysical_vert,fragmentShader:oi.meshphysical_frag},toon:{uniforms:Bn([li.common,li.aomap,li.lightmap,li.emissivemap,li.bumpmap,li.normalmap,li.displacementmap,li.gradientmap,li.fog,li.lights,{emissive:{value:new nn(0)}}]),vertexShader:oi.meshtoon_vert,fragmentShader:oi.meshtoon_frag},matcap:{uniforms:Bn([li.common,li.bumpmap,li.normalmap,li.displacementmap,li.fog,{matcap:{value:null}}]),vertexShader:oi.meshmatcap_vert,fragmentShader:oi.meshmatcap_frag},points:{uniforms:Bn([li.points,li.fog]),vertexShader:oi.points_vert,fragmentShader:oi.points_frag},dashed:{uniforms:Bn([li.common,li.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:oi.linedashed_vert,fragmentShader:oi.linedashed_frag},depth:{uniforms:Bn([li.common,li.displacementmap]),vertexShader:oi.depth_vert,fragmentShader:oi.depth_frag},normal:{uniforms:Bn([li.common,li.bumpmap,li.normalmap,li.displacementmap,{opacity:{value:1}}]),vertexShader:oi.meshnormal_vert,fragmentShader:oi.meshnormal_frag},sprite:{uniforms:Bn([li.sprite,li.fog]),vertexShader:oi.sprite_vert,fragmentShader:oi.sprite_frag},background:{uniforms:{uvTransform:{value:new ht},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:oi.background_vert,fragmentShader:oi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:oi.backgroundCube_vert,fragmentShader:oi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:oi.cube_vert,fragmentShader:oi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:oi.equirect_vert,fragmentShader:oi.equirect_frag},distanceRGBA:{uniforms:Bn([li.common,li.displacementmap,{referencePosition:{value:new Dt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:oi.distanceRGBA_vert,fragmentShader:oi.distanceRGBA_frag},shadow:{uniforms:Bn([li.lights,li.fog,{color:{value:new nn(0)},opacity:{value:1}}]),vertexShader:oi.shadow_vert,fragmentShader:oi.shadow_frag}};ui.physical={uniforms:Bn([ui.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ht},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ht},clearcoatNormalScale:{value:new ct(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ht},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ht},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ht},sheen:{value:0},sheenColor:{value:new nn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ht},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ht},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ht},transmissionSamplerSize:{value:new ct},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ht},attenuationDistance:{value:0},attenuationColor:{value:new nn(0)},specularColor:{value:new nn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ht},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ht},anisotropyVector:{value:new ct},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ht}}]),vertexShader:oi.meshphysical_vert,fragmentShader:oi.meshphysical_frag};const ci={r:0,b:0,g:0};function hi(t,e,n,i,r,a,s){const o=new nn(0);let l,u,c=!0===a?0:1,h=null,f=0,_=null;function d(e,n){e.getRGB(ci,Hn(t)),i.buffers.color.setClear(ci.r,ci.g,ci.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,d(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(o,c)},render:function(a,p){let m=!1,g=!0===p.isScene?p.background:null;switch(g&&g.isTexture&&(g=(p.backgroundBlurriness>0?n:e).get(g)),null===g?d(o,c):g&&g.isColor&&(d(g,1),m=!0),t.xr.getEnvironmentBlendMode()){case"opaque":m=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,s),m=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,s),m=!0}(t.autoClear||m)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===y)?(void 0===u&&(u=new Nn(new zn(1,1,1),new qn({name:"BackgroundCubeMaterial",uniforms:Fn(ui.backgroundCube.uniforms),vertexShader:ui.backgroundCube.vertexShader,fragmentShader:ui.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=g,u.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=g.colorSpace!==j,h===g&&f===g.version&&_===t.toneMapping||(u.material.needsUpdate=!0,h=g,f=g.version,_=t.toneMapping),u.layers.enableAll(),a.unshift(u,u.geometry,u.material,0,0,null)):g&&g.isTexture&&(void 0===l&&(l=new Nn(new si(2,2),new qn({name:"BackgroundMaterial",uniforms:Fn(ui.background.uniforms),vertexShader:ui.background.vertexShader,fragmentShader:ui.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=g,l.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,l.material.toneMapped=g.colorSpace!==j,!0===g.matrixAutoUpdate&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),h===g&&f===g.version&&_===t.toneMapping||(l.material.needsUpdate=!0,h=g,f=g.version,_=t.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function fi(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=_(null);let u=l,c=!1;function h(e){return i.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function f(e){return i.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function _(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function p(t){m(t,0)}function m(n,r){const a=u.newAttributes,s=u.enabledAttributes,o=u.attributeDivisors;a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),o[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r)}function g(){const e=u.newAttributes,n=u.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function v(e,n,i,r,a,s,o){!0===o?t.vertexAttribIPointer(e,n,i,a,s):t.vertexAttribPointer(e,n,i,r,a,s)}function y(){w(),c=!0,u!==l&&(u=l,h(u.object))}function w(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,f,y,w){let b=!1;if(s){const e=function(e,n,r){const s=!0===r.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[s];return void 0===c&&(c=_(i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),u[s]=c),c}(y,f,l);u!==e&&(u=e,h(u.object)),b=function(t,e,n,i){const r=u.attributes,a=e.attributes;let s=0;const o=n.getAttributes();for(const e in o)if(o[e].location>=0){const n=r[e];let i=a[e];if(void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;s++}return u.attributesNum!==s||u.index!==i}(r,y,f,w),b&&function(t,e,n,i){const r={},a=e.attributes;let s=0;const o=n.getAttributes();for(const e in o)if(o[e].location>=0){let n=a[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[e]=i,s++}u.attributes=r,u.attributesNum=s,u.index=i}(r,y,f,w)}else{const t=!0===l.wireframe;u.geometry===y.id&&u.program===f.id&&u.wireframe===t||(u.geometry=y.id,u.program=f.id,u.wireframe=t,b=!0)}null!==w&&n.update(w,t.ELEMENT_ARRAY_BUFFER),(b||c)&&(c=!1,function(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=o.attributes,u=s.getAttributes(),c=a.defaultAttributeValues;for(const e in u){const a=u[e];if(a.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,l=s.itemSize,u=n.get(s);if(void 0===u)continue;const c=u.buffer,h=u.type,f=u.bytesPerElement,_=!0===i.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||1013===s.gpuType);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,u=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<a.locationSize;t++)m(a.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<a.locationSize;t++)p(a.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<a.locationSize;t++)v(a.location+t,l/a.locationSize,h,e,i*f,(u+l/a.locationSize*t)*f,_)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<a.locationSize;t++)m(a.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<a.locationSize;t++)p(a.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<a.locationSize;t++)v(a.location+t,l/a.locationSize,h,e,l*f,l/a.locationSize*t*f,_)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(a.location,n);break;case 3:t.vertexAttrib3fv(a.location,n);break;case 4:t.vertexAttrib4fv(a.location,n);break;default:t.vertexAttrib1fv(a.location,n)}}}}g()}(r,l,f,y),null!==w&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(w).buffer))},reset:y,resetDefaultState:w,dispose:function(){y();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)f(i[t].object),delete i[t];delete n[t.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:g}}function _i(t,e,n,i){const r=i.isWebGL2;let a;this.setMode=function(t){a=t},this.render=function(e,i){t.drawArrays(a,e,i),n.update(i,a,1)},this.renderInstances=function(i,s,o){if(0===o)return;let l,u;if(r)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](a,i,s,o),n.update(s,a,o)}}function di(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),_=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,y=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:_,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?t.getParameter(t.MAX_SAMPLES):0}}function pi(t){const e=this;let n=null,i=0,r=!1,a=!1;const s=new ti,o=new ht,l={value:null,needsUpdate:!1};function u(t,n,i,r){const a=null!==t?t.length:0;let u=null;if(0!==a){if(u=l.value,!0!==r||null===u){const e=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===u||u.length<e)&&(u=new Float32Array(e));for(let e=0,n=i;e!==a;++e,n+=4)s.copy(t[e]).applyMatrix4(r,o),s.normal.toArray(u,n),u[n+3]=s.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(s,o,c){const h=s.clippingPlanes,f=s.clipIntersection,_=s.clipShadows,d=t.get(s);if(!r||null===h||0===h.length||a&&!_)a?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0);else{const t=a?0:i,e=4*t;let r=d.clippingState||null;l.value=r,r=u(h,o,e,c);for(let t=0;t!==e;++t)r[t]=n[t];d.clippingState=r,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=t}}}function mi(t){let e=new WeakMap;function n(t,e){return 303===e?t.mapping=g:304===e&&(t.mapping=v),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping;if(303===a||304===a){if(e.has(r))return n(e.get(r).texture,r.mapping);{const a=r.image;if(a&&a.height>0){const s=new Kn(a.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}class gi extends jn{constructor(t=-1,e=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,a=n+t,s=i+e,o=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,a=r+t*this.view.width,s-=e*this.view.offsetY,o=s-e*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const vi=[.125,.215,.35,.446,.526,.582],yi=new gi,wi=new nn;let bi=null;const xi=(1+Math.sqrt(5))/2,Si=1/xi,Ei=[new Dt(1,1,1),new Dt(-1,1,1),new Dt(1,1,-1),new Dt(-1,1,-1),new Dt(0,xi,Si),new Dt(0,xi,-Si),new Dt(Si,0,xi),new Dt(-Si,0,xi),new Dt(xi,Si,0),new Dt(-xi,Si,0)];class Mi{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){bi=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ai(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=$i(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(bi),t.scissorTest=!1,Ci(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===g||t.mapping===v?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),bi=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:M,minFilter:M,generateMipmaps:!1,type:O,format:k,colorSpace:G,depthBuffer:!1},i=Ti(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ti(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const a=t-4+1+vi.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);n.push(a);let o=1/a;s>t-4?o=vi[s-t+4-1]:0===s&&(o=0),i.push(o);const l=1/(a-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],f=6,_=6,d=3,p=2,m=1,g=new Float32Array(d*_*f),v=new Float32Array(p*_*f),y=new Float32Array(m*_*f);for(let t=0;t<f;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,d*_*t),v.set(h,p*_*t);const r=[t,t,t,t,t,t];y.set(r,m*_*t)}const w=new yn;w.setAttribute("position",new ln(g,d)),w.setAttribute("uv",new ln(v,p)),w.setAttribute("faceIndex",new ln(y,m)),e.push(w),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(20),r=new Dt(0,1,0);return new qn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(i,t,e)}return i}_compileMaterial(t){const e=new Nn(this._lodPlanes[0],t);this._renderer.compile(e,yi)}_sceneToCubeUV(t,e,n,i){const r=new Gn(90,1,e,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(wi),o.toneMapping=h,o.autoClear=!1;const c=new an({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),f=new Nn(new zn,c);let _=!1;const d=t.background;d?d.isColor&&(c.color.copy(d),t.background=null,_=!0):(c.color.copy(wi),_=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(r.up.set(0,a[e],0),r.lookAt(s[e],0,0)):1===n?(r.up.set(0,0,a[e]),r.lookAt(0,s[e],0)):(r.up.set(0,a[e],0),r.lookAt(0,0,s[e]));const l=this._cubeSize;Ci(i,n*l,e>2?l:0,l,l),o.setRenderTarget(i),_&&o.render(f,r),o.render(t,r)}f.geometry.dispose(),f.material.dispose(),o.toneMapping=u,o.autoClear=l,t.background=d}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===g||t.mapping===v;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ai()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=$i());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new Nn(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const s=this._cubeSize;Ci(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(a,yi)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),i=Ei[(e-1)%Ei.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Nn(this._lodPlanes[i],l),c=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,_=r/f,d=isFinite(r)?1+Math.floor(3*_):20;d>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`);const p=[];let m=0;for(let t=0;t<20;++t){const e=t/_,n=Math.exp(-e*e/2);p.push(n),0===t?m+=n:t<d&&(m+=2*n)}for(let t=0;t<p.length;t++)p[t]=p[t]/m;c.envMap.value=t.texture,c.samples.value=d,c.weights.value=p,c.latitudinal.value="latitudinal"===a,s&&(c.poleAxis.value=s);const{_lodMax:g}=this;c.dTheta.value=f,c.mipInt.value=g-n;const v=this._sizeLods[i];Ci(e,3*v*(i>g-4?i-g+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(e),o.render(u,yi)}}function Ti(t,e,n){const i=new It(t,e,n);return i.texture.mapping=y,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ci(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function $i(){return new qn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ai(){return new qn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ri(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,s=303===a||304===a,o=a===g||a===v;if(s||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new Mi(t)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||o&&a&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(a)){null===n&&(n=new Mi(t));const a=s?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,a),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Oi(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Ii(t,e,n,i){const r={},a=new WeakMap;function s(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const t in o.attributes)e.remove(o.attributes[t]);for(const t in o.morphAttributes){const n=o.morphAttributes[t];for(let t=0,i=n.length;t<i;t++)e.remove(n[t])}o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(e.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],i=t.index,r=t.attributes.position;let s=0;if(null!==i){const t=i.array;s=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],a=t[e+2];n.push(i,r,r,a,a,i)}}else{const t=r.array;s=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const o=new(_t(n)?cn:un)(n,1);o.version=s;const l=a.get(t);l&&e.remove(l),a.set(t,o)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",s),r[e.id]=!0,n.memory.geometries++),e},update:function(n){const i=n.attributes;for(const n in i)e.update(i[n],t.ARRAY_BUFFER);const r=n.morphAttributes;for(const n in r){const i=r[n];for(let n=0,r=i.length;n<r;n++)e.update(i[n],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=a.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return a.get(t)}}}function ki(t,e,n,i){const r=i.isWebGL2;let a,s,o;this.setMode=function(t){a=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(a,i,s,e*o),n.update(i,a,1)},this.renderInstances=function(i,l,u){if(0===u)return;let c,h;if(r)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](a,l,s,i*o,u),n.update(l,a,u)}}function Ui(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Pi(t,e){return t[0]-e[0]}function Di(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ni(t,e,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new Ot,o=[];for(let t=0;t<8;t++)o[t]=[t,0];return{update:function(l,u,c){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=void 0!==f?f.length:0;let d=a.get(u);if(void 0===d||d.count!==_){void 0!==d&&d.texture.dispose();const g=void 0!==u.morphAttributes.position,v=void 0!==u.morphAttributes.normal,y=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let S=0;!0===g&&(S=1),!0===v&&(S=2),!0===y&&(S=3);let E=u.attributes.position.count*S,M=1;E>e.maxTextureSize&&(M=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*M*4*_),C=new kt(T,E,M,_);C.type=R,C.needsUpdate=!0;const $=4*S;for(let O=0;O<_;O++){const I=w[O],k=b[O],U=x[O],P=E*M*4*O;for(let D=0;D<I.count;D++){const N=D*$;!0===g&&(s.fromBufferAttribute(I,D),T[P+N+0]=s.x,T[P+N+1]=s.y,T[P+N+2]=s.z,T[P+N+3]=0),!0===v&&(s.fromBufferAttribute(k,D),T[P+N+4]=s.x,T[P+N+5]=s.y,T[P+N+6]=s.z,T[P+N+7]=0),!0===y&&(s.fromBufferAttribute(U,D),T[P+N+8]=s.x,T[P+N+9]=s.y,T[P+N+10]=s.z,T[P+N+11]=4===U.itemSize?s.w:1)}}function A(){C.dispose(),a.delete(u),u.removeEventListener("dispose",A)}d={count:_,texture:C,size:new ct(E,M)},a.set(u,d),u.addEventListener("dispose",A)}let p=0;for(let L=0;L<h.length;L++)p+=h[L];const m=u.morphTargetsRelative?1:1-p;c.getUniforms().setValue(t,"morphTargetBaseInfluence",m),c.getUniforms().setValue(t,"morphTargetInfluences",h),c.getUniforms().setValue(t,"morphTargetsTexture",d.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",d.size)}else{const z=void 0===h?0:h.length;let F=i[u.id];if(void 0===F||F.length!==z){F=[];for(let j=0;j<z;j++)F[j]=[j,0];i[u.id]=F}for(let G=0;G<z;G++){const W=F[G];W[0]=G,W[1]=h[G]}F.sort(Di);for(let X=0;X<8;X++)X<z&&F[X][1]?(o[X][0]=F[X][0],o[X][1]=F[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(Pi);const B=u.morphAttributes.position,H=u.morphAttributes.normal;let V=0;for(let Y=0;Y<8;Y++){const K=o[Y],J=K[0],Z=K[1];J!==Number.MAX_SAFE_INTEGER&&Z?(B&&u.getAttribute("morphTarget"+Y)!==B[J]&&u.setAttribute("morphTarget"+Y,B[J]),H&&u.getAttribute("morphNormal"+Y)!==H[J]&&u.setAttribute("morphNormal"+Y,H[J]),r[Y]=Z,V+=Z):(B&&!0===u.hasAttribute("morphTarget"+Y)&&u.deleteAttribute("morphTarget"+Y),H&&!0===u.hasAttribute("morphNormal"+Y)&&u.deleteAttribute("morphNormal"+Y),r[Y]=0)}const q=u.morphTargetsRelative?1:1-V;c.getUniforms().setValue(t,"morphTargetBaseInfluence",q),c.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function Li(t,e,n,i){let r=new WeakMap;function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(s){const o=i.render.frame,l=s.geometry,u=e.get(s,l);if(r.get(u)!==o&&(e.update(u),r.set(u,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),r.get(s)!==o&&(n.update(s.instanceMatrix,t.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,t.ARRAY_BUFFER),r.set(s,o))),s.isSkinnedMesh){const t=s.skeleton;r.get(t)!==o&&(t.update(),r.set(t,o))}return u},dispose:function(){r=new WeakMap}}}const zi=new Rt,Fi=new kt,Bi=new Ut,Hi=new Yn,Vi=[],qi=[],ji=new Float32Array(16),Gi=new Float32Array(9),Wi=new Float32Array(4);function Xi(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=Vi[r];if(void 0===a&&(a=new Float32Array(r),Vi[r]=a),0!==e){i.toArray(a,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(a,r)}return a}function Yi(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ki(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Ji(t,e){let n=qi[e];void 0===n&&(n=new Int32Array(e),qi[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Zi(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Qi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Yi(n,e))return;t.uniform2fv(this.addr,e),Ki(n,e)}}function tr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Yi(n,e))return;t.uniform3fv(this.addr,e),Ki(n,e)}}function er(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Yi(n,e))return;t.uniform4fv(this.addr,e),Ki(n,e)}}function nr(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Yi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ki(n,e)}else{if(Yi(n,i))return;Wi.set(i),t.uniformMatrix2fv(this.addr,!1,Wi),Ki(n,i)}}function ir(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Yi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ki(n,e)}else{if(Yi(n,i))return;Gi.set(i),t.uniformMatrix3fv(this.addr,!1,Gi),Ki(n,i)}}function rr(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Yi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ki(n,e)}else{if(Yi(n,i))return;ji.set(i),t.uniformMatrix4fv(this.addr,!1,ji),Ki(n,i)}}function ar(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function sr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Yi(n,e))return;t.uniform2iv(this.addr,e),Ki(n,e)}}function or(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Yi(n,e))return;t.uniform3iv(this.addr,e),Ki(n,e)}}function lr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Yi(n,e))return;t.uniform4iv(this.addr,e),Ki(n,e)}}function ur(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function cr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Yi(n,e))return;t.uniform2uiv(this.addr,e),Ki(n,e)}}function hr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Yi(n,e))return;t.uniform3uiv(this.addr,e),Ki(n,e)}}function fr(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Yi(n,e))return;t.uniform4uiv(this.addr,e),Ki(n,e)}}function _r(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||zi,r)}function dr(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Bi,r)}function pr(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Hi,r)}function mr(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Fi,r)}function gr(t,e){t.uniform1fv(this.addr,e)}function vr(t,e){const n=Xi(e,this.size,2);t.uniform2fv(this.addr,n)}function yr(t,e){const n=Xi(e,this.size,3);t.uniform3fv(this.addr,n)}function wr(t,e){const n=Xi(e,this.size,4);t.uniform4fv(this.addr,n)}function br(t,e){const n=Xi(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function xr(t,e){const n=Xi(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Sr(t,e){const n=Xi(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Er(t,e){t.uniform1iv(this.addr,e)}function Mr(t,e){t.uniform2iv(this.addr,e)}function Tr(t,e){t.uniform3iv(this.addr,e)}function Cr(t,e){t.uniform4iv(this.addr,e)}function $r(t,e){t.uniform1uiv(this.addr,e)}function Ar(t,e){t.uniform2uiv(this.addr,e)}function Rr(t,e){t.uniform3uiv(this.addr,e)}function Or(t,e){t.uniform4uiv(this.addr,e)}function Ir(t,e,n){const i=this.cache,r=e.length,a=Ji(n,r);Yi(i,a)||(t.uniform1iv(this.addr,a),Ki(i,a));for(let t=0;t!==r;++t)n.setTexture2D(e[t]||zi,a[t])}function kr(t,e,n){const i=this.cache,r=e.length,a=Ji(n,r);Yi(i,a)||(t.uniform1iv(this.addr,a),Ki(i,a));for(let t=0;t!==r;++t)n.setTexture3D(e[t]||Bi,a[t])}function Ur(t,e,n){const i=this.cache,r=e.length,a=Ji(n,r);Yi(i,a)||(t.uniform1iv(this.addr,a),Ki(i,a));for(let t=0;t!==r;++t)n.setTextureCube(e[t]||Hi,a[t])}function Pr(t,e,n){const i=this.cache,r=e.length,a=Ji(n,r);Yi(i,a)||(t.uniform1iv(this.addr,a),Ki(i,a));for(let t=0;t!==r;++t)n.setTexture2DArray(e[t]||Fi,a[t])}class Dr{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Zi;case 35664:return Qi;case 35665:return tr;case 35666:return er;case 35674:return nr;case 35675:return ir;case 35676:return rr;case 5124:case 35670:return ar;case 35667:case 35671:return sr;case 35668:case 35672:return or;case 35669:case 35673:return lr;case 5125:return ur;case 36294:return cr;case 36295:return hr;case 36296:return fr;case 35678:case 36198:case 36298:case 36306:case 35682:return _r;case 35679:case 36299:case 36307:return dr;case 35680:case 36300:case 36308:case 36293:return pr;case 36289:case 36303:case 36311:case 36292:return mr}}(e.type)}}class Nr{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return gr;case 35664:return vr;case 35665:return yr;case 35666:return wr;case 35674:return br;case 35675:return xr;case 35676:return Sr;case 5124:case 35670:return Er;case 35667:case 35671:return Mr;case 35668:case 35672:return Tr;case 35669:case 35673:return Cr;case 5125:return $r;case 36294:return Ar;case 36295:return Rr;case 36296:return Or;case 35678:case 36198:case 36298:case 36306:case 35682:return Ir;case 35679:case 36299:case 36307:return kr;case 35680:case 36300:case 36308:case 36293:return Ur;case 36289:case 36303:case 36311:case 36292:return Pr}}(e.type)}}class Lr{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(t,e[a.id],n)}}}const zr=/(\w+)(\])?(\[|\.)?/g;function Fr(t,e){t.seq.push(e),t.map[e.id]=e}function Br(t,e,n){const i=t.name,r=i.length;for(zr.lastIndex=0;;){const a=zr.exec(i),s=zr.lastIndex;let o=a[1];const l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===r){Fr(n,void 0===u?new Dr(o,t,e):new Nr(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new Lr(o),Fr(n,t)),n=t}}}class Hr{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);Br(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,a=e.length;r!==a;++r){const a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function Vr(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let qr=0;function jr(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let t=r;t<a;t++){const r=t+1;i.push(`${r===e?">":" "} ${r}: ${n[t]}`)}return i.join("\n")}(t.getShaderSource(e),i)}return r}function Gr(t,e){const n=function(t){switch(t){case G:return["Linear","( value )"];case j:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Wr(t,e){let n;switch(e){case f:n="Linear";break;case _:n="Reinhard";break;case d:n="OptimizedCineon";break;case p:n="ACESFilmic";break;case m:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Xr(t){return""!==t}function Yr(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Jr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Zr(t){return t.replace(Jr,ta)}const Qr=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ta(t,e){let n=oi[e];if(void 0===n){const t=Qr.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=oi[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return Zr(n)}const ea=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function na(t){return t.replace(ea,ia)}function ia(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function ra(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function aa(t,e,n,i){const o=t.getContext(),f=n.defines;let _=n.vertexShader,d=n.fragmentShader;const p=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===r?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===a?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===s&&(e="SHADOWMAP_TYPE_VSM"),e}(n),m=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case g:case v:e="ENVMAP_TYPE_CUBE";break;case y:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),w=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===v&&(e="ENVMAP_MODE_REFRACTION"),e}(n),b=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case l:e="ENVMAP_BLENDING_MULTIPLY";break;case u:e="ENVMAP_BLENDING_MIX";break;case c:e="ENVMAP_BLENDING_ADD"}return e}(n),x=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),S=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xr).join("\n")}(n),E=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(f),M=o.createProgram();let T,C,$=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(T=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E].filter(Xr).join("\n"),T.length>0&&(T+="\n"),C=[S,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E].filter(Xr).join("\n"),C.length>0&&(C+="\n")):(T=[ra(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+w:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xr).join("\n"),C=[S,ra(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,E,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+w:"",n.envMap?"#define "+b:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==h?"#define TONE_MAPPING":"",n.toneMapping!==h?oi.tonemapping_pars_fragment:"",n.toneMapping!==h?Wr("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",oi.colorspace_pars_fragment,Gr("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Xr).join("\n")),_=Zr(_),_=Yr(_,n),_=Kr(_,n),d=Zr(d),d=Yr(d,n),d=Kr(d,n),_=na(_),d=na(d),n.isWebGL2&&!0!==n.isRawShaderMaterial&&($="#version 300 es\n",T=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+T,C=["#define varying in",n.glslVersion===Y?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Y?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+C);const A=$+T+_,R=$+C+d,O=Vr(o,o.VERTEX_SHADER,A),I=Vr(o,o.FRAGMENT_SHADER,R);if(o.attachShader(M,O),o.attachShader(M,I),void 0!==n.index0AttributeName?o.bindAttribLocation(M,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(M,0,"position"),o.linkProgram(M),t.debug.checkShaderErrors){const e=o.getProgramInfoLog(M).trim(),n=o.getShaderInfoLog(O).trim(),i=o.getShaderInfoLog(I).trim();let r=!0,a=!0;if(!1===o.getProgramParameter(M,o.LINK_STATUS))if(r=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(o,M,O,I);else{const t=jr(o,O,"vertex"),n=jr(o,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(M,o.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==i||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:n,prefix:T},fragmentShader:{log:i,prefix:C}})}let k,U;return o.deleteShader(O),o.deleteShader(I),this.getUniforms=function(){return void 0===k&&(k=new Hr(o,M)),k},this.getAttributes=function(){return void 0===U&&(U=function(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),a=i.name;let s=1;i.type===t.FLOAT_MAT2&&(s=2),i.type===t.FLOAT_MAT3&&(s=3),i.type===t.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}(o,M)),U},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=qr++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=O,this.fragmentShader=I,this}let sa=0;class oa{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new la(t),e.set(t,n)),n}}class la{constructor(t){this.id=sa++,this.code=t,this.usedTimes=0}}function ua(t,e,n,i,r,a,s){const o=new Se,l=new oa,u=[],c=r.isWebGL2,f=r.logarithmicDepthBuffer,_=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return 0===t?"uv":`uv${t}`}return{getParameters:function(a,o,u,g,v){const w=g.fog,b=v.geometry,x=a.isMeshStandardMaterial?g.environment:null,S=(a.isMeshStandardMaterial?n:e).get(a.envMap||x),E=S&&S.mapping===y?S.image.height:null,M=p[a.type];null!==a.precision&&(d=r.getMaxPrecision(a.precision),d!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead."));const T=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,C=void 0!==T?T.length:0;let $,A,R,O,I=0;if(void 0!==b.morphAttributes.position&&(I=1),void 0!==b.morphAttributes.normal&&(I=2),void 0!==b.morphAttributes.color&&(I=3),M){const t=ui[M];$=t.vertexShader,A=t.fragmentShader}else $=a.vertexShader,A=a.fragmentShader,l.update(a),R=l.getVertexShaderID(a),O=l.getFragmentShaderID(a);const k=t.getRenderTarget(),U=!0===v.isInstancedMesh,P=!!a.map,D=!!a.matcap,N=!!S,L=!!a.aoMap,z=!!a.lightMap,F=!!a.bumpMap,B=!!a.normalMap,H=!!a.displacementMap,V=!!a.emissiveMap,q=!!a.metalnessMap,j=!!a.roughnessMap,W=a.anisotropy>0,X=a.clearcoat>0,Y=a.iridescence>0,K=a.sheen>0,J=a.transmission>0,Z=W&&!!a.anisotropyMap,Q=X&&!!a.clearcoatMap,tt=X&&!!a.clearcoatNormalMap,et=X&&!!a.clearcoatRoughnessMap,nt=Y&&!!a.iridescenceMap,it=Y&&!!a.iridescenceThicknessMap,rt=K&&!!a.sheenColorMap,at=K&&!!a.sheenRoughnessMap,st=!!a.specularMap,ot=!!a.specularColorMap,lt=!!a.specularIntensityMap,ut=J&&!!a.transmissionMap,ct=J&&!!a.thicknessMap,ht=!!a.gradientMap,ft=!!a.alphaMap,_t=a.alphaTest>0,dt=!!a.alphaHash,pt=!!a.extensions,mt=!!b.attributes.uv1,gt=!!b.attributes.uv2,vt=!!b.attributes.uv3;return{isWebGL2:c,shaderID:M,shaderType:a.type,shaderName:a.name,vertexShader:$,fragmentShader:A,defines:a.defines,customVertexShaderID:R,customFragmentShaderID:O,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:U,instancingColor:U&&null!==v.instanceColor,supportsVertexTextures:_,outputColorSpace:null===k?t.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:G,map:P,matcap:D,envMap:N,envMapMode:N&&S.mapping,envMapCubeUVHeight:E,aoMap:L,lightMap:z,bumpMap:F,normalMap:B,displacementMap:_&&H,emissiveMap:V,normalMapObjectSpace:B&&1===a.normalMapType,normalMapTangentSpace:B&&0===a.normalMapType,metalnessMap:q,roughnessMap:j,anisotropy:W,anisotropyMap:Z,clearcoat:X,clearcoatMap:Q,clearcoatNormalMap:tt,clearcoatRoughnessMap:et,iridescence:Y,iridescenceMap:nt,iridescenceThicknessMap:it,sheen:K,sheenColorMap:rt,sheenRoughnessMap:at,specularMap:st,specularColorMap:ot,specularIntensityMap:lt,transmission:J,transmissionMap:ut,thicknessMap:ct,gradientMap:ht,opaque:!1===a.transparent&&1===a.blending,alphaMap:ft,alphaTest:_t,alphaHash:dt,combine:a.combine,mapUv:P&&m(a.map.channel),aoMapUv:L&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:F&&m(a.bumpMap.channel),normalMapUv:B&&m(a.normalMap.channel),displacementMapUv:H&&m(a.displacementMap.channel),emissiveMapUv:V&&m(a.emissiveMap.channel),metalnessMapUv:q&&m(a.metalnessMap.channel),roughnessMapUv:j&&m(a.roughnessMap.channel),anisotropyMapUv:Z&&m(a.anisotropyMap.channel),clearcoatMapUv:Q&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:tt&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:it&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:at&&m(a.sheenRoughnessMap.channel),specularMapUv:st&&m(a.specularMap.channel),specularColorMapUv:ot&&m(a.specularColorMap.channel),specularIntensityMapUv:lt&&m(a.specularIntensityMap.channel),transmissionMapUv:ut&&m(a.transmissionMap.channel),thicknessMapUv:ct&&m(a.thicknessMap.channel),alphaMapUv:ft&&m(a.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(B||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUv1s:mt,vertexUv2s:gt,vertexUv3s:vt,pointsUvs:!0===v.isPoints&&!!b.attributes.uv&&(P||ft),fog:!!w,useFog:!0===a.fog,fogExp2:w&&w.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:C,morphTextureStride:I,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:h,useLegacyLights:t.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:pt&&!0===a.extensions.derivatives,extensionFragDepth:pt&&!0===a.extensions.fragDepth,extensionDrawBuffers:pt&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:pt&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0),e.supportsVertexTextures&&o.enable(1),e.instancing&&o.enable(2),e.instancingColor&&o.enable(3),e.matcap&&o.enable(4),e.envMap&&o.enable(5),e.normalMapObjectSpace&&o.enable(6),e.normalMapTangentSpace&&o.enable(7),e.clearcoat&&o.enable(8),e.iridescence&&o.enable(9),e.alphaTest&&o.enable(10),e.vertexColors&&o.enable(11),e.vertexAlphas&&o.enable(12),e.vertexUv1s&&o.enable(13),e.vertexUv2s&&o.enable(14),e.vertexUv3s&&o.enable(15),e.vertexTangents&&o.enable(16),e.anisotropy&&o.enable(17),t.push(o.mask),o.disableAll(),e.fog&&o.enable(0),e.useFog&&o.enable(1),e.flatShading&&o.enable(2),e.logarithmicDepthBuffer&&o.enable(3),e.skinning&&o.enable(4),e.morphTargets&&o.enable(5),e.morphNormals&&o.enable(6),e.morphColors&&o.enable(7),e.premultipliedAlpha&&o.enable(8),e.shadowMapEnabled&&o.enable(9),e.useLegacyLights&&o.enable(10),e.doubleSided&&o.enable(11),e.flipSided&&o.enable(12),e.useDepthPacking&&o.enable(13),e.dithering&&o.enable(14),e.transmission&&o.enable(15),e.sheen&&o.enable(16),e.opaque&&o.enable(17),e.pointsUvs&&o.enable(18),t.push(o.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=ui[e];n=Vn.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=u.length;t<e;t++){const e=u[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new aa(t,n,e,a),u.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:u,dispose:function(){l.dispose()}}}function ca(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function ha(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function fa(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function _a(){const t=[];let e=0;const n=[],i=[],r=[];function a(n,i,r,a,s,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,s,o,l,u){const c=a(t,e,s,o,l,u);s.transmission>0?i.push(c):!0===s.transparent?r.push(c):n.push(c)},unshift:function(t,e,s,o,l,u){const c=a(t,e,s,o,l,u);s.transmission>0?i.unshift(c):!0===s.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||ha),i.length>1&&i.sort(e||fa),r.length>1&&r.sort(e||fa)}}}function da(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new _a,t.set(e,[r])):n>=i.length?(r=new _a,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function pa(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Dt,color:new nn};break;case"SpotLight":n={position:new Dt,direction:new Dt,color:new nn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Dt,color:new nn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Dt,skyColor:new nn,groundColor:new nn};break;case"RectAreaLight":n={color:new nn,position:new Dt,halfWidth:new Dt,halfHeight:new Dt}}return t[e.id]=n,n}}}let ma=0;function ga(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function va(t,e){const n=new pa,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)r.probe.push(new Dt);const a=new Dt,s=new fe,o=new fe;return{setup:function(a,s){let o=0,l=0,u=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,h=0,f=0,_=0,d=0,p=0,m=0,g=0,v=0,y=0;a.sort(ga);const w=!0===s?Math.PI:1;for(let t=0,e=a.length;t<e;t++){const e=a[t],s=e.color,b=e.intensity,x=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=s.r*b*w,l+=s.g*b*w,u+=s.b*b*w;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*w),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=S,r.directionalShadowMatrix[c]=e.shadow.matrix,p++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(b*w),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[f]=t;const a=e.shadow;if(e.map&&(r.spotLightMap[v]=e.map,v++,a.updateMatrices(e),e.castShadow&&y++),r.spotLightMatrix[f]=a.matrix,e.castShadow){const t=i.get(e);t.shadowBias=a.bias,t.shadowNormalBias=a.normalBias,t.shadowRadius=a.radius,t.shadowMapSize=a.mapSize,r.spotShadow[f]=t,r.spotShadowMap[f]=S,g++}f++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[_]=t,_++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*w),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=S,r.pointShadowMatrix[h]=e.shadow.matrix,m++}r.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*w),t.groundColor.copy(e.groundColor).multiplyScalar(b*w),r.hemi[d]=t,d++}}_>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=li.LTC_FLOAT_1,r.rectAreaLTC2=li.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=li.LTC_HALF_1,r.rectAreaLTC2=li.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=u;const b=r.hash;b.directionalLength===c&&b.pointLength===h&&b.spotLength===f&&b.rectAreaLength===_&&b.hemiLength===d&&b.numDirectionalShadows===p&&b.numPointShadows===m&&b.numSpotShadows===g&&b.numSpotMaps===v||(r.directional.length=c,r.spot.length=f,r.rectArea.length=_,r.point.length=h,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=g+v-y,r.spotLightMap.length=v,r.numSpotLightShadowsWithMaps=y,b.directionalLength=c,b.pointLength=h,b.spotLength=f,b.rectAreaLength=_,b.hemiLength=d,b.numDirectionalShadows=p,b.numPointShadows=m,b.numSpotShadows=g,b.numSpotMaps=v,r.version=ma++)},setupView:function(t,e){let n=0,i=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let e=0,f=t.length;e<f;e++){const f=t[e];if(f.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(f.matrixWorld),a.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),n++}else if(f.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(f.matrixWorld),a.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),l++}else if(f.isRectAreaLight){const t=r.rectArea[u];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),o.identity(),s.copy(f.matrixWorld),s.premultiply(h),o.extractRotation(s),t.halfWidth.set(.5*f.width,0,0),t.halfHeight.set(0,.5*f.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),u++}else if(f.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),i++}else if(f.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(f.matrixWorld),t.direction.transformDirection(h),c++}}},state:r}}function ya(t,e){const n=new va(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function wa(t,e){let n=new WeakMap;return{get:function(i,r=0){const a=n.get(i);let s;return void 0===a?(s=new ya(t,e),n.set(i,[s])):r>=a.length?(s=new ya(t,e),a.push(s)):s=a[r],s},dispose:function(){n=new WeakMap}}}class ba extends Je{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class xa extends Je{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Sa(t,e,n){let i=new ii;const a=new ct,o=new ct,l=new Ot,u=new ba({depthPacking:3201}),c=new xa,h={},f=n.maxTextureSize,_={0:1,1:0,2:2},d=new qn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ct},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const m=new yn;m.setAttribute("position",new ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Nn(m,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r;let y=this.type;function w(n,i){const r=e.update(g);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new It(a.x,a.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,d,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,p,g,null)}function b(e,n,i,r){let a=null;const o=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===i.isPointLight?c:u,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=a.uuid,e=n.uuid;let i=h[t];void 0===i&&(i={},h[t]=i);let r=i[e];void 0===r&&(r=a.clone(),i[e]=r),a=r}return a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===s?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:_[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial&&(t.properties.get(a).light=i),a}function x(n,r,a,o,l){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let s=0,u=e.length;s<u;s++){const u=e[s],c=r[u.materialIndex];if(c&&c.visible){const e=b(n,c,o,l);t.renderBufferDirect(a,null,i,e,n,u)}}}else if(r.visible){const e=b(n,r,o,l);t.renderBufferDirect(a,null,i,e,n,null)}}const u=n.children;for(let t=0,e=u.length;t<e;t++)x(u[t],r,a,o,l)}this.render=function(e,n,r){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===e.length)return;const u=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),_=t.state;_.setBlending(0),_.buffers.color.setClear(1,1,1,1),_.buffers.depth.setTest(!0),_.setScissorTest(!1);const d=y!==s&&this.type===s,p=y===s&&this.type!==s;for(let u=0,c=e.length;u<c;u++){const c=e[u],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;a.copy(h.mapSize);const m=h.getFrameExtents();if(a.multiply(m),o.copy(h.mapSize),(a.x>f||a.y>f)&&(a.x>f&&(o.x=Math.floor(f/m.x),a.x=o.x*m.x,h.mapSize.x=o.x),a.y>f&&(o.y=Math.floor(f/m.y),a.y=o.y*m.y,h.mapSize.y=o.y)),null===h.map||!0===d||!0===p){const t=this.type!==s?{minFilter:S,magFilter:S}:{};null!==h.map&&h.map.dispose(),h.map=new It(a.x,a.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const g=h.getViewportCount();for(let t=0;t<g;t++){const e=h.getViewport(t);l.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),_.viewport(l),h.updateMatrices(c,t),i=h.getFrustum(),x(n,r,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===s&&w(h,r),h.needsUpdate=!1}y=this.type,v.needsUpdate=!1,t.setRenderTarget(u,c,h)}}function Ea(t,e,n){const i=n.isWebGL2,r=new function(){let e=!1;const n=new Ot;let i=null;const r=new Ot(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,s,o){!0===o&&(e*=s,i*=s,a*=s),n.set(e,i,a,s),!1===r.equals(n)&&(t.clearColor(e,i,a,s),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(e){e?B(t.DEPTH_TEST):H(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},s=new function(){let e=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(n){e||(n?B(t.STENCIL_TEST):H(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&a===s||(t.stencilFunc(e,n,s),i=e,r=n,a=s)},setOp:function(e,n,i){s===e&&o===n&&l===i||(t.stencilOp(e,n,i),s=e,o=n,l=i)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null}}},l=new WeakMap,u=new WeakMap;let c={},h={},f=new WeakMap,_=[],d=null,p=!1,m=null,g=null,v=null,y=null,w=null,b=null,x=null,S=!1,E=null,M=null,T=null,C=null,$=null;const A=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,O=0;const I=t.getParameter(t.VERSION);-1!==I.indexOf("WebGL")?(O=parseFloat(/^WebGL (\d)/.exec(I)[1]),R=O>=1):-1!==I.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),R=O>=2);let k=null,U={};const P=t.getParameter(t.SCISSOR_BOX),D=t.getParameter(t.VIEWPORT),N=(new Ot).fromArray(P),L=(new Ot).fromArray(D);function z(e,n,r,a){const s=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<r;o++)!i||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage3D(n,0,t.RGBA,1,1,a,0,t.RGBA,t.UNSIGNED_BYTE,s);return o}const F={};function B(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function H(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}F[t.TEXTURE_2D]=z(t.TEXTURE_2D,t.TEXTURE_2D,1),F[t.TEXTURE_CUBE_MAP]=z(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(F[t.TEXTURE_2D_ARRAY]=z(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),F[t.TEXTURE_3D]=z(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),a.setClear(1),s.setClear(0),B(t.DEPTH_TEST),a.setFunc(3),G(!1),W(1),B(t.CULL_FACE),j(0);const V={[o]:t.FUNC_ADD,101:t.FUNC_SUBTRACT,102:t.FUNC_REVERSE_SUBTRACT};if(i)V[103]=t.MIN,V[104]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(V[103]=t.MIN_EXT,V[104]=t.MAX_EXT)}const q={200:t.ZERO,201:t.ONE,202:t.SRC_COLOR,204:t.SRC_ALPHA,210:t.SRC_ALPHA_SATURATE,208:t.DST_COLOR,206:t.DST_ALPHA,203:t.ONE_MINUS_SRC_COLOR,205:t.ONE_MINUS_SRC_ALPHA,209:t.ONE_MINUS_DST_COLOR,207:t.ONE_MINUS_DST_ALPHA};function j(e,n,i,r,a,s,l,u){if(0!==e){if(!1===p&&(B(t.BLEND),p=!0),5===e)a=a||n,s=s||i,l=l||r,n===g&&a===w||(t.blendEquationSeparate(V[n],V[a]),g=n,w=a),i===v&&r===y&&s===b&&l===x||(t.blendFuncSeparate(q[i],q[r],q[s],q[l]),v=i,y=r,b=s,x=l),m=e,S=!1;else if(e!==m||u!==S){if(g===o&&w===o||(t.blendEquation(t.FUNC_ADD),g=o,w=o),u)switch(e){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,b=null,x=null,m=e,S=u}}else!0===p&&(H(t.BLEND),p=!1)}function G(e){E!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),E=e)}function W(e){0!==e?(B(t.CULL_FACE),e!==M&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):H(t.CULL_FACE),M=e}function X(e,n,i){e?(B(t.POLYGON_OFFSET_FILL),C===n&&$===i||(t.polygonOffset(n,i),C=n,$=i)):H(t.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:a,stencil:s},enable:B,disable:H,bindFramebuffer:function(e,n){return h[e]!==n&&(t.bindFramebuffer(e,n),h[e]=n,i&&(e===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let a=_,s=!1;if(i)if(a=f.get(r),void 0===a&&(a=[],f.set(r,a)),i.isWebGLMultipleRenderTargets){const e=i.texture;if(a.length!==e.length||a[0]!==t.COLOR_ATTACHMENT0){for(let n=0,i=e.length;n<i;n++)a[n]=t.COLOR_ATTACHMENT0+n;a.length=e.length,s=!0}}else a[0]!==t.COLOR_ATTACHMENT0&&(a[0]=t.COLOR_ATTACHMENT0,s=!0);else a[0]!==t.BACK&&(a[0]=t.BACK,s=!0);s&&(n.isWebGL2?t.drawBuffers(a):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:j,setMaterial:function(e,n){2===e.side?H(t.CULL_FACE):B(t.CULL_FACE);let i=1===e.side;n&&(i=!i),G(i),1===e.blending&&!1===e.transparent?j(0):j(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);const o=e.stencilWrite;s.setTest(o),o&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(t.SAMPLE_ALPHA_TO_COVERAGE):H(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:W,setLineWidth:function(e){e!==T&&(R&&t.lineWidth(e),T=e)},setPolygonOffset:X,setScissorTest:function(e){e?B(t.SCISSOR_TEST):H(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+A-1),k!==e&&(t.activeTexture(e),k=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===k?t.TEXTURE0+A-1:k);let r=U[i];void 0===r&&(r={type:void 0,texture:void 0},U[i]=r),r.type===e&&r.texture===n||(k!==i&&(t.activeTexture(i),k=i),t.bindTexture(e,n||F[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=U[k];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let i=u.get(n);void 0===i&&(i=new WeakMap,u.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=u.get(n).get(e);l.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),l.set(n,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===L.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),L.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===i&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},k=null,U={},h={},f=new WeakMap,_=[],d=null,p=!1,m=null,g=null,v=null,y=null,w=null,b=null,x=null,S=!1,E=null,M=null,T=null,C=null,$=null,N.set(0,0,t.canvas.width,t.canvas.height),L.set(0,0,t.canvas.width,t.canvas.height),r.reset(),a.reset(),s.reset()}}}function Ma(t,e,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,h=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,_="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function v(t,e){return g?new OffscreenCanvas(t,e):dt("canvas")}function y(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?ot:Math.floor,a=i(r*t.width),s=i(r*t.height);void 0===p&&(p=v(a,s));const o=n?v(a,s):p;return o.width=a,o.height=s,o.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function D(t){return st(t.width)&&st(t.height)}function N(t,e){return t.generateMipmaps&&e&&t.minFilter!==S&&t.minFilter!==M}function L(e){t.generateMipmap(e)}function z(n,i,r,a,s=!1){if(!1===o)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return i===t.RED&&(r===t.FLOAT&&(l=t.R32F),r===t.HALF_FLOAT&&(l=t.R16F),r===t.UNSIGNED_BYTE&&(l=t.R8)),i===t.RG&&(r===t.FLOAT&&(l=t.RG32F),r===t.HALF_FLOAT&&(l=t.RG16F),r===t.UNSIGNED_BYTE&&(l=t.RG8)),i===t.RGBA&&(r===t.FLOAT&&(l=t.RGBA32F),r===t.HALF_FLOAT&&(l=t.RGBA16F),r===t.UNSIGNED_BYTE&&(l=a===j&&!1===s?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)),l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function F(t,e,n){return!0===N(t,n)||t.isFramebufferTexture&&t.minFilter!==S&&t.minFilter!==M?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function B(e){return e===S||1004===e||e===E?t.NEAREST:t.LINEAR}function H(t){const e=t.target;e.removeEventListener("dispose",H),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=m.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&q(t),0===Object.keys(r).length&&m.delete(n)}i.remove(t)}(e),e.isVideoTexture&&d.delete(e)}function V(e){const n=e.target;n.removeEventListener("dispose",V),function(e){const n=e.texture,r=i.get(e),a=i.get(n);if(void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),s.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}(n)}function q(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete m.get(r)[n.__cacheKey],s.memory.textures--}let W=0;function X(e,r){const a=i.get(e);if(e.isVideoTexture&&function(t){const e=s.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void et(a,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,a.__webglTexture,t.TEXTURE0+r)}const Y={[w]:t.REPEAT,[b]:t.CLAMP_TO_EDGE,[x]:t.MIRRORED_REPEAT},J={[S]:t.NEAREST,1004:t.NEAREST_MIPMAP_NEAREST,[E]:t.NEAREST_MIPMAP_LINEAR,[M]:t.LINEAR,1007:t.LINEAR_MIPMAP_NEAREST,[T]:t.LINEAR_MIPMAP_LINEAR},Z={512:t.NEVER,519:t.ALWAYS,513:t.LESS,515:t.LEQUAL,514:t.EQUAL,518:t.GEQUAL,516:t.GREATER,517:t.NOTEQUAL};function Q(n,a,s){if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,Y[a.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,Y[a.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,Y[a.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,J[a.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,J[a.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),a.wrapS===b&&a.wrapT===b||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,B(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,B(a.minFilter)),a.minFilter!==S&&a.minFilter!==M&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,Z[a.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(a.magFilter===S)return;if(a.minFilter!==E&&a.minFilter!==T)return;if(a.type===R&&!1===e.has("OES_texture_float_linear"))return;if(!1===o&&a.type===O&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function tt(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",H));const r=n.source;let a=m.get(r);void 0===a&&(a={},m.set(r,a));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(o!==e.__cacheKey){void 0===a[o]&&(a[o]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[e.__cacheKey];void 0!==r&&(a[e.__cacheKey].usedTimes--,0===r.usedTimes&&q(n)),e.__cacheKey=o,e.__webglTexture=a[o].texture}return i}function et(e,r,s){let l=t.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=t.TEXTURE_3D);const u=tt(e,r),h=r.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+s);const f=i.get(h);if(h.version!==f.__version||!0===u){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=function(t){return!o&&(t.wrapS!==b||t.wrapT!==b||t.minFilter!==S&&t.minFilter!==M)}(r)&&!1===D(r.image);let i=y(r.image,e,!1,c);i=ut(r,i);const _=D(i)||o,d=a.convert(r.format,r.colorSpace);let p,m=a.convert(r.type),g=z(r.internalFormat,d,m,r.colorSpace);Q(l,r,_);const v=r.mipmaps,w=o&&!0!==r.isVideoTexture,x=void 0===f.__version||!0===u,E=F(r,i,_);if(r.isDepthTexture)g=t.DEPTH_COMPONENT,o?g=r.type===R?t.DEPTH_COMPONENT32F:r.type===A?t.DEPTH_COMPONENT24:r.type===I?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:r.type===R&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===U&&g===t.DEPTH_COMPONENT&&r.type!==$&&r.type!==A&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=A,m=a.convert(r.type)),r.format===P&&g===t.DEPTH_COMPONENT&&(g=t.DEPTH_STENCIL,r.type!==I&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=I,m=a.convert(r.type))),x&&(w?n.texStorage2D(t.TEXTURE_2D,1,g,i.width,i.height):n.texImage2D(t.TEXTURE_2D,0,g,i.width,i.height,0,d,m,null));else if(r.isDataTexture)if(v.length>0&&_){w&&x&&n.texStorage2D(t.TEXTURE_2D,E,g,v[0].width,v[0].height);for(let e=0,i=v.length;e<i;e++)p=v[e],w?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p.width,p.height,d,m,p.data):n.texImage2D(t.TEXTURE_2D,e,g,p.width,p.height,0,d,m,p.data);r.generateMipmaps=!1}else w?(x&&n.texStorage2D(t.TEXTURE_2D,E,g,i.width,i.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,i.width,i.height,d,m,i.data)):n.texImage2D(t.TEXTURE_2D,0,g,i.width,i.height,0,d,m,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){w&&x&&n.texStorage3D(t.TEXTURE_2D_ARRAY,E,g,v[0].width,v[0].height,i.depth);for(let e=0,a=v.length;e<a;e++)p=v[e],r.format!==k?null!==d?w?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,p.width,p.height,i.depth,d,p.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,g,p.width,p.height,i.depth,0,p.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,p.width,p.height,i.depth,d,m,p.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,g,p.width,p.height,i.depth,0,d,m,p.data)}else{w&&x&&n.texStorage2D(t.TEXTURE_2D,E,g,v[0].width,v[0].height);for(let e=0,i=v.length;e<i;e++)p=v[e],r.format!==k?null!==d?w?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(t.TEXTURE_2D,e,g,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p.width,p.height,d,m,p.data):n.texImage2D(t.TEXTURE_2D,e,g,p.width,p.height,0,d,m,p.data)}else if(r.isDataArrayTexture)w?(x&&n.texStorage3D(t.TEXTURE_2D_ARRAY,E,g,i.width,i.height,i.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,i.width,i.height,i.depth,d,m,i.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,g,i.width,i.height,i.depth,0,d,m,i.data);else if(r.isData3DTexture)w?(x&&n.texStorage3D(t.TEXTURE_3D,E,g,i.width,i.height,i.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,i.width,i.height,i.depth,d,m,i.data)):n.texImage3D(t.TEXTURE_3D,0,g,i.width,i.height,i.depth,0,d,m,i.data);else if(r.isFramebufferTexture){if(x)if(w)n.texStorage2D(t.TEXTURE_2D,E,g,i.width,i.height);else{let e=i.width,r=i.height;for(let i=0;i<E;i++)n.texImage2D(t.TEXTURE_2D,i,g,e,r,0,d,m,null),e>>=1,r>>=1}}else if(v.length>0&&_){w&&x&&n.texStorage2D(t.TEXTURE_2D,E,g,v[0].width,v[0].height);for(let e=0,i=v.length;e<i;e++)p=v[e],w?n.texSubImage2D(t.TEXTURE_2D,e,0,0,d,m,p):n.texImage2D(t.TEXTURE_2D,e,g,d,m,p);r.generateMipmaps=!1}else w?(x&&n.texStorage2D(t.TEXTURE_2D,E,g,i.width,i.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,d,m,i)):n.texImage2D(t.TEXTURE_2D,0,g,d,m,i);N(r,_)&&L(l),f.__version=h.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function nt(e,r,s,o,l){const u=a.convert(s.format,s.colorSpace),c=a.convert(s.type),h=z(s.internalFormat,u,c,s.colorSpace);i.get(r).__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,h,r.width,r.height,0,u,c,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),lt(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0,at(r)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function it(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let r=t.DEPTH_COMPONENT16;if(i||lt(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===R?r=t.DEPTH_COMPONENT32F:e.type===A&&(r=t.DEPTH_COMPONENT24));const i=at(n);lt(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,r,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,i,r,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,r,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=at(n);i&&!1===lt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):lt(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<e.length;r++){const s=e[r],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),u=z(s.internalFormat,o,l,s.colorSpace),c=at(n);i&&!1===lt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,u,n.width,n.height):lt(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function rt(e){const r=i.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),X(r.depthTexture,0);const a=i.get(r.depthTexture).__webglTexture,s=at(r);if(r.depthTexture.format===U)lt(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0,s):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==P)throw new Error("Unknown depthTexture format");lt(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0,s):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,e)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),it(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),it(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function at(t){return Math.min(h,t.samples)}function lt(t){const n=i.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ut(t,n){const i=t.colorSpace,r=t.format,a=t.type;return!0===t.isCompressedTexture||t.format===K||i!==G&&""!==i&&(i===j?!1===o?!0===e.has("EXT_sRGB")&&r===k?(t.format=K,t.minFilter=M,t.generateMipmaps=!1):n=Mt.sRGBToLinear(n):r===k&&a===C||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const t=W;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),W+=1,t},this.resetTextureUnits=function(){W=0},this.setTexture2D=X,this.setTexture2DArray=function(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?et(a,e,r):n.bindTexture(t.TEXTURE_2D_ARRAY,a.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?et(a,e,r):n.bindTexture(t.TEXTURE_3D,a.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?function(e,r,s){if(6!==r.image.length)return;const l=tt(e,r),c=r.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+s);const h=i.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,f=[];for(let t=0;t<6;t++)f[t]=e||i?i?r.image[t].image:r.image[t]:y(r.image[t],!1,!0,u),f[t]=ut(r,f[t]);const _=f[0],d=D(_)||o,p=a.convert(r.format,r.colorSpace),m=a.convert(r.type),g=z(r.internalFormat,p,m,r.colorSpace),v=o&&!0!==r.isVideoTexture,w=void 0===h.__version||!0===l;let b,x=F(r,_,d);if(Q(t.TEXTURE_CUBE_MAP,r,d),e){v&&w&&n.texStorage2D(t.TEXTURE_CUBE_MAP,x,g,_.width,_.height);for(let e=0;e<6;e++){b=f[e].mipmaps;for(let i=0;i<b.length;i++){const a=b[i];r.format!==k?null!==p?v?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,a.width,a.height,p,a.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,g,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,a.width,a.height,p,m,a.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,g,a.width,a.height,0,p,m,a.data)}}}else{b=r.mipmaps,v&&w&&(b.length>0&&x++,n.texStorage2D(t.TEXTURE_CUBE_MAP,x,g,f[0].width,f[0].height));for(let e=0;e<6;e++)if(i){v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,f[e].width,f[e].height,p,m,f[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,g,f[e].width,f[e].height,0,p,m,f[e].data);for(let i=0;i<b.length;i++){const r=b[i].image[e].image;v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,r.width,r.height,p,m,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,g,r.width,r.height,0,p,m,r.data)}}else{v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,p,m,f[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,g,p,m,f[e]);for(let i=0;i<b.length;i++){const r=b[i];v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,p,m,r.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,g,p,m,r.image[e])}}}N(r,d)&&L(t.TEXTURE_CUBE_MAP),h.__version=c.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(s,e,r):n.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture,t.TEXTURE0+r)},this.rebindTextures=function(e,n,r){const a=i.get(e);void 0!==n&&nt(a.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==r&&rt(e)},this.setupRenderTarget=function(e){const l=e.texture,u=i.get(e),c=i.get(l);e.addEventListener("dispose",V),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,f=!0===e.isWebGLMultipleRenderTargets,_=D(e)||o;if(h){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(u.__webglFramebuffer=t.createFramebuffer(),f)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===lt(e)){const i=f?l:[l];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];u.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=z(r.internalFormat,s,o,r.colorSpace,!0===e.isXRRenderTarget),c=at(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,c,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,u.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),it(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture),Q(t.TEXTURE_CUBE_MAP,l,_);for(let n=0;n<6;n++)nt(u.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n);N(l,_)&&L(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(f){const r=e.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i.get(s);n.bindTexture(t.TEXTURE_2D,o.__webglTexture),Q(t.TEXTURE_2D,s,_),nt(u.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+a,t.TEXTURE_2D),N(s,_)&&L(t.TEXTURE_2D)}n.unbindTexture()}else{let i=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?i=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,c.__webglTexture),Q(i,l,_),nt(u.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,i),N(l,_)&&L(i),n.unbindTexture()}e.depthBuffer&&rt(e)},this.updateRenderTargetMipmap=function(e){const r=D(e)||o,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(N(o,r)){const r=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),L(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===lt(e)){const r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=e.width,s=e.height;let o=t.COLOR_BUFFER_BIT;const l=[],u=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=i.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<r.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(u);const f=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===f&&(e.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(o|=t.STENCIL_BUFFER_BIT)),h&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,c.__webglColorRenderbuffer[n]),!0===f&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[u]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[u])),h){const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,a,s,0,0,a,s,o,t.NEAREST),_&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<r.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,c.__webglColorRenderbuffer[e]);const a=i.get(r[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,a,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=nt,this.useMultisampledRTT=lt}function Ta(t,e,n){const i=n.isWebGL2;return{convert:function(n,r=""){let a;if(n===C)return t.UNSIGNED_BYTE;if(1017===n)return t.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return t.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return t.BYTE;if(1011===n)return t.SHORT;if(n===$)return t.UNSIGNED_SHORT;if(1013===n)return t.INT;if(n===A)return t.UNSIGNED_INT;if(n===R)return t.FLOAT;if(n===O)return i?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return t.ALPHA;if(n===k)return t.RGBA;if(1024===n)return t.LUMINANCE;if(1025===n)return t.LUMINANCE_ALPHA;if(n===U)return t.DEPTH_COMPONENT;if(n===P)return t.DEPTH_STENCIL;if(n===K)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===n)return t.RED;if(1029===n)return t.RED_INTEGER;if(1030===n)return t.RG;if(1031===n)return t.RG_INTEGER;if(1033===n)return t.RGBA_INTEGER;if(n===D||n===N||n===L||n===z)if(r===j){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===D)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===N)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===L)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===z)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===D)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===N)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===L)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===z)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===n)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===n)return r===j?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return r===j?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===F){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(n===F)return r===j?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===n||36284===n||36285===n||36286===n){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===F)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===I?i?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class Ca extends Gn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class $a extends Ne{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Aa={type:"move"};class Ra{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new $a,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new $a,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Dt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Dt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new $a,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Dt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Dt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){a=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n),r=this._getHandJoint(l,i);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,u=.005;l.inputState.pinching&&s>o+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=o-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Aa)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new $a;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Oa extends Rt{constructor(t,e,n,i,r,a,s,o,l,u){if((u=void 0!==u?u:U)!==U&&u!==P)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===U&&(n=A),void 0===n&&u===P&&(n=I),super(null,i,r,a,s,o,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:S,this.minFilter=void 0!==o?o:S,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Ia extends Q{constructor(t,e){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,u=null,c=null,h=null,f=null,_=null;const d=e.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new Gn;y.layers.enable(1),y.viewport=new Ot;const w=new Gn;w.layers.enable(2),w.viewport=new Ot;const b=[y,w],x=new Ca;x.layers.enable(1),x.layers.enable(2);let S=null,E=null;function M(t){const e=v.indexOf(t.inputSource);if(-1===e)return;const n=g[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||a),n.dispatchEvent({type:t.type,data:t.inputSource}))}function T(){i.removeEventListener("select",M),i.removeEventListener("selectstart",M),i.removeEventListener("selectend",M),i.removeEventListener("squeeze",M),i.removeEventListener("squeezestart",M),i.removeEventListener("squeezeend",M),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",$);for(let t=0;t<g.length;t++){const e=v[t];null!==e&&(v[t]=null,g[t].disconnect(e))}S=null,E=null,t.setRenderTarget(p),f=null,h=null,c=null,i=null,m=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function $(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=v.indexOf(n);i>=0&&(v[i]=null,g[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=v.indexOf(n);if(-1===i){for(let t=0;t<g.length;t++){if(t>=v.length){v.push(n),i=t;break}if(null===v[t]){v[t]=n,i=t;break}}if(-1===i)break}const r=g[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new Ra,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new Ra,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new Ra,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return c},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(u){if(i=u,null!==i){if(p=t.getRenderTarget(),i.addEventListener("select",M),i.addEventListener("selectstart",M),i.addEventListener("selectend",M),i.addEventListener("squeeze",M),i.addEventListener("squeezestart",M),i.addEventListener("squeezeend",M),i.addEventListener("end",T),i.addEventListener("inputsourceschange",$),!0!==d.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||d.antialias,alpha:!0,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:f}),m=new It(f.framebufferWidth,f.framebufferHeight,{format:k,type:C,colorSpace:t.outputColorSpace,stencilBuffer:d.stencil})}else{let n=null,a=null,s=null;d.depth&&(s=d.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=d.stencil?P:U,a=d.stencil?I:A);const o={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:r};c=new XRWebGLBinding(i,e),h=c.createProjectionLayer(o),i.updateRenderState({layers:[h]}),m=new It(h.textureWidth,h.textureHeight,{format:k,type:C,depthTexture:new Oa(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:d.stencil,colorSpace:t.outputColorSpace,samples:d.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=h.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),L.setContext(i),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const R=new Dt,O=new Dt;function D(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;x.near=w.near=y.near=t.near,x.far=w.far=y.far=t.far,S===x.near&&E===x.far||(i.updateRenderState({depthNear:x.near,depthFar:x.far}),S=x.near,E=x.far);const e=t.parent,n=x.cameras;D(x,e);for(let t=0;t<n.length;t++)D(n[t],e);2===n.length?function(t,e,n){R.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(O),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],f=s*c,_=s*h,d=i/(-c+h),p=d*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(p),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const m=s+d,g=o+d,v=f-p,y=_+(i-p),w=l*o/g*m,b=u*o/g*m;t.projectionMatrix.makePerspective(v,y,w,b,m,g),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(x,y,w):x.projectionMatrix.copy(y.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*nt*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,x,e)},this.getCamera=function(){return x},this.getFoveation=function(){if(null!==h||null!==f)return o},this.setFoveation=function(t){o=t,null!==h&&(h.fixedFoveation=t),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=t)};let N=null;const L=new ri;L.setAnimationLoop((function(e,i){if(u=i.getViewerPose(l||a),_=i,null!==u){const e=u.views;null!==f&&(t.setRenderTargetFramebuffer(m,f.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let a=null;if(null!==f)a=f.getViewport(r);else{const e=c.getViewSubImage(h,r);a=e.viewport,0===i&&(t.setRenderTargetTextures(m,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let s=b[i];void 0===s&&(s=new Gn,s.layers.enable(i),s.viewport=new Ot,b[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&(x.matrix.copy(s.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),!0===n&&x.cameras.push(s)}}for(let t=0;t<g.length;t++){const e=v[t],n=g[t];null!==e&&void 0!==n&&n.update(e,i,l||a)}N&&N(e,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),_=null})),this.setAnimationLoop=function(t){N=t},this.dispose=function(){}}}function ka(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,1===r.side&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),1===r.side&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const a=e.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*e,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Hn(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,a,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(t,r):r.isMeshToonMaterial?(i(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(i(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(i(t,r),function(t,i){t.metalness.value=i.metalness,i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,t.metalnessMapTransform)),t.roughness.value=i.roughness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,t.roughnessMapTransform));e.get(i).envMap&&(t.envMapIntensity.value=i.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,o)):r.isMeshMatcapMaterial?(i(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?i(t,r):r.isMeshDistanceMaterial?(i(t,r),function(t,n){const i=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(i.matrixWorld),t.nearDistance.value=i.shadow.camera.near,t.farDistance.value=i.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?i(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,a,s):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ua(t,e,n,i){let r={},a={},s=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e,n){const i=t.value;if(void 0===n[e]){if("number"==typeof i)n[e]=i;else{const t=Array.isArray(i)?i:[i],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());n[e]=r}return!0}if("number"==typeof i){if(n[e]!==i)return n[e]=i,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],r=Array.isArray(i)?i:[i];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(r[e]))return n.copy(r[e]),!0}}return!1}function u(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const n=e.target;n.removeEventListener("dispose",c);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,h){let f=r[n.id];void 0===f&&(function(t){const e=t.uniforms;let n=0;let i=0;for(let t=0,r=e.length;t<r;t++){const r=e[t],a={boundary:0,storage:0},s=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=s.length;t<e;t++){const e=u(s[t]);a.boundary+=e.boundary,a.storage+=e.storage}r.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,t>0&&(i=n%16,0!==i&&16-i-a.boundary<0&&(n+=16-i,r.__offset=n)),n+=a.storage}i=n%16,i>0&&(n+=16-i),t.__size=n,t.__cache={}}(n),f=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,a=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,r,a),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=f,n.addEventListener("dispose",c));const _=h.program;i.updateUBOMapping(n,_);const d=e.render.frame;a[n.id]!==d&&(function(e){const n=r[e.id],i=e.uniforms,a=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let e=0,n=i.length;e<n;e++){const n=i[e];if(!0===l(n,e,a)){const e=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let r=0;for(let a=0;a<i.length;a++){const s=i[a],o=u(s);"number"==typeof s?(n.__data[0]=s,t.bufferSubData(t.UNIFORM_BUFFER,e+r,n.__data)):s.isMatrix3?(n.__data[0]=s.elements[0],n.__data[1]=s.elements[1],n.__data[2]=s.elements[2],n.__data[3]=s.elements[0],n.__data[4]=s.elements[3],n.__data[5]=s.elements[4],n.__data[6]=s.elements[5],n.__data[7]=s.elements[0],n.__data[8]=s.elements[6],n.__data[9]=s.elements[7],n.__data[10]=s.elements[8],n.__data[11]=s.elements[0]):(s.toArray(n.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,n.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),a[n.id]=d)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);s=[],r={},a={}}}}function Pa(){const t=dt("canvas");return t.style.display="block",t}class Da{constructor(t={}){const{canvas:e=Pa(),context:n=null,depth:r=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1}=t;let _;this.isWebGLRenderer=!0,_=null!==n?n.getContextAttributes().alpha:s;const d=new Uint32Array(4),p=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=j,this.useLegacyLights=!0,this.toneMapping=h,this.toneMappingExposure=1;const w=this;let b=!1,x=0,S=0,E=null,M=-1,U=null;const P=new Ot,D=new Ot;let N=null;const L=new nn(0);let z=0,F=e.width,B=e.height,H=1,V=null,q=null;const W=new Ot(0,0,F,B),X=new Ot(0,0,F,B);let Y=!1;const K=new ii;let J=!1,Z=!1,Q=null;const tt=new fe,et=new ct,nt=new Dt,it={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function rt(){return null===E?H:1}let at,st,lt,ut,ht,ft,_t,dt,pt,mt,gt,vt,yt,wt,bt,xt,St,Et,Mt,Tt,Ct,$t,At,Rt,kt=n;function Ut(t,n){for(let i=0;i<t.length;i++){const r=t[i],a=e.getContext(r,n);if(null!==a)return a}return null}try{const t={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${i}`),e.addEventListener("webglcontextlost",Lt,!1),e.addEventListener("webglcontextrestored",zt,!1),e.addEventListener("webglcontextcreationerror",Ft,!1),null===kt){const e=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&e.shift(),kt=Ut(e,t),null===kt)throw Ut(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&kt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===kt.getShaderPrecisionFormat&&(kt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Pt(){at=new Oi(kt),st=new di(kt,at,t),at.init(st),$t=new Ta(kt,at,st),lt=new Ea(kt,at,st),ut=new Ui(kt),ht=new ca,ft=new Ma(kt,at,lt,ht,st,$t,ut),_t=new mi(w),dt=new Ri(w),pt=new ai(kt,st),At=new fi(kt,at,pt,st),mt=new Ii(kt,pt,ut,At),gt=new Li(kt,mt,pt,ut),Mt=new Ni(kt,st,ft),xt=new pi(ht),vt=new ua(w,_t,dt,at,st,At,xt),yt=new ka(w,ht),wt=new da,bt=new wa(at,st),Et=new hi(w,_t,dt,lt,gt,_,l),St=new Sa(w,gt,st),Rt=new Ua(kt,ut,st,lt),Tt=new _i(kt,at,ut,st),Ct=new ki(kt,at,ut,st),ut.programs=vt.programs,w.capabilities=st,w.extensions=at,w.properties=ht,w.renderLists=wt,w.shadowMap=St,w.state=lt,w.info=ut}Pt();const Nt=new Ia(w,kt);function Lt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function zt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=ut.autoReset,e=St.enabled,n=St.autoUpdate,i=St.needsUpdate,r=St.type;Pt(),ut.autoReset=t,St.enabled=e,St.autoUpdate=n,St.needsUpdate=i,St.type=r}function Ft(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Bt(t){const e=t.target;e.removeEventListener("dispose",Bt),function(t){(function(t){const e=ht.get(t).programs;void 0!==e&&(e.forEach((function(t){vt.releaseProgram(t)})),t.isShaderMaterial&&vt.releaseShaderCache(t))})(t),ht.remove(t)}(e)}this.xr=Nt,this.getContext=function(){return kt},this.getContextAttributes=function(){return kt.getContextAttributes()},this.forceContextLoss=function(){const t=at.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=at.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(t){void 0!==t&&(H=t,this.setSize(F,B,!1))},this.getSize=function(t){return t.set(F,B)},this.setSize=function(t,n,i=!0){Nt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(F=t,B=n,e.width=Math.floor(t*H),e.height=Math.floor(n*H),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(F*H,B*H).floor()},this.setDrawingBufferSize=function(t,n,i){F=t,B=n,H=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(P)},this.getViewport=function(t){return t.copy(W)},this.setViewport=function(t,e,n,i){t.isVector4?W.set(t.x,t.y,t.z,t.w):W.set(t,e,n,i),lt.viewport(P.copy(W).multiplyScalar(H).floor())},this.getScissor=function(t){return t.copy(X)},this.setScissor=function(t,e,n,i){t.isVector4?X.set(t.x,t.y,t.z,t.w):X.set(t,e,n,i),lt.scissor(D.copy(X).multiplyScalar(H).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(t){lt.setScissorTest(Y=t)},this.setOpaqueSort=function(t){V=t},this.setTransparentSort=function(t){q=t},this.getClearColor=function(t){return t.copy(Et.getClearColor())},this.setClearColor=function(){Et.setClearColor.apply(Et,arguments)},this.getClearAlpha=function(){return Et.getClearAlpha()},this.setClearAlpha=function(){Et.setClearAlpha.apply(Et,arguments)},this.clear=function(t=!0,e=!0,n=!0){let i=0;if(t){let t=!1;if(null!==E){const e=E.texture.format;t=1033===e||1031===e||1029===e}if(t){const t=E.texture.type,e=t===C||t===A||t===$||t===I||1017===t||1018===t,n=Et.getClearColor(),i=Et.getClearAlpha(),r=n.r,a=n.g,s=n.b;e?(d[0]=r,d[1]=a,d[2]=s,d[3]=i,kt.clearBufferuiv(kt.COLOR,0,d)):(p[0]=r,p[1]=a,p[2]=s,p[3]=i,kt.clearBufferiv(kt.COLOR,0,p))}else i|=kt.COLOR_BUFFER_BIT}e&&(i|=kt.DEPTH_BUFFER_BIT),n&&(i|=kt.STENCIL_BUFFER_BIT),kt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Lt,!1),e.removeEventListener("webglcontextrestored",zt,!1),e.removeEventListener("webglcontextcreationerror",Ft,!1),wt.dispose(),bt.dispose(),ht.dispose(),_t.dispose(),dt.dispose(),gt.dispose(),At.dispose(),Rt.dispose(),vt.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",Vt),Nt.removeEventListener("sessionend",qt),Q&&(Q.dispose(),Q=null),jt.stop()},this.renderBufferDirect=function(t,e,n,i,r,a){null===e&&(e=it);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,n,i,r){!0!==e.isScene&&(e=it),ft.resetTextureUnits();const a=e.fog,s=i.isMeshStandardMaterial?e.environment:null,o=null===E?w.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:G,l=(i.isMeshStandardMaterial?dt:_t).get(i.envMap||s),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),f=!!n.morphAttributes.position,_=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,p=i.toneMapped?w.toneMapping:h,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=ht.get(i),b=g.state.lights;if(!0===J&&(!0===Z||t!==U)){const e=t===U&&i.id===M;xt.setState(i,t,e)}let x=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==o||r.isInstancedMesh&&!1===y.instancing?x=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?x=!0:r.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===i.fog&&y.fog!==a?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===xt.numPlanes&&y.numIntersection===xt.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==c||y.morphTargets!==f||y.morphNormals!==_||y.morphColors!==d||y.toneMapping!==p||!0===st.isWebGL2&&y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,y.__version=i.version);let S=y.currentProgram;!0===x&&(S=Kt(i,e,r));let T=!1,C=!1,$=!1;const A=S.getUniforms(),R=y.uniforms;if(lt.useProgram(S.program)&&(T=!0,C=!0,$=!0),i.id!==M&&(M=i.id,C=!0),T||U!==t){if(A.setValue(kt,"projectionMatrix",t.projectionMatrix),st.logarithmicDepthBuffer&&A.setValue(kt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),U!==t&&(U=t,C=!0,$=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=A.map.cameraPosition;void 0!==e&&e.setValue(kt,nt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&A.setValue(kt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&A.setValue(kt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){A.setOptional(kt,r,"bindMatrix"),A.setOptional(kt,r,"bindMatrixInverse");const t=r.skeleton;t&&(st.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),A.setValue(kt,"boneTexture",t.boneTexture,ft),A.setValue(kt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;var I,k;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===st.isWebGL2)&&Mt.update(r,n,S),(C||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,A.setValue(kt,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),C&&(A.setValue(kt,"toneMappingExposure",w.toneMappingExposure),y.needsLights&&(k=$,(I=R).ambientLightColor.needsUpdate=k,I.lightProbe.needsUpdate=k,I.directionalLights.needsUpdate=k,I.directionalLightShadows.needsUpdate=k,I.pointLights.needsUpdate=k,I.pointLightShadows.needsUpdate=k,I.spotLights.needsUpdate=k,I.spotLightShadows.needsUpdate=k,I.rectAreaLights.needsUpdate=k,I.hemisphereLights.needsUpdate=k),a&&!0===i.fog&&yt.refreshFogUniforms(R,a),yt.refreshMaterialUniforms(R,i,H,B,Q),Hr.upload(kt,y.uniformsList,R,ft)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Hr.upload(kt,y.uniformsList,R,ft),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&A.setValue(kt,"center",r.center),A.setValue(kt,"modelViewMatrix",r.modelViewMatrix),A.setValue(kt,"normalMatrix",r.normalMatrix),A.setValue(kt,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(st.isWebGL2){const n=t[e];Rt.update(n,S),Rt.bind(n,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}(t,e,n,i,r);lt.setMaterial(i,s);let l=n.index,u=1;!0===i.wireframe&&(l=mt.getWireframeAttribute(n),u=2);const c=n.drawRange,f=n.attributes.position;let _=c.start*u,d=(c.start+c.count)*u;null!==a&&(_=Math.max(_,a.start*u),d=Math.min(d,(a.start+a.count)*u)),null!==l?(_=Math.max(_,0),d=Math.min(d,l.count)):null!=f&&(_=Math.max(_,0),d=Math.min(d,f.count));const p=d-_;if(p<0||p===1/0)return;let m;At.setup(r,i,o,n,l);let v=Tt;if(null!==l&&(m=pt.get(l),v=Ct,v.setIndex(m)),r.isMesh)!0===i.wireframe?(lt.setLineWidth(i.wireframeLinewidth*rt()),v.setMode(kt.LINES)):v.setMode(kt.TRIANGLES);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),lt.setLineWidth(t*rt()),r.isLineSegments?v.setMode(kt.LINES):r.isLineLoop?v.setMode(kt.LINE_LOOP):v.setMode(kt.LINE_STRIP)}else r.isPoints?v.setMode(kt.POINTS):r.isSprite&&v.setMode(kt.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(_,p,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);v.renderInstances(_,p,e)}else v.render(_,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=1,t.needsUpdate=!0,Kt(t,e,n),t.side=0,t.needsUpdate=!0,Kt(t,e,n),t.side=2):Kt(t,e,n)}g=bt.get(t),g.init(),y.push(g),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights(w.useLegacyLights),t.traverse((function(e){const i=e.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++)n(i[r],t,e);else n(i,t,e)})),y.pop(),g=null};let Ht=null;function Vt(){jt.stop()}function qt(){jt.start()}const jt=new ri;function Gt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)g.pushLight(t),t.castShadow&&g.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||K.intersectsSprite(t)){i&&nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(tt);const e=gt.update(t),r=t.material;r.visible&&m.push(t,e,r,n,nt.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||K.intersectsObject(t))){const e=gt.update(t),r=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),nt.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),nt.copy(e.boundingSphere.center)),nt.applyMatrix4(t.matrixWorld).applyMatrix4(tt)),Array.isArray(r)){const i=e.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&m.push(t,e,o,n,nt.z,s)}}else r.visible&&m.push(t,e,r,n,nt.z,null)}const r=t.children;for(let t=0,a=r.length;t<a;t++)Gt(r[t],e,n,i)}function Wt(t,e,n,i){const r=t.opaque,a=t.transmissive,s=t.transparent;g.setupLightsView(n),!0===J&&xt.setGlobalState(w.clippingPlanes,n),a.length>0&&function(t,e,n,i){const r=st.isWebGL2;null===Q&&(Q=new It(1,1,{generateMipmaps:!0,type:at.has("EXT_color_buffer_half_float")?O:C,minFilter:T,samples:r?4:0})),w.getDrawingBufferSize(et),r?Q.setSize(et.x,et.y):Q.setSize(ot(et.x),ot(et.y));const a=w.getRenderTarget();w.setRenderTarget(Q),w.getClearColor(L),z=w.getClearAlpha(),z<1&&w.setClearColor(16777215,.5),w.clear();const s=w.toneMapping;w.toneMapping=h,Xt(t,n,i),ft.updateMultisampleRenderTarget(Q),ft.updateRenderTargetMipmap(Q);let o=!1;for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.object,s=r.geometry,l=r.material,u=r.group;if(2===l.side&&a.layers.test(i.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Yt(a,n,i,s,l,u),l.side=t,l.needsUpdate=!0,o=!0}}!0===o&&(ft.updateMultisampleRenderTarget(Q),ft.updateRenderTargetMipmap(Q)),w.setRenderTarget(a),w.setClearColor(L,z),w.toneMapping=s}(r,a,e,n),i&&lt.viewport(P.copy(i)),r.length>0&&Xt(r,e,n),a.length>0&&Xt(a,e,n),s.length>0&&Xt(s,e,n),lt.buffers.depth.setTest(!0),lt.buffers.depth.setMask(!0),lt.buffers.color.setMask(!0),lt.setPolygonOffset(!1)}function Xt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,a=t.length;r<a;r++){const a=t[r],s=a.object,o=a.geometry,l=null===i?a.material:i,u=a.group;s.layers.test(n.layers)&&Yt(s,e,n,o,l,u)}}function Yt(t,e,n,i,r,a){t.onBeforeRender(w,e,n,i,r,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(w,e,n,i,t,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,a),r.side=0,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,a),r.side=2):w.renderBufferDirect(n,e,i,r,t,a),t.onAfterRender(w,e,n,i,r,a)}function Kt(t,e,n){!0!==e.isScene&&(e=it);const i=ht.get(t),r=g.state.lights,a=g.state.shadowsArray,s=r.state.version,o=vt.getParameters(t,r.state,a,e,n),l=vt.getProgramCacheKey(o);let u=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?dt:_t).get(t.envMap||i.environment),void 0===u&&(t.addEventListener("dispose",Bt),u=new Map,i.programs=u);let c=u.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===s)return Jt(t,o),c}else o.uniforms=vt.getUniforms(t),t.onBuild(n,o,w),t.onBeforeCompile(o,w),c=vt.acquireProgram(o,l),u.set(l,c),i.uniforms=o.uniforms;const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=xt.uniform),Jt(t,o),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=s,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const f=c.getUniforms(),_=Hr.seqWithValue(f.seq,h);return i.currentProgram=c,i.uniformsList=_,c}function Jt(t,e){const n=ht.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}jt.setAnimationLoop((function(t){Ht&&Ht(t)})),"undefined"!=typeof self&&jt.setContext(self),this.setAnimationLoop=function(t){Ht=t,Nt.setAnimationLoop(t),null===t?jt.stop():jt.start()},Nt.addEventListener("sessionstart",Vt),Nt.addEventListener("sessionend",qt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Nt.enabled&&!0===Nt.isPresenting&&(!0===Nt.cameraAutoUpdate&&Nt.updateCamera(e),e=Nt.getCamera()),!0===t.isScene&&t.onBeforeRender(w,t,e,E),g=bt.get(t,y.length),g.init(),y.push(g),tt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),K.setFromProjectionMatrix(tt),Z=this.localClippingEnabled,J=xt.init(this.clippingPlanes,Z),m=wt.get(t,v.length),m.init(),v.push(m),Gt(t,e,0,w.sortObjects),m.finish(),!0===w.sortObjects&&m.sort(V,q),this.info.render.frame++,!0===J&&xt.beginShadows();const n=g.state.shadowsArray;if(St.render(n,t,e),!0===J&&xt.endShadows(),!0===this.info.autoReset&&this.info.reset(),Et.render(m,t),g.setupLights(w.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Wt(m,t,i,i.viewport)}}else Wt(m,t,e);null!==E&&(ft.updateMultisampleRenderTarget(E),ft.updateRenderTargetMipmap(E)),!0===t.isScene&&t.onAfterRender(w,t,e),At.resetDefaultState(),M=-1,U=null,y.pop(),g=y.length>0?y[y.length-1]:null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(t,e,n){ht.get(t.texture).__webglTexture=e,ht.get(t.depthTexture).__webglTexture=n;const i=ht.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===at.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=ht.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){E=t,x=e,S=n;let i=!0,r=null,a=!1,s=!1;if(t){const n=ht.get(t);void 0!==n.__useDefaultFramebuffer?(lt.bindFramebuffer(kt.FRAMEBUFFER,null),i=!1):void 0===n.__webglFramebuffer?ft.setupRenderTarget(t):n.__hasExternalTextures&&ft.rebindTextures(t,ht.get(t.texture).__webglTexture,ht.get(t.depthTexture).__webglTexture);const o=t.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0);const l=ht.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],a=!0):r=st.isWebGL2&&t.samples>0&&!1===ft.useMultisampledRTT(t)?ht.get(t).__webglMultisampledFramebuffer:l,P.copy(t.viewport),D.copy(t.scissor),N=t.scissorTest}else P.copy(W).multiplyScalar(H).floor(),D.copy(X).multiplyScalar(H).floor(),N=Y;if(lt.bindFramebuffer(kt.FRAMEBUFFER,r)&&st.drawBuffers&&i&&lt.drawBuffers(t,r),lt.viewport(P),lt.scissor(D),lt.setScissorTest(N),a){const i=ht.get(t.texture);kt.framebufferTexture2D(kt.FRAMEBUFFER,kt.COLOR_ATTACHMENT0,kt.TEXTURE_CUBE_MAP_POSITIVE_X+e,i.__webglTexture,n)}else if(s){const i=ht.get(t.texture),r=e||0;kt.framebufferTextureLayer(kt.FRAMEBUFFER,kt.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}M=-1},this.readRenderTargetPixels=function(t,e,n,i,r,a,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=ht.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){lt.bindFramebuffer(kt.FRAMEBUFFER,o);try{const s=t.texture,o=s.format,l=s.type;if(o!==k&&$t.convert(o)!==kt.getParameter(kt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===O&&(at.has("EXT_color_buffer_half_float")||st.isWebGL2&&at.has("EXT_color_buffer_float"));if(!(l===C||$t.convert(l)===kt.getParameter(kt.IMPLEMENTATION_COLOR_READ_TYPE)||l===R&&(st.isWebGL2||at.has("OES_texture_float")||at.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&kt.readPixels(e,n,i,r,$t.convert(o),$t.convert(l),a)}finally{const t=null!==E?ht.get(E).__webglFramebuffer:null;lt.bindFramebuffer(kt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i);ft.setTexture2D(e,0),kt.copyTexSubImage2D(kt.TEXTURE_2D,n,0,0,t.x,t.y,r,a),lt.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,a=e.image.height,s=$t.convert(n.format),o=$t.convert(n.type);ft.setTexture2D(n,0),kt.pixelStorei(kt.UNPACK_FLIP_Y_WEBGL,n.flipY),kt.pixelStorei(kt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),kt.pixelStorei(kt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?kt.texSubImage2D(kt.TEXTURE_2D,i,t.x,t.y,r,a,s,o,e.image.data):e.isCompressedTexture?kt.compressedTexSubImage2D(kt.TEXTURE_2D,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):kt.texSubImage2D(kt.TEXTURE_2D,i,t.x,t.y,s,o,e.image),0===i&&n.generateMipmaps&&kt.generateMipmap(kt.TEXTURE_2D),lt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=$t.convert(i.format),u=$t.convert(i.type);let c;if(i.isData3DTexture)ft.setTexture3D(i,0),c=kt.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ft.setTexture2DArray(i,0),c=kt.TEXTURE_2D_ARRAY}kt.pixelStorei(kt.UNPACK_FLIP_Y_WEBGL,i.flipY),kt.pixelStorei(kt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),kt.pixelStorei(kt.UNPACK_ALIGNMENT,i.unpackAlignment);const h=kt.getParameter(kt.UNPACK_ROW_LENGTH),f=kt.getParameter(kt.UNPACK_IMAGE_HEIGHT),_=kt.getParameter(kt.UNPACK_SKIP_PIXELS),d=kt.getParameter(kt.UNPACK_SKIP_ROWS),p=kt.getParameter(kt.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[0]:n.image;kt.pixelStorei(kt.UNPACK_ROW_LENGTH,m.width),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,m.height),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,t.min.x),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,t.min.y),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?kt.texSubImage3D(c,r,e.x,e.y,e.z,a,s,o,l,u,m.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),kt.compressedTexSubImage3D(c,r,e.x,e.y,e.z,a,s,o,l,m.data)):kt.texSubImage3D(c,r,e.x,e.y,e.z,a,s,o,l,u,m),kt.pixelStorei(kt.UNPACK_ROW_LENGTH,h),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,f),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,_),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,d),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,p),0===r&&i.generateMipmaps&&kt.generateMipmap(c),lt.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?ft.setTextureCube(t,0):t.isData3DTexture?ft.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?ft.setTexture2DArray(t,0):ft.setTexture2D(t,0),lt.unbindTexture()},this.resetState=function(){x=0,S=0,E=null,lt.reset(),At.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return J}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===j?q:3e3}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===q?j:G}}function Na(t,e,n){return za(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function La(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function za(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(class extends Da{}).prototype.isWebGL1Renderer=!0;class Fa{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<i)){for(let a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}if(t>=r)break t;{const s=e[1];t<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0}}for(;n<a;){const i=n+a>>>1;t<e[i]?a=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ba extends Fa{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,a=t+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=t,s=2*e-n;break;case 2402:r=i.length-2,s=e+i[r]-i[r+1];break;default:r=t,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=t,o=2*n-e;break;case 2402:a=1,o=n+i[1]-i[0];break;default:a=t-1,o=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(o-n),this._offsetPrev=r*u,this._offsetNext=a*u}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,_=(n-e)/(i-e),d=_*_,p=d*_,m=-h*p+2*h*d-h*_,g=(1+h)*p+(-1.5-2*h)*d+(-.5+h)*_+1,v=(-1-f)*p+(1.5+f)*d+.5*_,y=f*p-f*d;for(let t=0;t!==s;++t)r[t]=m*a[u+t]+g*a[l+t]+v*a[o+t]+y*a[c+t];return r}}class Ha extends Fa{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,u=(n-e)/(i-e),c=1-u;for(let t=0;t!==s;++t)r[t]=a[l+t]*c+a[o+t]*u;return r}}class Va extends Fa{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class qa{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=La(e,this.TimeBufferType),this.values=La(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:La(t.times,Array),values:La(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Va(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Ha(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Ba(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case B:e=this.InterpolantFactoryMethodDiscrete;break;case H:e=this.InterpolantFactoryMethodLinear;break;case V:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return B;case this.InterpolantFactoryMethodLinear:return H;case this.InterpolantFactoryMethodSmooth:return V}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const t=this.getValueSize();this.times=Na(n,r,a),this.values=Na(this.values,r*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,a),t=!1;break}a=i}if(void 0!==i&&za(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=Na(this.times),e=Na(this.values),n=this.getValueSize(),i=this.getInterpolation()===V,r=t.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=t[s];if(o!==t[s+1]&&(1!==s||o!==t[0]))if(i)r=!0;else{const t=s*n,i=t-n,a=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[i+s]||n!==e[a+s]){r=!0;break}}}if(r){if(s!==a){t[a]=t[s];const i=s*n,r=a*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++a}}if(r>0){t[a]=t[r];for(let t=r*n,i=a*n,s=0;s!==n;++s)e[i+s]=e[t+s];++a}return a!==t.length?(this.times=Na(t,0,a),this.values=Na(e,0,a*n)):(this.times=t,this.values=e),this}clone(){const t=Na(this.times,0),e=Na(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}qa.prototype.TimeBufferType=Float32Array,qa.prototype.ValueBufferType=Float32Array,qa.prototype.DefaultInterpolation=H;class ja extends qa{}ja.prototype.ValueTypeName="bool",ja.prototype.ValueBufferType=Array,ja.prototype.DefaultInterpolation=B,ja.prototype.InterpolantFactoryMethodLinear=void 0,ja.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends qa{}).prototype.ValueTypeName="color";(class extends qa{}).prototype.ValueTypeName="number";class Ga extends Fa{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-e)/(i-e);let l=t*s;for(let t=l+s;l!==t;l+=4)Pt.slerpFlat(r,0,a,l-s,a,l,o);return r}}class Wa extends qa{InterpolantFactoryMethodLinear(t){return new Ga(this.times,this.values,this.getValueSize(),t)}}Wa.prototype.ValueTypeName="quaternion",Wa.prototype.DefaultInterpolation=H,Wa.prototype.InterpolantFactoryMethodSmooth=void 0;class Xa extends qa{}Xa.prototype.ValueTypeName="string",Xa.prototype.ValueBufferType=Array,Xa.prototype.DefaultInterpolation=B,Xa.prototype.InterpolantFactoryMethodLinear=void 0,Xa.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends qa{}).prototype.ValueTypeName="vector";Error;const Ya="\\[\\]\\.:\\/",Ka=new RegExp("["+Ya+"]","g"),Ja="[^"+Ya+"]",Za="[^"+Ya.replace("\\.","")+"]",Qa=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ja)+/(WCOD+)?/.source.replace("WCOD",Za)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ja)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ja)+"$"),ts=["material","materials","bones","map"];class es{constructor(t,e,n){this.path=e,this.parsedPath=n||es.parseTrackName(e),this.node=es.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new es.Composite(t,e,n):new es(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ka,"")}static parseTrackName(t){const e=Qa.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==ts.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const a=n(r.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=es.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const a=t[i];if(void 0===a){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}es.Composite=class{constructor(t,e,n){const i=n||es.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},es.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},es.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},es.prototype.GetterByBindingType=[es.prototype._getValue_direct,es.prototype._getValue_array,es.prototype._getValue_arrayElement,es.prototype._getValue_toArray],es.prototype.SetterByBindingTypeAndVersioning=[[es.prototype._setValue_direct,es.prototype._setValue_direct_setNeedsUpdate,es.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[es.prototype._setValue_array,es.prototype._setValue_array_setNeedsUpdate,es.prototype._setValue_array_setMatrixWorldNeedsUpdate],[es.prototype._setValue_arrayElement,es.prototype._setValue_arrayElement_setNeedsUpdate,es.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[es.prototype._setValue_fromArray,es.prototype._setValue_fromArray_setNeedsUpdate,es.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class ns{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(rt(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i);const is={type:"change"},rs={type:"start"},as={type:"end"};class ss extends Q{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Dt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",H),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",H),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(is),n.update(),r=i.NONE},this.update=function(){const e=new Dt,h=(new Pt).setFromUnitVectors(t.up,new Dt(0,1,0)),f=h.clone().invert(),_=new Dt,d=new Pt,p=new Dt,m=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(h),s.setFromVector3(e),n.autoRotate&&r===i.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(s.theta+=o.theta*n.dampingFactor,s.phi+=o.phi*n.dampingFactor):(s.theta+=o.theta,s.phi+=o.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),s.theta=g<=v?Math.max(g,Math.min(v,s.theta)):s.theta>(g+v)/2?Math.max(g,s.theta):Math.min(v,s.theta)),s.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=l,s.radius=Math.max(n.minDistance,Math.min(n.maxDistance,s.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),e.setFromSpherical(s),e.applyQuaternion(f),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(o.theta*=1-n.dampingFactor,o.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(o.set(0,0,0),u.set(0,0,0)),l=1,!!(c||_.distanceToSquared(n.object.position)>a||8*(1-d.dot(n.object.quaternion))>a||p.distanceToSquared(n.target)>0)&&(n.dispatchEvent(is),_.copy(n.object.position),d.copy(n.object.quaternion),p.copy(n.target),c=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",V),n.domElement.removeEventListener("pointerdown",L),n.domElement.removeEventListener("pointercancel",F),n.domElement.removeEventListener("wheel",B),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",F),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",H),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const a=1e-6,s=new ns,o=new ns;let l=1;const u=new Dt;let c=!1;const h=new ct,f=new ct,_=new ct,d=new ct,p=new ct,m=new ct,g=new ct,v=new ct,y=new ct,w=[],b={};function x(){return Math.pow(.95,n.zoomSpeed)}function S(t){o.theta-=t}function E(t){o.phi-=t}const M=function(){const t=new Dt;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),u.add(t)}}(),T=function(){const t=new Dt;return function(e,i){!0===n.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),u.add(t)}}(),C=function(){const t=new Dt;return function(e,i){const r=n.domElement;if(n.object.isPerspectiveCamera){const a=n.object.position;t.copy(a).sub(n.target);let s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),M(2*e*s/r.clientHeight,n.object.matrix),T(2*i*s/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(e*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),T(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function $(t){n.object.isPerspectiveCamera?l/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function A(t){n.object.isPerspectiveCamera?l*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){h.set(t.clientX,t.clientY)}function O(t){d.set(t.clientX,t.clientY)}function I(){if(1===w.length)h.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);h.set(t,e)}}function k(){if(1===w.length)d.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);d.set(t,e)}}function U(){const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY,n=Math.sqrt(t*t+e*e);g.set(0,n)}function P(t){if(1==w.length)f.set(t.pageX,t.pageY);else{const e=j(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);f.set(n,i)}_.subVectors(f,h).multiplyScalar(n.rotateSpeed);const e=n.domElement;S(2*Math.PI*_.x/e.clientHeight),E(2*Math.PI*_.y/e.clientHeight),h.copy(f)}function D(t){if(1===w.length)p.set(t.pageX,t.pageY);else{const e=j(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);p.set(n,i)}m.subVectors(p,d).multiplyScalar(n.panSpeed),C(m.x,m.y),d.copy(p)}function N(t){const e=j(t),i=t.pageX-e.x,r=t.pageY-e.y,a=Math.sqrt(i*i+r*r);v.set(0,a),y.set(0,Math.pow(v.y/g.y,n.zoomSpeed)),$(y.y),g.copy(v)}function L(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",z),n.domElement.addEventListener("pointerup",F)),function(t){w.push(t)}(t),"touch"===t.pointerType?function(t){switch(q(t),w.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;I(),r=i.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;k(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&U(),n.enablePan&&k(),r=i.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&U(),n.enableRotate&&I(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(rs)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case 1:if(!1===n.enableZoom)return;!function(t){g.set(t.clientX,t.clientY)}(t),r=i.DOLLY;break;case 0:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;O(t),r=i.PAN}else{if(!1===n.enableRotate)return;R(t),r=i.ROTATE}break;case 2:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;R(t),r=i.ROTATE}else{if(!1===n.enablePan)return;O(t),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(rs)}(t))}function z(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(q(t),r){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;P(t),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;D(t),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&N(t),n.enablePan&&D(t)}(t),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&N(t),n.enableRotate&&P(t)}(t),n.update();break;default:r=i.NONE}}(t):function(t){switch(r){case i.ROTATE:if(!1===n.enableRotate)return;!function(t){f.set(t.clientX,t.clientY),_.subVectors(f,h).multiplyScalar(n.rotateSpeed);const e=n.domElement;S(2*Math.PI*_.x/e.clientHeight),E(2*Math.PI*_.y/e.clientHeight),h.copy(f),n.update()}(t);break;case i.DOLLY:if(!1===n.enableZoom)return;!function(t){v.set(t.clientX,t.clientY),y.subVectors(v,g),y.y>0?$(x()):y.y<0&&A(x()),g.copy(v),n.update()}(t);break;case i.PAN:if(!1===n.enablePan)return;!function(t){p.set(t.clientX,t.clientY),m.subVectors(p,d).multiplyScalar(n.panSpeed),C(m.x,m.y),d.copy(p),n.update()}(t)}}(t))}function F(t){!function(t){delete b[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",F)),n.dispatchEvent(as),r=i.NONE}function B(t){!1!==n.enabled&&!1!==n.enableZoom&&r===i.NONE&&(t.preventDefault(),n.dispatchEvent(rs),function(t){t.deltaY<0?A(x()):t.deltaY>0&&$(x()),n.update()}(t),n.dispatchEvent(as))}function H(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?E(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?E(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?S(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?S(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function V(t){!1!==n.enabled&&t.preventDefault()}function q(t){let e=b[t.pointerId];void 0===e&&(e=new ct,b[t.pointerId]=e),e.set(t.pageX,t.pageY)}function j(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return b[e.pointerId]}n.domElement.addEventListener("contextmenu",V),n.domElement.addEventListener("pointerdown",L),n.domElement.addEventListener("pointercancel",F),n.domElement.addEventListener("wheel",B,{passive:!1}),this.update()}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(843);return __webpack_exports__})()));
//# sourceMappingURL=DustHub.js.map